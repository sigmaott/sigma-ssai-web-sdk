import{r as R,c as Ee,e as be,d as _e,o as Q,a as F,b as v,u as M,F as J,f as z,g as I,t as K,h as Se}from"./zoid-CnNkIthY.js";const Re=/#/g,ke=/&/g,Pe=/\//g,Ce=/=/g,W=/\+/g,Ae=/%5e/gi,Ne=/%60/gi,Le=/%7c/gi,Fe=/%20/gi;function Ie(e){return encodeURI(""+e).replace(Le,"|")}function H(e){return Ie(typeof e=="string"?e:JSON.stringify(e)).replace(W,"%2B").replace(Fe,"+").replace(Re,"%23").replace(ke,"%26").replace(Ne,"`").replace(Ae,"^").replace(Pe,"%2F")}function U(e){return H(e).replace(Ce,"%3D")}function re(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function Oe(e){return re(e.replace(W," "))}function Me(e){return re(e.replace(W," "))}function oe(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const r of e.split("&")){const o=r.match(/([^=]+)=?(.*)/)||[];if(o.length<2)continue;const s=Oe(o[1]);if(s==="__proto__"||s==="constructor")continue;const f=Me(o[2]||"");t[s]===void 0?t[s]=f:Array.isArray(t[s])?t[s].push(f):t[s]=[t[s],f]}return t}function $e(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(r=>`${U(e)}=${H(r)}`).join("&"):`${U(e)}=${H(t)}`:U(e)}function je(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>$e(t,e[t])).filter(Boolean).join("&")}const qe=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Ue=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,He=/^([/\\]\s*){2,}[^/\\]/,De=/^\.?\//;function se(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?qe.test(e):Ue.test(e)||(t.acceptRelative?He.test(e):!1)}function We(e="",t){return e.endsWith("/")}function Ve(e="",t){return(We(e)?e.slice(0,-1):e)||"/"}function Be(e="",t){return e.endsWith("/")?e:e+"/"}function Ge(e,t){if(Je(t)||se(e))return e;const r=Ve(t);return e.startsWith(r)?e:Ke(r,e)}function ie(e,t){const r=j(e),o={...oe(r.search),...t};return r.search=je(o),Xe(r)}function Qe(e){return oe(j(e).search)}function Je(e){return!e||e==="/"}function ze(e){return e&&e!=="/"}function Ke(e,...t){let r=e||"";for(const o of t.filter(s=>ze(s)))if(r){const s=o.replace(De,"");r=Be(r)+s}else r=o;return r}const ae=Symbol.for("ufo:protocolRelative");function j(e="",t){const r=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,u,i=""]=r;return{protocol:u.toLowerCase(),pathname:i,href:u+i,auth:"",host:"",search:"",hash:""}}if(!se(e,{acceptRelative:!0}))return t?j(t+e):X(e);const[,o="",s,f=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,d="",a=""]=f.match(/([^#/?]*)(.*)?/)||[],{pathname:p,search:l,hash:n}=X(a.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:o.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:d,pathname:p,search:l,hash:n,[ae]:!o}}function X(e=""){const[t="",r="",o=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:r,hash:o}}function Xe(e){const t=e.pathname||"",r=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",o=e.hash||"",s=e.auth?e.auth+"@":"",f=e.host||"";return(e.protocol||e[ae]?(e.protocol||"")+"//":"")+s+f+t+r+o}function ce(e){return new Promise((t,r)=>{const o=document.createElement("script");o.async=!0,o.src=e,o.onload=t,o.onerror=r,document.body.appendChild(o)})}const xe="https://imasdk.googleapis.com/pal/sdkloader/pal.js";let C=null;function x(){C=null}function Ye(){const e=window;return e.goog&&e.goog.pal?Promise.resolve(e.goog.pal):C||(C=ce(xe).then(()=>e.goog.pal),C.then(x).catch(x),C)}async function k(e){try{return{data:await e,error:null}}catch(t){return{data:null,error:t}}}function Ze(e,t){let r,o,s,d=!1;function a(){return!0}function p(){t.addEventListener("mousedown",h=>void n(h)),t.addEventListener("touchstart",h=>void n(h)),t.addEventListener("play",()=>{d||(u(),d=!0)}),t.addEventListener("ended",()=>void i()),t.addEventListener("error",()=>{console.log(`Video error: ${t.error.message}`),i()});const c=new e.ConsentSettings;return c.allowStorage=a(),r=new e.NonceLoader,l()}async function l(){const c=new e.NonceRequest;c.adWillAutoPlay=!0,c.adWillPlayMuted=!0,c.continuousPlayback=!1,c.descriptionUrl="https://example.com",c.iconsSupported=!0,c.playerType="Sample Player Type",c.playerVersion="1.0",c.ppid="Sample PPID",c.sessionId="Sample SID",c.supportedApiFrameworks="2,7,9",c.url="https://developers.google.com/ad-manager/pal/html5",c.videoHeight=480,c.videoWidth=640,o=r.loadNonceManager(c);const{data:h,error:_}=await k(o);return _?(console.log(`Error generating nonce: ${_}`),null):(s=h,s.getNonce())}function n(c){s&&s.sendTouch(c)}function u(){s&&s.sendPlaybackStart()}function i(){s&&s.sendPlaybackEnd()}return p()}const et=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,tt=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,nt=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function rt(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){ot(e);return}return t}function ot(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function D(e,t={}){if(typeof e!="string")return e;const r=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const o=r.toLowerCase();if(o==="true")return!0;if(o==="false")return!1;if(o==="undefined")return;if(o==="null")return null;if(o==="nan")return Number.NaN;if(o==="infinity")return Number.POSITIVE_INFINITY;if(o==="-infinity")return Number.NEGATIVE_INFINITY}if(!nt.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(et.test(e)||tt.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,rt)}return JSON.parse(e)}catch(o){if(t.strict)throw o;return e}}class st extends Error{constructor(t,r){super(t,r),this.name="FetchError",r!=null&&r.cause&&!this.cause&&(this.cause=r.cause)}}function it(e){var p,l,n,u,i;const t=((p=e.error)==null?void 0:p.message)||((l=e.error)==null?void 0:l.toString())||"",r=((n=e.request)==null?void 0:n.method)||((u=e.options)==null?void 0:u.method)||"GET",o=((i=e.request)==null?void 0:i.url)||String(e.request)||"/",s=`[${r}] ${JSON.stringify(o)}`,f=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",d=`${s}: ${f}${t?` ${t}`:""}`,a=new st(d,e.error?{cause:e.error}:void 0);for(const c of["request","options","response"])Object.defineProperty(a,c,{get(){return e[c]}});for(const[c,h]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,c,{get(){return e.response&&e.response[h]}});return a}const at=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Y(e="GET"){return at.has(e.toUpperCase())}function ct(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const lt=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ut=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function dt(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return ut.test(t)?"json":lt.has(t)||t.startsWith("text/")?"text":"blob"}function pt(e,t,r=globalThis.Headers){const o={...t,...e};if(t!=null&&t.params&&(e!=null&&e.params)&&(o.params={...t==null?void 0:t.params,...e==null?void 0:e.params}),t!=null&&t.query&&(e!=null&&e.query)&&(o.query={...t==null?void 0:t.query,...e==null?void 0:e.query}),t!=null&&t.headers&&(e!=null&&e.headers)){o.headers=new r((t==null?void 0:t.headers)||{});for(const[s,f]of new r((e==null?void 0:e.headers)||{}))o.headers.set(s,f)}return o}const ft=new Set([408,409,425,429,500,502,503,504]),ht=new Set([101,204,205,304]);function le(e={}){const{fetch:t=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:o=globalThis.AbortController}=e;async function s(a){const p=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!p){let n;typeof a.options.retry=="number"?n=a.options.retry:n=Y(a.options.method)?0:1;const u=a.response&&a.response.status||500;if(n>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(u):ft.has(u))){const i=a.options.retryDelay||0;return i>0&&await new Promise(c=>setTimeout(c,i)),f(a.request,{...a.options,retry:n-1})}}const l=it(a);throw Error.captureStackTrace&&Error.captureStackTrace(l,f),l}const f=async function(p,l={}){var c;const n={request:p,options:pt(l,e.defaults,r),response:void 0,error:void 0};n.options.method=(c=n.options.method)==null?void 0:c.toUpperCase(),n.options.onRequest&&await n.options.onRequest(n),typeof n.request=="string"&&(n.options.baseURL&&(n.request=Ge(n.request,n.options.baseURL)),(n.options.query||n.options.params)&&(n.request=ie(n.request,{...n.options.params,...n.options.query}))),n.options.body&&Y(n.options.method)&&(ct(n.options.body)?(n.options.body=typeof n.options.body=="string"?n.options.body:JSON.stringify(n.options.body),n.options.headers=new r(n.options.headers||{}),n.options.headers.has("content-type")||n.options.headers.set("content-type","application/json"),n.options.headers.has("accept")||n.options.headers.set("accept","application/json")):("pipeTo"in n.options.body&&typeof n.options.body.pipeTo=="function"||typeof n.options.body.pipe=="function")&&("duplex"in n.options||(n.options.duplex="half")));let u;if(!n.options.signal&&n.options.timeout){const h=new o;u=setTimeout(()=>h.abort(),n.options.timeout),n.options.signal=h.signal}try{n.response=await t(n.request,n.options)}catch(h){return n.error=h,n.options.onRequestError&&await n.options.onRequestError(n),await s(n)}finally{u&&clearTimeout(u)}if(n.response.body&&!ht.has(n.response.status)&&n.options.method!=="HEAD"){const h=(n.options.parseResponse?"json":n.options.responseType)||dt(n.response.headers.get("content-type")||"");switch(h){case"json":{const _=await n.response.text(),P=n.options.parseResponse||D;n.response._data=P(_);break}case"stream":{n.response._data=n.response.body;break}default:n.response._data=await n.response[h]()}}return n.options.onResponse&&await n.options.onResponse(n),!n.options.ignoreResponseError&&n.response.status>=400&&n.response.status<600?(n.options.onResponseError&&await n.options.onResponseError(n),await s(n)):n.response},d=async function(p,l){return(await f(p,l))._data};return d.raw=f,d.native=(...a)=>t(...a),d.create=(a={})=>le({...e,defaults:{...e.defaults,...a}}),d}const V=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),mt=V.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),yt=V.Headers,gt=V.AbortController,ue=le({fetch:mt,Headers:yt,AbortController:gt}),de=ue,O=ue.create({credentials:"omit",onResponseError({response:e,error:t}){console.log("[LOG] ~ error:",t)},onRequest:({options:e,request:t})=>{const r=e.token;r&&(e.headers=e.headers||{},e.headers.Authorization=`${r}`)},onResponse({response:e,options:t}){}}),wt=e=>(t,r)=>(e.set(t,r),r),Z=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,pe=536870912,ee=pe*2,vt=(e,t)=>r=>{const o=t.get(r);let s=o===void 0?r.size:o<ee?o+1:0;if(!r.has(s))return e(r,s);if(r.size<pe){for(;r.has(s);)s=Math.floor(Math.random()*ee);return e(r,s)}if(r.size>Z)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(s);)s=Math.floor(Math.random()*Z);return e(r,s)},fe=new WeakMap,Tt=wt(fe),$=vt(Tt,fe),Et=e=>e.method!==void 0&&e.method==="call",bt=e=>typeof e.id=="number"&&typeof e.result=="boolean",_t=e=>{const t=new Map([[0,()=>{}]]),r=new Map([[0,()=>{}]]),o=new Map,s=new Worker(e);return s.addEventListener("message",({data:l})=>{if(Et(l)){const{params:{timerId:n,timerType:u}}=l;if(u==="interval"){const i=t.get(n);if(typeof i===void 0)throw new Error("The timer is in an undefined state.");if(typeof i=="number"){const c=o.get(i);if(c===void 0||c.timerId!==n||c.timerType!==u)throw new Error("The timer is in an undefined state.")}else typeof i=="function"&&i()}else if(u==="timeout"){const i=r.get(n);if(typeof i===void 0)throw new Error("The timer is in an undefined state.");if(typeof i=="number"){const c=o.get(i);if(c===void 0||c.timerId!==n||c.timerType!==u)throw new Error("The timer is in an undefined state.")}else typeof i=="function"&&(i(),r.delete(n))}}else if(bt(l)){const{id:n}=l,u=o.get(n);if(u===void 0)throw new Error("The timer is in an undefined state.");const{timerId:i,timerType:c}=u;o.delete(n),c==="interval"?t.delete(i):r.delete(i)}else{const{error:{message:n}}=l;throw new Error(n)}}),{clearInterval:l=>{if(typeof t.get(l)=="function"){const n=$(o);o.set(n,{timerId:l,timerType:"interval"}),t.set(l,n),s.postMessage({id:n,method:"clear",params:{timerId:l,timerType:"interval"}})}},clearTimeout:l=>{if(typeof r.get(l)=="function"){const n=$(o);o.set(n,{timerId:l,timerType:"timeout"}),r.set(l,n),s.postMessage({id:n,method:"clear",params:{timerId:l,timerType:"timeout"}})}},setInterval:(l,n=0,...u)=>{const i=$(t);return t.set(i,()=>{l(...u),typeof t.get(i)=="function"&&s.postMessage({id:null,method:"set",params:{delay:n,now:performance.timeOrigin+performance.now(),timerId:i,timerType:"interval"}})}),s.postMessage({id:null,method:"set",params:{delay:n,now:performance.timeOrigin+performance.now(),timerId:i,timerType:"interval"}}),i},setTimeout:(l,n=0,...u)=>{const i=$(r);return r.set(i,()=>l(...u)),s.postMessage({id:null,method:"set",params:{delay:n,now:performance.timeOrigin+performance.now(),timerId:i,timerType:"timeout"}}),i}}},St=(e,t)=>{let r=null;return()=>{if(r!==null)return r;const o=new Blob([t],{type:"application/javascript; charset=utf-8"}),s=URL.createObjectURL(o);return r=e(s),setTimeout(()=>URL.revokeObjectURL(s)),r}},Rt=`(()=>{"use strict";const e=new Map,t=new Map,r=t=>{const r=e.get(t);return void 0!==r&&(clearTimeout(r),e.delete(t),!0)},s=e=>{const r=t.get(e);return void 0!==r&&(clearTimeout(r),t.delete(e),!0)},o=(e,t)=>{const r=performance.now(),s=e+t-r-performance.timeOrigin;return{expected:r+s,remainingDelay:s}},i=(e,t,r,s)=>{const o=r-performance.now();o>0?e.set(t,setTimeout(i,o,e,t,r,s)):(e.delete(t),postMessage({id:null,method:"call",params:{timerId:t,timerType:s}}))};addEventListener("message",(n=>{let{data:a}=n;try{if("clear"===a.method){const{id:e,params:{timerId:t,timerType:o}}=a;if("interval"===o)postMessage({id:e,result:r(t)});else{if("timeout"!==o)throw new Error('The given type "'.concat(o,'" is not supported'));postMessage({id:e,result:s(t)})}}else{if("set"!==a.method)throw new Error('The given method "'.concat(a.method,'" is not supported'));{const{params:{delay:r,now:s,timerId:n,timerType:m}}=a;if("interval"===m)((t,r,s)=>{const{expected:n,remainingDelay:a}=o(t,s);e.set(r,setTimeout(i,a,e,r,n,"interval"))})(r,n,s);else{if("timeout"!==m)throw new Error('The given type "'.concat(m,'" is not supported'));((e,r,s)=>{const{expected:n,remainingDelay:a}=o(e,s);t.set(r,setTimeout(i,a,t,r,n,"timeout"))})(r,n,s)}}}}catch(e){postMessage({error:{message:e.message},id:a.id,result:null})}}))})();`,kt=St(_t,Rt),Pt=(...e)=>kt().setTimeout(...e);function Ct(){const e=new Set,t=s=>{e.delete(s)};return{on:s=>(e.add(s),{off:()=>t(s)}),off:t,trigger:(...s)=>Promise.all(Array.from(e).map(f=>f(...s)))}}function At({video:e,adContainer:t,trackingUrl:r,interval:o,startSession:s}){const f=R(0);e.addEventListener("timeupdate",()=>{f.value=e.currentTime}),R({}),R(),R(o||1e3),R();const d=Ct(),a=R(!1),p=R(),l=Math.random().toString(36).slice(6);function n({icons:w}){return{id:l,appConfig:{sdkBaseUrl:ie("https://cdn.jsdelivr.net/gh/sigmaott/sigma-ssai-web-sdk/build/dist/wta/index.html",{id:l})},icons:w}}const u=Ee(n({icons:[]}));u.render(t),u.hide(),t.style.display="none",be(()=>{var w;if(p.value){const m=((w=p.value)==null?void 0:w.icons)||[];t.style.display="block",u.updateProps(n({icons:m})),u.show()}else t.style.display="none",u.hide()});const i=R([]),c=R(),h=R([]);async function _(w){var y;const m=(y=p.value)==null?void 0:y.trackingEvents.find(S=>S.eventType===w);m&&(d.trigger(m),await Promise.all(m.beaconUrls.map(S=>k(O(S)))))}function P(){return a.value=!1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(w=>{e.addEventListener(w,()=>{const m=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;_(m?"fullscreen":"exitFullscreen")})}),e.addEventListener("pause",()=>{_("pause")}),e.addEventListener("play",()=>{_("resume")}),e.addEventListener("rewind",()=>{_("rewind")}),e.addEventListener("mute",()=>{_("mute")}),e.addEventListener("unmute",()=>{_("unmute")}),async(w,m)=>{if(c.value=m.frag.sn,!w!==window.Hls.Events.FRAG_CHANGED){for(const y of i.value)if(y.sn===m.frag.sn)for(const b of h.value){if(b.tracked)continue;p.value=b,s(b.adVerifications,d);const T=b.trackingEvents.find(g=>g.eventType===y.value.event);T&&Pt(async()=>{if(y.value.event==="start"){const g=b.trackingEvents.find(E=>E.eventType==="impression");g&&(d.trigger(g),await Promise.all(g.beaconUrls.map(E=>k(O(E)))))}d.trigger(T),await Promise.all(T.beaconUrls.map(g=>k(O(g)))),y.value.event==="complete"&&(p.value=void 0,i.value=[],b.tracked=!0)},y.time*1e3)}}}}function N(){k(de(r)).then(({data:w,error:m})=>{if(m){console.error("Cannot get tracking data",m);return}for(const y of(w==null?void 0:w.avails)||[])for(const S of y.ads){const b=`${y.id}_${S.id}_${S.startTimeInSeconds}`;h.value.find(g=>g.key===b)||h.value.push({...S,key:b,tracked:!1})}})}function he(){return async(w,m)=>{function y(T){for(let g=0;g<T.length;g++)if(T[g]===0)return g;return T.length}const{start:S,sn:b}=m.frag;for(let T=0;T<m.samples.length;T++){const g=m.samples[T],E=g.data,L=g.pts;if(String.fromCharCode.apply(null,E.slice(0,3))!=="ID3"||String.fromCharCode.apply(null,E.slice(10,14))!=="TXXX")continue;const q=E.slice(21,E.length),we=y(q),B=q.slice(we+1,q.length),ve=y(B),Te=new TextDecoder("utf-8").decode(B.slice(0,ve)),G={sn:b,time:L-S,value:D(Te)};if(c.value&&b<c.value)return;i.value.push(G),G.value.event==="start"&&N()}}}function me(){p.value=void 0,i.value=[],d.off(()=>{})}function ye(w){w.textTracks().on("addtrack",m=>{const y=m.track;y.kind==="metadata"&&(N(),y.on("cuechange",async()=>{const S=y.activeCues[0];if(S&&S.value.data){const b=D(S.value.data);for(const T of h.value){if(T.tracked)continue;p.value=T,s(T.adVerifications,d);const g=T.trackingEvents.find(E=>E.eventType===b.event);if(g){if(b.event==="start"){const E=T.trackingEvents.find(L=>L.eventType==="impression");E&&(d.trigger(E),await Promise.all(E.beaconUrls.map(L=>k(O(L)))))}d.trigger(g),await Promise.all(g.beaconUrls.map(E=>k(O(E)))),b.event==="complete"&&(p.value=void 0)}}}}))})}function ge(w,m){d.on(y=>{(w==="*"||y.eventType===w)&&m(y)})}return{destroy:me,hlsHelper:{createHlsFragChanged:P,createHlsFragParsingMetadata:he},onEventTracking:ge,attachVideojs:ye}}async function te({video:e,adContainer:t,url:r}){const o=j(r),s=await Ye(),f=await Ze(s,e);if(!f)throw console.error("nonce is null"),new Error("nonce is null");const d=`${o.protocol}//${o.host}`,{data:a,error:p}=await k(de(`${d}${o.pathname}`,{params:{"play_params.nonce":f}}));if(p||!a)throw console.error(p),new Error(p);const l=`${d}${a.manifestUrl}`,n=`${d}${a.trackingUrl}`;function u(){}const{hlsHelper:i,onEventTracking:c,destroy:h,attachVideojs:_}=At({video:e,adContainer:t,trackingUrl:n,startSession:u});function P(N){N.on("hlsFragChanged",i.createHlsFragChanged()),N.on("hlsFragParsingMetadata",i.createHlsFragParsingMetadata())}return{manifestUrl:l,onEventTracking:c,destroy:h,sigmaPlayer:{attachVideojs:_,attachHls:P}}}const Nt="https://cdn.jsdelivr.net/npm/hls.js@latest";let A=null;function ne(){A=null}function Lt(){const e=window;return e.Hls?Promise.resolve(e.Hls):A||(A=ce(Nt).then(()=>e.Hls),A.then(ne).catch(ne),A)}const Ft={class:"container"},It={class:""},Ot=v("div",{class:"w-70%"},[v("div",{class:"aspect-ratio-video",style:{position:"relative",width:"720px",overflow:"hidden"}},[v("video",{id:"video1",muted:"",controls:"",playsinline:"",preload:"auto",style:{position:"absolute",inset:"0",width:"100%",height:"100%"}}),v("div",{id:"adContainer1",style:{position:"absolute",top:"0",left:"0",bottom:"0",right:"0",overflow:"hidden",width:"100%"}})])],-1),Mt={class:"w-30%"},$t={open:""},jt=v("summary",null,"item",-1),qt={class:""},Ut=v("div",{class:"w-70%"},[v("div",{class:"aspect-ratio-video",style:{position:"relative",width:"720px",overflow:"hidden"}},[v("video",{id:"video2",class:"video-js",muted:"",controls:"",playsinline:"",preload:"auto",style:{position:"absolute",inset:"0",width:"100%",height:"100%"}}),v("div",{id:"adContainer2",style:{position:"absolute",top:"0",left:"0",bottom:"0",right:"0",overflow:"hidden",width:"100%"}})])],-1),Ht={class:"w-30%"},Dt={open:""},Wt=v("summary",null,"item",-1),Vt=_e({__name:"App",setup(e){const t=R([]),r=R([]),o=Qe(window.location.href).url;let s;return Q(async()=>{await Lt();const f=document.querySelector("#video1"),d=document.querySelector("#adContainer1");te({video:f,adContainer:d,url:o}).then(({onEventTracking:a,manifestUrl:p,sigmaPlayer:l,playAds:n})=>{if(Hls.isSupported()){const u=new Hls;u.loadSource(p),u.attachMedia(f),l.attachHls(u),a("*",i=>{t.value.push(i)}),s=n}})}),Q(()=>{const f=document.querySelector("#video2"),d=document.querySelector("#adContainer2");te({video:f,adContainer:d,url:o}).then(({onEventTracking:a,manifestUrl:p,sigmaPlayer:l})=>{const n=videojs(f);n.src({src:p,type:"application/x-mpegURL"}),l.attachVideojs(n),a("*",u=>{r.value.push(u)})})}),(f,d)=>(I(),F("div",Ft,[v("button",{onClick:d[0]||(d[0]=(...a)=>M(s)&&M(s)(...a))}," Play VMAP "),v("div",It,[Ot,v("div",Mt,[(I(!0),F(J,null,z(M(t),(a,p)=>(I(),F("div",{key:p,class:"event-log-item"},[v("details",$t,[jt,v("pre",null,K(JSON.stringify(a,null,2)),1)])]))),128))])]),v("div",qt,[Ut,v("div",Ht,[(I(!0),F(J,null,z(M(r),(a,p)=>(I(),F("div",{key:p,class:"event-log-item"},[v("details",Dt,[Wt,v("pre",null,K(JSON.stringify(a,null,2)),1)])]))),128))])])]))}});Se(Vt).mount("#app");
