import{d as _,r as l,g as b,o as j,c as g,a as t,w as I,v as U,b as q,F as B,e as N,f as h,t as O,h as T}from"./index-iyQ0fk6r.js";import{l as J}from"./loadScript-wOdhQs3s.js";import{_ as Q}from"./export-helper-DlAUqK2U.js";const $="https://cdn.jsdelivr.net/npm/hls.js@latest";let m=null;function k(){m=null}function z(){const p=window;return p.Hls?Promise.resolve(p.Hls):m||(m=J($).then(()=>p.Hls),m.then(k).catch(k),m)}const G={class:"container"},K={class:"flex flex-col space-y-2"},W={class:""},X={class:"w-30%"},Y={open:""},Z="https://rs.sigmadrm.com/sdk/sigmaplayer/2.0.0/SigmaPlayer.min.js",ee=_({__name:"App",setup(p){const w=l([]),o=l(b(window.location.href).url),i=l(b(window.location.href).adsUrl),r=l();function x(s){return new Promise((e,n)=>{const a=document.createElement("script");a.async=!0,a.src=s,a.onload=e,a.onerror=n,document.body.appendChild(a)})}let d=null;function S(){d=null}function H(){return window.SigmaManager?Promise.resolve(window.SigmaManager):d||(d=x(Z).then(()=>window.SigmaManager),d.then(S).catch(S),d)}function u(s,e){const n=document.querySelector("#video1"),a=document.querySelector("#adContainer1");window.SigmaDaiSdk.createSigmaDai({video:n,adContainer:a,adsUrl:e}).then(({onEventTracking:D,sigmaPlayer:E,destroy:F})=>{const c=new Hls;E.attachHls(c),c.loadSource(s),c.attachMedia(n),c.on(Hls.Events.MANIFEST_PARSED,()=>{n.play()}),D("*",V=>{w.value.push(V)}),r.value=()=>{F(),c.destroy()}})}const v=l(o),f=l(i),y=l({merchantId:"",appId:"",sessionId:"",userId:""});function P(){const s=new URL(window.location.href);s.searchParams.set("url",v.value),s.searchParams.set("adsUrl",f.value),Object.entries(y.value).forEach(([e,n])=>{s.searchParams.set(`drm_${e}`,n)}),window.location.href=s.toString()}j(async()=>{await H(),await z(),u(o.value,i.value);const s=new URLSearchParams(window.location.search);y.value={merchantId:s.get("drm_merchantId")||"",appId:s.get("drm_appId")||"",sessionId:s.get("drm_sessionId")||"",userId:s.get("drm_userId")||""}});function R(){r.value(),o.value="https://cdn-lrm-test.sigma.video/manifest/origin04/scte35-video-audio-clear/master.m3u8",u(o.value,i.value)}function C(){r.value(),o.value="https://cdn-lrm-test.sigma.video/manifest/origin04/scte35-av2s-clear/master.m3u8",u(o.value,i.value)}function L(){r.value(),o.value="https://cdn-lrm-test.sigma.video/manifest/origin04/scte35-av4s-clear/master.m3u8",u(o.value,i.value)}function M(){r.value(),o.value="https://cdn-lrm-test.sigma.video/manifest/origin04/scte35-av6s-clear/master.m3u8",u(o.value,i.value)}function A(){r.value(),o.value="https://cdn-lrm-test.sigma.video/manifest/origin04/av4s-clear/master.m3u8",u(o.value,i.value)}return(s,e)=>(h(),g("div",G,[t("form",{class:"mb-4",onSubmit:q(P,["prevent"])},[t("div",K,[e[7]||(e[7]=t("label",{for:"urlInput",class:"font-medium"},"URL:",-1)),I(t("input",{id:"urlInput","onUpdate:modelValue":e[0]||(e[0]=n=>v.value=n),type:"text",class:"border rounded px-2 py-1"},null,512),[[U,v.value]]),e[8]||(e[8]=t("label",{for:"adsUrlInput",class:"font-medium"},"Ads URL:",-1)),I(t("input",{id:"adsUrlInput","onUpdate:modelValue":e[1]||(e[1]=n=>f.value=n),type:"text",class:"border rounded px-2 py-1"},null,512),[[U,f.value]]),e[9]||(e[9]=t("button",{type:"submit",class:"mt-4 rounded bg-blue-500 px-4 py-2 text-white transition-colors hover:bg-blue-600"}," Update and Reload ",-1))])],32),t("button",{onClick:e[2]||(e[2]=()=>R())}," Hls tách rời video và âm thanh "),t("button",{onClick:e[3]||(e[3]=()=>C())}," Hls ts 2s "),t("button",{onClick:e[4]||(e[4]=()=>L())}," HLS ts 4s "),t("button",{onClick:e[5]||(e[5]=()=>M())}," HLS ts 6s "),t("button",{onClick:e[6]||(e[6]=()=>A())}," HLS không quảng cáo "),t("div",W,[e[11]||(e[11]=t("div",{class:"w-70%"},[t("div",{class:"aspect-ratio-video",style:{position:"relative",width:"1080px",overflow:"hidden"}},[t("video",{id:"video1",muted:"",controls:"",playsinline:"",preload:"auto",style:{position:"absolute",inset:"0",width:"100%",height:"100%"}}),t("div",{id:"adContainer1",style:{position:"absolute",top:"0",left:"0",bottom:"0",right:"0",overflow:"hidden",width:"100%"}})])],-1)),t("div",X,[(h(!0),g(B,null,N(w.value,(n,a)=>(h(),g("div",{key:a,class:"event-log-item"},[t("details",Y,[e[10]||(e[10]=t("summary",null,"item",-1)),t("pre",null,O(JSON.stringify(n,null,2)),1)])]))),128))])])]))}}),te=Q(ee,[["__scopeId","data-v-c61a9bae"]]);T(te).mount("#app");
