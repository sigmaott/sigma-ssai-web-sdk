var SigmaDaiSdk=function(Yr){"use strict";const Wa=/#/g,Ma=/&/g,Fa=/\//g,za=/=/g,On=/\+/g,La=/%5e/gi,Ua=/%60/gi,ja=/%7c/gi,qa=/%20/gi;function Ba(t){return encodeURI(""+t).replace(ja,"|")}function xn(t){return Ba(typeof t=="string"?t:JSON.stringify(t)).replace(On,"%2B").replace(qa,"+").replace(Wa,"%23").replace(Ma,"%26").replace(Ua,"`").replace(La,"^").replace(Fa,"%2F")}function Dn(t){return xn(t).replace(za,"%3D")}function xo(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function $a(t){return xo(t.replace(On," "))}function Ha(t){return xo(t.replace(On," "))}function Do(t=""){const o={};t[0]==="?"&&(t=t.slice(1));for(const s of t.split("&")){const u=s.match(/([^=]+)=?(.*)/)||[];if(u.length<2)continue;const f=$a(u[1]);if(f==="__proto__"||f==="constructor")continue;const v=Ha(u[2]||"");o[f]===void 0?o[f]=v:Array.isArray(o[f])?o[f].push(v):o[f]=[o[f],v]}return o}function Va(t,o){return(typeof o=="number"||typeof o=="boolean")&&(o=String(o)),o?Array.isArray(o)?o.map(s=>`${Dn(t)}=${xn(s)}`).join("&"):`${Dn(t)}=${xn(o)}`:Dn(t)}function Ga(t){return Object.keys(t).filter(o=>t[o]!==void 0).map(o=>Va(o,t[o])).filter(Boolean).join("&")}const Ja=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Ka=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Ya=/^([/\\]\s*){2,}[^/\\]/,Za=/^\.?\//;function No(t,o={}){return typeof o=="boolean"&&(o={acceptRelative:o}),o.strict?Ja.test(t):Ka.test(t)||(o.acceptRelative?Ya.test(t):!1)}function Qa(t="",o){return t.endsWith("/")}function Xa(t="",o){return(Qa(t)?t.slice(0,-1):t)||"/"}function ka(t="",o){return t.endsWith("/")?t:t+"/"}function es(t,o){if(rs(o)||No(t))return t;const s=Xa(o);return t.startsWith(s)?t:Dr(s,t)}function Zr(t,o){const s=Nn(t),u={...Do(s.search),...o};return s.search=Ga(u),os(s)}function ts(t){return Do(Nn(t).search)}function rs(t){return!t||t==="/"}function ns(t){return t&&t!=="/"}function Dr(t,...o){let s=t||"";for(const u of o.filter(f=>ns(f)))if(s){const f=u.replace(Za,"");s=ka(s)+f}else s=u;return s}const Co=Symbol.for("ufo:protocolRelative");function Nn(t="",o){const s=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(s){const[,F,z=""]=s;return{protocol:F.toLowerCase(),pathname:z,href:F+z,auth:"",host:"",search:"",hash:""}}if(!No(t,{acceptRelative:!0}))return Io(t);const[,u="",f,v=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,T="",P=""]=v.match(/([^#/?]*)(.*)?/)||[];u==="file:"&&(P=P.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:I,search:M,hash:b}=Io(P);return{protocol:u.toLowerCase(),auth:f?f.slice(0,Math.max(0,f.length-1)):"",host:T,pathname:I,search:M,hash:b,[Co]:!u}}function Io(t=""){const[o="",s="",u=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:o,search:s,hash:u}}function os(t){const o=t.pathname||"",s=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",u=t.hash||"",f=t.auth?t.auth+"@":"",v=t.host||"";return(t.protocol||t[Co]?(t.protocol||"")+"//":"")+f+v+o+s+u}const is=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,as=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ss=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function us(t,o){if(t==="__proto__"||t==="constructor"&&o&&typeof o=="object"&&"prototype"in o){cs(t);return}return o}function cs(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Cn(t,o={}){if(typeof t!="string")return t;const s=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return s.slice(1,-1);if(s.length<=9){const u=s.toLowerCase();if(u==="true")return!0;if(u==="false")return!1;if(u==="undefined")return;if(u==="null")return null;if(u==="nan")return Number.NaN;if(u==="infinity")return Number.POSITIVE_INFINITY;if(u==="-infinity")return Number.NEGATIVE_INFINITY}if(!ss.test(t)){if(o.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(is.test(t)||as.test(t)){if(o.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,us)}return JSON.parse(t)}catch(u){if(o.strict)throw u;return t}}class ds extends Error{constructor(o,s){super(o,s),this.name="FetchError",s!=null&&s.cause&&!this.cause&&(this.cause=s.cause)}}function fs(t){var I,M,b,F,z;const o=((I=t.error)==null?void 0:I.message)||((M=t.error)==null?void 0:M.toString())||"",s=((b=t.request)==null?void 0:b.method)||((F=t.options)==null?void 0:F.method)||"GET",u=((z=t.request)==null?void 0:z.url)||String(t.request)||"/",f=`[${s}] ${JSON.stringify(u)}`,v=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",T=`${f}: ${v}${o?` ${o}`:""}`,P=new ds(T,t.error?{cause:t.error}:void 0);for(const re of["request","options","response"])Object.defineProperty(P,re,{get(){return t[re]}});for(const[re,ae]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(P,re,{get(){return t.response&&t.response[ae]}});return P}const ls=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Ao(t="GET"){return ls.has(t.toUpperCase())}function hs(t){if(t===void 0)return!1;const o=typeof t;return o==="string"||o==="number"||o==="boolean"||o===null?!0:o!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const ps=new Set(["image/svg","application/xml","application/xhtml","application/html"]),vs=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function ws(t=""){if(!t)return"json";const o=t.split(";").shift()||"";return vs.test(o)?"json":ps.has(o)||o.startsWith("text/")?"text":"blob"}function ms(t,o,s=globalThis.Headers){const u={...o,...t};if(o!=null&&o.params&&(t!=null&&t.params)&&(u.params={...o==null?void 0:o.params,...t==null?void 0:t.params}),o!=null&&o.query&&(t!=null&&t.query)&&(u.query={...o==null?void 0:o.query,...t==null?void 0:t.query}),o!=null&&o.headers&&(t!=null&&t.headers)){u.headers=new s((o==null?void 0:o.headers)||{});for(const[f,v]of new s((t==null?void 0:t.headers)||{}))u.headers.set(f,v)}return u}const gs=new Set([408,409,425,429,500,502,503,504]),ys=new Set([101,204,205,304]);function _o(t={}){const{fetch:o=globalThis.fetch,Headers:s=globalThis.Headers,AbortController:u=globalThis.AbortController}=t;async function f(P){const I=P.error&&P.error.name==="AbortError"&&!P.options.timeout||!1;if(P.options.retry!==!1&&!I){let b;typeof P.options.retry=="number"?b=P.options.retry:b=Ao(P.options.method)?0:1;const F=P.response&&P.response.status||500;if(b>0&&(Array.isArray(P.options.retryStatusCodes)?P.options.retryStatusCodes.includes(F):gs.has(F))){const z=P.options.retryDelay||0;return z>0&&await new Promise(re=>setTimeout(re,z)),v(P.request,{...P.options,retry:b-1})}}const M=fs(P);throw Error.captureStackTrace&&Error.captureStackTrace(M,v),M}const v=async function(I,M={}){var re;const b={request:I,options:ms(M,t.defaults,s),response:void 0,error:void 0};b.options.method=(re=b.options.method)==null?void 0:re.toUpperCase(),b.options.onRequest&&await b.options.onRequest(b),typeof b.request=="string"&&(b.options.baseURL&&(b.request=es(b.request,b.options.baseURL)),(b.options.query||b.options.params)&&(b.request=Zr(b.request,{...b.options.params,...b.options.query}))),b.options.body&&Ao(b.options.method)&&(hs(b.options.body)?(b.options.body=typeof b.options.body=="string"?b.options.body:JSON.stringify(b.options.body),b.options.headers=new s(b.options.headers||{}),b.options.headers.has("content-type")||b.options.headers.set("content-type","application/json"),b.options.headers.has("accept")||b.options.headers.set("accept","application/json")):("pipeTo"in b.options.body&&typeof b.options.body.pipeTo=="function"||typeof b.options.body.pipe=="function")&&("duplex"in b.options||(b.options.duplex="half")));let F;if(!b.options.signal&&b.options.timeout){const ae=new u;F=setTimeout(()=>ae.abort(),b.options.timeout),b.options.signal=ae.signal}try{b.response=await o(b.request,b.options)}catch(ae){return b.error=ae,b.options.onRequestError&&await b.options.onRequestError(b),await f(b)}finally{F&&clearTimeout(F)}if(b.response.body&&!ys.has(b.response.status)&&b.options.method!=="HEAD"){const ae=(b.options.parseResponse?"json":b.options.responseType)||ws(b.response.headers.get("content-type")||"");switch(ae){case"json":{const dt=await b.response.text(),S=b.options.parseResponse||Cn;b.response._data=S(dt);break}case"stream":{b.response._data=b.response.body;break}default:b.response._data=await b.response[ae]()}}return b.options.onResponse&&await b.options.onResponse(b),!b.options.ignoreResponseError&&b.response.status>=400&&b.response.status<600?(b.options.onResponseError&&await b.options.onResponseError(b),await f(b)):b.response},T=async function(I,M){return(await v(I,M))._data};return T.raw=v,T.native=(...P)=>o(...P),T.create=(P={})=>_o({...t,defaults:{...t.defaults,...P}}),T}const In=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),Es=In.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),bs=In.Headers,Ps=In.AbortController,Ts=_o({fetch:Es,Headers:bs,AbortController:Ps}).create({credentials:"omit",onResponseError({response:t,error:o}){console.log("[LOG] ~ error:",o)},onRequest:({options:t,request:o})=>{const s=t.token;s&&(t.headers=t.headers||{},t.headers.Authorization=`${s}`)},onResponse({response:t,options:o}){}}),Rs=t=>(o,s)=>(t.set(o,s),s),Wo=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,Mo=536870912,Fo=Mo*2,Ss=(t,o)=>s=>{const u=o.get(s);let f=u===void 0?s.size:u<Fo?u+1:0;if(!s.has(f))return t(s,f);if(s.size<Mo){for(;s.has(f);)f=Math.floor(Math.random()*Fo);return t(s,f)}if(s.size>Wo)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;s.has(f);)f=Math.floor(Math.random()*Wo);return t(s,f)},zo=new WeakMap,Os=Rs(zo),Qr=Ss(Os,zo),xs=t=>t.method!==void 0&&t.method==="call",Ds=t=>typeof t.id=="number"&&typeof t.result=="boolean",Lo=((t,o)=>{let s=null;return()=>{if(s!==null)return s;const u=new Blob([o],{type:"application/javascript; charset=utf-8"}),f=URL.createObjectURL(u);return s=t(f),setTimeout(()=>URL.revokeObjectURL(f)),s}})(t=>{const o=new Map([[0,()=>{}]]),s=new Map([[0,()=>{}]]),u=new Map,f=new Worker(t);return f.addEventListener("message",({data:M})=>{if(xs(M)){const{params:{timerId:b,timerType:F}}=M;if(F==="interval"){const z=o.get(b);if(typeof z===void 0)throw new Error("The timer is in an undefined state.");if(typeof z=="number"){const re=u.get(z);if(re===void 0||re.timerId!==b||re.timerType!==F)throw new Error("The timer is in an undefined state.")}else typeof z=="function"&&z()}else if(F==="timeout"){const z=s.get(b);if(typeof z===void 0)throw new Error("The timer is in an undefined state.");if(typeof z=="number"){const re=u.get(z);if(re===void 0||re.timerId!==b||re.timerType!==F)throw new Error("The timer is in an undefined state.")}else typeof z=="function"&&(z(),s.delete(b))}}else if(Ds(M)){const{id:b}=M,F=u.get(b);if(F===void 0)throw new Error("The timer is in an undefined state.");const{timerId:z,timerType:re}=F;u.delete(b),re==="interval"?o.delete(z):s.delete(z)}else{const{error:{message:b}}=M;throw new Error(b)}}),{clearInterval:M=>{if(typeof o.get(M)=="function"){const b=Qr(u);u.set(b,{timerId:M,timerType:"interval"}),o.set(M,b),f.postMessage({id:b,method:"clear",params:{timerId:M,timerType:"interval"}})}},clearTimeout:M=>{if(typeof s.get(M)=="function"){const b=Qr(u);u.set(b,{timerId:M,timerType:"timeout"}),s.set(M,b),f.postMessage({id:b,method:"clear",params:{timerId:M,timerType:"timeout"}})}},setInterval:(M,b=0,...F)=>{const z=Qr(o);return o.set(z,()=>{M(...F),typeof o.get(z)=="function"&&f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:z,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:z,timerType:"interval"}}),z},setTimeout:(M,b=0,...F)=>{const z=Qr(s);return s.set(z,()=>M(...F)),f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:z,timerType:"timeout"}}),z}}},`(()=>{"use strict";const e=new Map,t=new Map,r=t=>{const r=e.get(t);return void 0!==r&&(clearTimeout(r),e.delete(t),!0)},s=e=>{const r=t.get(e);return void 0!==r&&(clearTimeout(r),t.delete(e),!0)},o=(e,t)=>{const r=performance.now(),s=e+t-r-performance.timeOrigin;return{expected:r+s,remainingDelay:s}},i=(e,t,r,s)=>{const o=r-performance.now();o>0?e.set(t,setTimeout(i,o,e,t,r,s)):(e.delete(t),postMessage({id:null,method:"call",params:{timerId:t,timerType:s}}))};addEventListener("message",(n=>{let{data:a}=n;try{if("clear"===a.method){const{id:e,params:{timerId:t,timerType:o}}=a;if("interval"===o)postMessage({id:e,result:r(t)});else{if("timeout"!==o)throw new Error('The given type "'.concat(o,'" is not supported'));postMessage({id:e,result:s(t)})}}else{if("set"!==a.method)throw new Error('The given method "'.concat(a.method,'" is not supported'));{const{params:{delay:r,now:s,timerId:n,timerType:m}}=a;if("interval"===m)((t,r,s)=>{const{expected:n,remainingDelay:a}=o(t,s);e.set(r,setTimeout(i,a,e,r,n,"interval"))})(r,n,s);else{if("timeout"!==m)throw new Error('The given type "'.concat(m,'" is not supported'));((e,r,s)=>{const{expected:n,remainingDelay:a}=o(e,s);t.set(r,setTimeout(i,a,t,r,n,"timeout"))})(r,n,s)}}}}catch(e){postMessage({error:{message:e.message},id:a.id,result:null})}}))})();`),An=t=>Lo().clearTimeout(t),_n=(...t)=>Lo().setTimeout(...t);/**
* @vue/shared v3.5.1
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ns(t,o){const s=new Set(t.split(","));return u=>s.has(u)}const Uo=Object.assign,Cs=Object.prototype.hasOwnProperty,Wn=(t,o)=>Cs.call(t,o),ur=Array.isArray,Nr=t=>jo(t)==="[object Map]",Is=t=>typeof t=="string",Cr=t=>typeof t=="symbol",Xr=t=>t!==null&&typeof t=="object",As=Object.prototype.toString,jo=t=>As.call(t),qo=t=>jo(t).slice(8,-1),Mn=t=>Is(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,_s=(t=>{const o=Object.create(null);return s=>o[s]||(o[s]=t(s))})(t=>t.charAt(0).toUpperCase()+t.slice(1)),cr=(t,o)=>!Object.is(t,o);var Fe={};function dr(t,...o){console.warn(`[Vue warn] ${t}`,...o)}let fe;const Fn=new WeakSet;class Bo{constructor(o){this.fn=o,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Fn.has(this)&&(Fn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=Ir,Ir=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ko(this),Ho(this);const o=fe,s=bt;fe=this,bt=!0;try{return this.fn()}finally{Fe.NODE_ENV!=="production"&&fe!==this&&dr("Active effect was not restored correctly - this is likely a Vue internal bug."),Vo(this),fe=o,bt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let o=this.deps;o;o=o.nextDep)jn(o);this.deps=this.depsTail=void 0,Ko(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Fn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Un(this)&&this.run()}get dirty(){return Un(this)}}let $o=0,Ir;function zn(){$o++}function Ln(){if(--$o>0)return;let t;for(;Ir;){let o=Ir;for(Ir=void 0;o;){const s=o.nextEffect;if(o.nextEffect=void 0,o.flags&=-9,o.flags&1)try{o.trigger()}catch(u){t||(t=u)}o=s}}if(t)throw t}function Ho(t){for(let o=t.deps;o;o=o.nextDep)o.version=-1,o.prevActiveLink=o.dep.activeLink,o.dep.activeLink=o}function Vo(t){let o,s=t.depsTail;for(let u=s;u;u=u.prevDep)u.version===-1?(u===s&&(s=u.prevDep),jn(u),Ms(u)):o=u,u.dep.activeLink=u.prevActiveLink,u.prevActiveLink=void 0;t.deps=o,t.depsTail=s}function Un(t){for(let o=t.deps;o;o=o.nextDep)if(o.dep.version!==o.version||o.dep.computed&&Ws(o.dep.computed)===!1||o.dep.version!==o.version)return!0;return!!t._dirty}function Ws(t){if(t.flags&2)return!1;if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===kr))return;t.globalVersion=kr;const o=t.dep;if(t.flags|=2,o.version>0&&!t.isSSR&&!Un(t)){t.flags&=-3;return}const s=fe,u=bt;fe=t,bt=!0;try{Ho(t);const f=t.fn();(o.version===0||cr(f,t._value))&&(t._value=f,o.version++)}catch(f){throw o.version++,f}finally{fe=s,bt=u,Vo(t),t.flags&=-3}}function jn(t){const{dep:o,prevSub:s,nextSub:u}=t;if(s&&(s.nextSub=u,t.prevSub=void 0),u&&(u.prevSub=s,t.nextSub=void 0),o.subs===t&&(o.subs=s),!o.subs&&o.computed){o.computed.flags&=-5;for(let f=o.computed.deps;f;f=f.nextDep)jn(f)}}function Ms(t){const{prevDep:o,nextDep:s}=t;o&&(o.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=o,t.nextDep=void 0)}function Fs(t,o){t.effect instanceof Bo&&(t=t.effect.fn);const s=new Bo(t);try{s.run()}catch(f){throw s.stop(),f}const u=s.run.bind(s);return u.effect=s,u}let bt=!0;const Jo=[];function zs(){Jo.push(bt),bt=!1}function Ls(){const t=Jo.pop();bt=t===void 0?!0:t}function Ko(t){const{cleanup:o}=t;if(t.cleanup=void 0,o){const s=fe;fe=void 0;try{o()}finally{fe=s}}}let kr=0;class Yo{constructor(o){this.computed=o,this.version=0,this.activeLink=void 0,this.subs=void 0,Fe.NODE_ENV!=="production"&&(this.subsHead=void 0)}track(o){if(!fe||!bt)return;let s=this.activeLink;if(s===void 0||s.sub!==fe)s=this.activeLink={dep:this,sub:fe,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},fe.deps?(s.prevDep=fe.depsTail,fe.depsTail.nextDep=s,fe.depsTail=s):fe.deps=fe.depsTail=s,fe.flags&4&&Zo(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const u=s.nextDep;u.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=u),s.prevDep=fe.depsTail,s.nextDep=void 0,fe.depsTail.nextDep=s,fe.depsTail=s,fe.deps===s&&(fe.deps=u)}return Fe.NODE_ENV!=="production"&&fe.onTrack&&fe.onTrack(Uo({effect:fe},o)),s}trigger(o){this.version++,kr++,this.notify(o)}notify(o){zn();try{if(Fe.NODE_ENV!=="production")for(let s=this.subsHead;s;s=s.nextSub)Fe.NODE_ENV!=="production"&&s.sub.onTrigger&&!(s.sub.flags&8)&&s.sub.onTrigger(Uo({effect:s.sub},o));for(let s=this.subs;s;s=s.prevSub)s.sub.notify()}finally{Ln()}}}function Zo(t){const o=t.dep.computed;if(o&&!t.dep.subs){o.flags|=20;for(let u=o.deps;u;u=u.nextDep)Zo(u)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),Fe.NODE_ENV!=="production"&&t.dep.subsHead===void 0&&(t.dep.subsHead=t),t.dep.subs=t}const qn=new WeakMap,Zt=Symbol(Fe.NODE_ENV!=="production"?"Object iterate":""),Bn=Symbol(Fe.NODE_ENV!=="production"?"Map keys iterate":""),Ar=Symbol(Fe.NODE_ENV!=="production"?"Array iterate":"");function st(t,o,s){if(bt&&fe){let u=qn.get(t);u||qn.set(t,u=new Map);let f=u.get(s);f||u.set(s,f=new Yo),Fe.NODE_ENV!=="production"?f.track({target:t,type:o,key:s}):f.track()}}function zt(t,o,s,u,f,v){const T=qn.get(t);if(!T){kr++;return}let P=[];if(o==="clear")P=[...T.values()];else{const I=ur(t),M=I&&Mn(s);if(I&&s==="length"){const b=Number(u);T.forEach((F,z)=>{(z==="length"||z===Ar||!Cr(z)&&z>=b)&&P.push(F)})}else{const b=F=>F&&P.push(F);switch(s!==void 0&&b(T.get(s)),M&&b(T.get(Ar)),o){case"add":I?M&&b(T.get("length")):(b(T.get(Zt)),Nr(t)&&b(T.get(Bn)));break;case"delete":I||(b(T.get(Zt)),Nr(t)&&b(T.get(Bn)));break;case"set":Nr(t)&&b(T.get(Zt));break}}}zn();for(const I of P)Fe.NODE_ENV!=="production"?I.trigger({target:t,type:o,key:s,newValue:u,oldValue:f,oldTarget:v}):I.trigger();Ln()}function fr(t){const o=le(t);return o===t?o:(st(o,"iterate",Ar),Ut(t)?o:o.map(rt))}function $n(t){return st(t=le(t),"iterate",Ar),t}const Us={__proto__:null,[Symbol.iterator](){return Hn(this,Symbol.iterator,rt)},concat(...t){return fr(this).concat(...t.map(o=>ur(o)?fr(o):o))},entries(){return Hn(this,"entries",t=>(t[1]=rt(t[1]),t))},every(t,o){return Nt(this,"every",t,o,void 0,arguments)},filter(t,o){return Nt(this,"filter",t,o,s=>s.map(rt),arguments)},find(t,o){return Nt(this,"find",t,o,rt,arguments)},findIndex(t,o){return Nt(this,"findIndex",t,o,void 0,arguments)},findLast(t,o){return Nt(this,"findLast",t,o,rt,arguments)},findLastIndex(t,o){return Nt(this,"findLastIndex",t,o,void 0,arguments)},forEach(t,o){return Nt(this,"forEach",t,o,void 0,arguments)},includes(...t){return Vn(this,"includes",t)},indexOf(...t){return Vn(this,"indexOf",t)},join(t){return fr(this).join(t)},lastIndexOf(...t){return Vn(this,"lastIndexOf",t)},map(t,o){return Nt(this,"map",t,o,void 0,arguments)},pop(){return _r(this,"pop")},push(...t){return _r(this,"push",t)},reduce(t,...o){return Qo(this,"reduce",t,o)},reduceRight(t,...o){return Qo(this,"reduceRight",t,o)},shift(){return _r(this,"shift")},some(t,o){return Nt(this,"some",t,o,void 0,arguments)},splice(...t){return _r(this,"splice",t)},toReversed(){return fr(this).toReversed()},toSorted(t){return fr(this).toSorted(t)},toSpliced(...t){return fr(this).toSpliced(...t)},unshift(...t){return _r(this,"unshift",t)},values(){return Hn(this,"values",rt)}};function Hn(t,o,s){const u=$n(t),f=u[o]();return u!==t&&!Ut(t)&&(f._next=f.next,f.next=()=>{const v=f._next();return v.value&&(v.value=s(v.value)),v}),f}const js=Array.prototype;function Nt(t,o,s,u,f,v){const T=$n(t),P=T!==t&&!Ut(t),I=T[o];if(I!==js[o]){const F=I.apply(t,v);return P?rt(F):F}let M=s;T!==t&&(P?M=function(F,z){return s.call(this,rt(F),z,t)}:s.length>2&&(M=function(F,z){return s.call(this,F,z,t)}));const b=I.call(T,M,u);return P&&f?f(b):b}function Qo(t,o,s,u){const f=$n(t);let v=s;return f!==t&&(Ut(t)?s.length>3&&(v=function(T,P,I){return s.call(this,T,P,I,t)}):v=function(T,P,I){return s.call(this,T,rt(P),I,t)}),f[o](v,...u)}function Vn(t,o,s){const u=le(t);st(u,"iterate",Ar);const f=u[o](...s);return(f===-1||f===!1)&&ou(s[0])?(s[0]=le(s[0]),u[o](...s)):f}function _r(t,o,s=[]){zs(),zn();const u=le(t)[o].apply(t,s);return Ln(),Ls(),u}const qs=Ns("__proto__,__v_isRef,__isVue"),Xo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Cr));function Bs(t){Cr(t)||(t=String(t));const o=le(this);return st(o,"has",t),o.hasOwnProperty(t)}class ko{constructor(o=!1,s=!1){this._isReadonly=o,this._isShallow=s}get(o,s,u){const f=this._isReadonly,v=this._isShallow;if(s==="__v_isReactive")return!f;if(s==="__v_isReadonly")return f;if(s==="__v_isShallow")return v;if(s==="__v_raw")return u===(f?v?tu:si:v?eu:ai).get(o)||Object.getPrototypeOf(o)===Object.getPrototypeOf(u)?o:void 0;const T=ur(o);if(!f){let I;if(T&&(I=Us[s]))return I;if(s==="hasOwnProperty")return Bs}const P=Reflect.get(o,s,hr(o)?o:u);return(Cr(s)?Xo.has(s):qs(s))||(f||st(o,"get",s),v)?P:hr(P)?T&&Mn(s)?P:P.value:Xr(P)?f?ci(P):ui(P):P}}class $s extends ko{constructor(o=!1){super(!1,o)}set(o,s,u,f){let v=o[s];if(!this._isShallow){const I=lr(v);if(!Ut(u)&&!lr(u)&&(v=le(v),u=le(u)),!ur(o)&&hr(v)&&!hr(u))return I?!1:(v.value=u,!0)}const T=ur(o)&&Mn(s)?Number(s)<o.length:Wn(o,s),P=Reflect.set(o,s,u,hr(o)?o:f);return o===le(f)&&(T?cr(u,v)&&zt(o,"set",s,u,v):zt(o,"add",s,u)),P}deleteProperty(o,s){const u=Wn(o,s),f=o[s],v=Reflect.deleteProperty(o,s);return v&&u&&zt(o,"delete",s,void 0,f),v}has(o,s){const u=Reflect.has(o,s);return(!Cr(s)||!Xo.has(s))&&st(o,"has",s),u}ownKeys(o){return st(o,"iterate",ur(o)?"length":Zt),Reflect.ownKeys(o)}}class Hs extends ko{constructor(o=!1){super(!0,o)}set(o,s){return Fe.NODE_ENV!=="production"&&dr(`Set operation on key "${String(s)}" failed: target is readonly.`,o),!0}deleteProperty(o,s){return Fe.NODE_ENV!=="production"&&dr(`Delete operation on key "${String(s)}" failed: target is readonly.`,o),!0}}const Vs=new $s,Gs=new Hs,Gn=t=>t,en=t=>Reflect.getPrototypeOf(t);function tn(t,o,s=!1,u=!1){t=t.__v_raw;const f=le(t),v=le(o);s||(cr(o,v)&&st(f,"get",o),st(f,"get",v));const{has:T}=en(f),P=u?Gn:s?Jn:rt;if(T.call(f,o))return P(t.get(o));if(T.call(f,v))return P(t.get(v));t!==f&&t.get(o)}function rn(t,o=!1){const s=this.__v_raw,u=le(s),f=le(t);return o||(cr(t,f)&&st(u,"has",t),st(u,"has",f)),t===f?s.has(t):s.has(t)||s.has(f)}function nn(t,o=!1){return t=t.__v_raw,!o&&st(le(t),"iterate",Zt),Reflect.get(t,"size",t)}function ei(t,o=!1){!o&&!Ut(t)&&!lr(t)&&(t=le(t));const s=le(this);return en(s).has.call(s,t)||(s.add(t),zt(s,"add",t,t)),this}function ti(t,o,s=!1){!s&&!Ut(o)&&!lr(o)&&(o=le(o));const u=le(this),{has:f,get:v}=en(u);let T=f.call(u,t);T?Fe.NODE_ENV!=="production"&&ii(u,f,t):(t=le(t),T=f.call(u,t));const P=v.call(u,t);return u.set(t,o),T?cr(o,P)&&zt(u,"set",t,o,P):zt(u,"add",t,o),this}function ri(t){const o=le(this),{has:s,get:u}=en(o);let f=s.call(o,t);f?Fe.NODE_ENV!=="production"&&ii(o,s,t):(t=le(t),f=s.call(o,t));const v=u?u.call(o,t):void 0,T=o.delete(t);return f&&zt(o,"delete",t,void 0,v),T}function ni(){const t=le(this),o=t.size!==0,s=Fe.NODE_ENV!=="production"?Nr(t)?new Map(t):new Set(t):void 0,u=t.clear();return o&&zt(t,"clear",void 0,void 0,s),u}function on(t,o){return function(u,f){const v=this,T=v.__v_raw,P=le(T),I=o?Gn:t?Jn:rt;return!t&&st(P,"iterate",Zt),T.forEach((M,b)=>u.call(f,I(M),I(b),v))}}function an(t,o,s){return function(...u){const f=this.__v_raw,v=le(f),T=Nr(v),P=t==="entries"||t===Symbol.iterator&&T,I=t==="keys"&&T,M=f[t](...u),b=s?Gn:o?Jn:rt;return!o&&st(v,"iterate",I?Bn:Zt),{next(){const{value:F,done:z}=M.next();return z?{value:F,done:z}:{value:P?[b(F[0]),b(F[1])]:b(F),done:z}},[Symbol.iterator](){return this}}}}function Lt(t){return function(...o){if(Fe.NODE_ENV!=="production"){const s=o[0]?`on key "${o[0]}" `:"";dr(`${_s(t)} operation ${s}failed: target is readonly.`,le(this))}return t==="delete"?!1:t==="clear"?void 0:this}}function Js(){const t={get(v){return tn(this,v)},get size(){return nn(this)},has:rn,add:ei,set:ti,delete:ri,clear:ni,forEach:on(!1,!1)},o={get(v){return tn(this,v,!1,!0)},get size(){return nn(this)},has:rn,add(v){return ei.call(this,v,!0)},set(v,T){return ti.call(this,v,T,!0)},delete:ri,clear:ni,forEach:on(!1,!0)},s={get(v){return tn(this,v,!0)},get size(){return nn(this,!0)},has(v){return rn.call(this,v,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:on(!0,!1)},u={get(v){return tn(this,v,!0,!0)},get size(){return nn(this,!0)},has(v){return rn.call(this,v,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:on(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(v=>{t[v]=an(v,!1,!1),s[v]=an(v,!0,!1),o[v]=an(v,!1,!0),u[v]=an(v,!0,!0)}),[t,s,o,u]}const[Ks,Ys,Zs,Qs]=Js();function oi(t,o){const s=o?t?Qs:Zs:t?Ys:Ks;return(u,f,v)=>f==="__v_isReactive"?!t:f==="__v_isReadonly"?t:f==="__v_raw"?u:Reflect.get(Wn(s,f)&&f in u?s:u,f,v)}const Xs={get:oi(!1,!1)},ks={get:oi(!0,!1)};function ii(t,o,s){const u=le(s);if(u!==s&&o.call(t,u)){const f=qo(t);dr(`Reactive ${f} contains both the raw and reactive versions of the same object${f==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const ai=new WeakMap,eu=new WeakMap,si=new WeakMap,tu=new WeakMap;function ru(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nu(t){return t.__v_skip||!Object.isExtensible(t)?0:ru(qo(t))}function ui(t){return lr(t)?t:di(t,!1,Vs,Xs,ai)}function ci(t){return di(t,!0,Gs,ks,si)}function di(t,o,s,u,f){if(!Xr(t))return Fe.NODE_ENV!=="production"&&dr(`value cannot be made ${o?"readonly":"reactive"}: ${String(t)}`),t;if(t.__v_raw&&!(o&&t.__v_isReactive))return t;const v=f.get(t);if(v)return v;const T=nu(t);if(T===0)return t;const P=new Proxy(t,T===2?u:s);return f.set(t,P),P}function lr(t){return!!(t&&t.__v_isReadonly)}function Ut(t){return!!(t&&t.__v_isShallow)}function ou(t){return t?!!t.__v_raw:!1}function le(t){const o=t&&t.__v_raw;return o?le(o):t}const rt=t=>Xr(t)?ui(t):t,Jn=t=>Xr(t)?ci(t):t;function hr(t){return t?t.__v_isRef===!0:!1}function Ct(t){return iu(t,!1)}function iu(t,o){return hr(t)?t:new au(t,o)}class au{constructor(o,s){this.dep=new Yo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?o:le(o),this._value=s?o:rt(o),this.__v_isShallow=s}get value(){return Fe.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track(),this._value}set value(o){const s=this._rawValue,u=this.__v_isShallow||Ut(o)||lr(o);o=u?o:le(o),cr(o,s)&&(this._rawValue=o,this._value=u?o:rt(o),Fe.NODE_ENV!=="production"?this.dep.trigger({target:this,type:"set",key:"value",newValue:o,oldValue:s}):this.dep.trigger())}}function su(){const t=new Set,o=f=>{t.delete(f)};return{on:f=>(t.add(f),{off:()=>o(f)}),off:o,trigger:(...f)=>Promise.all(Array.from(t).map(v=>v(...f)))}}async function uu(t){try{return{data:await t,error:null}}catch(o){return{data:null,error:o||{message:"Unknown error"}}}}var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fi={exports:{}};(function(t,o){(function(s,u){t.exports=u()})(typeof self<"u"?self:cu,function(){return function(s){var u={};function f(v){if(u[v])return u[v].exports;var T=u[v]={i:v,l:!1,exports:{}};return s[v].call(T.exports,T,T.exports,f),T.l=!0,T.exports}return f.m=s,f.c=u,f.d=function(v,T,P){f.o(v,T)||Object.defineProperty(v,T,{enumerable:!0,get:P})},f.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})},f.t=function(v,T){if(1&T&&(v=f(v)),8&T||4&T&&typeof v=="object"&&v&&v.__esModule)return v;var P=Object.create(null);if(f.r(P),Object.defineProperty(P,"default",{enumerable:!0,value:v}),2&T&&typeof v!="string")for(var I in v)f.d(P,I,(function(M){return v[M]}).bind(null,I));return P},f.n=function(v){var T=v&&v.__esModule?function(){return v.default}:function(){return v};return f.d(T,"a",T),T},f.o=function(v,T){return{}.hasOwnProperty.call(v,T)},f.p="",f(f.s=0)}([function(s,u,f){f.r(u),f.d(u,"PopupOpenError",function(){return io}),f.d(u,"create",function(){return Vu}),f.d(u,"destroy",function(){return Gu}),f.d(u,"destroyComponents",function(){return ya}),f.d(u,"destroyAll",function(){return Ea}),f.d(u,"PROP_TYPE",function(){return ve}),f.d(u,"PROP_SERIALIZATION",function(){return Tn}),f.d(u,"CONTEXT",function(){return Se}),f.d(u,"EVENT",function(){return Ee});function v(e,r){return(v=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(e,r)}function T(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,v(e,r)}function P(){return(P=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function I(e){try{if(!e)return!1;if(typeof Promise<"u"&&e instanceof Promise)return!0;if(typeof window<"u"&&typeof window.Window=="function"&&e instanceof window.Window||typeof window<"u"&&typeof window.constructor=="function"&&e instanceof window.constructor)return!1;var r={}.toString;if(r){var n=r.call(e);if(n==="[object Window]"||n==="[object global]"||n==="[object DOMWindow]")return!1}if(typeof e.then=="function")return!0}catch{return!1}return!1}var M=[],b=[],F=0,z;function re(){if(!F&&z){var e=z;z=null,e.resolve()}}function ae(){F+=1}function dt(){F-=1,re()}var S=function(){function e(n){var i=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var a,c,d=!1,h=!1,l=!1;ae();try{n(function(w){l?i.resolve(w):(d=!0,a=w)},function(w){l?i.reject(w):(h=!0,c=w)})}catch(w){dt(),this.reject(w);return}dt(),l=!0,d?this.resolve(a):h&&this.reject(c)}}var r=e.prototype;return r.resolve=function(n){if(this.resolved||this.rejected)return this;if(I(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},r.reject=function(n){var i=this;if(this.resolved||this.rejected)return this;if(I(n))throw new Error("Can not reject promise with another promise");if(!n){var a=n&&typeof n.toString=="function"?n.toString():{}.toString.call(n);n=new Error("Expected reject to be called with Error, got "+a)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){i.errorHandled||function(c,d){if(M.indexOf(c)===-1){M.push(c),setTimeout(function(){throw c},1);for(var h=0;h<b.length;h++)b[h](c,d)}}(n,i)},1),this.dispatch(),this},r.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},r.dispatch=function(){var n=this.resolved,i=this.rejected,a=this.handlers;if(!this.dispatching&&(n||i)){this.dispatching=!0,ae();for(var c=function(g,E){return g.then(function(R){E.resolve(R)},function(R){E.reject(R)})},d=0;d<a.length;d++){var h=a[d],l=h.onSuccess,w=h.onError,y=h.promise,m=void 0;if(n)try{m=l?l(this.value):this.value}catch(g){y.reject(g);continue}else if(i){if(!w){y.reject(this.error);continue}try{m=w(this.error)}catch(g){y.reject(g);continue}}if(m instanceof e&&(m.resolved||m.rejected)){var p=m;p.resolved?y.resolve(p.value):y.reject(p.error),p.errorHandled=!0}else I(m)?m instanceof e&&(m.resolved||m.rejected)?m.resolved?y.resolve(m.value):y.reject(m.error):c(m,y):y.resolve(m)}a.length=0,this.dispatching=!1,dt()}},r.then=function(n,i){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.then expected a function for success handler");if(i&&typeof i!="function"&&!i.call)throw new Error("Promise.then expected a function for error handler");var a=new e;return this.handlers.push({promise:a,onSuccess:n,onError:i}),this.errorHandled=!0,this.dispatch(),a},r.catch=function(n){return this.then(void 0,n)},r.finally=function(n){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(i){return e.try(n).then(function(){return i})},function(i){return e.try(n).then(function(){throw i})})},r.timeout=function(n,i){var a=this;if(this.resolved||this.rejected)return this;var c=setTimeout(function(){a.resolved||a.rejected||a.reject(i||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(d){return clearTimeout(c),d})},r.toPromise=function(){if(typeof Promise>"u")throw new TypeError("Could not find Promise");return Promise.resolve(this)},r.lazy=function(){return this.errorHandled=!0,this},e.resolve=function(n){return n instanceof e?n:I(n)?new e(function(i,a){return n.then(i,a)}):new e().resolve(n)},e.reject=function(n){return new e().reject(n)},e.asyncReject=function(n){return new e().asyncReject(n)},e.all=function(n){var i=new e,a=n.length,c=[].slice();if(!a)return i.resolve(c),i;for(var d=function(w,y,m){return y.then(function(p){c[w]=p,(a-=1)==0&&i.resolve(c)},function(p){m.reject(p)})},h=0;h<n.length;h++){var l=n[h];if(l instanceof e){if(l.resolved){c[h]=l.value,a-=1;continue}}else if(!I(l)){c[h]=l,a-=1;continue}d(h,e.resolve(l),i)}return a===0&&i.resolve(c),i},e.hash=function(n){var i={},a=[],c=function(h){if(n.hasOwnProperty(h)){var l=n[h];I(l)?a.push(l.then(function(w){i[h]=w})):i[h]=l}};for(var d in n)c(d);return e.all(a).then(function(){return i})},e.map=function(n,i){return e.all(n.map(i))},e.onPossiblyUnhandledException=function(n){return function(i){return b.push(i),{cancel:function(){b.splice(b.indexOf(i),1)}}}(n)},e.try=function(n,i,a){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.try expected a function");var c;ae();try{c=n.apply(i,a||[])}catch(d){return dt(),e.reject(d)}return dt(),e.resolve(c)},e.delay=function(n){return new e(function(i){setTimeout(i,n)})},e.isPromise=function(n){return!!(n&&n instanceof e)||I(n)},e.flush=function(){return function(n){var i=z=z||new n;return re(),i}(e)},e}();function yt(e){return{}.toString.call(e)==="[object RegExp]"}var Ze={IFRAME:"iframe",POPUP:"popup"},Pt=`Call was rejected by callee.\r
`;function mr(e){return e===void 0&&(e=window),e.location.protocol}function Qt(e){if(e===void 0&&(e=window),e.mockDomain){var r=e.mockDomain.split("//")[0];if(r)return r}return mr(e)}function gr(e){return e===void 0&&(e=window),Qt(e)==="about:"}function nt(e){if(e===void 0&&(e=window),e)try{if(e.parent&&e.parent!==e)return e.parent}catch{}}function ie(e){if(e===void 0&&(e=window),e&&!nt(e))try{return e.opener}catch{}}function He(e){try{return!0}catch{}return!1}function ut(e){e===void 0&&(e=window);var r=e.location;if(!r)throw new Error("Can not read window location");var n=mr(e);if(!n)throw new Error("Can not read window protocol");if(n==="file:")return"file://";if(n==="about:"){var i=nt(e);return i&&He()?ut(i):"about://"}var a=r.host;if(!a)throw new Error("Can not read window host");return n+"//"+a}function C(e){e===void 0&&(e=window);var r=ut(e);return r&&e.mockDomain&&e.mockDomain.indexOf("mock:")===0?e.mockDomain:r}function D(e){if(!function(r){try{if(r===window)return!0}catch{}try{var n=Object.getOwnPropertyDescriptor(r,"location");if(n&&n.enumerable===!1)return!1}catch{}try{if(gr(r)&&He())return!0}catch{}try{if(function(i){return i===void 0&&(i=window),Qt(i)==="mock:"}(r)&&He())return!0}catch{}try{if(ut(r)===ut(window))return!0}catch{}return!1}(e))return!1;try{if(e===window||gr(e)&&He()||C(window)===C(e))return!0}catch{}return!1}function J(e){if(!D(e))throw new Error("Expected window to be same domain");return e}function we(e,r){if(!e||!r)return!1;var n=nt(r);return n?n===e:function(i){var a=[];try{for(;i.parent!==i;)a.push(i.parent),i=i.parent}catch{}return a}(r).indexOf(e)!==-1}function et(e){var r=[],n;try{n=e.frames}catch{n=e}var i;try{i=n.length}catch{}if(i===0)return r;if(i){for(var a=0;a<i;a++){var c=void 0;try{c=n[a]}catch{continue}r.push(c)}return r}for(var d=0;d<100;d++){var h=void 0;try{h=n[d]}catch{return r}if(!h)return r;r.push(h)}return r}function Je(e){for(var r=[],n=0,i=et(e);n<i.length;n++){var a=i[n];r.push(a);for(var c=0,d=Je(a);c<d.length;c++)r.push(d[c])}return r}function Ke(e){e===void 0&&(e=window);try{if(e.top)return e.top}catch{}if(nt(e)===e)return e;try{if(we(window,e)&&window.top)return window.top}catch{}try{if(we(e,window)&&window.top)return window.top}catch{}for(var r=0,n=Je(e);r<n.length;r++){var i=n[r];try{if(i.top)return i.top}catch{}if(nt(i)===i)return i}}function Re(e){var r=Ke(e);if(!r)throw new Error("Can not determine top window");var n=[].concat(Je(r),[r]);return n.indexOf(e)===-1&&(n=[].concat(n,[e],Je(e))),n}var Qe=[],sn=[];function xe(e,r){r===void 0&&(r=!0);try{if(e===window)return!1}catch{return!0}try{if(!e)return!0}catch{return!0}try{if(e.closed)return!0}catch(a){return!a||a.message!==Pt}if(r&&D(e))try{if(e.mockclosed)return!0}catch{}try{if(!e.parent||!e.top)return!0}catch{}var n=function(a,c){for(var d=0;d<a.length;d++)try{if(a[d]===c)return d}catch{}return-1}(Qe,e);if(n!==-1){var i=sn[n];if(i&&function(a){if(!a.contentWindow||!a.parentNode)return!0;var c=a.ownerDocument;if(c&&c.documentElement&&!c.documentElement.contains(a)){for(var d=a;d.parentNode&&d.parentNode!==d;)d=d.parentNode;if(!d.host||!c.documentElement.contains(d.host))return!0}return!1}(i))return!0}return!1}function yr(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent}function Er(e,r){for(var n=et(e),i=0;i<n.length;i++){var a=n[i];try{if(D(a)&&a.name===r&&n.indexOf(a)!==-1)return a}catch{}}try{if(n.indexOf(e.frames[r])!==-1)return e.frames[r]}catch{}try{if(n.indexOf(e[r])!==-1)return e[r]}catch{}}function Wr(e,r){return e===ie(r)}function Xt(e){return e===void 0&&(e=window),ie(e=e||window)||nt(e)||void 0}function Mr(e,r){for(var n=0;n<e.length;n++)for(var i=e[n],a=0;a<r.length;a++)if(i===r[a])return!0;return!1}function br(e){e===void 0&&(e=window);for(var r=0,n=e;n;)(n=nt(n))&&(r+=1);return r}function un(e,r){var n=Ke(e)||e,i=Ke(r)||r;try{if(n&&i)return n===i}catch{}var a=Re(e),c=Re(r);if(Mr(a,c))return!0;var d=ie(n),h=ie(i);return d&&Mr(Re(d),c)||h&&Mr(Re(h),a),!1}function ft(e,r){if(typeof e=="string"){if(typeof r=="string")return e==="*"||r===e;if(yt(r)||Array.isArray(r))return!1}return yt(e)?yt(r)?e.toString()===r.toString():!Array.isArray(r)&&!!r.match(e):!!Array.isArray(e)&&(Array.isArray(r)?JSON.stringify(e)===JSON.stringify(r):!yt(r)&&e.some(function(n){return ft(n,r)}))}function It(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):C()}function wi(e,r,n,i){n===void 0&&(n=1e3),i===void 0&&(i=1/0);var a;return function c(){if(xe(e))return a&&clearTimeout(a),r();i<=0?clearTimeout(a):(i-=n,a=setTimeout(c,n))}(),{cancel:function(){a&&clearTimeout(a)}}}function kt(e){try{if(e===window)return!0}catch(r){if(r&&r.message===Pt)return!0}try{if({}.toString.call(e)==="[object Window]")return!0}catch(r){if(r&&r.message===Pt)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(r){if(r&&r.message===Pt)return!0}try{if(e&&e.self===e)return!0}catch(r){if(r&&r.message===Pt)return!0}try{if(e&&e.parent===e)return!0}catch(r){if(r&&r.message===Pt)return!0}try{if(e&&e.top===e)return!0}catch(r){if(r&&r.message===Pt)return!0}try{if(e&&e.__cross_domain_utils_window_check__==="__unlikely_value__")return!1}catch{return!0}try{if("postMessage"in e&&"self"in e&&"location"in e)return!0}catch{}return!1}function Kn(e){if(r=It(e),r.indexOf("mock:")!==0)return e;var r;throw new Error("Mock urls not supported out of test mode")}function mi(e){if(D(e))return J(e).frameElement;for(var r=0,n=document.querySelectorAll("iframe");r<n.length;r++){var i=n[r];if(i&&i.contentWindow&&i.contentWindow===e)return i}}function gi(e){if(function(n){return n===void 0&&(n=window),!!nt(n)}(e)){var r=mi(e);if(r&&r.parentElement){r.parentElement.removeChild(r);return}}try{e.close()}catch{}}function cn(e,r){for(var n=0;n<e.length;n++)try{if(e[n]===r)return n}catch{}return-1}var dn=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if(typeof WeakMap>"u"||Object.freeze===void 0)return!1;try{var n=new WeakMap,i={};return Object.freeze(i),n.set(i,"__testvalue__"),n.get(i)==="__testvalue__"}catch{return!1}}())try{this.weakmap=new WeakMap}catch{}this.keys=[],this.values=[]}var r=e.prototype;return r._cleanupClosedWindows=function(){for(var n=this.weakmap,i=this.keys,a=0;a<i.length;a++){var c=i[a];if(kt(c)&&xe(c)){if(n)try{n.delete(c)}catch{}i.splice(a,1),this.values.splice(a,1),a-=1}}},r.isSafeToReadWrite=function(n){return!kt(n)},r.set=function(n,i){if(!n)throw new Error("WeakMap expected key");var a=this.weakmap;if(a)try{a.set(n,i)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var c=this.name,d=n[c];d&&d[0]===n?d[1]=i:Object.defineProperty(n,c,{value:[n,i],writable:!0});return}catch{}this._cleanupClosedWindows();var h=this.keys,l=this.values,w=cn(h,n);w===-1?(h.push(n),l.push(i)):l[w]=i},r.get=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{if(i.has(n))return i.get(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return a&&a[0]===n?a[1]:void 0}catch{}this._cleanupClosedWindows();var c=cn(this.keys,n);if(c!==-1)return this.values[c]},r.delete=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{i.delete(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];a&&a[0]===n&&(a[0]=a[1]=void 0)}catch{}this._cleanupClosedWindows();var c=this.keys,d=cn(c,n);d!==-1&&(c.splice(d,1),this.values.splice(d,1))},r.has=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{if(i.has(n))return!0}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return!(!a||a[0]!==n)}catch{}return this._cleanupClosedWindows(),cn(this.keys,n)!==-1},r.getOrSet=function(n,i){if(this.has(n))return this.get(n);var a=i();return this.set(n,a),a},e}();function yi(e){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function gu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ei(e,r,n){return(Ei=gu()?Reflect.construct:function(i,a,c){var d=[null];d.push.apply(d,a);var h=new(Function.bind.apply(i,d));return c&&v(h,c.prototype),h}).apply(null,arguments)}function bi(e){var r=typeof Map=="function"?new Map:void 0;return(bi=function(n){if(n===null||(i=n,Function.toString.call(i).indexOf("[native code]")===-1))return n;var i;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(n))return r.get(n);r.set(n,a)}function a(){return Ei(n,arguments,yi(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),v(a,n)})(e)}function Yn(e){var r=!1;try{(e instanceof window.Element||e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object")&&(r=!0)}catch{}return r}function Zn(e){return e.name||e.__name__||e.displayName||"anonymous"}function Qn(e,r){try{delete e.name,e.name=r}catch{}return e.__name__=e.displayName=r,e}function Xn(e){if(typeof btoa=="function")return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(r,n){return String.fromCharCode(parseInt(n,16))})).replace(/[=]/g,"");if(typeof Buffer<"u")return Buffer.from(e,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}function Xe(){var e="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+Xn(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var fn;function kn(e){try{return JSON.stringify([].slice.call(e),function(r,n){return typeof n=="function"?"memoize["+function(i){if(fn=fn||new dn,i==null||typeof i!="object"&&typeof i!="function")throw new Error("Invalid object");var a=fn.get(i);return a||(a=typeof i+":"+Xe(),fn.set(i,a)),a}(n)+"]":Yn(n)?{}:n})}catch{throw new Error("Arguments not serializable -- can not be used to memoize")}}function yu(){return{}}var Fr=0,Pi=0;function jt(e,r){r===void 0&&(r={});var n=r.thisNamespace,i=n!==void 0&&n,a=r.time,c,d,h=Fr;Fr+=1;var l=function(){for(var w=arguments.length,y=new Array(w),m=0;m<w;m++)y[m]=arguments[m];h<Pi&&(c=null,d=null,h=Fr,Fr+=1);var p;p=i?(d=d||new dn).getOrSet(this,yu):c=c||{};var g;try{g=kn(y)}catch{return e.apply(this,arguments)}var E=p[g];if(E&&a&&Date.now()-E.time<a&&(delete p[g],E=null),E)return E.value;var R=Date.now(),O=e.apply(this,arguments);return p[g]={time:R,value:O},O};return l.reset=function(){c=null,d=null},Qn(l,(r.name||Zn(e))+"::memoized")}jt.clear=function(){Pi=Fr};function Eu(e){var r={};function n(){for(var i=arguments,a=this,c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var l=kn(d);return r.hasOwnProperty(l)||(r[l]=S.try(function(){return e.apply(a,i)}).finally(function(){delete r[l]})),r[l]}return n.reset=function(){r={}},Qn(n,Zn(e)+"::promiseMemoized")}function ye(){}function ln(e){var r=!1;return Qn(function(){if(!r)return r=!0,e.apply(this,arguments)},Zn(e)+"::once")}function Pr(e,r){if(r===void 0&&(r=1),r>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+{}.toString.call(e)+">";if(typeof e=="string")return e;if(e instanceof Error){var n=e&&e.stack,i=e&&e.message;if(n&&i)return n.indexOf(i)!==-1?n:i+`
`+n;if(n)return n;if(i)return i}return e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}catch(a){return"Error while stringifying error: "+Pr(a,r+1)}}function hn(e){return typeof e=="string"?e:e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}function Tr(e,r){if(!r)return e;if(Object.assign)return Object.assign(e,r);for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}jt(function(e){if(Object.values)return Object.values(e);var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(e[n]);return r});function bu(e){return e}function zr(e,r){var n;return function i(){n=setTimeout(function(){e(),i()},r)}(),{cancel:function(){clearTimeout(n)}}}function eo(e){return e.replace(/-([a-z])/g,function(r){return r[1].toUpperCase()})}function Ti(e,r,n){if(Array.isArray(e)){if(typeof r!="number")throw new TypeError("Array key must be number")}else if(typeof e=="object"&&e!==null&&typeof r!="string")throw new TypeError("Object key must be string");Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){delete e[r];var i=n();return e[r]=i,i},set:function(i){delete e[r],e[r]=i}})}function to(e){return[].slice.call(e)}function Ri(e){return typeof(r=e)=="object"&&r!==null&&{}.toString.call(e)==="[object Object]";var r}function ro(e){if(!Ri(e))return!1;var r=e.constructor;if(typeof r!="function")return!1;var n=r.prototype;return!!Ri(n)&&!!n.hasOwnProperty("isPrototypeOf")}function pn(e,r,n){if(n===void 0&&(n=""),Array.isArray(e)){for(var i=e.length,a=[],c=function(y){Ti(a,y,function(){var m=n?n+"."+y:""+y,p=r(e[y],y,m);return(ro(p)||Array.isArray(p))&&(p=pn(p,r,m)),p})},d=0;d<i;d++)c(d);return a}if(ro(e)){var h={},l=function(y){if(!e.hasOwnProperty(y))return 1;Ti(h,y,function(){var m=n?n+"."+y:""+y,p=r(e[y],y,m);return(ro(p)||Array.isArray(p))&&(p=pn(p,r,m)),p})};for(var w in e)l(w);return h}throw new Error("Pass an object or array")}function qt(e){return e!=null}function no(e){return{}.toString.call(e)==="[object RegExp]"}function Lr(e,r,n){if(e.hasOwnProperty(r))return e[r];var i=n();return e[r]=i,i}function vn(e){var r=[],n=!1,i,a={set:function(c,d){return n||(e[c]=d,a.register(function(){delete e[c]})),d},register:function(c){var d=ln(function(){return c(i)});return n?c(i):r.push(d),{cancel:function(){var h=r.indexOf(d);h!==-1&&r.splice(h,1)}}},all:function(c){i=c;var d=[];for(n=!0;r.length;){var h=r.shift();d.push(h())}return S.all(d).then(ye)}};return a}function wn(e,r){if(r==null)throw new Error("Expected "+e+" to be present");return r}var Pu=function(e){T(r,e);function r(n){var i;return(i=e.call(this,n)||this).name=i.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(i),i.constructor):i.stack=new Error(n).stack,i}return r}(bi(Error));function Si(){var e=document.body;if(!e)throw new Error("Body element not found");return e}function mn(){return!!document.body&&document.readyState==="complete"}function Oi(){return!!document.body&&document.readyState==="interactive"}function xi(e){return encodeURIComponent(e)}jt(function(){return new S(function(e){if(mn()||Oi())return e();var r=setInterval(function(){if(mn()||Oi())return clearInterval(r),e()},10)})});function Di(e){return function(r,n,i){i===void 0&&(i=[]);var a=r.__inline_memoize_cache__=r.__inline_memoize_cache__||{},c=kn(i);return a.hasOwnProperty(c)?a[c]:a[c]=(function(){var d={};if(!e||e.indexOf("=")===-1)return d;for(var h=0,l=e.split("&");h<l.length;h++){var w=l[h];(w=w.split("="))[0]&&w[1]&&(d[decodeURIComponent(w[0])]=decodeURIComponent(w[1]))}return d}).apply(void 0,i)}(Di,0,[e])}function Ni(e,r){return r===void 0&&(r={}),r&&Object.keys(r).length?function(n){return n===void 0&&(n={}),Object.keys(n).filter(function(i){return typeof n[i]=="string"||typeof n[i]=="boolean"}).map(function(i){var a=n[i];if(typeof a!="string"&&typeof a!="boolean")throw new TypeError("Invalid type for query");return xi(i)+"="+xi(a.toString())}).join("&")}(P({},Di(e),r)):e}function Tu(e,r){e.appendChild(r)}function oo(e,r){return r===void 0&&(r=document),Yn(e)?e:typeof e=="string"?r.querySelector(e):void 0}function Ci(e){return new S(function(r,n){var i=hn(e),a=oo(e);if(a)return r(a);if(mn())return n(new Error("Document is ready and element "+i+" does not exist"));var c=setInterval(function(){if(a=oo(e))r(a),clearInterval(c);else if(mn())return clearInterval(c),n(new Error("Document is ready and element "+i+" does not exist"))},10)})}var io=function(e){T(r,e);function r(){return e.apply(this,arguments)||this}return r}(Pu),gn;function Ii(e){if((gn=gn||new dn).has(e)){var r=gn.get(e);if(r)return r}var n=new S(function(i,a){e.addEventListener("load",function(){(function(c){if(function(){for(var d=0;d<Qe.length;d++){var h=!1;try{h=Qe[d].closed}catch{}h&&(sn.splice(d,1),Qe.splice(d,1))}}(),c&&c.contentWindow)try{Qe.push(c.contentWindow),sn.push(c)}catch{}})(e),i(e)}),e.addEventListener("error",function(c){e.contentWindow?i(e):a(c)})});return gn.set(e,n),n}function ao(e){return Ii(e).then(function(r){if(!r.contentWindow)throw new Error("Could not find window in iframe");return r.contentWindow})}function Ai(e,r){e===void 0&&(e={});var n=e.style||{},i=function(c,d,h){c===void 0&&(c="div"),d===void 0&&(d={}),c=c.toLowerCase();var l=document.createElement(c);if(d.style&&Tr(l.style,d.style),d.class&&(l.className=d.class.join(" ")),d.id&&l.setAttribute("id",d.id),d.attributes)for(var w=0,y=Object.keys(d.attributes);w<y.length;w++){var m=y[w];l.setAttribute(m,d.attributes[m])}if(d.styleSheet&&function(p,g,E){E===void 0&&(E=window.document),p.styleSheet?p.styleSheet.cssText=g:p.appendChild(E.createTextNode(g))}(l,d.styleSheet),d.html){if(c==="iframe")throw new Error("Iframe html can not be written unless container provided and iframe in DOM");l.innerHTML=d.html}return l}("iframe",{attributes:P({allowTransparency:"true"},e.attributes||{}),style:P({backgroundColor:"transparent",border:"none"},n),html:e.html,class:e.class}),a=window.navigator.userAgent.match(/MSIE|Edge/i);return i.hasAttribute("id")||i.setAttribute("id",Xe()),Ii(i),(e.url||a)&&i.setAttribute("src",e.url||"about:blank"),i}function _i(e,r,n){return e.addEventListener(r,n),{cancel:function(){e.removeEventListener(r,n)}}}function Ru(e){e.style.setProperty("display","")}function Wi(e){e.style.setProperty("display","none","important")}function Ur(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Rr(e){return!(e&&e.parentNode&&e.ownerDocument&&e.ownerDocument.documentElement&&e.ownerDocument.documentElement.contains(e))}function Mi(e,r,n){var i=n===void 0?{}:n,a=i.width,c=a===void 0||a,d=i.height,h=d===void 0||d,l=i.interval,w=l===void 0?100:l,y=i.win,m=y===void 0?window:y,p=e.offsetWidth,g=e.offsetHeight,E=!1;r({width:p,height:g});var R=function(){if(!E&&function(_){return!!(_.offsetWidth||_.offsetHeight||_.getClientRects().length)}(e)){var L=e.offsetWidth,V=e.offsetHeight;(c&&L!==p||h&&V!==g)&&r({width:L,height:V}),p=L,g=V}},O,A;return m.addEventListener("resize",R),m.ResizeObserver!==void 0?((O=new m.ResizeObserver(R)).observe(e),A=zr(R,10*w)):m.MutationObserver!==void 0?((O=new m.MutationObserver(R)).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),A=zr(R,10*w)):A=zr(R,w),{cancel:function(){E=!0,O.disconnect(),window.removeEventListener("resize",R),A.cancel()}}}function so(e){for(;e.parentNode;)e=e.parentNode;return e.toString()==="[object ShadowRoot]"}var yn=typeof document<"u"?document.currentScript:null,Su=jt(function(){if(yn||(yn=function(){try{var e=function(){try{throw new Error("_")}catch(d){return d.stack||""}}(),r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(e),n=r&&r[1];if(!n)return;for(var i=0,a=[].slice.call(document.getElementsByTagName("script")).reverse();i<a.length;i++){var c=a[i];if(c.src&&c.src===n)return c}}catch{}}()))return yn;throw new Error("Can not determine current script")}),Ou=Xe();jt(function(){var e;try{e=Su()}catch{return Ou}var r=e.getAttribute("data-uid");if(r&&typeof r=="string"||(r=e.getAttribute("data-uid-auto"))&&typeof r=="string")return r;if(e.src){var n=function(i){for(var a="",c=0;c<i.length;c++){var d=i[c].charCodeAt(0)*c;i[c+1]&&(d+=i[c+1].charCodeAt(0)*(c-1)),a+=String.fromCharCode(97+Math.abs(d)%26)}return a}(JSON.stringify({src:e.src,dataset:e.dataset}));r="uid_"+n.slice(n.length-30)}else r=Xe();return e.setAttribute("data-uid-auto",r),r});function Fi(e){return typeof e=="string"&&/^[0-9]+%$/.test(e)}function uo(e){if(typeof e=="number")return e;var r=e.match(/^([0-9]+)(px|%)$/);if(!r)throw new Error("Could not match css value from "+e);return parseInt(r[1],10)}function zi(e){return uo(e)+"px"}function Li(e){return typeof e=="number"?zi(e):Fi(e)?e:zi(e)}function Ui(e,r){if(typeof e=="number")return e;if(Fi(e))return parseInt(r*uo(e)/100,10);if(typeof(n=e)=="string"&&/^[0-9]+px$/.test(n))return uo(e);var n;throw new Error("Can not normalize dimension: "+e)}function Ot(e){e===void 0&&(e=window);var r="__post_robot_11_0_0__";return e!==window?e[r]:e[r]=e[r]||{}}var ji=function(){return{}};function he(e,r){return e===void 0&&(e="store"),r===void 0&&(r=ji),Lr(Ot(),e,function(){var n=r();return{has:function(i){return n.hasOwnProperty(i)},get:function(i,a){return n.hasOwnProperty(i)?n[i]:a},set:function(i,a){return n[i]=a,a},del:function(i){delete n[i]},getOrSet:function(i,a){return Lr(n,i,a)},reset:function(){n=r()},keys:function(){return Object.keys(n)}}})}var xu=function(){};function En(){var e=Ot();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new xu,e.WINDOW_WILDCARD}function Ye(e,r){return e===void 0&&(e="store"),r===void 0&&(r=ji),he("windowStore").getOrSet(e,function(){var n=new dn,i=function(a){return n.getOrSet(a,r)};return{has:function(a){return i(a).hasOwnProperty(e)},get:function(a,c){var d=i(a);return d.hasOwnProperty(e)?d[e]:c},set:function(a,c){return i(a)[e]=c,c},del:function(a){delete i(a)[e]},getOrSet:function(a,c){return Lr(i(a),e,c)}}})}function qi(){return he("instance").getOrSet("instanceID",Xe)}function Bi(e,r){var n=r.domain,i=Ye("helloPromises"),a=i.get(e);a&&a.resolve({domain:n});var c=S.resolve({domain:n});return i.set(e,c),c}function co(e,r){return(0,r.send)(e,"postrobot_hello",{instanceID:qi()},{domain:"*",timeout:-1}).then(function(n){var i=n.origin,a=n.data.instanceID;return Bi(e,{domain:i}),{win:e,domain:i,instanceID:a}})}function $i(e,r){var n=r.send;return Ye("windowInstanceIDPromises").getOrSet(e,function(){return co(e,{send:n}).then(function(i){return i.instanceID})})}function Hi(e,r,n){r===void 0&&(r=5e3),n===void 0&&(n="Window");var i=function(a){return Ye("helloPromises").getOrSet(a,function(){return new S})}(e);return r!==-1&&(i=i.timeout(r,new Error(n+" did not load after "+r+"ms"))),i}function Vi(e){Ye("knownWindows").set(e,!0)}function fo(e){return typeof e=="object"&&e!==null&&typeof e.__type__=="string"}function Gi(e){return e===void 0?"undefined":e===null?"null":Array.isArray(e)?"array":typeof e=="function"?"function":typeof e=="object"?e instanceof Error?"error":typeof e.then=="function"?"promise":{}.toString.call(e)==="[object RegExp]"?"regex":{}.toString.call(e)==="[object Date]"?"date":"object":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":void 0}function er(e,r){return{__type__:e,__val__:r}}var lt,Du=((lt={}).function=function(){},lt.error=function(e){return er("error",{message:e.message,stack:e.stack,code:e.code,data:e.data})},lt.promise=function(){},lt.regex=function(e){return er("regex",e.source)},lt.date=function(e){return er("date",e.toJSON())},lt.array=function(e){return e},lt.object=function(e){return e},lt.string=function(e){return e},lt.number=function(e){return e},lt.boolean=function(e){return e},lt.null=function(e){return e},lt[void 0]=function(e){return er("undefined",e)},lt),Nu={},ht,Cu=((ht={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},ht.error=function(e){var r=e.stack,n=e.code,i=e.data,a=new Error(e.message);return a.code=n,i&&(a.data=i),a.stack=r+`

`+a.stack,a},ht.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},ht.regex=function(e){return new RegExp(e)},ht.date=function(e){return new Date(e)},ht.array=function(e){return e},ht.object=function(e){return e},ht.string=function(e){return e},ht.number=function(e){return e},ht.boolean=function(e){return e},ht.null=function(e){return e},ht[void 0]=function(){},ht),Iu={};function lo(){return!!yr(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function Ji(e){return!un(window,e)}function Ki(e,r){if(e){if(C()!==It(e))return!0}else if(r&&!D(r))return!0;return!1}function Yi(e){var r=e.win,n=e.domain;return!(!lo()||n&&!Ki(n,r)||r&&!Ji(r))}function ho(e){return"__postrobot_bridge___"+(e=e||It(e)).replace(/[^a-zA-Z0-9]+/g,"_")}function Zi(){return!!(window.name&&window.name===ho(C()))}var Au=new S(function(e){if(window.document&&window.document.body)return e(window.document.body);var r=setInterval(function(){if(window.document&&window.document.body)return clearInterval(r),e(window.document.body)},10)});function Qi(e){Ye("remoteWindowPromises").getOrSet(e,function(){return new S})}function po(e){var r=Ye("remoteWindowPromises").get(e);if(!r)throw new Error("Remote window promise not found");return r}function Xi(e,r,n){po(e).resolve(function(i,a,c){if(i!==e)throw new Error("Remote window does not match window");if(!ft(a,r))throw new Error("Remote domain "+a+" does not match domain "+r);n.fireAndForget(c)})}function vo(e,r){po(e).reject(r).catch(ye)}function bn(e){for(var r=e.win,n=e.name,i=e.domain,a=he("popupWindowsByName"),c=Ye("popupWindowsByWin"),d=0,h=a.keys();d<h.length;d++){var l=h[d],w=a.get(l);w&&!xe(w.win)||a.del(l)}if(xe(r))return{win:r,name:n,domain:i};var y=c.getOrSet(r,function(){return n?a.getOrSet(n,function(){return{win:r,name:n}}):{win:r}});if(y.win&&y.win!==r)throw new Error("Different window already linked for window: "+(n||"undefined"));return n&&(y.name=n,a.set(n,y)),i&&(y.domain=i,Qi(r)),c.set(r,y),y}function ki(e){var r=e.on,n=e.send,i=e.receiveMessage;a=window.open,window.open=function(c,d,h,l){var w=a.call(this,Kn(c),d,h,l);return w&&(bn({win:w,name:d,domain:c?It(c):null}),w)};var a;(function(c){var d=c.on,h=c.send,l=c.receiveMessage,w=he("popupWindowsByName");d("postrobot_open_tunnel",function(y){var m=y.source,p=y.origin,g=y.data,E=he("bridges").get(p);if(!E)throw new Error("Can not find bridge promise for domain "+p);return E.then(function(R){if(m!==R)throw new Error("Message source does not matched registered bridge for domain "+p);if(!g.name)throw new Error("Register window expected to be passed window name");if(!g.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!w.has(g.name))throw new Error("Window with name "+g.name+" does not exist, or was not opened by this window");var O=function(){return w.get(g.name)};if(!O().domain)throw new Error("We do not have a registered domain for window "+g.name);if(O().domain!==p)throw new Error("Message origin "+p+" does not matched registered window origin "+(O().domain||"unknown"));return Xi(O().win,p,g.sendMessage),{sendMessage:function(A){if(window&&!window.closed&&O()){var L=O().domain;if(L)try{l({data:A,origin:L,source:O().win},{on:d,send:h})}catch(V){S.reject(V)}}}}})})})({on:r,send:n,receiveMessage:i}),function(c){var d=c.send;Ot(window).openTunnelToParent=function(h){var l=h.name,w=h.source,y=h.canary,m=h.sendMessage,p=he("tunnelWindows"),g=nt(window);if(!g)throw new Error("No parent window found to open tunnel to");var E=function(R){var O=R.name,A=R.source,L=R.canary,V=R.sendMessage;(function(){for(var $=he("tunnelWindows"),U=0,X=$.keys();U<X.length;U++){var B=X[U];xe($[B].source)&&$.del(B)}})();var _=Xe();return he("tunnelWindows").set(_,{name:O,source:A,canary:L,sendMessage:V}),_}({name:l,source:w,canary:y,sendMessage:m});return d(g,"postrobot_open_tunnel",{name:l,sendMessage:function(){var R=p.get(E);if(R&&R.source&&!xe(R.source)){try{R.canary()}catch{return}R.sendMessage.apply(this,arguments)}}},{domain:"*"})}}({send:n}),function(c){var d=c.on,h=c.send,l=c.receiveMessage;S.try(function(){var w=ie(window);if(w&&Yi({win:w})){return Qi(w),(y=w,Ye("remoteBridgeAwaiters").getOrSet(y,function(){return S.try(function(){var m=Er(y,ho(C()));if(m)return D(m)&&Ot(J(m))?m:new S(function(p){var g,E;g=setInterval(function(){if(m&&D(m)&&Ot(J(m)))return clearInterval(g),clearTimeout(E),p(m)},100),E=setTimeout(function(){return clearInterval(g),p()},2e3)})})})).then(function(m){return m?window.name?Ot(J(m)).openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(p){try{}catch{return}if(window&&!window.closed)try{l({data:p,origin:this.origin,source:this.source},{on:d,send:h})}catch(g){S.reject(g)}}}).then(function(p){var g=p.source,E=p.origin,R=p.data;if(g!==w)throw new Error("Source does not match opener");Xi(g,E,R.sendMessage)}).catch(function(p){throw vo(w,p),p}):vo(w,new Error("Can not register with opener: window does not have a name")):vo(w,new Error("Can not register with opener: no bridge found in opener"))});var y}})}({on:r,send:n,receiveMessage:i})}function wo(){for(var e=he("idToProxyWindow"),r=0,n=e.keys();r<n.length;r++){var i=n[r];e.get(i).shouldClean()&&e.del(i)}}function ea(e,r){var n=r.send,i=r.id,a=i===void 0?Xe():i,c=e.then(function(l){if(D(l))return J(l).name}),d=e.then(function(l){if(xe(l))throw new Error("Window is closed, can not determine type");return ie(l)?Ze.POPUP:Ze.IFRAME});c.catch(ye),d.catch(ye);var h=function(){return e.then(function(l){if(!xe(l))return D(l)?J(l).name:c})};return{id:a,getType:function(){return d},getInstanceID:Eu(function(){return e.then(function(l){return $i(l,{send:n})})}),close:function(){return e.then(gi)},getName:h,focus:function(){return e.then(function(l){l.focus()})},isClosed:function(){return e.then(function(l){return xe(l)})},setLocation:function(l,w){return w===void 0&&(w={}),e.then(function(y){var m=window.location.protocol+"//"+window.location.host,p=w.method,g=p===void 0?"get":p,E=w.body;if(l.indexOf("/")===0)l=""+m+l;else if(!l.match(/^https?:\/\//)&&l.indexOf(m)!==0)throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(l));if(g==="post")return h().then(function(R){if(!R)throw new Error("Can not post to window without target name");(function(O){var A=O.url,L=O.target,V=O.body,_=O.method,$=_===void 0?"post":_,U=document.createElement("form");if(U.setAttribute("target",L),U.setAttribute("method",$),U.setAttribute("action",A),U.style.display="none",V)for(var X=0,B=Object.keys(V);X<B.length;X++){var ce,ne=B[X],K=document.createElement("input");K.setAttribute("name",ne),K.setAttribute("value",(ce=V[ne])==null?void 0:ce.toString()),U.appendChild(K)}Si().appendChild(U),U.submit(),Si().removeChild(U)})({url:l,target:R,method:g,body:E})});if(g!=="get")throw new Error("Unsupported method: "+g);if(D(y))try{if(y.location&&typeof y.location.replace=="function"){y.location.replace(l);return}}catch{}y.location=l})},setName:function(l){return e.then(function(w){bn({win:w,name:l});var y=D(w),m=mi(w);if(!y)throw new Error("Can not set name for cross-domain window: "+l);J(w).name=l,m&&m.setAttribute("name",l),c=S.resolve(l)})}}}var pt=function(){function e(n){var i=n.send,a=n.win,c=n.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new S,this.serializedWindow=c||ea(this.actualWindowPromise,{send:i}),he("idToProxyWindow").set(this.getID(),this),a&&this.setWindow(a,{send:i})}var r=e.prototype;return r.getID=function(){return this.serializedWindow.id},r.getType=function(){return this.serializedWindow.getType()},r.isPopup=function(){return this.getType().then(function(n){return n===Ze.POPUP})},r.setLocation=function(n,i){var a=this;return this.serializedWindow.setLocation(n,i).then(function(){return a})},r.getName=function(){return this.serializedWindow.getName()},r.setName=function(n){var i=this;return this.serializedWindow.setName(n).then(function(){return i})},r.close=function(){var n=this;return this.serializedWindow.close().then(function(){return n})},r.focus=function(){var n=this,i=this.isPopup(),a=this.getName(),c=S.hash({isPopup:i,name:a}).then(function(h){var l=h.name;h.isPopup&&l&&window.open("",l,"noopener")}),d=this.serializedWindow.focus();return S.all([c,d]).then(function(){return n})},r.isClosed=function(){return this.serializedWindow.isClosed()},r.getWindow=function(){return this.actualWindow},r.setWindow=function(n,i){var a=i.send;this.actualWindow=n,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=ea(this.actualWindowPromise,{send:a,id:this.getID()}),Ye("winToProxyWindow").set(n,this)},r.awaitWindow=function(){return this.actualWindowPromise},r.matchWindow=function(n,i){var a=this,c=i.send;return S.try(function(){return a.actualWindow?n===a.actualWindow:S.hash({proxyInstanceID:a.getInstanceID(),knownWindowInstanceID:$i(n,{send:c})}).then(function(d){var h=d.proxyInstanceID===d.knownWindowInstanceID;return h&&a.setWindow(n,{send:c}),h})})},r.unwrap=function(){return this.actualWindow||this},r.getInstanceID=function(){return this.serializedWindow.getInstanceID()},r.shouldClean=function(){return!!(this.actualWindow&&xe(this.actualWindow))},r.serialize=function(){return this.serializedWindow},e.unwrap=function(n){return e.isProxyWindow(n)?n.unwrap():n},e.serialize=function(n,i){var a=i.send;return wo(),e.toProxyWindow(n,{send:a}).serialize()},e.deserialize=function(n,i){var a=i.send;return wo(),he("idToProxyWindow").get(n.id)||new e({serializedWindow:n,send:a})},e.isProxyWindow=function(n){return!!(n&&!kt(n)&&n.isProxyWindow)},e.toProxyWindow=function(n,i){var a=i.send;if(wo(),e.isProxyWindow(n))return n;var c=n;return Ye("winToProxyWindow").get(c)||new e({win:c,send:a})},e}();function mo(e,r,n,i,a){var c=Ye("methodStore"),d=he("proxyWindowMethods");pt.isProxyWindow(i)?d.set(e,{val:r,name:n,domain:a,source:i}):(d.del(e),c.getOrSet(i,function(){return{}})[e]={domain:a,name:n,val:r,source:i})}function ta(e,r){var n=Ye("methodStore"),i=he("proxyWindowMethods");return n.getOrSet(e,function(){return{}})[r]||i.get(r)}function ra(e,r,n,i,a){d=(c={on:a.on,send:a.send}).on,h=c.send,he("builtinListeners").getOrSet("functionCalls",function(){return d("postrobot_method",{domain:"*"},function(y){var m=y.source,p=y.origin,g=y.data,E=g.id,R=g.name,O=ta(m,E);if(!O)throw new Error("Could not find method '"+R+"' with id: "+g.id+" in "+C(window));var A=O.source,L=O.domain,V=O.val;return S.try(function(){if(!ft(L,p))throw new Error("Method '"+g.name+"' domain "+JSON.stringify(no(O.domain)?O.domain.source:O.domain)+" does not match origin "+p+" in "+C(window));if(pt.isProxyWindow(A))return A.matchWindow(m,{send:h}).then(function(_){if(!_)throw new Error("Method call '"+g.name+"' failed - proxy window does not match source in "+C(window))})}).then(function(){return V.apply({source:m,origin:p},g.args)},function(_){return S.try(function(){if(V.onError)return V.onError(_)}).then(function(){throw _.stack&&(_.stack="Remote call to "+R+"("+function($){return $===void 0&&($=[]),to($).map(function(U){return typeof U=="string"?"'"+U+"'":U===void 0?"undefined":U===null?"null":typeof U=="boolean"?U.toString():Array.isArray(U)?"[ ... ]":typeof U=="object"?"{ ... }":typeof U=="function"?"() => { ... }":"<"+typeof U+">"}).join(", ")}(g.args)+`) failed

`+_.stack),_})}).then(function(_){return{result:_,id:E,name:R}})})});var c,d,h,l=n.__id__||Xe();e=pt.unwrap(e);var w=n.__name__||n.name||i;return typeof w=="string"&&typeof w.indexOf=="function"&&w.indexOf("anonymous::")===0&&(w=w.replace("anonymous::",i+"::")),pt.isProxyWindow(e)?(mo(l,n,w,e,r),e.awaitWindow().then(function(y){mo(l,n,w,y,r)})):mo(l,n,w,e,r),er("cross_domain_function",{id:l,name:w})}function na(e,r,n,i){var a,c=i.on,d=i.send;return function(h,l){l===void 0&&(l=Nu);var w=JSON.stringify(h,function(y){var m=this[y];if(fo(this))return m;var p=Gi(m);if(!p)return m;var g=l[p]||Du[p];return g?g(m,y):m});return w===void 0?"undefined":w}(n,((a={}).promise=function(h,l){return function(w,y,m,p,g){return er("cross_domain_zalgo_promise",{then:ra(w,y,function(E,R){return m.then(E,R)},p,{on:g.on,send:g.send})})}(e,r,h,l,{on:c,send:d})},a.function=function(h,l){return ra(e,r,h,l,{on:c,send:d})},a.object=function(h){return kt(h)||pt.isProxyWindow(h)?er("cross_domain_window",pt.serialize(h,{send:d})):h},a))}function oa(e,r,n,i){var a,c=i.send;return function(d,h){if(h===void 0&&(h=Iu),d!=="undefined")return JSON.parse(d,function(l,w){if(fo(this))return w;var y,m;if(fo(w)?(y=w.__type__,m=w.__val__):(y=Gi(w),m=w),!y)return m;var p=h[y]||Cu[y];return p?p(m,l):m})}(n,((a={}).cross_domain_zalgo_promise=function(d){return function(h,l,w){return new S(w.then)}(0,0,d)},a.cross_domain_function=function(d){return function(h,l,w,y){var m=w.id,p=w.name,g=y.send,E=function(O){O===void 0&&(O={});function A(){var L=arguments;return pt.toProxyWindow(h,{send:g}).awaitWindow().then(function(V){var _=ta(V,m);if(_&&_.val!==A)return _.val.apply({source:window,origin:C()},L);var $=[].slice.call(L);return O.fireAndForget?g(V,"postrobot_method",{id:m,name:p,args:$},{domain:l,fireAndForget:!0}):g(V,"postrobot_method",{id:m,name:p,args:$},{domain:l,fireAndForget:!1}).then(function(U){return U.data.result})}).catch(function(V){throw V})}return A.__name__=p,A.__origin__=l,A.__source__=h,A.__id__=m,A.origin=l,A},R=E();return R.fireAndForget=E({fireAndForget:!0}),R}(e,r,d,{send:c})},a.cross_domain_window=function(d){return pt.deserialize(d,{send:c})},a))}var jr={};jr.postrobot_post_message=function(e,r,n){n.indexOf("file:")===0&&(n="*"),e.postMessage(r,n)},jr.postrobot_bridge=function(e,r,n){if(!lo()&&!Zi())throw new Error("Bridge not needed for browser");if(D(e))throw new Error("Post message through bridge disabled between same domain windows");if(un(window,e)!==!1)throw new Error("Can only use bridge to communicate between two different windows, not between frames");(function(i,a,c){var d=Wr(window,i),h=Wr(i,window);if(!d&&!h)throw new Error("Can only send messages to and from parent and popup windows");po(i).then(function(l){return l(i,a,c)})})(e,n,r)},jr.postrobot_global=function(e,r){if(!yr(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!D(e))throw new Error("Post message through global disabled between different domain windows");if(un(window,e)!==!1)throw new Error("Can only use global to communicate between two different windows, not between frames");var n=Ot(e);if(!n)throw new Error("Can not find postRobot global on foreign window");n.receiveMessage({source:window,origin:C(),data:r})};function go(e,r,n,i){var a=i.on,c=i.send;return S.try(function(){var d=Ye().getOrSet(e,function(){return{}});return d.buffer=d.buffer||[],d.buffer.push(n),d.flush=d.flush||S.flush().then(function(){if(xe(e))throw new Error("Window is closed");var h=na(e,r,((l={}).__post_robot_11_0_0__=d.buffer||[],l),{on:a,send:c}),l;delete d.buffer;for(var w=Object.keys(jr),y=[],m=0;m<w.length;m++){var p=w[m];try{jr[p](e,h,r)}catch(g){y.push(g)}}if(y.length===w.length)throw new Error(`All post-robot messaging strategies failed:

`+y.map(function(g,E){return E+". "+Pr(g)}).join(`

`))}),d.flush.then(function(){delete d.flush})}).then(ye)}function ia(e){return he("responseListeners").get(e)}function aa(e){he("responseListeners").del(e)}function sa(e){return he("erroredResponseListeners").has(e)}function ua(e){var r=e.name,n=e.win,i=e.domain,a=Ye("requestListeners");if(n==="*"&&(n=null),i==="*"&&(i=null),!r)throw new Error("Name required to get request listener");for(var c=0,d=[n,En()];c<d.length;c++){var h=d[c];if(h){var l=a.get(h);if(l){var w=l[r];if(w){if(i&&typeof i=="string"){if(w[i])return w[i];if(w.__domain_regex__)for(var y=0,m=w.__domain_regex__;y<m.length;y++){var p=m[y],g=p.listener;if(ft(p.regex,i))return g}}if(w["*"])return w["*"]}}}}}function yo(e,r){var n=r.on,i=r.send,a=he("receivedMessages");try{if(!window||window.closed||!e.source)return}catch{return}var c=e.source,d=e.origin,h=function(m,p,g,E){var R=E.on,O=E.send,A;try{A=oa(p,g,m,{on:R,send:O})}catch{return}if(A&&typeof A=="object"&&A!==null){var L=A.__post_robot_11_0_0__;if(Array.isArray(L))return L}}(e.data,c,d,{on:n,send:i});if(h){Vi(c);for(var l,w=function(){var m=h[y];if(a.has(m.id))return{v:void 0};if(a.set(m.id,!0),xe(c)&&!m.fireAndForget)return{v:void 0};m.origin.indexOf("file:")===0&&(d="file://");try{m.type==="postrobot_message_request"?function(p,g,E,R){var O=R.on,A=R.send,L=ua({name:E.name,win:p,domain:g}),V=E.name==="postrobot_method"&&E.data&&typeof E.data.name=="string"?E.data.name+"()":E.name;function _($,U,X){return S.flush().then(function(){if(!E.fireAndForget&&!xe(p))try{return go(p,g,{id:Xe(),origin:C(window),type:"postrobot_message_response",hash:E.hash,name:E.name,ack:$,data:U,error:X},{on:O,send:A})}catch(B){throw new Error("Send response message failed for "+V+" in "+C()+`

`+Pr(B))}})}S.all([S.flush().then(function(){if(!E.fireAndForget&&!xe(p))try{return go(p,g,{id:Xe(),origin:C(window),type:"postrobot_message_ack",hash:E.hash,name:E.name},{on:O,send:A})}catch($){throw new Error("Send ack message failed for "+V+" in "+C()+`

`+Pr($))}}),S.try(function(){if(!L)throw new Error("No handler found for post message: "+E.name+" from "+g+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);return L.handler({source:p,origin:g,data:E.data})}).then(function($){return _("success",$)},function($){return _("error",null,$)})]).then(ye).catch(function($){if(L&&L.handleError)return L.handleError($);throw $})}(c,d,m,{on:n,send:i}):m.type==="postrobot_message_response"?function(p,g,E){if(!sa(E.hash)){var R=ia(E.hash);if(!R)throw new Error("No handler found for post message response for message: "+E.name+" from "+g+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!ft(R.domain,g))throw new Error("Response origin "+g+" does not match domain "+(O=R.domain,Array.isArray(O)?"("+O.join(" | ")+")":yt(O)?"RegExp("+O.toString()+")":O.toString()));var O;if(p!==R.win)throw new Error("Response source does not match registered window");aa(E.hash),E.ack==="error"?R.promise.reject(E.error):E.ack==="success"&&R.promise.resolve({source:p,origin:g,data:E.data})}}(c,d,m):m.type==="postrobot_message_ack"&&function(p,g,E){if(!sa(E.hash)){var R=ia(E.hash);if(!R)throw new Error("No handler found for post message ack for message: "+E.name+" from "+g+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!ft(R.domain,g))throw new Error("Ack origin "+g+" does not match domain "+R.domain.toString());if(p!==R.win)throw new Error("Ack source does not match registered window")}catch(O){R.promise.reject(O)}R.ack=!0}}(c,d,m)}catch(p){setTimeout(function(){throw p},0)}},y=0;y<h.length;y++)if(l=w())return l.v}}function At(e,r,n){if(!e)throw new Error("Expected name");if(typeof(r=r||{})=="function"&&(n=r,r={}),!n)throw new Error("Expected handler");var i=function a(c,d){var h=c.name,l=c.win,w=c.domain,y=Ye("requestListeners");if(!h||typeof h!="string")throw new Error("Name required to add request listener");if(l&&l!=="*"&&pt.isProxyWindow(l)){var m=l.awaitWindow().then(function(ce){return a({name:h,win:ce,domain:w},d)});return{cancel:function(){m.then(function(ce){return ce.cancel()},ye)}}}var p=l;if(Array.isArray(p)){for(var g=[],E=0,R=p;E<R.length;E++)g.push(a({name:h,domain:w,win:R[E]},d));return{cancel:function(){for(var ce=0;ce<g.length;ce++)g[ce].cancel()}}}if(Array.isArray(w)){for(var O=[],A=0,L=w;A<L.length;A++)O.push(a({name:h,win:p,domain:L[A]},d));return{cancel:function(){for(var ce=0;ce<O.length;ce++)O[ce].cancel()}}}var V=ua({name:h,win:p,domain:w});p&&p!=="*"||(p=En());var _=(w=w||"*").toString();if(V)throw p&&w?new Error("Request listener already exists for "+h+" on domain "+w.toString()+" for "+(p===En()?"wildcard":"specified")+" window"):p?new Error("Request listener already exists for "+h+" for "+(p===En()?"wildcard":"specified")+" window"):w?new Error("Request listener already exists for "+h+" on domain "+w.toString()):new Error("Request listener already exists for "+h);var $=y.getOrSet(p,function(){return{}}),U=Lr($,h,function(){return{}}),X,B;return no(w)?(X=Lr(U,"__domain_regex__",function(){return[]})).push(B={regex:w,listener:d}):U[_]=d,{cancel:function(){delete U[_],B&&(X.splice(X.indexOf(B,1)),X.length||delete U.__domain_regex__),Object.keys(U).length||delete $[h],p&&!Object.keys($).length&&y.del(p)}}}({name:e,win:r.window,domain:r.domain||"*"},{handler:n||r.handler,handleError:r.errorHandler||function(a){throw a}});return{cancel:function(){i.cancel()}}}var Tt=function e(r,n,i,a){var c=(a=a||{}).domain||"*",d=a.timeout||-1,h=a.timeout||5e3,l=a.fireAndForget||!1;return pt.toProxyWindow(r,{send:e}).awaitWindow().then(function(w){return S.try(function(){if(function(y,m,p){if(!y)throw new Error("Expected name");if(p&&typeof p!="string"&&!Array.isArray(p)&&!no(p))throw new TypeError("Can not send "+y+". Expected domain "+JSON.stringify(p)+" to be a string, array, or regex");if(xe(m))throw new Error("Can not send "+y+". Target window is closed")}(n,w,c),function(y,m){var p=Xt(m);if(p)return p===y;if(m===y||Ke(m)===m)return!1;for(var g=0,E=et(y);g<E.length;g++)if(E[g]===m)return!0;return!1}(window,w))return Hi(w,h)}).then(function(y){return function(m,p,g,E){var R=E.send;return S.try(function(){return typeof p=="string"?p:S.try(function(){return g||co(m,{send:R}).then(function(O){return O.domain})}).then(function(O){if(!ft(p,p))throw new Error("Domain "+hn(p)+" does not match "+hn(p));return O})})}(w,c,(y===void 0?{}:y).domain,{send:e})}).then(function(y){var m=y,p=n==="postrobot_method"&&i&&typeof i.name=="string"?i.name+"()":n,g=new S,E=n+"_"+Xe();if(!l){var R={name:n,win:w,domain:m,promise:g};(function(U,X){he("responseListeners").set(U,X)})(E,R);var O=Ye("requestPromises").getOrSet(w,function(){return[]});O.push(g),g.catch(function(){(function(U){he("erroredResponseListeners").set(U,!0)})(E),aa(E)});var A=function(U){return Ye("knownWindows").get(U,!1)}(w)?1e4:2e3,L=d,V=A,_=L,$=zr(function(){return xe(w)?g.reject(new Error("Window closed for "+n+" before "+(R.ack?"response":"ack"))):R.cancelled?g.reject(new Error("Response listener was cancelled for "+n)):(V=Math.max(V-500,0),_!==-1&&(_=Math.max(_-500,0)),R.ack||V!==0?_===0?g.reject(new Error("No response for postMessage "+p+" in "+C()+" in "+L+"ms")):void 0:g.reject(new Error("No ack for postMessage "+p+" in "+C()+" in "+A+"ms")))},500);g.finally(function(){$.cancel(),O.splice(O.indexOf(g,1))}).catch(ye)}return go(w,m,{id:Xe(),origin:C(window),type:"postrobot_message_request",hash:E,name:n,data:i,fireAndForget:l},{on:At,send:e}).then(function(){return l?g.resolve():g},function(U){throw new Error("Send request message failed for "+p+" in "+C()+`

`+Pr(U))})})})};function qr(e){return pt.toProxyWindow(e,{send:Tt})}function ca(e){for(var r=0,n=Ye("requestPromises").get(e,[]);r<n.length;r++)n[r].reject(new Error("Window "+(xe(e)?"closed":"cleaned up")+" before response")).catch(ye)}var Bt;Bt={setupBridge:ki,openBridge:function(e,r){var n=he("bridges"),i=he("bridgeFrames");return r=r||It(e),n.getOrSet(r,function(){return S.try(function(){if(C()===r)throw new Error("Can not open bridge on the same domain as current domain: "+r);var a=ho(r);if(Er(window,a))throw new Error("Frame with name "+a+" already exists on page");var c=function(d,h){var l=document.createElement("iframe");return l.setAttribute("name",d),l.setAttribute("id",d),l.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),l.setAttribute("frameborder","0"),l.setAttribute("border","0"),l.setAttribute("scrolling","no"),l.setAttribute("allowTransparency","true"),l.setAttribute("tabindex","-1"),l.setAttribute("hidden","true"),l.setAttribute("title",""),l.setAttribute("role","presentation"),l.src=h,l}(a,e);return i.set(r,c),Au.then(function(d){d.appendChild(c);var h=c.contentWindow;return new S(function(l,w){c.addEventListener("load",l),c.addEventListener("error",w)}).then(function(){return Hi(h,5e3,"Bridge "+e)}).then(function(){return h})})})})},linkWindow:bn,linkUrl:function(e,r){bn({win:e,domain:It(r)})},isBridge:Zi,needsBridge:Yi,needsBridgeForBrowser:lo,hasBridge:function(e,r){return he("bridges").has(r||It(e))},needsBridgeForWin:Ji,needsBridgeForDomain:Ki,destroyBridges:function(){for(var e=he("bridges"),r=he("bridgeFrames"),n=0,i=r.keys();n<i.length;n++){var a=r.get(i[n]);a&&a.parentNode&&a.parentNode.removeChild(a)}r.reset(),e.reset()}};function Br(e){if(!D(e))throw new Error("Can not get global for window on different domain");return e.__zoid_10_3_3__||(e.__zoid_10_3_3__={}),e.__zoid_10_3_3__}function da(e,r){try{return r(Br(e))}catch{}}function Pn(e){return{get:function(){var r=this;return S.try(function(){if(r.source&&r.source!==window)throw new Error("Can not call get on proxy object from a remote window");return e})}}}function _u(e){return Xn(JSON.stringify(e))}function Eo(e){var r=Br(e);return r.references=r.references||{},r.references}function fa(e){var r=e.data,n=e.metaData,i=e.sender,a=e.receiver,c=e.passByReference,d=c!==void 0&&c,h=e.basic,l=h!==void 0&&h,w=qr(a.win),y=l?JSON.stringify(r):na(w,a.domain,r,{on:At,send:Tt}),m=d?function(p){var g=Xe();return Eo(window)[g]=p,{type:"uid",uid:g}}(y):{type:"raw",val:y};return{serializedData:_u({sender:{domain:i.domain},metaData:n,reference:m}),cleanReference:function(){p=window,(g=m).type==="uid"&&delete Eo(p)[g.uid];var p,g}}}function la(e){var r=e.sender,n=e.basic,i=n!==void 0&&n,a=function(y){return JSON.parse(function(m){if(typeof atob=="function")return decodeURIComponent([].map.call(atob(m),function(p){return"%"+("00"+p.charCodeAt(0).toString(16)).slice(-2)}).join(""));if(typeof Buffer<"u")return Buffer.from(m,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(y))}(e.data),c=a.reference,d=a.metaData,h;h=typeof r.win=="function"?r.win({metaData:d}):r.win;var l;l=typeof r.domain=="function"?r.domain({metaData:d}):typeof r.domain=="string"?r.domain:a.sender.domain;var w=function(y,m){if(m.type==="raw")return m.val;if(m.type==="uid")return Eo(y)[m.uid];throw new Error("Unsupported ref type: "+m.type)}(h,c);return{data:i?JSON.parse(w):function(y,m,p){return oa(y,m,p,{on:At,send:Tt})}(h,l,w),metaData:d,sender:{win:h,domain:l},reference:c}}var ve={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},Tn={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},Se=Ze,Ee={RENDER:"zoid-render",RENDERED:"zoid-rendered",PRERENDER:"zoid-prerender",PRERENDERED:"zoid-prerendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function ha(e){return"__zoid__"+e.name+"__"+e.serializedPayload+"__"}function bo(e){if(!e)throw new Error("No window name");var r=e.split("__"),n=r[1],i=r[2],a=r[3];if(n!=="zoid")throw new Error("Window not rendered by zoid - got "+n);if(!i)throw new Error("Expected component name");if(!a)throw new Error("Expected serialized payload ref");return{name:i,serializedInitialPayload:a}}var Wu=jt(function(e){var r=la({data:bo(e).serializedInitialPayload,sender:{win:function(n){return function(i){if(i.type==="opener")return wn("opener",ie(window));if(i.type==="parent"&&typeof i.distance=="number")return wn("parent",function(m,p){return p===void 0&&(p=1),function(g,E){E===void 0&&(E=1);for(var R=g,O=0;O<E;O++){if(!R)return;R=nt(R)}return R}(m,br(m)-p)}(window,i.distance));if(i.type==="global"&&i.uid&&typeof i.uid=="string"){var a=i.uid,c=Xt(window);if(!c)throw new Error("Can not find ancestor window");for(var d=0,h=Re(c);d<h.length;d++){var l=h[d];if(D(l)){var w=da(l,function(m){return m.windows&&m.windows[a]});if(w)return w}}}else if(i.type==="name"){var y=i.name;return wn("namedWindow",function(m,p){return Er(m,p)||function g(E,R){var O=Er(E,R);if(O)return O;for(var A=0,L=et(E);A<L.length;A++){var V=g(L[A],R);if(V)return V}}(Ke(m)||m,p)}(wn("ancestor",Xt(window)),y))}throw new Error("Unable to find "+i.type+" parent component window")}(n.metaData.windowRef)}}});return{parent:r.sender,payload:r.data,reference:r.reference}});function pa(){return Wu(window.name)}function Mu(e,r){if(r===void 0&&(r=window),e===nt(r))return{type:"parent",distance:br(e)};if(e===ie(r))return{type:"opener"};if(D(e)&&(i=e,i!==Ke(i))){var n=J(e).name;if(n)return{type:"name",name:n}}var i}function va(e,r,n,i,a){if(!e.hasOwnProperty(n))return i;var c=e[n];return typeof c.childDecorate=="function"?c.childDecorate({value:i,uid:a.uid,tag:a.tag,close:a.close,focus:a.focus,onError:a.onError,onProps:a.onProps,resize:a.resize,getParent:a.getParent,getParentDomain:a.getParentDomain,show:a.show,hide:a.hide,export:a.export,getSiblings:a.getSiblings}):i}function Fu(){return S.try(function(){window.focus()})}function wa(){return S.try(function(){window.close()})}var _t=function(){return ye},tr=function(e){return ln(e.value)};function Po(e,r,n){for(var i=0,a=Object.keys(P({},e,r));i<a.length;i++){var c=a[i];n(c,r[c],e[c])}}function ma(e,r,n){var i={};return S.all(function(a,c,d){var h=[];return Po(a,c,function(l,w,y){var m=function(p,g,E){return S.resolve().then(function(){var R,O;if(E!=null&&g){var A=(R={},R.get=g.queryParam,R.post=g.bodyParam,R)[n],L=(O={},O.get=g.queryValue,O.post=g.bodyValue,O)[n];if(A)return S.hash({finalParam:S.try(function(){return typeof A=="function"?A({value:E}):typeof A=="string"?A:p}),finalValue:S.try(function(){return typeof L=="function"&&qt(E)?L({value:E}):E})}).then(function(V){var _=V.finalParam,$=V.finalValue,U;if(typeof $=="boolean")U=$.toString();else if(typeof $=="string")U=$.toString();else if(typeof $=="object"&&$!==null){if(g.serialization===Tn.JSON)U=JSON.stringify($);else if(g.serialization===Tn.BASE64)U=Xn(JSON.stringify($));else if(g.serialization===Tn.DOTIFY||!g.serialization){U=function ne(K,H,ue){H===void 0&&(H=""),ue===void 0&&(ue={}),H=H&&H+".";for(var k in K)K.hasOwnProperty(k)&&K[k]!=null&&typeof K[k]!="function"&&(K[k]&&Array.isArray(K[k])&&K[k].length&&K[k].every(function(Oe){return typeof Oe!="object"})?ue[""+H+k+"[]"]=K[k].join(","):K[k]&&typeof K[k]=="object"?ue=ne(K[k],""+H+k,ue):ue[""+H+k]=K[k].toString());return ue}($,p);for(var X=0,B=Object.keys(U);X<B.length;X++){var ce=B[X];i[ce]=U[ce]}return}}else typeof $=="number"&&(U=$.toString());i[_]=U})}})}(l,w,y);h.push(m)}),h}(r,e)).then(function(){return i})}function ga(e){var r=e.uid,n=e.options,i=e.overrides,a=i===void 0?{}:i,c=e.parentWin,d=c===void 0?window:c,h=n.propsDef,l=n.containerTemplate,w=n.prerenderTemplate,y=n.tag,m=n.name,p=n.attributes,g=n.dimensions,E=n.autoResize,R=n.url,O=n.domain,A=n.exports,L=new S,V=[],_=vn(),$={},U={},X={visible:!0},B=a.event?a.event:(ce={},ne={},K={on:function(x,N){var q=ne[x]=ne[x]||[];q.push(N);var j=!1;return{cancel:function(){j||(j=!0,q.splice(q.indexOf(N),1))}}},once:function(x,N){var q=K.on(x,function(){q.cancel(),N()});return q},trigger:function(x){for(var N=arguments.length,q=new Array(N>1?N-1:0),j=1;j<N;j++)q[j-1]=arguments[j];var te=ne[x],Y=[];if(te)for(var me=function(){var Ue=te[ge];Y.push(S.try(function(){return Ue.apply(void 0,q)}))},ge=0;ge<te.length;ge++)me();return S.all(Y).then(ye)},triggerOnce:function(x){if(ce[x])return S.resolve();ce[x]=!0;for(var N=arguments.length,q=new Array(N>1?N-1:0),j=1;j<N;j++)q[j-1]=arguments[j];return K.trigger.apply(K,[x].concat(q))},reset:function(){ne={}}}),ce,ne,K,H=a.props?a.props:{},ue,k,Oe,xt,vt,$t=!1,Ht=a.onError,Wt=a.getProxyContainer,Vt=a.show,Gt=a.hide,rr=a.close,Jt=a.renderContainer,Rt=a.getProxyWindow,nr=a.setProxyWin,Kt=a.openFrame,Yt=a.openPrerenderFrame,or=a.prerender,ir=a.open,oe=a.openPrerender,wt=a.watchForUnload,se=a.getInternalState,ze=a.setInternalState,De=function(){return typeof g=="function"?g({props:H}):g},Le=function(){return S.try(function(){return a.resolveInitPromise?a.resolveInitPromise():L.resolve()})},Te=function(x){return S.try(function(){return a.rejectInitPromise?a.rejectInitPromise(x):L.reject(x)})},ke=function(x){for(var N={},q=0,j=Object.keys(H);q<j.length;q++){var te=j[q],Y=h[te];if(!Y||Y.sendToChild!==!1){var me=Y&&Y.trustedDomains&&Y.trustedDomains.length>0?Y.trustedDomains.reduce(function(ge,Ue){return ge||ft(Ue,x)},!1):ft(x,C(window));Y&&Y.sameDomain&&!me||Y&&Y.trustedDomains&&!me||(N[te]=H[te])}}return S.hash(N)},_e=function(){return S.try(function(){return se?se():X})},We=function(x){return S.try(function(){return ze?ze(x):X=P({},X,x)})},mt=function(){return Rt?Rt():S.try(function(){var x=H.window;if(x){var N=qr(x);return _.register(function(){return x.close()}),N}return new pt({send:Tt})})},ot=function(x){return nr?nr(x):S.try(function(){ue=x})},St=function(){return Vt?Vt():S.hash({setState:We({visible:!0}),showElement:k?k.get().then(Ru):null}).then(ye)},Mt=function(){return Gt?Gt():S.hash({setState:We({visible:!1}),showElement:k?k.get().then(Wi):null}).then(ye)},Sr=function(){return typeof R=="function"?R({props:H}):R},Or=function(){return typeof p=="function"?p({props:H}):p},ar=function(){return It(Sr())},it=function(x,N){var q=N.windowName;return Kt?Kt(x,{windowName:q}):S.try(function(){if(x===Se.IFRAME)return Pn(Ai({attributes:P({name:q,title:m},Or().iframe)}))})},$r=function(x){return Yt?Yt(x):S.try(function(){if(x===Se.IFRAME)return Pn(Ai({attributes:P({name:"__zoid_prerender_frame__"+m+"_"+Xe()+"__",title:"prerender__"+m},Or().iframe)}))})},Hr=function(x,N,q){return oe?oe(x,N,q):S.try(function(){if(x===Se.IFRAME){if(!q)throw new Error("Expected proxy frame to be passed");return q.get().then(function(j){return _.register(function(){return Ur(j)}),ao(j).then(function(te){return J(te)}).then(function(te){return qr(te)})})}if(x===Se.POPUP)return N;throw new Error("No render context available for "+x)})},xr=function(){return S.try(function(){if(ue)return S.all([B.trigger(Ee.FOCUS),ue.focus()]).then(ye)})},Rn=function(){var x=Br(window);return x.windows=x.windows||{},x.windows[r]=window,_.register(function(){delete x.windows[r]}),r},Vr=function(x,N,q,j){if(N===C(window))return{type:"global",uid:Rn()};if(x!==window)throw new Error("Can not construct cross-domain window reference for different target window");if(H.window){var te=j.getWindow();if(!te)throw new Error("Can not construct cross-domain window reference for lazy window prop");if(Xt(te)!==window)throw new Error("Can not construct cross-domain window reference for window prop with different ancestor")}if(q===Se.POPUP)return{type:"opener"};if(q===Se.IFRAME)return{type:"parent",distance:br(window)};throw new Error("Can not construct window reference for child")},Sn=function(x,N){return S.try(function(){var q;xt=x,Oe=N,(q=ue)==null||q.isPopup().then(function(j){if((N==null?void 0:N.name)!==""&&j){var te;(te=ue)==null||te.setName(N==null?void 0:N.name)}}).finally(function(){Le(),_.register(function(){return N.close.fireAndForget().catch(ye)})})})},Gr=function(x){var N=x.width,q=x.height;return S.try(function(){B.trigger(Ee.RESIZE,{width:N,height:q})})},Jr=function(x){return S.try(function(){return B.trigger(Ee.DESTROY)}).catch(ye).then(function(){return _.all(x)}).then(function(){var N=x||new Error("Component destroyed");vt&&Rr(vt)||N.message==="Window navigated away"?L.resolve():L.asyncReject(N)})},Ft=jt(function(x){return S.try(function(){return rr?xe(rr.__source__)?void 0:rr():S.try(function(){return B.trigger(Ee.CLOSE)}).then(function(){return Jr(x||new Error("Component closed"))})})}),ba=function(x,N){var q=N.proxyWin,j=N.proxyFrame,te=N.windowName;return ir?ir(x,{proxyWin:q,proxyFrame:j,windowName:te}):S.try(function(){if(x===Se.IFRAME){if(!j)throw new Error("Expected proxy frame to be passed");return j.get().then(function(Ne){return ao(Ne).then(function(pe){return _.register(function(){return Ur(Ne)}),_.register(function(){return ca(pe)}),pe})})}if(x===Se.POPUP){var Y=De(),me=Y.width,ge=me===void 0?"300px":me,Ue=Y.height,be=Ue===void 0?"150px":Ue;ge=Ui(ge,window.outerWidth),be=Ui(be,window.outerWidth);var Me=function(Ne,pe){var Ce=(pe=pe||{}).closeOnUnload,Pe=Ce===void 0?1:Ce,at=pe.name,je=at===void 0?"":at,de=pe.width,qe=pe.height,tt=0,Ve=0;de&&(window.outerWidth?Ve=Math.round((window.outerWidth-de)/2)+window.screenX:window.screen.width&&(Ve=Math.round((window.screen.width-de)/2))),qe&&(window.outerHeight?tt=Math.round((window.outerHeight-qe)/2)+window.screenY:window.screen.height&&(tt=Math.round((window.screen.height-qe)/2))),delete pe.closeOnUnload,delete pe.name,de&&qe&&(pe=P({top:tt,left:Ve,width:de,height:qe,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},pe));var sr=Object.keys(pe).map(function(Dt){if(pe[Dt]!=null)return Dt+"="+hn(pe[Dt])}).filter(Boolean).join(","),gt;try{gt=window.open("",je,sr)}catch(Dt){throw new io("Can not open popup window - "+(Dt.stack||Dt.message))}if(xe(gt))throw new io("Can not open popup window - blocked");return Pe&&window.addEventListener("unload",function(){return gt.close()}),gt}(0,P({name:te,width:ge,height:be},Or().popup));return _.register(function(){return gi(Me)}),_.register(function(){return ca(Me)}),Me}throw new Error("No render context available for "+x)}).then(function(Y){return q.setWindow(Y,{send:Tt}),q.setName(te).then(function(){return q})})},Pa=function(){return S.try(function(){var x=_i(window,"unload",ln(function(){Jr(new Error("Window navigated away"))})),N=wi(d,Jr,3e3);if(_.register(N.cancel),_.register(x.cancel),wt)return wt()})},Ta=function(x){var N=!1;return x.isClosed().then(function(q){return q?(N=!0,Ft(new Error("Detected component window close"))):S.delay(200).then(function(){return x.isClosed()}).then(function(j){if(j)return N=!0,Ft(new Error("Detected component window close"))})}).then(function(){return N})},Kr=function(x){return Ht?Ht(x):S.try(function(){if(V.indexOf(x)===-1)return V.push(x),L.asyncReject(x),B.trigger(Ee.ERROR,x)})},Ra=new S,Sa=function(x){return S.try(function(){Ra.resolve(x)})};Sn.onError=Kr;var Oa=function(x,N){return x({uid:r,container:N.container,context:N.context,doc:N.doc,frame:N.frame,prerenderFrame:N.prerenderFrame,focus:xr,close:Ft,state:$,props:H,tag:y,dimensions:De(),event:B})},xa=function(x,N){var q=N.context;return or?or(x,{context:q}):S.try(function(){if(w){B.trigger(Ee.PRERENDER);var j=x.getWindow();if(j&&D(j)&&function(Ce){try{if(!Ce.location.href||Ce.location.href==="about:blank")return!0}catch{}return!1}(j)){var te=(j=J(j)).document,Y=Oa(w,{context:q,doc:te});if(Y){if(Y.ownerDocument!==te)throw new Error("Expected prerender template to have been created with document from child window");(function(Ce,Pe){var at=Pe.tagName.toLowerCase();if(at!=="html")throw new Error("Expected element to be html, got "+at);for(var je=Ce.document.documentElement,de=0,qe=to(je.children);de<qe.length;de++)je.removeChild(qe[de]);for(var tt=0,Ve=to(Pe.children);tt<Ve.length;tt++)je.appendChild(Ve[tt])})(j,Y);var me=E.width,ge=me!==void 0&&me,Ue=E.height,be=Ue!==void 0&&Ue,Me=E.element,Ne=Me===void 0?"body":Me;if((Ne=oo(Ne,te))&&(ge||be)){var pe=Mi(Ne,function(Ce){Gr({width:ge?Ce.width:void 0,height:be?Ce.height:void 0})},{width:ge,height:be,win:j});B.on(Ee.RENDERED,pe.cancel)}B.trigger(Ee.PRERENDERED)}}}})},Da=function(x,N){var q=N.proxyFrame,j=N.proxyPrerenderFrame,te=N.context,Y=N.rerender;return Jt?Jt(x,{proxyFrame:q,proxyPrerenderFrame:j,context:te,rerender:Y}):S.hash({container:x.get(),frame:q?q.get():null,prerenderFrame:j?j.get():null,internalState:_e()}).then(function(me){var ge=me.container,Ue=me.internalState.visible,be=Oa(l,{context:te,container:ge,frame:me.frame,prerenderFrame:me.prerenderFrame,doc:document});if(be){Ue||Wi(be),Tu(ge,be);var Me=function(Ne,pe){pe=ln(pe);var Ce=!1,Pe=[],at,je,de,qe=function(){Ce=!0;for(var gt=0;gt<Pe.length;gt++)Pe[gt].disconnect();at&&at.cancel(),de&&de.removeEventListener("unload",tt),je&&Ur(je)},tt=function(){Ce||(pe(),qe())};if(Rr(Ne))return tt(),{cancel:qe};if(window.MutationObserver)for(var Ve=Ne.parentElement;Ve;){var sr=new window.MutationObserver(function(){Rr(Ne)&&tt()});sr.observe(Ve,{childList:!0}),Pe.push(sr),Ve=Ve.parentElement}return(je=document.createElement("iframe")).setAttribute("name","__detect_close_"+Xe()+"__"),je.style.display="none",ao(je).then(function(gt){(de=J(gt)).addEventListener("unload",tt)}),Ne.appendChild(je),at=zr(function(){Rr(Ne)&&tt()},1e3),{cancel:qe}}(be,function(){var Ne=new Error("Detected container element removed from DOM");return S.delay(1).then(function(){if(!Rr(be))return _.all(Ne),Y().then(Le,Te);Ft(Ne)})});return _.register(function(){return Me.cancel()}),_.register(function(){return Ur(be)}),k=Pn(be)}})},Na=function(){return{state:$,event:B,close:Ft,focus:xr,resize:Gr,onError:Kr,updateProps:Ju,show:St,hide:Mt}},So=function(x){x===void 0&&(x={});var N=vt,q=Na();Tr(U,x),function(j,te,Y,me,ge){var Ue=me.state,be=me.close,Me=me.focus,Ne=me.event,pe=me.onError;Po(Y,j,function(Ce,Pe,at){var je=!1,de=at;Object.defineProperty(te,Ce,{configurable:!0,enumerable:!0,get:function(){return je?de:(je=!0,function(){if(!Pe)return de;var qe=Pe.alias;if(qe&&!qt(at)&&qt(Y[qe])&&(de=Y[qe]),Pe.value&&(de=Pe.value({props:te,state:Ue,close:be,focus:Me,event:Ne,onError:pe,container:ge})),!Pe.default||qt(de)||qt(Y[Ce])||(de=Pe.default({props:te,state:Ue,close:be,focus:Me,event:Ne,onError:pe,container:ge})),qt(de)){if(Pe.type===ve.ARRAY?!Array.isArray(de):typeof de!==Pe.type)throw new TypeError("Prop is not of type "+Pe.type+": "+Ce)}else if(Pe.required!==!1&&!qt(Y[Ce]))throw new Error('Expected prop "'+Ce+'" to be defined');return qt(de)&&Pe.decorate&&(de=Pe.decorate({value:de,props:te,state:Ue,close:be,focus:Me,event:Ne,onError:pe,container:ge})),de}())}})}),Po(te,j,ye)}(h,H,U,q,N)},Ju=function(x){return So(x),L.then(function(){var N=Oe,q=ue;if(N&&q&&xt)return ke(xt).then(function(j){return N.updateProps(j).catch(function(te){return Ta(q).then(function(Y){if(!Y)throw te})})})})},Ca=function(x){return Wt?Wt(x):S.try(function(){return Ci(x)}).then(function(N){return so(N)&&(N=function q(j){var te=function(Ue){var be=function(Me){for(;Me.parentNode;)Me=Me.parentNode;if(so(Me))return Me}(Ue);if(be&&be.host)return be.host}(j);if(!te)throw new Error("Element is not in shadow dom");var Y="shadow-slot-"+Xe(),me=document.createElement("slot");me.setAttribute("name",Y),j.appendChild(me);var ge=document.createElement("div");return ge.setAttribute("slot",Y),te.appendChild(ge),so(te)?q(ge):ge}(N)),vt=N,Pn(N)})};return{init:function(){(function(){B.on(Ee.RENDER,function(){return H.onRender()}),B.on(Ee.PRERENDER,function(){return H.onPrerender()}),B.on(Ee.DISPLAY,function(){return H.onDisplay()}),B.on(Ee.RENDERED,function(){return H.onRendered()}),B.on(Ee.PRERENDERED,function(){return H.onPrerendered()}),B.on(Ee.CLOSE,function(){return H.onClose()}),B.on(Ee.DESTROY,function(){return H.onDestroy()}),B.on(Ee.RESIZE,function(){return H.onResize()}),B.on(Ee.FOCUS,function(){return H.onFocus()}),B.on(Ee.PROPS,function(x){return H.onProps(x)}),B.on(Ee.ERROR,function(x){return H&&H.onError?H.onError(x):Te(x).then(function(){setTimeout(function(){throw x},1)})}),_.register(B.reset)})()},render:function(x){var N=x.target,q=x.container,j=x.context,te=x.rerender;return S.try(function(){var Y=ar(),me=O||ar();(function(G,Be,Ie){if(G!==window){if(!un(window,G))throw new Error("Can only renderTo an adjacent frame");var $e=C();if(!ft(Be,$e)&&!D(G))throw new Error("Can not render remotely to "+Be.toString()+" - can only render to "+$e);if(Ie&&typeof Ie!="string")throw new Error("Container passed to renderTo must be a string selector, got "+typeof Ie+" }")}})(N,me,q);var ge=S.try(function(){if(N!==window)return function(G,Be){for(var Ie={},$e=0,ct=Object.keys(H);$e<ct.length;$e++){var Ae=ct[$e],Et=h[Ae];Et&&Et.allowDelegate&&(Ie[Ae]=H[Ae])}var Ge=Tt(Be,"zoid_delegate_"+m,{uid:r,overrides:{props:Ie,event:B,close:Ft,onError:Kr,getInternalState:_e,setInternalState:We,resolveInitPromise:Le,rejectInitPromise:Te}}).then(function(Z){var Q=Z.data.parent;return _.register(function(W){if(!xe(Be))return Q.destroy(W)}),Q.getDelegateOverrides()}).catch(function(Z){throw new Error(`Unable to delegate rendering. Possibly the component is not loaded in the target window.

`+Pr(Z))});return Wt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.getProxyContainer.apply(ee,Q)})},Jt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.renderContainer.apply(ee,Q)})},Vt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.show.apply(ee,Q)})},Gt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.hide.apply(ee,Q)})},wt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.watchForUnload.apply(ee,Q)})},G===Se.IFRAME?(Rt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.getProxyWindow.apply(ee,Q)})},Kt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.openFrame.apply(ee,Q)})},Yt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.openPrerenderFrame.apply(ee,Q)})},or=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.prerender.apply(ee,Q)})},ir=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.open.apply(ee,Q)})},oe=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.openPrerender.apply(ee,Q)})}):G===Se.POPUP&&(nr=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.setProxyWin.apply(ee,Q)})}),Ge}(j,N)}),Ue=H.window,be=Pa(),Me=ma(h,H,"post"),Ne=B.trigger(Ee.RENDER),pe=Ca(q),Ce=mt(),Pe=pe.then(function(){return So()}),at=Pe.then(function(){return ma(h,H,"get").then(function(G){return function(Be,Ie){var $e=Ie.query||{},ct=Ie.hash||{},Ae,Et,Ge=Be.split("#");Et=Ge[1];var Z=(Ae=Ge[0]).split("?");Ae=Z[0];var Q=Ni(Z[1],$e),W=Ni(Et,ct);return Q&&(Ae=Ae+"?"+Q),W&&(Ae=Ae+"#"+W),Ae}(Kn(Sr()),{query:G})})}),je=Ce.then(function(G){return function(Ie){var $e=Ie===void 0?{}:Ie,ct=$e.proxyWin,Ae=$e.initialChildDomain,Et=$e.childDomainMatch,Ge=$e.target,Z=Ge===void 0?window:Ge,Q=$e.context;return function(W){var ee=W===void 0?{}:W,Oo=ee.proxyWin,ec=ee.childDomainMatch,tc=ee.context;return ke(ee.initialChildDomain).then(function(rc){return{uid:r,context:tc,tag:y,childDomainMatch:ec,version:"10_3_3",props:rc,exports:(_a=Oo,{init:function(nc){return Sn(this.origin,nc)},close:Ft,checkClose:function(){return Ta(_a)},resize:Gr,onError:Kr,show:St,hide:Mt,export:Sa})};var _a})}({proxyWin:ct,initialChildDomain:Ae,childDomainMatch:Et,context:Q}).then(function(W){var ee=fa({data:W,metaData:{windowRef:Vr(Z,Ae,Q,ct)},sender:{domain:C(window)},receiver:{win:ct,domain:Et},passByReference:Ae===C()}),Oo=ee.serializedData;return _.register(ee.cleanReference),Oo})}({proxyWin:(Be={proxyWin:G,initialChildDomain:Y,childDomainMatch:me,target:N,context:j}).proxyWin,initialChildDomain:Be.initialChildDomain,childDomainMatch:Be.childDomainMatch,target:Be.target,context:Be.context}).then(function(Ie){return ha({name:m,serializedPayload:Ie})});var Be}),de=je.then(function(G){return it(j,{windowName:G})}),qe=$r(j),tt=S.hash({proxyContainer:pe,proxyFrame:de,proxyPrerenderFrame:qe}).then(function(G){return Da(G.proxyContainer,{context:j,proxyFrame:G.proxyFrame,proxyPrerenderFrame:G.proxyPrerenderFrame,rerender:te})}).then(function(G){return G}),Ve=S.hash({windowName:je,proxyFrame:de,proxyWin:Ce}).then(function(G){var Be=G.proxyWin;return Ue?Be:ba(j,{windowName:G.windowName,proxyWin:Be,proxyFrame:G.proxyFrame})}),sr=S.hash({proxyWin:Ve,proxyPrerenderFrame:qe}).then(function(G){return Hr(j,G.proxyWin,G.proxyPrerenderFrame)}),gt=Ve.then(function(G){return ue=G,ot(G)}),Dt=S.hash({proxyPrerenderWin:sr,state:gt}).then(function(G){return xa(G.proxyPrerenderWin,{context:j})}),Ia=S.hash({proxyWin:Ve,windowName:je}).then(function(G){if(Ue)return G.proxyWin.setName(G.windowName)}),Ku=S.hash({body:Me}).then(function(G){return n.method?n.method:Object.keys(G.body).length?"post":"get"}),Aa=S.hash({proxyWin:Ve,windowUrl:at,body:Me,method:Ku,windowName:Ia,prerender:Dt}).then(function(G){return G.proxyWin.setLocation(G.windowUrl,{method:G.method,body:G.body})}),Yu=Ve.then(function(G){(function Be(Ie,$e){var ct=!1;return _.register(function(){ct=!0}),S.delay(2e3).then(function(){return Ie.isClosed()}).then(function(Ae){if(!ct){if($e===Se.POPUP&&Ae)return Ft(new Error("Detected popup close"));var Et=!!(vt&&Rr(vt));return $e===Se.IFRAME&&Ae&&(Et||$t)?Ft(new Error("Detected iframe close")):Be(Ie,$e)}})})(G,j)}),Zu=S.hash({container:tt,prerender:Dt}).then(function(){return B.trigger(Ee.DISPLAY)}),Qu=Ve.then(function(G){return function(Be,Ie,$e){return S.try(function(){return Be.awaitWindow()}).then(function(ct){if(Bt&&Bt.needsBridge({win:ct,domain:Ie})&&!Bt.hasBridge(Ie,Ie)){var Ae=typeof n.bridgeUrl=="function"?n.bridgeUrl({props:H}):n.bridgeUrl;if(!Ae)throw new Error("Bridge needed to render "+$e);var Et=It(Ae);return Bt.linkUrl(ct,Ie),Bt.openBridge(Kn(Ae),Et)}})}(G,Y,j)}),Xu=Aa.then(function(){return S.try(function(){var G=H.timeout;if(G)return L.timeout(G,new Error("Loading component timed out after "+G+" milliseconds"))})}),ku=L.then(function(){return $t=!0,B.trigger(Ee.RENDERED)});return S.hash({initPromise:L,buildUrlPromise:at,onRenderPromise:Ne,getProxyContainerPromise:pe,openFramePromise:de,openPrerenderFramePromise:qe,renderContainerPromise:tt,openPromise:Ve,openPrerenderPromise:sr,setStatePromise:gt,prerenderPromise:Dt,loadUrlPromise:Aa,buildWindowNamePromise:je,setWindowNamePromise:Ia,watchForClosePromise:Yu,onDisplayPromise:Zu,openBridgePromise:Qu,runTimeoutPromise:Xu,onRenderedPromise:ku,delegatePromise:ge,watchForUnloadPromise:be,finalSetPropsPromise:Pe})}).catch(function(Y){return S.all([Kr(Y),Jr(Y)]).then(function(){throw Y},function(){throw Y})}).then(ye)},destroy:Jr,getProps:function(){return H},setProps:So,export:Sa,getHelpers:Na,getDelegateOverrides:function(){return S.try(function(){return{getProxyContainer:Ca,show:St,hide:Mt,renderContainer:Da,getProxyWindow:mt,watchForUnload:Pa,openFrame:it,openPrerenderFrame:$r,prerender:xa,open:ba,openPrerender:Hr,setProxyWin:ot}})},getExports:function(){return A({getExports:function(){return Ra}})}}}var zu={register:function(e,r,n,i){var a=i.React,c=i.ReactDOM;return function(d){T(h,d);function h(){return d.apply(this,arguments)||this}var l=h.prototype;return l.render=function(){return a.createElement("div",null)},l.componentDidMount=function(){var w=c.findDOMNode(this),y=n(Tr({},this.props));y.render(w,Se.IFRAME),this.setState({parent:y})},l.componentDidUpdate=function(){this.state&&this.state.parent&&this.state.parent.updateProps(Tr({},this.props)).catch(ye)},h}(a.Component)}},Lu={register:function(e,r,n,i){return i.component(e,{render:function(a){return a("div")},inheritAttrs:!1,mounted:function(){var a=this.$el;this.parent=n(P({},(c=this.$attrs,Object.keys(c).reduce(function(d,h){var l=c[h];return h==="style-object"||h==="styleObject"?(d.style=l,d.styleObject=l):h.includes("-")?d[eo(h)]=l:d[h]=l,d},{}))));var c;this.parent.render(a,Se.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(P({},this.$attrs)).catch(ye)},deep:!0}}})}},Uu={register:function(e,r,n){return{template:"<div></div>",inheritAttrs:!1,mounted:function(){var i=this.$el;this.parent=n(P({},(a=this.$attrs,Object.keys(a).reduce(function(c,d){var h=a[d];return d==="style-object"||d==="styleObject"?(c.style=h,c.styleObject=h):d.includes("-")?c[eo(d)]=h:c[d]=h,c},{}))));var a;this.parent.render(i,Se.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(P({},this.$attrs)).catch(ye)},deep:!0}}}}},ju={register:function(e,r,n,i){return i.module(e,[]).directive(eo(e),function(){for(var a={},c=0,d=Object.keys(r);c<d.length;c++)a[d[c]]="=";return a.props="=",{scope:a,restrict:"E",controller:["$scope","$element",function(h,l){function w(){if(h.$root.$$phase!=="$apply"&&h.$root.$$phase!=="$digest")try{h.$apply()}catch{}}var y=function(){return pn(h.props,function(p){return typeof p=="function"?function(){var g=p.apply(this,arguments);return w(),g}:p})},m=n(y());m.render(l[0],Se.IFRAME),h.$watch(function(){m.updateProps(y()).catch(ye)})}]}})}},qu={register:function(e,r,n,i){var a=i.Component,c=i.NgModule,d=i.ElementRef,h=i.NgZone,l=i.Inject,w=function(){function m(g,E){this.elementRef=void 0,this.internalProps=void 0,this.parent=void 0,this.props=void 0,this.zone=void 0,this._props=void 0,this._props={},this.elementRef=g,this.zone=E}var p=m.prototype;return p.getProps=function(){var g=this;return pn(P({},this.internalProps,this.props),function(E){if(typeof E=="function"){var R=g.zone;return function(){var O=arguments,A=this;return R.run(function(){return E.apply(A,O)})}}return E})},p.ngOnInit=function(){var g=this.elementRef.nativeElement;this.parent=n(this.getProps()),this.parent.render(g,Se.IFRAME)},p.ngDoCheck=function(){this.parent&&!function(g,E){var R={};for(var O in g)if(g.hasOwnProperty(O)&&(R[O]=!0,g[O]!==E[O]))return!1;for(var A in E)if(!R[A])return!1;return!0}(this._props,this.props)&&(this._props=P({},this.props),this.parent.updateProps(this.getProps()))},m}();w.annotations=void 0,w.parameters=void 0,w.parameters=[[new l(d)],[new l(h)]],w.annotations=[new a({selector:e,template:"<div></div>",inputs:["props"]})];var y=function(){};return y.annotations=void 0,y.annotations=[new c({declarations:[w],exports:[w]})],y}};function Bu(e){var r=e.uid,n=e.frame,i=e.prerenderFrame,a=e.doc,c=e.props,d=e.event,h=e.dimensions,l=h.width,w=h.height;if(n&&i){var y=a.createElement("div");y.setAttribute("id",r);var m=a.createElement("style");return c.cspNonce&&m.setAttribute("nonce",c.cspNonce),m.appendChild(a.createTextNode(`
            #`+r+` {
                display: inline-block;
                position: relative;
                width: `+l+`;
                height: `+w+`;
            }

            #`+r+` > iframe {
                display: inline-block;
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                transition: opacity .2s ease-in-out;
            }

            #`+r+` > iframe.zoid-invisible {
                opacity: 0;
            }

            #`+r+` > iframe.zoid-visible {
                opacity: 1;
        }
        `)),y.appendChild(n),y.appendChild(i),y.appendChild(m),i.classList.add("zoid-visible"),n.classList.add("zoid-invisible"),d.on(Ee.RENDERED,function(){i.classList.remove("zoid-visible"),i.classList.add("zoid-invisible"),n.classList.remove("zoid-invisible"),n.classList.add("zoid-visible"),setTimeout(function(){Ur(i)},1)}),d.on(Ee.RESIZE,function(p){var g=p.width,E=p.height;typeof g=="number"&&(y.style.width=Li(g)),typeof E=="number"&&(y.style.height=Li(E))}),y}}function $u(e){var r=e.doc,n=e.props,i=r.createElement("html"),a=r.createElement("body"),c=r.createElement("style"),d=r.createElement("div");return d.classList.add("spinner"),n.cspNonce&&c.setAttribute("nonce",n.cspNonce),i.appendChild(a),a.appendChild(d),a.appendChild(c),c.appendChild(r.createTextNode(`
            html, body {
                width: 100%;
                height: 100%;
            }

            .spinner {
                position: fixed;
                max-height: 60vmin;
                max-width: 60vmin;
                height: 40px;
                width: 40px;
                top: 50%;
                left: 50%;
                box-sizing: border-box;
                border: 3px solid rgba(0, 0, 0, .2);
                border-top-color: rgba(33, 128, 192, 0.8);
                border-radius: 100%;
                animation: rotation .7s infinite linear;
            }

            @keyframes rotation {
                from {
                    transform: translateX(-50%) translateY(-50%) rotate(0deg);
                }
                to {
                    transform: translateX(-50%) translateY(-50%) rotate(359deg);
                }
            }
        `)),i}var To=vn(),Ro=vn();function Hu(e){var r=function(E){var R=E.tag,O=E.url,A=E.domain,L=E.bridgeUrl,V=E.props,_=V===void 0?{}:V,$=E.dimensions,U=$===void 0?{}:$,X=E.autoResize,B=X===void 0?{}:X,ce=E.allowedParentDomains,ne=ce===void 0?"*":ce,K=E.attributes,H=K===void 0?{}:K,ue=E.defaultContext,k=ue===void 0?Se.IFRAME:ue,Oe=E.containerTemplate,xt=Oe===void 0?Bu:Oe,vt=E.prerenderTemplate,$t=vt===void 0?$u:vt,Ht=E.validate,Wt=E.eligible,Vt=Wt===void 0?function(){return{eligible:!0}}:Wt,Gt=E.logger,rr=Gt===void 0?{info:ye}:Gt,Jt=E.exports,Rt=Jt===void 0?ye:Jt,nr=E.method,Kt=E.children,Yt=Kt===void 0?function(){return{}}:Kt,or=R.replace(/-/g,"_"),ir=P({},{window:{type:ve.OBJECT,sendToChild:!1,required:!1,allowDelegate:!0,validate:function(oe){var wt=oe.value;if(!kt(wt)&&!pt.isProxyWindow(wt))throw new Error("Expected Window or ProxyWindow");if(kt(wt)){if(xe(wt))throw new Error("Window is closed");if(!D(wt))throw new Error("Window is not same domain")}},decorate:function(oe){return qr(oe.value)}},timeout:{type:ve.NUMBER,required:!1,sendToChild:!1},cspNonce:{type:ve.STRING,required:!1},onDisplay:{type:ve.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:_t,decorate:tr},onRendered:{type:ve.FUNCTION,required:!1,sendToChild:!1,default:_t,decorate:tr},onRender:{type:ve.FUNCTION,required:!1,sendToChild:!1,default:_t,decorate:tr},onPrerendered:{type:ve.FUNCTION,required:!1,sendToChild:!1,default:_t,decorate:tr},onPrerender:{type:ve.FUNCTION,required:!1,sendToChild:!1,default:_t,decorate:tr},onClose:{type:ve.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:_t,decorate:tr},onDestroy:{type:ve.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:_t,decorate:tr},onResize:{type:ve.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:_t},onFocus:{type:ve.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:_t},close:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.close}},focus:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.focus}},resize:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.resize}},uid:{type:ve.STRING,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.uid}},tag:{type:ve.STRING,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.tag}},getParent:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.getParent}},getParentDomain:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.getParentDomain}},show:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.show}},hide:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.hide}},export:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.export}},onError:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.onError}},onProps:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.onProps}},getSiblings:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.getSiblings}}},_);if(!xt)throw new Error("Container template required");return{name:or,tag:R,url:O,domain:A,bridgeUrl:L,method:nr,propsDef:ir,dimensions:U,autoResize:B,allowedParentDomains:ne,attributes:H,defaultContext:k,containerTemplate:xt,prerenderTemplate:$t,validate:Ht,logger:rr,eligible:Vt,children:Yt,exports:typeof Rt=="function"?Rt:function(oe){for(var wt=oe.getExports,se={},ze=function(){var Te=Le[De],ke=Rt[Te].type,_e=wt().then(function(We){return We[Te]});se[Te]=ke===ve.FUNCTION?function(){for(var We=arguments.length,mt=new Array(We),ot=0;ot<We;ot++)mt[ot]=arguments[ot];return _e.then(function(St){return St.apply(void 0,mt)})}:_e},De=0,Le=Object.keys(Rt);De<Le.length;De++)ze();return se}}}(e),n=r.name,i=r.tag,a=r.defaultContext,c=r.propsDef,d=r.eligible,h=r.children,l=Br(window),w={},y=[],m=function(){if(function(R){try{return bo(window.name).name===R}catch{}return!1}(n)){var E=pa().payload;if(E.tag===i&&ft(E.childDomainMatch,C()))return!0}return!1},p=jt(function(){if(m()){if(window.xprops)throw delete l.components[i],new Error("Can not register "+n+" as child - child already registered");var E=function(R){var O=R.tag,A=R.propsDef,L=R.autoResize,V=R.allowedParentDomains,_=[],$=pa(),U=$.parent,X=$.payload,B=U.win,ce=U.domain,ne,K=new S,H=X.version,ue=X.uid,k=X.exports,Oe=X.context,xt=X.props;if(!function(se,ze){if(!/_/.test(se)||!/_/.test("10_3_3"))throw new Error("Versions are in an invalid format ("+se+", 10_3_3)");return se.split("_")[0]==="10_3_3".split("_")[0]}(H))throw new Error("Parent window has zoid version "+H+", child window has version 10_3_3");var vt=k.show,$t=k.hide,Ht=k.close,Wt=k.onError,Vt=k.checkClose,Gt=k.export,rr=k.resize,Jt=k.init,Rt=function(){return B},nr=function(){return ce},Kt=function(se){return _.push(se),{cancel:function(){_.splice(_.indexOf(se),1)}}},Yt=function(se){return rr.fireAndForget({width:se.width,height:se.height})},or=function(se){return K.resolve(se),Gt(se)},ir=function(se){var ze=(se===void 0?{}:se).anyParent,De=[],Le=ne.parent;if(ze===void 0&&(ze=!Le),!ze&&!Le)throw new Error("No parent found for "+O+" child");for(var Te=0,ke=Re(window);Te<ke.length;Te++){var _e=ke[Te];if(D(_e)){var We=J(_e).xprops;if(We&&Rt()===We.getParent()){var mt=We.parent;if(ze||!Le||mt&&mt.uid===Le.uid){var ot=da(_e,function(St){return St.exports});De.push({props:We,exports:ot})}}}}return De},oe=function(se,ze,De){De===void 0&&(De=!1);var Le=function(ke,_e,We,mt,ot,St){St===void 0&&(St=!1);for(var Mt={},Sr=0,Or=Object.keys(We);Sr<Or.length;Sr++){var ar=Or[Sr],it=_e[ar],$r=it&&it.trustedDomains&&it.trustedDomains.length>0?it.trustedDomains.reduce(function(Sn,Gr){return Sn||ft(Gr,C(window))},!1):mt===C(window)||D(ke);if((!it||!it.sameDomain||$r)&&(!it||!it.trustedDomains||$r)){var Hr=va(_e,0,ar,We[ar],ot);Mt[ar]=Hr,it&&it.alias&&!Mt[it.alias]&&(Mt[it.alias]=Hr)}}if(!St)for(var xr=0,Rn=Object.keys(_e);xr<Rn.length;xr++){var Vr=Rn[xr];We.hasOwnProperty(Vr)||(Mt[Vr]=va(_e,0,Vr,void 0,ot))}return Mt}(B,A,se,ze,{tag:O,show:vt,hide:$t,close:Ht,focus:Fu,onError:Wt,resize:Yt,getSiblings:ir,onProps:Kt,getParent:Rt,getParentDomain:nr,uid:ue,export:or},De);ne?Tr(ne,Le):ne=Le;for(var Te=0;Te<_.length;Te++)(0,_[Te])(ne)},wt=function(se){return S.try(function(){return oe(se,ce,!0)})};return{init:function(){return S.try(function(){var se="";return D(B)&&(se=function(ze){var De=ze.componentName,Le=ze.parentComponentWindow,Te=la({data:bo(window.name).serializedInitialPayload,sender:{win:Le},basic:!0}),ke=Te.sender;if(Te.reference.type==="uid"||Te.metaData.windowRef.type==="global"){var _e=ha({name:De,serializedPayload:fa({data:Te.data,metaData:{windowRef:Mu(Le)},sender:{domain:ke.domain},receiver:{win:window,domain:C()},basic:!0}).serializedData});return window.name=_e,_e}}({componentName:R.name,parentComponentWindow:B})||""),Br(window).exports=R.exports({getExports:function(){return K}}),function(ze,De){if(!ft(ze,De))throw new Error("Can not be rendered by domain: "+De)}(V,ce),Vi(B),function(){window.addEventListener("beforeunload",function(){Vt.fireAndForget()}),window.addEventListener("unload",function(){Vt.fireAndForget()}),wi(B,function(){wa()})}(),Jt({name:se,updateProps:wt,close:wa})}).then(function(){return(se=L.width,ze=se!==void 0&&se,De=L.height,Le=De!==void 0&&De,Te=L.element,Ci(Te===void 0?"body":Te).catch(ye).then(function(ke){return{width:ze,height:Le,element:ke}})).then(function(ke){var _e=ke.width,We=ke.height,mt=ke.element;mt&&(_e||We)&&Oe!==Se.POPUP&&Mi(mt,function(ot){Yt({width:_e?ot.width:void 0,height:We?ot.height:void 0})},{width:_e,height:We})});var se,ze,De,Le,Te}).catch(function(se){Wt(se)})},getProps:function(){return ne||(oe(xt,ce),ne)}}}(r);return E.init(),E}}),g=function E(R){var O,A="zoid-"+i+"-"+Xe(),L=R||{},V=d({props:L}),_=V.eligible,$=V.reason,U=L.onDestroy;L.onDestroy=function(){if(O&&_&&y.splice(y.indexOf(O),1),U)return U.apply(void 0,arguments)};var X=ga({uid:A,options:r});X.init(),_?X.setProps(L):L.onDestroy&&L.onDestroy(),To.register(function(ne){return X.destroy(ne||new Error("zoid destroyed all components"))});var B=function(ne){var K=(ne===void 0?{}:ne).decorate;return E((K===void 0?bu:K)(L))},ce=function(ne,K,H){return S.try(function(){if(!_){var ue=new Error($||n+" component is not eligible");return X.destroy(ue).then(function(){throw ue})}if(!kt(ne))throw new Error("Must pass window to renderTo");return function(k,Oe){return S.try(function(){if(k.window)return qr(k.window).getType();if(Oe){if(Oe!==Se.IFRAME&&Oe!==Se.POPUP)throw new Error("Unrecognized context: "+Oe);return Oe}return a})}(L,H)}).then(function(ue){if(K=function(k,Oe){if(Oe){if(typeof Oe!="string"&&!Yn(Oe))throw new TypeError("Expected string or element selector to be passed");return Oe}if(k===Se.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(ue,K),ne!==window&&typeof K!="string")throw new Error("Must pass string element when rendering to another window");return X.render({target:ne,container:K,context:ue,rerender:function(){var k=B();return Tr(O,k),k.renderTo(ne,K,H)}})}).catch(function(ue){return X.destroy(ue).then(function(){throw ue})})};return O=P({},X.getExports(),X.getHelpers(),function(){for(var ne=h(),K={},H=function(){var Oe=k[ue],xt=ne[Oe];K[Oe]=function(vt){var $t=X.getProps(),Ht=P({},vt,{parent:{uid:A,props:$t,export:X.export}});return xt(Ht)}},ue=0,k=Object.keys(ne);ue<k.length;ue++)H();return K}(),{isEligible:function(){return _},clone:B,render:function(ne,K){return ce(window,ne,K)},renderTo:function(ne,K,H){return ce(ne,K,H)}}),_&&y.push(O),O};if(p(),function(){var E=At("zoid_allow_delegate_"+n,function(){return!0}),R=At("zoid_delegate_"+n,function(O){var A=O.data;return{parent:ga({uid:A.uid,options:r,overrides:A.overrides,parentWin:O.source})}});Ro.register(E.cancel),Ro.register(R.cancel)}(),l.components=l.components||{},l.components[i])throw new Error("Can not register multiple components with the same tag: "+i);return l.components[i]=!0,{init:g,instances:y,driver:function(E,R){var O={react:zu,angular:ju,vue:Lu,vue3:Uu,angular2:qu};if(!O[E])throw new Error("Could not find driver for framework: "+E);return w[E]||(w[E]=O[E].register(i,c,g,R)),w[E]},isChild:m,canRenderTo:function(E){return Tt(E,"zoid_allow_delegate_"+n).then(function(R){return R.data}).catch(function(){return!1})},registerChild:p}}var Vu=function(e){(function(){Ot().initialized||(Ot().initialized=!0,c=(a={on:At,send:Tt}).on,d=a.send,(h=Ot()).receiveMessage=h.receiveMessage||function(l){return yo(l,{on:c,send:d})},function(l){var w=l.on,y=l.send;he().getOrSet("postMessageListener",function(){return _i(window,"message",function(m){(function(p,g){var E=g.on,R=g.send;S.try(function(){var O=p.source||p.sourceElement,A=p.origin||p.originalEvent&&p.originalEvent.origin,L=p.data;if(A==="null"&&(A="file://"),O){if(!A)throw new Error("Post message did not have origin domain");yo({source:O,origin:A,data:L},{on:E,send:R})}})})(m,{on:w,send:y})})})}({on:At,send:Tt}),ki({on:At,send:Tt,receiveMessage:yo}),function(l){var w=l.on,y=l.send;he("builtinListeners").getOrSet("helloListener",function(){var m=w("postrobot_hello",{domain:"*"},function(g){return Bi(g.source,{domain:g.origin}),{instanceID:qi()}}),p=Xt();return p&&co(p,{send:y}).catch(function(g){}),m})}({on:At,send:Tt}));var a,c,d,h})();var r=Hu(e),n=function(a){return r.init(a)};n.driver=function(a,c){return r.driver(a,c)},n.isChild=function(){return r.isChild()},n.canRenderTo=function(a){return r.canRenderTo(a)},n.instances=r.instances;var i=r.registerChild();return i&&(window.xprops=n.xprops=i.getProps()),n};function ya(e){Bt&&Bt.destroyBridges();var r=To.all(e);return To=vn(),r}var Ea=ya;function Gu(e){return Ea(),delete window.__zoid_10_3_3__,function(){(function(){for(var n=he("responseListeners"),i=0,a=n.keys();i<a.length;i++){var c=a[i],d=n.get(c);d&&(d.cancelled=!0),n.del(c)}})(),(r=he().get("postMessageListener"))&&r.cancel();var r;delete window.__post_robot_11_0_0__}(),Ro.all(e)}}])})})(fi);var li=fi.exports;const hi=li.EVENT,pr={VISIBLE:"zoid-visible",INVISIBLE:"zoid-invisible"};function du({uid:t,frame:o,prerenderFrame:s,doc:u,props:f,event:v,dimensions:T}){const{width:P,height:I}=T,{top:M=0,left:b=0}=f;if(!o||!s)return;const F=u.createElement("div");F.setAttribute("id",t);const z=u.createElement("style");return f.cspNonce&&z.setAttribute("nonce",f.cspNonce),z.appendChild(u.createTextNode(`
          #${t} {
              display: inline-block;
              position: absolute;
              width: ${P};
              height: ${I};
              z-index: 1049;
              border: none;
              top: ${M}px;
              left: ${b}px;
              overflow: hidden;
          }

          #${t} > iframe {
              display: inline-block;
              position: absolute;
              width: 100%;
              height: 100%;
              top: 0;
              left: 0;
              transition: opacity .2s ease-in-out;
              border: none;
              background-color: transparent;
              overflow: hidden;
          }

          #${t} > iframe.${pr.INVISIBLE} {
              opacity: 0;
          }

          #${t} > iframe.${pr.VISIBLE} {
              opacity: 1;
        }
      `)),F.appendChild(o),F.appendChild(s),F.appendChild(z),s.classList.add(pr.INVISIBLE),o.classList.add(pr.INVISIBLE),v.on(hi.RENDERED,()=>{setTimeout(()=>{o.classList.remove(pr.INVISIBLE),o.classList.add(pr.VISIBLE)},100),setTimeout(()=>{s.remove()},1)}),v.on(hi.RESIZE,({width:re,height:ae})=>{typeof re=="number"&&(F.style.width=`${re}px`),typeof ae=="number"&&(F.style.height=`${ae}px`)}),F}function fu(t){return li.create({dimensions:{width:"100%",height:"100%"},tag:`wta${t}`,url:({props:o})=>o.appConfig.sdkBaseUrl,props:{appConfig:{type:"object",required:!0},icons:{type:"array",required:!0}},containerTemplate:du})}function lu(t){return fu(t.id)(t)}function hu(t){return new Promise((o,s)=>{const u=document.createElement("script");u.async=!0,u.src=t,u.onload=o,u.onerror=s,document.body.appendChild(u)})}let vr=null;function pi(){vr=null}function pu(t){const o=window;return o.Go?Promise.resolve(o.wasm):vr||(vr=hu(t).then(()=>o.Go),vr.then(pi).catch(pi),vr)}class wr{constructor(){return wr.instance?wr.instance:(this.session=null,this.go=null,this.buffer=null,this.audioMediaSequence={},wr.instance=this,this)}async init(o){if(!this.buffer){const u=await(await fetch(o)).arrayBuffer();this.buffer=u}return wr.instance}async loadSource(o){this.session&&(o.session=this.session);const s=JSON.stringify(o),u=new Go,f=await WebAssembly.instantiate(this.buffer,u.importObject);u.run(f.instance);let v;for(let T=1;T<=3;T++)try{v=await window.loadSource(s);break}catch(P){if(console.log(`Attempt ${T} failed:`,P),T===3)throw console.log("session:",this.session),P}if(v.session!=""&&(this.session=v.session),v.error)throw new Error(v.error);return v.manifest}async getEventTracking(){if(this.session){const o=window.getEventTracking(this.session);if(o.error)throw new Error(o.error);return{avails:JSON.parse(o.avails)}}return null}}function vi({adsUrl:t,sdk:o,loader:s}){return class extends s{constructor(f){super(f)}load(f,v,T){const P=T.onSuccess;T.onSuccess=async(I,M,b)=>{(b.type==="manifest"||b.type==="level"||b.type==="audioTrack")&&(I.data=await this.modifyManifest(I.url,I.data,b.type)),P(I,M,b)},super.load(f,v,T)}async modifyManifest(f,v,T){const P={proxyAds:{uri:t,timeout:2}};try{return await o.loadSource({config:P,manifest:v,masterUri:f})}catch(I){return console.error("[LOG] ~ error:",I),v}}}}function vu({video:t,adContainer:o,startSession:s,sdk:u,domain:f}){const v=su(),T=Ct(!1),P=Ct(),I=Math.random().toString(36).slice(6);function M({icons:C}){const D=Dr(f,"/build/dist/wta/index.html");return{id:I,appConfig:{sdkBaseUrl:Zr(D||"https://localhost:4222/wta/index.html",{id:I})},icons:C}}if(!!o){const C=lu(M({icons:[]}));C.render(o),C.hide(),o.style.display="none",Fs(()=>{var D;if(P.value){const J=((D=P.value)==null?void 0:D.icons)||[];o.style.display="block",C.updateProps(M({icons:J})),C.show()}else o.style.display="none",C.hide()})}const F=Ct([]),z=Ct(),re=Ct([]);async function ae(C){var J;const D=(J=P.value)==null?void 0:J.trackingEvents.find(we=>we.eventType===C);D&&(v.trigger(D),await Promise.all(D.beaconUrls.map(we=>uu(Ts(we,{retry:3,retryDelay:500})))))}const dt=new Map;let S,yt;function Ze(C,D,J){C.addEventListener(D,J),dt.set(D,J)}function Pt(C){var Je,Ke;const D=((C==null?void 0:C.time)||0)>0?C.time:0,J=(Je=C==null?void 0:C.value)==null?void 0:Je.event,we=re.value.find(Re=>Re.eventType===J&&!Re.tracked&&!Re.skipped);if(!we)return;const et=we==null?void 0:we.ad;if(et)if(J==="start")P.value&&re.value.filter(Qe=>Qe.key.startsWith(`${P.value.key}_`)).forEach(Qe=>Qe.skipped=!0),P.value=et,s(et.adVerifications,v),S=_n(()=>{ae("impression"),ae("start");const Re=re.value.find(Qe=>Qe.key===we.key.replace("_start","_impression"));Re&&(Re.tracked=!0),we.tracked=!0,yt=_n(()=>{P.value=void 0},3e4)},D*1e3);else{if(!P.value)return;if(et.id!==((Ke=P.value)==null?void 0:Ke.id)){re.value.filter(Qe=>Qe.key.startsWith(`${P.value.key}_`)).forEach(Qe=>Qe.skipped=!0);return}S=_n(()=>{ae(J),J==="complete"&&et.id===P.value.id&&(P.value=void 0,An(yt)),we.tracked=!0},D*1e3)}}function mr(){return T.value=!1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(C=>{Ze(t,C,()=>{const D=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;ae(D?"fullscreen":"exitFullscreen")})}),Ze(t,"pause",()=>ae("pause")),Ze(t,"play",()=>ae("resume")),Ze(t,"rewind",()=>ae("rewind")),Ze(t,"mute",()=>ae("mute")),Ze(t,"unmute",()=>ae("unmute")),async(C,D)=>{if(z.value=D.frag.sn,C!==window.Hls.Events.FRAG_CHANGED)return;const J=F.value.filter(we=>we.sn===D.frag.sn);J.length&&(J.forEach(we=>Pt(we)),F.value=F.value.filter(we=>we.sn!==D.frag.sn))}}async function Qt(){return u.getEventTracking().then(C=>{for(const D of(C==null?void 0:C.avails)||[])for(const J of D.ads){const we=`${D.id}_${J.id}_${J.startTimeInSeconds}`;for(const et of J.trackingEvents){const Je=`${we}_${et.eventType}`;re.value.find(Re=>Re.key===Je)||re.value.push({...et,key:Je,ad:{...J,key:we},tracked:!1})}}})}function gr(){return async(C,D)=>{function J(Je){for(let Ke=0;Ke<Je.length;Ke++)if(Je[Ke]===0)return Ke;return Je.length}const{start:we,sn:et}=D.frag;for(let Je=0;Je<D.samples.length;Je++){const Ke=D.samples[Je],Re=Ke.data,Qe=Ke.pts;if(String.fromCharCode.apply(null,Re.slice(0,3))!=="ID3"||String.fromCharCode.apply(null,Re.slice(10,14))!=="TXXX")continue;const yr=Re.slice(21,Re.length),Er=J(yr),Wr=yr.slice(Er+1,yr.length),Xt=J(Wr),Mr=new TextDecoder("utf-8").decode(Wr.slice(0,Xt)),br={sn:et,time:Qe-we,value:Cn(Mr)};if(z.value&&et<z.value)return;F.value.push(br),br.value.event==="start"&&Qt()}}}function nt(){return C=>{const D=C.track;D.kind==="metadata"&&(D.oncuechange=async()=>{const J=D.activeCues[0];if(J&&J.value.data){await Qt();const we=Cn(J.value.data);Pt({value:we})}})}}function ie(C,D){v.on(J=>{(C==="*"||J.eventType===C)&&D(J)})}function He(){P.value=void 0,F.value=[],re.value=[],An(S),An(yt),dt.forEach((C,D)=>{t.removeEventListener(D,C)}),dt.clear()}function ut(){return{eventTracking:F,trackingDataEvent:re}}return{destroy:He,onEventTracking:ie,hlsHelper:{createHlsFragChanged:mr,createHlsFragParsingMetadata:gr},videojsHelper:{createVideojsAddTrack:nt},getLog:ut}}async function wu({video:t,adContainer:o,adsUrl:s,baseURL:u}){const f=u||"https://cdn.jsdelivr.net/gh/sigmaott/sigma-ssai-web-sdk@v1.1.1",v=Dr(f,"/build/dist/wasm_exec.js")||"https://localhost:4222/wasm_exec.js";await pu(v);const T=new wr;await T.init(Dr(f,"/build/dist/sigma-cspm.wasm")||"https://localhost:4222/sigma-cspm.wasm");function P(){}const{onEventTracking:I,destroy:M,videojsHelper:b,hlsHelper:F,getLog:z}=vu({video:t,adContainer:o,trackingUrl:"",startSession:P,sdk:T,domain:f}),re=Ct(),ae=Ct();function dt(ie){ie.config.loader=vi({adsUrl:s,sdk:T,loader:Hls.DefaultConfig.loader}),re.value=ie;const He=F.createHlsFragChanged(),ut=F.createHlsFragParsingMetadata();ie.on("hlsFragChanged",He),ie.on("hlsFragParsingMetadata",ut),ie.on(Hls.Events.ERROR,(C,D)=>{console.error("HLS Error:",C,D),D.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",D.details):D.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",D.details):console.error("Other Error:",D.details)}),ae.value=()=>{ie.off("hlsFragChanged",He),ie.off("hlsFragParsingMetadata",ut)}}function S(ie){ie.hls.config.loader=vi({adsUrl:s,sdk:T,loader:SigmaManager.DefaultConfig.loader}),re.value=ie.hls;const He=F.createHlsFragChanged(),ut=F.createHlsFragParsingMetadata();ie.hls.on("hlsFragChanged",He),ie.hls.on("hlsFragParsingMetadata",ut),ie.on(SigmaManager.Events.ERROR,(C,D)=>{console.error("HLS Error:",C,D),D.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",D.details):D.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",D.details):console.error("Other Error:",D.details)}),ae.value=()=>{ie.hls.destroy()}}const yt=Ct(),Ze=Ct(),mr={instance:T,config:{proxyAds:{uri:s,timeout:2}}};function Qt(ie){yt.value=ie;const He=b.createVideojsAddTrack();ie.textTracks().on("addtrack",He),Ze.value=()=>{ie.textTracks().off("addtrack",He)}}function gr(ie,He){ie.getNetworkingEngine().registerRequestFilter((ut,C)=>{}),ie.getNetworkingEngine().registerResponseFilter(async(ut,C)=>{if(ut===0){const D=new TextDecoder().decode(C.data),J=await T.loadSource({config:{proxyAds:{uri:s,timeout:2e3}},masterUri:He,manifest:D});C.data=new TextEncoder().encode(J)}})}function nt(){var ie,He;M(),(ie=ae.value)==null||ie.call(ae),(He=Ze.value)==null||He.call(Ze),re.value=null,yt.value=null,ae.value=null,Ze.value=null}return{onEventTracking:I,destroy:nt,sigmaPlayer:{attachVideojs:Qt,attachHls:dt,attachSigmaDrm:S,getLog:z,attachShaka:gr},sdk:T,cspm:mr}}window.videojs&&(window.videojs.VERSION==="7.10.2"?(function(t){const o=t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist;t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist=async function(s){if(this.vhs_.options_.cspm)try{const f=await(await fetch(this.src)).text();await this.vhs_.options_.cspm.instance.loadSource({config:this.vhs_.options_.cspm.config,manifest:f,masterUri:this.src})}catch(u){console.error("Error loading source:",u)}o.apply(this,[s])}}(videojs),function(t){const o=t.Vhs.PlaylistLoader.prototype.haveMetadata;t.Vhs.PlaylistLoader.prototype.haveMetadata=async function({playlistString:s,playlistObject:u,url:f,id:v}){const T=this.vhs_.options_.cspm.config;try{s&&this.vhs_.options_.cspm&&(console.log(this.master.playlists[v].resolvedUri),s=await this.vhs_.options_.cspm.instance.loadSource({config:T,manifest:s,masterUri:this.master.playlists[v].resolvedUri})),o.apply(this,[{playlistString:s,playlistObject:u,url:f,id:v}])}catch(P){console.error("Error loading source:",P)}}}(videojs),function(t){const o=(s,u,f)=>s&&f&&f.responseURL&&u!==f.responseURL?f.responseURL:u;t.Vhs.PlaylistLoader.prototype.media=function(s,u){if(!s)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof s=="string"){if(!this.master.playlists[s])throw new Error("Unknown playlist URI: "+s);s=this.master.playlists[s]}if(window.clearTimeout(this.finalRenditionTimeout),u){const T=s.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,s,!1),T);return}const f=this.state,v=!this.media_||s.id!==this.media_.id;if(this.master.playlists[s.id].endList||s.endList&&s.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=s,v&&(this.trigger("mediachanging"),f==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(v){if(this.state="SWITCHING_MEDIA",this.request){if(s.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:s.resolvedUri,withCredentials:this.withCredentials},(T,P)=>{if(this.request){if(s.resolvedUri=o(this.handleManifestRedirects,s.resolvedUri,P),T)return this.playlistRequestError(this.request,s,f);this.haveMetadata({playlistString:P.responseText,url:s.uri,id:s.id}).then(()=>{f==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")})}})}}}(videojs)):(function(t){const o=t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist;t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist=async function(s){if(s.manifestString&&this.vhs_.options_.cspm)try{await this.vhs_.options_.cspm.instance.loadSource({config:this.vhs_.options_.cspm.config,manifest:s.manifestString,masterUri:this.src})}catch(u){console.error("Error loading source:",u)}o.apply(this,[s])}}(videojs),function(t){const o=t.Vhs.PlaylistLoader.prototype.parseManifest_;t.Vhs.PlaylistLoader.prototype.parseManifest_=function({url:s,manifestString:u}){const f=o.apply(this,[{url:s,manifestString:u}]);return f.playlists&&f.playlists.length&&(f.manifestString=u),f}}(videojs),function(t){const o=t.Vhs.PlaylistLoader.prototype.haveMetadata;t.Vhs.PlaylistLoader.prototype.haveMetadata=async function({playlistString:s,playlistObject:u,url:f,id:v}){try{if(s&&this.vhs_.options_.cspm){const T=this.vhs_.options_.cspm.config;s=await this.vhs_.options_.cspm.instance.loadSource({config:T,manifest:s,masterUri:this.main.playlists[v].resolvedUri})}o.apply(this,[{playlistString:s,playlistObject:u,url:f,id:v}])}catch(T){console.error("Error loading source:",T)}}}(videojs),function(t){const o=(u,f)=>{const v=u.segments||[],T=v[v.length-1],P=T&&T.parts&&T.parts[T.parts.length-1],I=P&&P.duration||T&&T.duration;return I?I*1e3:(u.partTargetDuration||u.targetDuration||10)*500},s=(u,f)=>f&&f.responseURL&&u!==f.responseURL?f.responseURL:u;t.Vhs.PlaylistLoader.prototype.media=function(u,f){if(!u)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error(`Cannot switch media playlist from ${this.state}`);if(typeof u=="string"){if(!this.main.playlists[u])throw new Error(`Unknown playlist URI: ${u}`);u=this.main.playlists[u]}if(window.clearTimeout(this.finalRenditionTimeout),f){const M=(u.partTargetDuration||u.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,u,!1),M);return}const v=this.state,T=!this.media_||u.id!==this.media_.id,P=this.main.playlists[u.id];if(P&&P.endList||u.endList&&u.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=u,T&&(this.trigger("mediachanging"),v==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(o(u)),!T)return;if(this.state="SWITCHING_MEDIA",this.request){if(u.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=u;const I={playlistInfo:{type:"media",uri:u.uri}};this.trigger({type:"playlistrequeststart",metadata:I}),this.request=this.vhs_.xhr({uri:u.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(M,b)=>{if(this.request){if(u.lastRequest=Date.now(),u.resolvedUri=s(u.resolvedUri,b),M)return this.playlistRequestError(this.request,u,v);this.haveMetadata({playlistString:b.responseText,url:u.uri,id:u.id}).then(()=>{this.trigger({type:"playlistrequestcomplete",metadata:I}),v==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")})}})}}(videojs)));function mu(t){const o="https://dai.sigma.video/api/proxy-ads/ads/",s=Nn(t),u=`${s.protocol}//${s.host}${s.pathname}`;if(!s.search)return{playerUrl:t,adsUrl:null};const f=ts(t),v=f["sigma.dai.adsEndpoint"];if(!v)return{playerUrl:t,adsUrl:null};const T={},P={};for(const[M,b]of Object.entries(f))M.startsWith("sigma.dai")?M!=="sigma.dai.adsEndpoint"&&(T[M.replace("sigma.dai.","")]=b):P[M]=b;return{playerUrl:Zr(u,P),adsUrl:Zr(Dr(o,v),T)}}return Yr.createSigmaDai=wu,Yr.processURL=mu,Object.defineProperty(Yr,Symbol.toStringTag,{value:"Module"}),Yr}({});
