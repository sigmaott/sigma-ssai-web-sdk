var SigmaDaiSdk=function(Ot){"use strict";var hu=Object.defineProperty;var pu=(Ot,Mt,mr)=>Mt in Ot?hu(Ot,Mt,{enumerable:!0,configurable:!0,writable:!0,value:mr}):Ot[Mt]=mr;var Tt=(Ot,Mt,mr)=>pu(Ot,typeof Mt!="symbol"?Mt+"":Mt,mr);const Mt=/#/g,mr=/&/g,Ba=/\//g,ja=/=/g,Dn=/\+/g,qa=/%5e/gi,$a=/%60/gi,Ha=/%7c/gi,Va=/%20/gi;function Ga(t){return encodeURI(""+t).replace(Ha,"|")}function Cn(t){return Ga(typeof t=="string"?t:JSON.stringify(t)).replace(Dn,"%2B").replace(Va,"+").replace(Mt,"%23").replace(mr,"%26").replace($a,"`").replace(qa,"^").replace(Ba,"%2F")}function _n(t){return Cn(t).replace(ja,"%3D")}function Do(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function Ja(t){return Do(t.replace(Dn," "))}function Ka(t){return Do(t.replace(Dn," "))}function Co(t=""){const o={};t[0]==="?"&&(t=t.slice(1));for(const s of t.split("&")){const d=s.match(/([^=]+)=?(.*)/)||[];if(d.length<2)continue;const f=Ja(d[1]);if(f==="__proto__"||f==="constructor")continue;const g=Ka(d[2]||"");o[f]===void 0?o[f]=g:Array.isArray(o[f])?o[f].push(g):o[f]=[o[f],g]}return o}function Ya(t,o){return(typeof o=="number"||typeof o=="boolean")&&(o=String(o)),o?Array.isArray(o)?o.map(s=>`${_n(t)}=${Cn(s)}`).join("&"):`${_n(t)}=${Cn(o)}`:_n(t)}function Za(t){return Object.keys(t).filter(o=>t[o]!==void 0).map(o=>Ya(o,t[o])).filter(Boolean).join("&")}const Xa=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Qa=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,ka=/^([/\\]\s*){2,}[^/\\]/,es=/^\.?\//;function _o(t,o={}){return typeof o=="boolean"&&(o={acceptRelative:o}),o.strict?Xa.test(t):Qa.test(t)||(o.acceptRelative?ka.test(t):!1)}function ts(t="",o){return t.endsWith("/")}function rs(t="",o){return(ts(t)?t.slice(0,-1):t)||"/"}function ns(t="",o){return t.endsWith("/")?t:t+"/"}function os(t,o){if(as(o)||_o(t))return t;const s=rs(o);return t.startsWith(s)?t:en(s,t)}function kr(t,o){const s=Nn(t),d={...Co(s.search),...o};return s.search=Za(d),cs(s)}function is(t){return Co(Nn(t).search)}function as(t){return!t||t==="/"}function ss(t){return t&&t!=="/"}function en(t,...o){let s=t||"";for(const d of o.filter(f=>ss(f)))if(s){const f=d.replace(es,"");s=ns(s)+f}else s=d;return s}const No=Symbol.for("ufo:protocolRelative");function Nn(t="",o){const s=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(s){const[,C,N=""]=s;return{protocol:C.toLowerCase(),pathname:N,href:C+N,auth:"",host:"",search:"",hash:""}}if(!_o(t,{acceptRelative:!0}))return Ao(t);const[,d="",f,g=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,b="",w=""]=g.match(/([^#/?]*)(.*)?/)||[];d==="file:"&&(w=w.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:S,search:D,hash:E}=Ao(w);return{protocol:d.toLowerCase(),auth:f?f.slice(0,Math.max(0,f.length-1)):"",host:b,pathname:S,search:D,hash:E,[No]:!d}}function Ao(t=""){const[o="",s="",d=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:o,search:s,hash:d}}function cs(t){const o=t.pathname||"",s=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",d=t.hash||"",f=t.auth?t.auth+"@":"",g=t.host||"";return(t.protocol||t[No]?(t.protocol||"")+"//":"")+f+g+o+s+d}const us=t=>(o,s)=>(t.set(o,s),s),Wo=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,Mo=536870912,Fo=Mo*2,ds=(t,o)=>s=>{const d=o.get(s);let f=d===void 0?s.size:d<Fo?d+1:0;if(!s.has(f))return t(s,f);if(s.size<Mo){for(;s.has(f);)f=Math.floor(Math.random()*Fo);return t(s,f)}if(s.size>Wo)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;s.has(f);)f=Math.floor(Math.random()*Wo);return t(s,f)},Lo=new WeakMap,fs=us(Lo),tn=ds(fs,Lo),ls=t=>t.method!==void 0&&t.method==="call",hs=t=>typeof t.id=="number"&&typeof t.result=="boolean",ps=((t,o)=>{let s=null;return()=>{if(s!==null)return s;const d=new Blob([o],{type:"application/javascript; charset=utf-8"}),f=URL.createObjectURL(d);return s=t(f),setTimeout(()=>URL.revokeObjectURL(f)),s}})(t=>{const o=new Map([[0,()=>{}]]),s=new Map([[0,()=>{}]]),d=new Map,f=new Worker(t);return f.addEventListener("message",({data:D})=>{if(ls(D)){const{params:{timerId:E,timerType:C}}=D;if(C==="interval"){const N=o.get(E);if(typeof N===void 0)throw new Error("The timer is in an undefined state.");if(typeof N=="number"){const se=d.get(N);if(se===void 0||se.timerId!==E||se.timerType!==C)throw new Error("The timer is in an undefined state.")}else typeof N=="function"&&N()}else if(C==="timeout"){const N=s.get(E);if(typeof N===void 0)throw new Error("The timer is in an undefined state.");if(typeof N=="number"){const se=d.get(N);if(se===void 0||se.timerId!==E||se.timerType!==C)throw new Error("The timer is in an undefined state.")}else typeof N=="function"&&(N(),s.delete(E))}}else if(hs(D)){const{id:E}=D,C=d.get(E);if(C===void 0)throw new Error("The timer is in an undefined state.");const{timerId:N,timerType:se}=C;d.delete(E),se==="interval"?o.delete(N):s.delete(N)}else{const{error:{message:E}}=D;throw new Error(E)}}),{clearInterval:D=>{if(typeof o.get(D)=="function"){const E=tn(d);d.set(E,{timerId:D,timerType:"interval"}),o.set(D,E),f.postMessage({id:E,method:"clear",params:{timerId:D,timerType:"interval"}})}},clearTimeout:D=>{if(typeof s.get(D)=="function"){const E=tn(d);d.set(E,{timerId:D,timerType:"timeout"}),s.set(D,E),f.postMessage({id:E,method:"clear",params:{timerId:D,timerType:"timeout"}})}},setInterval:(D,E=0,...C)=>{const N=tn(o);return o.set(N,()=>{D(...C),typeof o.get(N)=="function"&&f.postMessage({id:null,method:"set",params:{delay:E,now:performance.timeOrigin+performance.now(),timerId:N,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:E,now:performance.timeOrigin+performance.now(),timerId:N,timerType:"interval"}}),N},setTimeout:(D,E=0,...C)=>{const N=tn(s);return s.set(N,()=>D(...C)),f.postMessage({id:null,method:"set",params:{delay:E,now:performance.timeOrigin+performance.now(),timerId:N,timerType:"timeout"}}),N}}},`(()=>{"use strict";const e=new Map,t=new Map,r=t=>{const r=e.get(t);return void 0!==r&&(clearTimeout(r),e.delete(t),!0)},s=e=>{const r=t.get(e);return void 0!==r&&(clearTimeout(r),t.delete(e),!0)},o=(e,t)=>{const r=performance.now(),s=e+t-r-performance.timeOrigin;return{expected:r+s,remainingDelay:s}},i=(e,t,r,s)=>{const o=r-performance.now();o>0?e.set(t,setTimeout(i,o,e,t,r,s)):(e.delete(t),postMessage({id:null,method:"call",params:{timerId:t,timerType:s}}))};addEventListener("message",(n=>{let{data:a}=n;try{if("clear"===a.method){const{id:e,params:{timerId:t,timerType:o}}=a;if("interval"===o)postMessage({id:e,result:r(t)});else{if("timeout"!==o)throw new Error('The given type "'.concat(o,'" is not supported'));postMessage({id:e,result:s(t)})}}else{if("set"!==a.method)throw new Error('The given method "'.concat(a.method,'" is not supported'));{const{params:{delay:r,now:s,timerId:n,timerType:m}}=a;if("interval"===m)((t,r,s)=>{const{expected:n,remainingDelay:a}=o(t,s);e.set(r,setTimeout(i,a,e,r,n,"interval"))})(r,n,s);else{if("timeout"!==m)throw new Error('The given type "'.concat(m,'" is not supported'));((e,r,s)=>{const{expected:n,remainingDelay:a}=o(e,s);t.set(r,setTimeout(i,a,t,r,n,"timeout"))})(r,n,s)}}}}catch(e){postMessage({error:{message:e.message},id:a.id,result:null})}}))})();`),zo=t=>ps().clearTimeout(t);/**
* @vue/shared v3.5.1
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function vs(t,o){const s=new Set(t.split(","));return d=>s.has(d)}const Uo=Object.assign,ws=Object.prototype.hasOwnProperty,An=(t,o)=>ws.call(t,o),yr=Array.isArray,Nr=t=>Bo(t)==="[object Map]",gs=t=>typeof t=="string",Ar=t=>typeof t=="symbol",rn=t=>t!==null&&typeof t=="object",ms=Object.prototype.toString,Bo=t=>ms.call(t),jo=t=>Bo(t).slice(8,-1),Wn=t=>gs(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ys=(t=>{const o=Object.create(null);return s=>o[s]||(o[s]=t(s))})(t=>t.charAt(0).toUpperCase()+t.slice(1)),Er=(t,o)=>!Object.is(t,o);var Ge={};function br(t,...o){console.warn(`[Vue warn] ${t}`,...o)}let we;const Mn=new WeakSet;class qo{constructor(o){this.fn=o,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Mn.has(this)&&(Mn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=Wr,Wr=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jo(this),Ho(this);const o=we,s=xt;we=this,xt=!0;try{return this.fn()}finally{Ge.NODE_ENV!=="production"&&we!==this&&br("Active effect was not restored correctly - this is likely a Vue internal bug."),Vo(this),we=o,xt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let o=this.deps;o;o=o.nextDep)Un(o);this.deps=this.depsTail=void 0,Jo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Mn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){zn(this)&&this.run()}get dirty(){return zn(this)}}let $o=0,Wr;function Fn(){$o++}function Ln(){if(--$o>0)return;let t;for(;Wr;){let o=Wr;for(Wr=void 0;o;){const s=o.nextEffect;if(o.nextEffect=void 0,o.flags&=-9,o.flags&1)try{o.trigger()}catch(d){t||(t=d)}o=s}}if(t)throw t}function Ho(t){for(let o=t.deps;o;o=o.nextDep)o.version=-1,o.prevActiveLink=o.dep.activeLink,o.dep.activeLink=o}function Vo(t){let o,s=t.depsTail;for(let d=s;d;d=d.prevDep)d.version===-1?(d===s&&(s=d.prevDep),Un(d),bs(d)):o=d,d.dep.activeLink=d.prevActiveLink,d.prevActiveLink=void 0;t.deps=o,t.depsTail=s}function zn(t){for(let o=t.deps;o;o=o.nextDep)if(o.dep.version!==o.version||o.dep.computed&&Es(o.dep.computed)===!1||o.dep.version!==o.version)return!0;return!!t._dirty}function Es(t){if(t.flags&2)return!1;if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===nn))return;t.globalVersion=nn;const o=t.dep;if(t.flags|=2,o.version>0&&!t.isSSR&&!zn(t)){t.flags&=-3;return}const s=we,d=xt;we=t,xt=!0;try{Ho(t);const f=t.fn();(o.version===0||Er(f,t._value))&&(t._value=f,o.version++)}catch(f){throw o.version++,f}finally{we=s,xt=d,Vo(t),t.flags&=-3}}function Un(t){const{dep:o,prevSub:s,nextSub:d}=t;if(s&&(s.nextSub=d,t.prevSub=void 0),d&&(d.prevSub=s,t.nextSub=void 0),o.subs===t&&(o.subs=s),!o.subs&&o.computed){o.computed.flags&=-5;for(let f=o.computed.deps;f;f=f.nextDep)Un(f)}}function bs(t){const{prevDep:o,nextDep:s}=t;o&&(o.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=o,t.nextDep=void 0)}function Ps(t,o){t.effect instanceof qo&&(t=t.effect.fn);const s=new qo(t);try{s.run()}catch(f){throw s.stop(),f}const d=s.run.bind(s);return d.effect=s,d}let xt=!0;const Go=[];function Rs(){Go.push(xt),xt=!1}function Ts(){const t=Go.pop();xt=t===void 0?!0:t}function Jo(t){const{cleanup:o}=t;if(t.cleanup=void 0,o){const s=we;we=void 0;try{o()}finally{we=s}}}let nn=0;class Ko{constructor(o){this.computed=o,this.version=0,this.activeLink=void 0,this.subs=void 0,Ge.NODE_ENV!=="production"&&(this.subsHead=void 0)}track(o){if(!we||!xt)return;let s=this.activeLink;if(s===void 0||s.sub!==we)s=this.activeLink={dep:this,sub:we,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},we.deps?(s.prevDep=we.depsTail,we.depsTail.nextDep=s,we.depsTail=s):we.deps=we.depsTail=s,we.flags&4&&Yo(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const d=s.nextDep;d.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=d),s.prevDep=we.depsTail,s.nextDep=void 0,we.depsTail.nextDep=s,we.depsTail=s,we.deps===s&&(we.deps=d)}return Ge.NODE_ENV!=="production"&&we.onTrack&&we.onTrack(Uo({effect:we},o)),s}trigger(o){this.version++,nn++,this.notify(o)}notify(o){Fn();try{if(Ge.NODE_ENV!=="production")for(let s=this.subsHead;s;s=s.nextSub)Ge.NODE_ENV!=="production"&&s.sub.onTrigger&&!(s.sub.flags&8)&&s.sub.onTrigger(Uo({effect:s.sub},o));for(let s=this.subs;s;s=s.prevSub)s.sub.notify()}finally{Ln()}}}function Yo(t){const o=t.dep.computed;if(o&&!t.dep.subs){o.flags|=20;for(let d=o.deps;d;d=d.nextDep)Yo(d)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),Ge.NODE_ENV!=="production"&&t.dep.subsHead===void 0&&(t.dep.subsHead=t),t.dep.subs=t}const Bn=new WeakMap,sr=Symbol(Ge.NODE_ENV!=="production"?"Object iterate":""),jn=Symbol(Ge.NODE_ENV!=="production"?"Map keys iterate":""),Mr=Symbol(Ge.NODE_ENV!=="production"?"Array iterate":"");function pt(t,o,s){if(xt&&we){let d=Bn.get(t);d||Bn.set(t,d=new Map);let f=d.get(s);f||d.set(s,f=new Ko),Ge.NODE_ENV!=="production"?f.track({target:t,type:o,key:s}):f.track()}}function Vt(t,o,s,d,f,g){const b=Bn.get(t);if(!b){nn++;return}let w=[];if(o==="clear")w=[...b.values()];else{const S=yr(t),D=S&&Wn(s);if(S&&s==="length"){const E=Number(d);b.forEach((C,N)=>{(N==="length"||N===Mr||!Ar(N)&&N>=E)&&w.push(C)})}else{const E=C=>C&&w.push(C);switch(s!==void 0&&E(b.get(s)),D&&E(b.get(Mr)),o){case"add":S?D&&E(b.get("length")):(E(b.get(sr)),Nr(t)&&E(b.get(jn)));break;case"delete":S||(E(b.get(sr)),Nr(t)&&E(b.get(jn)));break;case"set":Nr(t)&&E(b.get(sr));break}}}Fn();for(const S of w)Ge.NODE_ENV!=="production"?S.trigger({target:t,type:o,key:s,newValue:d,oldValue:f,oldTarget:g}):S.trigger();Ln()}function Pr(t){const o=ge(t);return o===t?o:(pt(o,"iterate",Mr),Jt(t)?o:o.map(dt))}function qn(t){return pt(t=ge(t),"iterate",Mr),t}const Ss={__proto__:null,[Symbol.iterator](){return $n(this,Symbol.iterator,dt)},concat(...t){return Pr(this).concat(...t.map(o=>yr(o)?Pr(o):o))},entries(){return $n(this,"entries",t=>(t[1]=dt(t[1]),t))},every(t,o){return Ft(this,"every",t,o,void 0,arguments)},filter(t,o){return Ft(this,"filter",t,o,s=>s.map(dt),arguments)},find(t,o){return Ft(this,"find",t,o,dt,arguments)},findIndex(t,o){return Ft(this,"findIndex",t,o,void 0,arguments)},findLast(t,o){return Ft(this,"findLast",t,o,dt,arguments)},findLastIndex(t,o){return Ft(this,"findLastIndex",t,o,void 0,arguments)},forEach(t,o){return Ft(this,"forEach",t,o,void 0,arguments)},includes(...t){return Hn(this,"includes",t)},indexOf(...t){return Hn(this,"indexOf",t)},join(t){return Pr(this).join(t)},lastIndexOf(...t){return Hn(this,"lastIndexOf",t)},map(t,o){return Ft(this,"map",t,o,void 0,arguments)},pop(){return Fr(this,"pop")},push(...t){return Fr(this,"push",t)},reduce(t,...o){return Zo(this,"reduce",t,o)},reduceRight(t,...o){return Zo(this,"reduceRight",t,o)},shift(){return Fr(this,"shift")},some(t,o){return Ft(this,"some",t,o,void 0,arguments)},splice(...t){return Fr(this,"splice",t)},toReversed(){return Pr(this).toReversed()},toSorted(t){return Pr(this).toSorted(t)},toSpliced(...t){return Pr(this).toSpliced(...t)},unshift(...t){return Fr(this,"unshift",t)},values(){return $n(this,"values",dt)}};function $n(t,o,s){const d=qn(t),f=d[o]();return d!==t&&!Jt(t)&&(f._next=f.next,f.next=()=>{const g=f._next();return g.value&&(g.value=s(g.value)),g}),f}const Os=Array.prototype;function Ft(t,o,s,d,f,g){const b=qn(t),w=b!==t&&!Jt(t),S=b[o];if(S!==Os[o]){const C=S.apply(t,g);return w?dt(C):C}let D=s;b!==t&&(w?D=function(C,N){return s.call(this,dt(C),N,t)}:s.length>2&&(D=function(C,N){return s.call(this,C,N,t)}));const E=S.call(b,D,d);return w&&f?f(E):E}function Zo(t,o,s,d){const f=qn(t);let g=s;return f!==t&&(Jt(t)?s.length>3&&(g=function(b,w,S){return s.call(this,b,w,S,t)}):g=function(b,w,S){return s.call(this,b,dt(w),S,t)}),f[o](g,...d)}function Hn(t,o,s){const d=ge(t);pt(d,"iterate",Mr);const f=d[o](...s);return(f===-1||f===!1)&&Hs(s[0])?(s[0]=ge(s[0]),d[o](...s)):f}function Fr(t,o,s=[]){Rs(),Fn();const d=ge(t)[o].apply(t,s);return Ln(),Ts(),d}const xs=vs("__proto__,__v_isRef,__isVue"),Xo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ar));function Is(t){Ar(t)||(t=String(t));const o=ge(this);return pt(o,"has",t),o.hasOwnProperty(t)}class Qo{constructor(o=!1,s=!1){this._isReadonly=o,this._isShallow=s}get(o,s,d){const f=this._isReadonly,g=this._isShallow;if(s==="__v_isReactive")return!f;if(s==="__v_isReadonly")return f;if(s==="__v_isShallow")return g;if(s==="__v_raw")return d===(f?g?js:ai:g?Bs:ii).get(o)||Object.getPrototypeOf(o)===Object.getPrototypeOf(d)?o:void 0;const b=yr(o);if(!f){let S;if(b&&(S=Ss[s]))return S;if(s==="hasOwnProperty")return Is}const w=Reflect.get(o,s,Tr(o)?o:d);return(Ar(s)?Xo.has(s):xs(s))||(f||pt(o,"get",s),g)?w:Tr(w)?b&&Wn(s)?w:w.value:rn(w)?f?ci(w):si(w):w}}class Ds extends Qo{constructor(o=!1){super(!1,o)}set(o,s,d,f){let g=o[s];if(!this._isShallow){const S=Rr(g);if(!Jt(d)&&!Rr(d)&&(g=ge(g),d=ge(d)),!yr(o)&&Tr(g)&&!Tr(d))return S?!1:(g.value=d,!0)}const b=yr(o)&&Wn(s)?Number(s)<o.length:An(o,s),w=Reflect.set(o,s,d,Tr(o)?o:f);return o===ge(f)&&(b?Er(d,g)&&Vt(o,"set",s,d,g):Vt(o,"add",s,d)),w}deleteProperty(o,s){const d=An(o,s),f=o[s],g=Reflect.deleteProperty(o,s);return g&&d&&Vt(o,"delete",s,void 0,f),g}has(o,s){const d=Reflect.has(o,s);return(!Ar(s)||!Xo.has(s))&&pt(o,"has",s),d}ownKeys(o){return pt(o,"iterate",yr(o)?"length":sr),Reflect.ownKeys(o)}}class Cs extends Qo{constructor(o=!1){super(!0,o)}set(o,s){return Ge.NODE_ENV!=="production"&&br(`Set operation on key "${String(s)}" failed: target is readonly.`,o),!0}deleteProperty(o,s){return Ge.NODE_ENV!=="production"&&br(`Delete operation on key "${String(s)}" failed: target is readonly.`,o),!0}}const _s=new Ds,Ns=new Cs,Vn=t=>t,on=t=>Reflect.getPrototypeOf(t);function an(t,o,s=!1,d=!1){t=t.__v_raw;const f=ge(t),g=ge(o);s||(Er(o,g)&&pt(f,"get",o),pt(f,"get",g));const{has:b}=on(f),w=d?Vn:s?Gn:dt;if(b.call(f,o))return w(t.get(o));if(b.call(f,g))return w(t.get(g));t!==f&&t.get(o)}function sn(t,o=!1){const s=this.__v_raw,d=ge(s),f=ge(t);return o||(Er(t,f)&&pt(d,"has",t),pt(d,"has",f)),t===f?s.has(t):s.has(t)||s.has(f)}function cn(t,o=!1){return t=t.__v_raw,!o&&pt(ge(t),"iterate",sr),Reflect.get(t,"size",t)}function ko(t,o=!1){!o&&!Jt(t)&&!Rr(t)&&(t=ge(t));const s=ge(this);return on(s).has.call(s,t)||(s.add(t),Vt(s,"add",t,t)),this}function ei(t,o,s=!1){!s&&!Jt(o)&&!Rr(o)&&(o=ge(o));const d=ge(this),{has:f,get:g}=on(d);let b=f.call(d,t);b?Ge.NODE_ENV!=="production"&&oi(d,f,t):(t=ge(t),b=f.call(d,t));const w=g.call(d,t);return d.set(t,o),b?Er(o,w)&&Vt(d,"set",t,o,w):Vt(d,"add",t,o),this}function ti(t){const o=ge(this),{has:s,get:d}=on(o);let f=s.call(o,t);f?Ge.NODE_ENV!=="production"&&oi(o,s,t):(t=ge(t),f=s.call(o,t));const g=d?d.call(o,t):void 0,b=o.delete(t);return f&&Vt(o,"delete",t,void 0,g),b}function ri(){const t=ge(this),o=t.size!==0,s=Ge.NODE_ENV!=="production"?Nr(t)?new Map(t):new Set(t):void 0,d=t.clear();return o&&Vt(t,"clear",void 0,void 0,s),d}function un(t,o){return function(d,f){const g=this,b=g.__v_raw,w=ge(b),S=o?Vn:t?Gn:dt;return!t&&pt(w,"iterate",sr),b.forEach((D,E)=>d.call(f,S(D),S(E),g))}}function dn(t,o,s){return function(...d){const f=this.__v_raw,g=ge(f),b=Nr(g),w=t==="entries"||t===Symbol.iterator&&b,S=t==="keys"&&b,D=f[t](...d),E=s?Vn:o?Gn:dt;return!o&&pt(g,"iterate",S?jn:sr),{next(){const{value:C,done:N}=D.next();return N?{value:C,done:N}:{value:w?[E(C[0]),E(C[1])]:E(C),done:N}},[Symbol.iterator](){return this}}}}function Gt(t){return function(...o){if(Ge.NODE_ENV!=="production"){const s=o[0]?`on key "${o[0]}" `:"";br(`${ys(t)} operation ${s}failed: target is readonly.`,ge(this))}return t==="delete"?!1:t==="clear"?void 0:this}}function As(){const t={get(g){return an(this,g)},get size(){return cn(this)},has:sn,add:ko,set:ei,delete:ti,clear:ri,forEach:un(!1,!1)},o={get(g){return an(this,g,!1,!0)},get size(){return cn(this)},has:sn,add(g){return ko.call(this,g,!0)},set(g,b){return ei.call(this,g,b,!0)},delete:ti,clear:ri,forEach:un(!1,!0)},s={get(g){return an(this,g,!0)},get size(){return cn(this,!0)},has(g){return sn.call(this,g,!0)},add:Gt("add"),set:Gt("set"),delete:Gt("delete"),clear:Gt("clear"),forEach:un(!0,!1)},d={get(g){return an(this,g,!0,!0)},get size(){return cn(this,!0)},has(g){return sn.call(this,g,!0)},add:Gt("add"),set:Gt("set"),delete:Gt("delete"),clear:Gt("clear"),forEach:un(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(g=>{t[g]=dn(g,!1,!1),s[g]=dn(g,!0,!1),o[g]=dn(g,!1,!0),d[g]=dn(g,!0,!0)}),[t,s,o,d]}const[Ws,Ms,Fs,Ls]=As();function ni(t,o){const s=o?t?Ls:Fs:t?Ms:Ws;return(d,f,g)=>f==="__v_isReactive"?!t:f==="__v_isReadonly"?t:f==="__v_raw"?d:Reflect.get(An(s,f)&&f in d?s:d,f,g)}const zs={get:ni(!1,!1)},Us={get:ni(!0,!1)};function oi(t,o,s){const d=ge(s);if(d!==s&&o.call(t,d)){const f=jo(t);br(`Reactive ${f} contains both the raw and reactive versions of the same object${f==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const ii=new WeakMap,Bs=new WeakMap,ai=new WeakMap,js=new WeakMap;function qs(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $s(t){return t.__v_skip||!Object.isExtensible(t)?0:qs(jo(t))}function si(t){return Rr(t)?t:ui(t,!1,_s,zs,ii)}function ci(t){return ui(t,!0,Ns,Us,ai)}function ui(t,o,s,d,f){if(!rn(t))return Ge.NODE_ENV!=="production"&&br(`value cannot be made ${o?"readonly":"reactive"}: ${String(t)}`),t;if(t.__v_raw&&!(o&&t.__v_isReactive))return t;const g=f.get(t);if(g)return g;const b=$s(t);if(b===0)return t;const w=new Proxy(t,b===2?d:s);return f.set(t,w),w}function Rr(t){return!!(t&&t.__v_isReadonly)}function Jt(t){return!!(t&&t.__v_isShallow)}function Hs(t){return t?!!t.__v_raw:!1}function ge(t){const o=t&&t.__v_raw;return o?ge(o):t}const dt=t=>rn(t)?si(t):t,Gn=t=>rn(t)?ci(t):t;function Tr(t){return t?t.__v_isRef===!0:!1}function Lt(t){return Vs(t,!1)}function Vs(t,o){return Tr(t)?t:new Gs(t,o)}class Gs{constructor(o,s){this.dep=new Ko,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?o:ge(o),this._value=s?o:dt(o),this.__v_isShallow=s}get value(){return Ge.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track(),this._value}set value(o){const s=this._rawValue,d=this.__v_isShallow||Jt(o)||Rr(o);o=d?o:ge(o),Er(o,s)&&(this._rawValue=o,this._value=d?o:dt(o),Ge.NODE_ENV!=="production"?this.dep.trigger({target:this,type:"set",key:"value",newValue:o,oldValue:s}):this.dep.trigger())}}const Js=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Ks=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ys=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Zs(t,o){if(t==="__proto__"||t==="constructor"&&o&&typeof o=="object"&&"prototype"in o){Xs(t);return}return o}function Xs(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function di(t,o={}){if(typeof t!="string")return t;const s=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return s.slice(1,-1);if(s.length<=9){const d=s.toLowerCase();if(d==="true")return!0;if(d==="false")return!1;if(d==="undefined")return;if(d==="null")return null;if(d==="nan")return Number.NaN;if(d==="infinity")return Number.POSITIVE_INFINITY;if(d==="-infinity")return Number.NEGATIVE_INFINITY}if(!Ys.test(t)){if(o.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Js.test(t)||Ks.test(t)){if(o.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Zs)}return JSON.parse(t)}catch(d){if(o.strict)throw d;return t}}function Qs(){const t=new Set,o=f=>{t.delete(f)};return{on:f=>(t.add(f),{off:()=>o(f)}),off:o,trigger:(...f)=>Promise.all(Array.from(t).map(g=>g(...f)))}}async function ks(t){try{return{data:await t,error:null}}catch(o){return{data:null,error:o||{message:"Unknown error"}}}}var ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fi={exports:{}};(function(t,o){(function(s,d){t.exports=d()})(typeof self<"u"?self:ec,function(){return function(s){var d={};function f(g){if(d[g])return d[g].exports;var b=d[g]={i:g,l:!1,exports:{}};return s[g].call(b.exports,b,b.exports,f),b.l=!0,b.exports}return f.m=s,f.c=d,f.d=function(g,b,w){f.o(g,b)||Object.defineProperty(g,b,{enumerable:!0,get:w})},f.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},f.t=function(g,b){if(1&b&&(g=f(g)),8&b||4&b&&typeof g=="object"&&g&&g.__esModule)return g;var w=Object.create(null);if(f.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:g}),2&b&&typeof g!="string")for(var S in g)f.d(w,S,(function(D){return g[D]}).bind(null,S));return w},f.n=function(g){var b=g&&g.__esModule?function(){return g.default}:function(){return g};return f.d(b,"a",b),b},f.o=function(g,b){return{}.hasOwnProperty.call(g,b)},f.p="",f(f.s=0)}([function(s,d,f){f.r(d),f.d(d,"PopupOpenError",function(){return so}),f.d(d,"create",function(){return eu}),f.d(d,"destroy",function(){return tu}),f.d(d,"destroyComponents",function(){return Sa}),f.d(d,"destroyAll",function(){return Oa}),f.d(d,"PROP_TYPE",function(){return be}),f.d(d,"PROP_SERIALIZATION",function(){return On}),f.d(d,"CONTEXT",function(){return We}),f.d(d,"EVENT",function(){return De});function g(e,r){return(g=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(e,r)}function b(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,g(e,r)}function w(){return(w=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function S(e){try{if(!e)return!1;if(typeof Promise<"u"&&e instanceof Promise)return!0;if(typeof window<"u"&&typeof window.Window=="function"&&e instanceof window.Window||typeof window<"u"&&typeof window.constructor=="function"&&e instanceof window.constructor)return!1;var r={}.toString;if(r){var n=r.call(e);if(n==="[object Window]"||n==="[object global]"||n==="[object DOMWindow]")return!1}if(typeof e.then=="function")return!0}catch{return!1}return!1}var D=[],E=[],C=0,N;function se(){if(!C&&N){var e=N;N=null,e.resolve()}}function ce(){C+=1}function Je(){C-=1,se()}var p=function(){function e(n){var i=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var a,c,u=!1,h=!1,l=!1;ce();try{n(function(m){l?i.resolve(m):(u=!0,a=m)},function(m){l?i.reject(m):(h=!0,c=m)})}catch(m){Je(),this.reject(m);return}Je(),l=!0,u?this.resolve(a):h&&this.reject(c)}}var r=e.prototype;return r.resolve=function(n){if(this.resolved||this.rejected)return this;if(S(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},r.reject=function(n){var i=this;if(this.resolved||this.rejected)return this;if(S(n))throw new Error("Can not reject promise with another promise");if(!n){var a=n&&typeof n.toString=="function"?n.toString():{}.toString.call(n);n=new Error("Expected reject to be called with Error, got "+a)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){i.errorHandled||function(c,u){if(D.indexOf(c)===-1){D.push(c),setTimeout(function(){throw c},1);for(var h=0;h<E.length;h++)E[h](c,u)}}(n,i)},1),this.dispatch(),this},r.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},r.dispatch=function(){var n=this.resolved,i=this.rejected,a=this.handlers;if(!this.dispatching&&(n||i)){this.dispatching=!0,ce();for(var c=function(P,T){return P.then(function(O){T.resolve(O)},function(O){T.reject(O)})},u=0;u<a.length;u++){var h=a[u],l=h.onSuccess,m=h.onError,R=h.promise,y=void 0;if(n)try{y=l?l(this.value):this.value}catch(P){R.reject(P);continue}else if(i){if(!m){R.reject(this.error);continue}try{y=m(this.error)}catch(P){R.reject(P);continue}}if(y instanceof e&&(y.resolved||y.rejected)){var v=y;v.resolved?R.resolve(v.value):R.reject(v.error),v.errorHandled=!0}else S(y)?y instanceof e&&(y.resolved||y.rejected)?y.resolved?R.resolve(y.value):R.reject(y.error):c(y,R):R.resolve(y)}a.length=0,this.dispatching=!1,Je()}},r.then=function(n,i){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.then expected a function for success handler");if(i&&typeof i!="function"&&!i.call)throw new Error("Promise.then expected a function for error handler");var a=new e;return this.handlers.push({promise:a,onSuccess:n,onError:i}),this.errorHandled=!0,this.dispatch(),a},r.catch=function(n){return this.then(void 0,n)},r.finally=function(n){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(i){return e.try(n).then(function(){return i})},function(i){return e.try(n).then(function(){throw i})})},r.timeout=function(n,i){var a=this;if(this.resolved||this.rejected)return this;var c=setTimeout(function(){a.resolved||a.rejected||a.reject(i||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(u){return clearTimeout(c),u})},r.toPromise=function(){if(typeof Promise>"u")throw new TypeError("Could not find Promise");return Promise.resolve(this)},r.lazy=function(){return this.errorHandled=!0,this},e.resolve=function(n){return n instanceof e?n:S(n)?new e(function(i,a){return n.then(i,a)}):new e().resolve(n)},e.reject=function(n){return new e().reject(n)},e.asyncReject=function(n){return new e().asyncReject(n)},e.all=function(n){var i=new e,a=n.length,c=[].slice();if(!a)return i.resolve(c),i;for(var u=function(m,R,y){return R.then(function(v){c[m]=v,(a-=1)==0&&i.resolve(c)},function(v){y.reject(v)})},h=0;h<n.length;h++){var l=n[h];if(l instanceof e){if(l.resolved){c[h]=l.value,a-=1;continue}}else if(!S(l)){c[h]=l,a-=1;continue}u(h,e.resolve(l),i)}return a===0&&i.resolve(c),i},e.hash=function(n){var i={},a=[],c=function(h){if(n.hasOwnProperty(h)){var l=n[h];S(l)?a.push(l.then(function(m){i[h]=m})):i[h]=l}};for(var u in n)c(u);return e.all(a).then(function(){return i})},e.map=function(n,i){return e.all(n.map(i))},e.onPossiblyUnhandledException=function(n){return function(i){return E.push(i),{cancel:function(){E.splice(E.indexOf(i),1)}}}(n)},e.try=function(n,i,a){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.try expected a function");var c;ce();try{c=n.apply(i,a||[])}catch(u){return Je(),e.reject(u)}return Je(),e.resolve(c)},e.delay=function(n){return new e(function(i){setTimeout(i,n)})},e.isPromise=function(n){return!!(n&&n instanceof e)||S(n)},e.flush=function(){return function(n){var i=N=N||new n;return se(),i}(e)},e}();function A(e){return{}.toString.call(e)==="[object RegExp]"}var q={IFRAME:"iframe",POPUP:"popup"},Y=`Call was rejected by callee.\r
`;function Ee(e){return e===void 0&&(e=window),e.location.protocol}function Oe(e){if(e===void 0&&(e=window),e.mockDomain){var r=e.mockDomain.split("//")[0];if(r)return r}return Ee(e)}function Fe(e){return e===void 0&&(e=window),Oe(e)==="about:"}function ve(e){if(e===void 0&&(e=window),e)try{if(e.parent&&e.parent!==e)return e.parent}catch{}}function Ae(e){if(e===void 0&&(e=window),e&&!ve(e))try{return e.opener}catch{}}function Z(e){try{return!0}catch{}return!1}function Pe(e){e===void 0&&(e=window);var r=e.location;if(!r)throw new Error("Can not read window location");var n=Ee(e);if(!n)throw new Error("Can not read window protocol");if(n==="file:")return"file://";if(n==="about:"){var i=ve(e);return i&&Z()?Pe(i):"about://"}var a=r.host;if(!a)throw new Error("Can not read window host");return n+"//"+a}function ae(e){e===void 0&&(e=window);var r=Pe(e);return r&&e.mockDomain&&e.mockDomain.indexOf("mock:")===0?e.mockDomain:r}function L(e){if(!function(r){try{if(r===window)return!0}catch{}try{var n=Object.getOwnPropertyDescriptor(r,"location");if(n&&n.enumerable===!1)return!1}catch{}try{if(Fe(r)&&Z())return!0}catch{}try{if(function(i){return i===void 0&&(i=window),Oe(i)==="mock:"}(r)&&Z())return!0}catch{}try{if(Pe(r)===Pe(window))return!0}catch{}return!1}(e))return!1;try{if(e===window||Fe(e)&&Z()||ae(window)===ae(e))return!0}catch{}return!1}function B(e){if(!L(e))throw new Error("Expected window to be same domain");return e}function X(e,r){if(!e||!r)return!1;var n=ve(r);return n?n===e:function(i){var a=[];try{for(;i.parent!==i;)a.push(i.parent),i=i.parent}catch{}return a}(r).indexOf(e)!==-1}function Re(e){var r=[],n;try{n=e.frames}catch{n=e}var i;try{i=n.length}catch{}if(i===0)return r;if(i){for(var a=0;a<i;a++){var c=void 0;try{c=n[a]}catch{continue}r.push(c)}return r}for(var u=0;u<100;u++){var h=void 0;try{h=n[u]}catch{return r}if(!h)return r;r.push(h)}return r}function ot(e){for(var r=[],n=0,i=Re(e);n<i.length;n++){var a=i[n];r.push(a);for(var c=0,u=ot(a);c<u.length;c++)r.push(u[c])}return r}function xe(e){e===void 0&&(e=window);try{if(e.top)return e.top}catch{}if(ve(e)===e)return e;try{if(X(window,e)&&window.top)return window.top}catch{}try{if(X(e,window)&&window.top)return window.top}catch{}for(var r=0,n=ot(e);r<n.length;r++){var i=n[r];try{if(i.top)return i.top}catch{}if(ve(i)===i)return i}}function Ke(e){var r=xe(e);if(!r)throw new Error("Can not determine top window");var n=[].concat(ot(r),[r]);return n.indexOf(e)===-1&&(n=[].concat(n,[e],ot(e))),n}var at=[],_t=[];function Le(e,r){r===void 0&&(r=!0);try{if(e===window)return!1}catch{return!0}try{if(!e)return!0}catch{return!0}try{if(e.closed)return!0}catch(a){return!a||a.message!==Y}if(r&&L(e))try{if(e.mockclosed)return!0}catch{}try{if(!e.parent||!e.top)return!0}catch{}var n=function(a,c){for(var u=0;u<a.length;u++)try{if(a[u]===c)return u}catch{}return-1}(at,e);if(n!==-1){var i=_t[n];if(i&&function(a){if(!a.contentWindow||!a.parentNode)return!0;var c=a.ownerDocument;if(c&&c.documentElement&&!c.documentElement.contains(a)){for(var u=a;u.parentNode&&u.parentNode!==u;)u=u.parentNode;if(!u.host||!c.documentElement.contains(u.host))return!0}return!1}(i))return!0}return!1}function Yn(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent}function Yt(e,r){for(var n=Re(e),i=0;i<n.length;i++){var a=n[i];try{if(L(a)&&a.name===r&&n.indexOf(a)!==-1)return a}catch{}}try{if(n.indexOf(e.frames[r])!==-1)return e.frames[r]}catch{}try{if(n.indexOf(e[r])!==-1)return e[r]}catch{}}function fn(e,r){return e===Ae(r)}function Zt(e){return e===void 0&&(e=window),Ae(e=e||window)||ve(e)||void 0}function zr(e,r){for(var n=0;n<e.length;n++)for(var i=e[n],a=0;a<r.length;a++)if(i===r[a])return!0;return!1}function Ur(e){e===void 0&&(e=window);for(var r=0,n=e;n;)(n=ve(n))&&(r+=1);return r}function cr(e,r){var n=xe(e)||e,i=xe(r)||r;try{if(n&&i)return n===i}catch{}var a=Ke(e),c=Ke(r);if(zr(a,c))return!0;var u=Ae(n),h=Ae(i);return u&&zr(Ke(u),c)||h&&zr(Ke(h),a),!1}function wt(e,r){if(typeof e=="string"){if(typeof r=="string")return e==="*"||r===e;if(A(r)||Array.isArray(r))return!1}return A(e)?A(r)?e.toString()===r.toString():!Array.isArray(r)&&!!r.match(e):!!Array.isArray(e)&&(Array.isArray(r)?JSON.stringify(e)===JSON.stringify(r):!A(r)&&e.some(function(n){return wt(n,r)}))}function Ut(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):ae()}function Pi(e,r,n,i){n===void 0&&(n=1e3),i===void 0&&(i=1/0);var a;return function c(){if(Le(e))return a&&clearTimeout(a),r();i<=0?clearTimeout(a):(i-=n,a=setTimeout(c,n))}(),{cancel:function(){a&&clearTimeout(a)}}}function ur(e){try{if(e===window)return!0}catch(r){if(r&&r.message===Y)return!0}try{if({}.toString.call(e)==="[object Window]")return!0}catch(r){if(r&&r.message===Y)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(r){if(r&&r.message===Y)return!0}try{if(e&&e.self===e)return!0}catch(r){if(r&&r.message===Y)return!0}try{if(e&&e.parent===e)return!0}catch(r){if(r&&r.message===Y)return!0}try{if(e&&e.top===e)return!0}catch(r){if(r&&r.message===Y)return!0}try{if(e&&e.__cross_domain_utils_window_check__==="__unlikely_value__")return!1}catch{return!0}try{if("postMessage"in e&&"self"in e&&"location"in e)return!0}catch{}return!1}function Zn(e){if(r=Ut(e),r.indexOf("mock:")!==0)return e;var r;throw new Error("Mock urls not supported out of test mode")}function Ri(e){if(L(e))return B(e).frameElement;for(var r=0,n=document.querySelectorAll("iframe");r<n.length;r++){var i=n[r];if(i&&i.contentWindow&&i.contentWindow===e)return i}}function Ti(e){if(function(n){return n===void 0&&(n=window),!!ve(n)}(e)){var r=Ri(e);if(r&&r.parentElement){r.parentElement.removeChild(r);return}}try{e.close()}catch{}}function ln(e,r){for(var n=0;n<e.length;n++)try{if(e[n]===r)return n}catch{}return-1}var hn=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if(typeof WeakMap>"u"||Object.freeze===void 0)return!1;try{var n=new WeakMap,i={};return Object.freeze(i),n.set(i,"__testvalue__"),n.get(i)==="__testvalue__"}catch{return!1}}())try{this.weakmap=new WeakMap}catch{}this.keys=[],this.values=[]}var r=e.prototype;return r._cleanupClosedWindows=function(){for(var n=this.weakmap,i=this.keys,a=0;a<i.length;a++){var c=i[a];if(ur(c)&&Le(c)){if(n)try{n.delete(c)}catch{}i.splice(a,1),this.values.splice(a,1),a-=1}}},r.isSafeToReadWrite=function(n){return!ur(n)},r.set=function(n,i){if(!n)throw new Error("WeakMap expected key");var a=this.weakmap;if(a)try{a.set(n,i)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var c=this.name,u=n[c];u&&u[0]===n?u[1]=i:Object.defineProperty(n,c,{value:[n,i],writable:!0});return}catch{}this._cleanupClosedWindows();var h=this.keys,l=this.values,m=ln(h,n);m===-1?(h.push(n),l.push(i)):l[m]=i},r.get=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{if(i.has(n))return i.get(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return a&&a[0]===n?a[1]:void 0}catch{}this._cleanupClosedWindows();var c=ln(this.keys,n);if(c!==-1)return this.values[c]},r.delete=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{i.delete(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];a&&a[0]===n&&(a[0]=a[1]=void 0)}catch{}this._cleanupClosedWindows();var c=this.keys,u=ln(c,n);u!==-1&&(c.splice(u,1),this.values.splice(u,1))},r.has=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{if(i.has(n))return!0}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return!(!a||a[0]!==n)}catch{}return this._cleanupClosedWindows(),ln(this.keys,n)!==-1},r.getOrSet=function(n,i){if(this.has(n))return this.get(n);var a=i();return this.set(n,a),a},e}();function Si(e){return(Si=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function xc(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Oi(e,r,n){return(Oi=xc()?Reflect.construct:function(i,a,c){var u=[null];u.push.apply(u,a);var h=new(Function.bind.apply(i,u));return c&&g(h,c.prototype),h}).apply(null,arguments)}function xi(e){var r=typeof Map=="function"?new Map:void 0;return(xi=function(n){if(n===null||(i=n,Function.toString.call(i).indexOf("[native code]")===-1))return n;var i;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(n))return r.get(n);r.set(n,a)}function a(){return Oi(n,arguments,Si(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),g(a,n)})(e)}function Xn(e){var r=!1;try{(e instanceof window.Element||e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object")&&(r=!0)}catch{}return r}function Qn(e){return e.name||e.__name__||e.displayName||"anonymous"}function kn(e,r){try{delete e.name,e.name=r}catch{}return e.__name__=e.displayName=r,e}function eo(e){if(typeof btoa=="function")return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(r,n){return String.fromCharCode(parseInt(n,16))})).replace(/[=]/g,"");if(typeof Buffer<"u")return Buffer.from(e,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}function st(){var e="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+eo(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var pn;function to(e){try{return JSON.stringify([].slice.call(e),function(r,n){return typeof n=="function"?"memoize["+function(i){if(pn=pn||new hn,i==null||typeof i!="object"&&typeof i!="function")throw new Error("Invalid object");var a=pn.get(i);return a||(a=typeof i+":"+st(),pn.set(i,a)),a}(n)+"]":Xn(n)?{}:n})}catch{throw new Error("Arguments not serializable -- can not be used to memoize")}}function Ic(){return{}}var Br=0,Ii=0;function Xt(e,r){r===void 0&&(r={});var n=r.thisNamespace,i=n!==void 0&&n,a=r.time,c,u,h=Br;Br+=1;var l=function(){for(var m=arguments.length,R=new Array(m),y=0;y<m;y++)R[y]=arguments[y];h<Ii&&(c=null,u=null,h=Br,Br+=1);var v;v=i?(u=u||new hn).getOrSet(this,Ic):c=c||{};var P;try{P=to(R)}catch{return e.apply(this,arguments)}var T=v[P];if(T&&a&&Date.now()-T.time<a&&(delete v[P],T=null),T)return T.value;var O=Date.now(),x=e.apply(this,arguments);return v[P]={time:O,value:x},x};return l.reset=function(){c=null,u=null},kn(l,(r.name||Qn(e))+"::memoized")}Xt.clear=function(){Ii=Br};function Dc(e){var r={};function n(){for(var i=arguments,a=this,c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];var l=to(u);return r.hasOwnProperty(l)||(r[l]=p.try(function(){return e.apply(a,i)}).finally(function(){delete r[l]})),r[l]}return n.reset=function(){r={}},kn(n,Qn(e)+"::promiseMemoized")}function Ie(){}function vn(e){var r=!1;return kn(function(){if(!r)return r=!0,e.apply(this,arguments)},Qn(e)+"::once")}function Or(e,r){if(r===void 0&&(r=1),r>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+{}.toString.call(e)+">";if(typeof e=="string")return e;if(e instanceof Error){var n=e&&e.stack,i=e&&e.message;if(n&&i)return n.indexOf(i)!==-1?n:i+`
`+n;if(n)return n;if(i)return i}return e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}catch(a){return"Error while stringifying error: "+Or(a,r+1)}}function wn(e){return typeof e=="string"?e:e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}function xr(e,r){if(!r)return e;if(Object.assign)return Object.assign(e,r);for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}Xt(function(e){if(Object.values)return Object.values(e);var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(e[n]);return r});function Cc(e){return e}function jr(e,r){var n;return function i(){n=setTimeout(function(){e(),i()},r)}(),{cancel:function(){clearTimeout(n)}}}function ro(e){return e.replace(/-([a-z])/g,function(r){return r[1].toUpperCase()})}function Di(e,r,n){if(Array.isArray(e)){if(typeof r!="number")throw new TypeError("Array key must be number")}else if(typeof e=="object"&&e!==null&&typeof r!="string")throw new TypeError("Object key must be string");Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){delete e[r];var i=n();return e[r]=i,i},set:function(i){delete e[r],e[r]=i}})}function no(e){return[].slice.call(e)}function Ci(e){return typeof(r=e)=="object"&&r!==null&&{}.toString.call(e)==="[object Object]";var r}function oo(e){if(!Ci(e))return!1;var r=e.constructor;if(typeof r!="function")return!1;var n=r.prototype;return!!Ci(n)&&!!n.hasOwnProperty("isPrototypeOf")}function gn(e,r,n){if(n===void 0&&(n=""),Array.isArray(e)){for(var i=e.length,a=[],c=function(R){Di(a,R,function(){var y=n?n+"."+R:""+R,v=r(e[R],R,y);return(oo(v)||Array.isArray(v))&&(v=gn(v,r,y)),v})},u=0;u<i;u++)c(u);return a}if(oo(e)){var h={},l=function(R){if(!e.hasOwnProperty(R))return 1;Di(h,R,function(){var y=n?n+"."+R:""+R,v=r(e[R],R,y);return(oo(v)||Array.isArray(v))&&(v=gn(v,r,y)),v})};for(var m in e)l(m);return h}throw new Error("Pass an object or array")}function Qt(e){return e!=null}function io(e){return{}.toString.call(e)==="[object RegExp]"}function qr(e,r,n){if(e.hasOwnProperty(r))return e[r];var i=n();return e[r]=i,i}function mn(e){var r=[],n=!1,i,a={set:function(c,u){return n||(e[c]=u,a.register(function(){delete e[c]})),u},register:function(c){var u=vn(function(){return c(i)});return n?c(i):r.push(u),{cancel:function(){var h=r.indexOf(u);h!==-1&&r.splice(h,1)}}},all:function(c){i=c;var u=[];for(n=!0;r.length;){var h=r.shift();u.push(h())}return p.all(u).then(Ie)}};return a}function yn(e,r){if(r==null)throw new Error("Expected "+e+" to be present");return r}var _c=function(e){b(r,e);function r(n){var i;return(i=e.call(this,n)||this).name=i.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(i),i.constructor):i.stack=new Error(n).stack,i}return r}(xi(Error));function _i(){var e=document.body;if(!e)throw new Error("Body element not found");return e}function En(){return!!document.body&&document.readyState==="complete"}function Ni(){return!!document.body&&document.readyState==="interactive"}function Ai(e){return encodeURIComponent(e)}Xt(function(){return new p(function(e){if(En()||Ni())return e();var r=setInterval(function(){if(En()||Ni())return clearInterval(r),e()},10)})});function Wi(e){return function(r,n,i){i===void 0&&(i=[]);var a=r.__inline_memoize_cache__=r.__inline_memoize_cache__||{},c=to(i);return a.hasOwnProperty(c)?a[c]:a[c]=(function(){var u={};if(!e||e.indexOf("=")===-1)return u;for(var h=0,l=e.split("&");h<l.length;h++){var m=l[h];(m=m.split("="))[0]&&m[1]&&(u[decodeURIComponent(m[0])]=decodeURIComponent(m[1]))}return u}).apply(void 0,i)}(Wi,0,[e])}function Mi(e,r){return r===void 0&&(r={}),r&&Object.keys(r).length?function(n){return n===void 0&&(n={}),Object.keys(n).filter(function(i){return typeof n[i]=="string"||typeof n[i]=="boolean"}).map(function(i){var a=n[i];if(typeof a!="string"&&typeof a!="boolean")throw new TypeError("Invalid type for query");return Ai(i)+"="+Ai(a.toString())}).join("&")}(w({},Wi(e),r)):e}function Nc(e,r){e.appendChild(r)}function ao(e,r){return r===void 0&&(r=document),Xn(e)?e:typeof e=="string"?r.querySelector(e):void 0}function Fi(e){return new p(function(r,n){var i=wn(e),a=ao(e);if(a)return r(a);if(En())return n(new Error("Document is ready and element "+i+" does not exist"));var c=setInterval(function(){if(a=ao(e))r(a),clearInterval(c);else if(En())return clearInterval(c),n(new Error("Document is ready and element "+i+" does not exist"))},10)})}var so=function(e){b(r,e);function r(){return e.apply(this,arguments)||this}return r}(_c),bn;function Li(e){if((bn=bn||new hn).has(e)){var r=bn.get(e);if(r)return r}var n=new p(function(i,a){e.addEventListener("load",function(){(function(c){if(function(){for(var u=0;u<at.length;u++){var h=!1;try{h=at[u].closed}catch{}h&&(_t.splice(u,1),at.splice(u,1))}}(),c&&c.contentWindow)try{at.push(c.contentWindow),_t.push(c)}catch{}})(e),i(e)}),e.addEventListener("error",function(c){e.contentWindow?i(e):a(c)})});return bn.set(e,n),n}function co(e){return Li(e).then(function(r){if(!r.contentWindow)throw new Error("Could not find window in iframe");return r.contentWindow})}function zi(e,r){e===void 0&&(e={});var n=e.style||{},i=function(c,u,h){c===void 0&&(c="div"),u===void 0&&(u={}),c=c.toLowerCase();var l=document.createElement(c);if(u.style&&xr(l.style,u.style),u.class&&(l.className=u.class.join(" ")),u.id&&l.setAttribute("id",u.id),u.attributes)for(var m=0,R=Object.keys(u.attributes);m<R.length;m++){var y=R[m];l.setAttribute(y,u.attributes[y])}if(u.styleSheet&&function(v,P,T){T===void 0&&(T=window.document),v.styleSheet?v.styleSheet.cssText=P:v.appendChild(T.createTextNode(P))}(l,u.styleSheet),u.html){if(c==="iframe")throw new Error("Iframe html can not be written unless container provided and iframe in DOM");l.innerHTML=u.html}return l}("iframe",{attributes:w({allowTransparency:"true"},e.attributes||{}),style:w({backgroundColor:"transparent",border:"none"},n),html:e.html,class:e.class}),a=window.navigator.userAgent.match(/MSIE|Edge/i);return i.hasAttribute("id")||i.setAttribute("id",st()),Li(i),(e.url||a)&&i.setAttribute("src",e.url||"about:blank"),i}function Ui(e,r,n){return e.addEventListener(r,n),{cancel:function(){e.removeEventListener(r,n)}}}function Ac(e){e.style.setProperty("display","")}function Bi(e){e.style.setProperty("display","none","important")}function $r(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ir(e){return!(e&&e.parentNode&&e.ownerDocument&&e.ownerDocument.documentElement&&e.ownerDocument.documentElement.contains(e))}function ji(e,r,n){var i=n===void 0?{}:n,a=i.width,c=a===void 0||a,u=i.height,h=u===void 0||u,l=i.interval,m=l===void 0?100:l,R=i.win,y=R===void 0?window:R,v=e.offsetWidth,P=e.offsetHeight,T=!1;r({width:v,height:P});var O=function(){if(!T&&function(M){return!!(M.offsetWidth||M.offsetHeight||M.getClientRects().length)}(e)){var z=e.offsetWidth,J=e.offsetHeight;(c&&z!==v||h&&J!==P)&&r({width:z,height:J}),v=z,P=J}},x,W;return y.addEventListener("resize",O),y.ResizeObserver!==void 0?((x=new y.ResizeObserver(O)).observe(e),W=jr(O,10*m)):y.MutationObserver!==void 0?((x=new y.MutationObserver(O)).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),W=jr(O,10*m)):W=jr(O,m),{cancel:function(){T=!0,x.disconnect(),window.removeEventListener("resize",O),W.cancel()}}}function uo(e){for(;e.parentNode;)e=e.parentNode;return e.toString()==="[object ShadowRoot]"}var Pn=typeof document<"u"?document.currentScript:null,Wc=Xt(function(){if(Pn||(Pn=function(){try{var e=function(){try{throw new Error("_")}catch(u){return u.stack||""}}(),r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(e),n=r&&r[1];if(!n)return;for(var i=0,a=[].slice.call(document.getElementsByTagName("script")).reverse();i<a.length;i++){var c=a[i];if(c.src&&c.src===n)return c}}catch{}}()))return Pn;throw new Error("Can not determine current script")}),Mc=st();Xt(function(){var e;try{e=Wc()}catch{return Mc}var r=e.getAttribute("data-uid");if(r&&typeof r=="string"||(r=e.getAttribute("data-uid-auto"))&&typeof r=="string")return r;if(e.src){var n=function(i){for(var a="",c=0;c<i.length;c++){var u=i[c].charCodeAt(0)*c;i[c+1]&&(u+=i[c+1].charCodeAt(0)*(c-1)),a+=String.fromCharCode(97+Math.abs(u)%26)}return a}(JSON.stringify({src:e.src,dataset:e.dataset}));r="uid_"+n.slice(n.length-30)}else r=st();return e.setAttribute("data-uid-auto",r),r});function qi(e){return typeof e=="string"&&/^[0-9]+%$/.test(e)}function fo(e){if(typeof e=="number")return e;var r=e.match(/^([0-9]+)(px|%)$/);if(!r)throw new Error("Could not match css value from "+e);return parseInt(r[1],10)}function $i(e){return fo(e)+"px"}function Hi(e){return typeof e=="number"?$i(e):qi(e)?e:$i(e)}function Vi(e,r){if(typeof e=="number")return e;if(qi(e))return parseInt(r*fo(e)/100,10);if(typeof(n=e)=="string"&&/^[0-9]+px$/.test(n))return fo(e);var n;throw new Error("Can not normalize dimension: "+e)}function Nt(e){e===void 0&&(e=window);var r="__post_robot_11_0_0__";return e!==window?e[r]:e[r]=e[r]||{}}var Gi=function(){return{}};function me(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Gi),qr(Nt(),e,function(){var n=r();return{has:function(i){return n.hasOwnProperty(i)},get:function(i,a){return n.hasOwnProperty(i)?n[i]:a},set:function(i,a){return n[i]=a,a},del:function(i){delete n[i]},getOrSet:function(i,a){return qr(n,i,a)},reset:function(){n=r()},keys:function(){return Object.keys(n)}}})}var Fc=function(){};function Rn(){var e=Nt();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new Fc,e.WINDOW_WILDCARD}function it(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Gi),me("windowStore").getOrSet(e,function(){var n=new hn,i=function(a){return n.getOrSet(a,r)};return{has:function(a){return i(a).hasOwnProperty(e)},get:function(a,c){var u=i(a);return u.hasOwnProperty(e)?u[e]:c},set:function(a,c){return i(a)[e]=c,c},del:function(a){delete i(a)[e]},getOrSet:function(a,c){return qr(i(a),e,c)}}})}function Ji(){return me("instance").getOrSet("instanceID",st)}function Ki(e,r){var n=r.domain,i=it("helloPromises"),a=i.get(e);a&&a.resolve({domain:n});var c=p.resolve({domain:n});return i.set(e,c),c}function lo(e,r){return(0,r.send)(e,"postrobot_hello",{instanceID:Ji()},{domain:"*",timeout:-1}).then(function(n){var i=n.origin,a=n.data.instanceID;return Ki(e,{domain:i}),{win:e,domain:i,instanceID:a}})}function Yi(e,r){var n=r.send;return it("windowInstanceIDPromises").getOrSet(e,function(){return lo(e,{send:n}).then(function(i){return i.instanceID})})}function Zi(e,r,n){r===void 0&&(r=5e3),n===void 0&&(n="Window");var i=function(a){return it("helloPromises").getOrSet(a,function(){return new p})}(e);return r!==-1&&(i=i.timeout(r,new Error(n+" did not load after "+r+"ms"))),i}function Xi(e){it("knownWindows").set(e,!0)}function ho(e){return typeof e=="object"&&e!==null&&typeof e.__type__=="string"}function Qi(e){return e===void 0?"undefined":e===null?"null":Array.isArray(e)?"array":typeof e=="function"?"function":typeof e=="object"?e instanceof Error?"error":typeof e.then=="function"?"promise":{}.toString.call(e)==="[object RegExp]"?"regex":{}.toString.call(e)==="[object Date]"?"date":"object":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":void 0}function dr(e,r){return{__type__:e,__val__:r}}var gt,Lc=((gt={}).function=function(){},gt.error=function(e){return dr("error",{message:e.message,stack:e.stack,code:e.code,data:e.data})},gt.promise=function(){},gt.regex=function(e){return dr("regex",e.source)},gt.date=function(e){return dr("date",e.toJSON())},gt.array=function(e){return e},gt.object=function(e){return e},gt.string=function(e){return e},gt.number=function(e){return e},gt.boolean=function(e){return e},gt.null=function(e){return e},gt[void 0]=function(e){return dr("undefined",e)},gt),zc={},mt,Uc=((mt={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},mt.error=function(e){var r=e.stack,n=e.code,i=e.data,a=new Error(e.message);return a.code=n,i&&(a.data=i),a.stack=r+`

`+a.stack,a},mt.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},mt.regex=function(e){return new RegExp(e)},mt.date=function(e){return new Date(e)},mt.array=function(e){return e},mt.object=function(e){return e},mt.string=function(e){return e},mt.number=function(e){return e},mt.boolean=function(e){return e},mt.null=function(e){return e},mt[void 0]=function(){},mt),Bc={};function po(){return!!Yn(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function ki(e){return!cr(window,e)}function ea(e,r){if(e){if(ae()!==Ut(e))return!0}else if(r&&!L(r))return!0;return!1}function ta(e){var r=e.win,n=e.domain;return!(!po()||n&&!ea(n,r)||r&&!ki(r))}function vo(e){return"__postrobot_bridge___"+(e=e||Ut(e)).replace(/[^a-zA-Z0-9]+/g,"_")}function ra(){return!!(window.name&&window.name===vo(ae()))}var jc=new p(function(e){if(window.document&&window.document.body)return e(window.document.body);var r=setInterval(function(){if(window.document&&window.document.body)return clearInterval(r),e(window.document.body)},10)});function na(e){it("remoteWindowPromises").getOrSet(e,function(){return new p})}function wo(e){var r=it("remoteWindowPromises").get(e);if(!r)throw new Error("Remote window promise not found");return r}function oa(e,r,n){wo(e).resolve(function(i,a,c){if(i!==e)throw new Error("Remote window does not match window");if(!wt(a,r))throw new Error("Remote domain "+a+" does not match domain "+r);n.fireAndForget(c)})}function go(e,r){wo(e).reject(r).catch(Ie)}function Tn(e){for(var r=e.win,n=e.name,i=e.domain,a=me("popupWindowsByName"),c=it("popupWindowsByWin"),u=0,h=a.keys();u<h.length;u++){var l=h[u],m=a.get(l);m&&!Le(m.win)||a.del(l)}if(Le(r))return{win:r,name:n,domain:i};var R=c.getOrSet(r,function(){return n?a.getOrSet(n,function(){return{win:r,name:n}}):{win:r}});if(R.win&&R.win!==r)throw new Error("Different window already linked for window: "+(n||"undefined"));return n&&(R.name=n,a.set(n,R)),i&&(R.domain=i,na(r)),c.set(r,R),R}function ia(e){var r=e.on,n=e.send,i=e.receiveMessage;a=window.open,window.open=function(c,u,h,l){var m=a.call(this,Zn(c),u,h,l);return m&&(Tn({win:m,name:u,domain:c?Ut(c):null}),m)};var a;(function(c){var u=c.on,h=c.send,l=c.receiveMessage,m=me("popupWindowsByName");u("postrobot_open_tunnel",function(R){var y=R.source,v=R.origin,P=R.data,T=me("bridges").get(v);if(!T)throw new Error("Can not find bridge promise for domain "+v);return T.then(function(O){if(y!==O)throw new Error("Message source does not matched registered bridge for domain "+v);if(!P.name)throw new Error("Register window expected to be passed window name");if(!P.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!m.has(P.name))throw new Error("Window with name "+P.name+" does not exist, or was not opened by this window");var x=function(){return m.get(P.name)};if(!x().domain)throw new Error("We do not have a registered domain for window "+P.name);if(x().domain!==v)throw new Error("Message origin "+v+" does not matched registered window origin "+(x().domain||"unknown"));return oa(x().win,v,P.sendMessage),{sendMessage:function(W){if(window&&!window.closed&&x()){var z=x().domain;if(z)try{l({data:W,origin:z,source:x().win},{on:u,send:h})}catch(J){p.reject(J)}}}}})})})({on:r,send:n,receiveMessage:i}),function(c){var u=c.send;Nt(window).openTunnelToParent=function(h){var l=h.name,m=h.source,R=h.canary,y=h.sendMessage,v=me("tunnelWindows"),P=ve(window);if(!P)throw new Error("No parent window found to open tunnel to");var T=function(O){var x=O.name,W=O.source,z=O.canary,J=O.sendMessage;(function(){for(var V=me("tunnelWindows"),U=0,re=V.keys();U<re.length;U++){var H=re[U];Le(V[H].source)&&V.del(H)}})();var M=st();return me("tunnelWindows").set(M,{name:x,source:W,canary:z,sendMessage:J}),M}({name:l,source:m,canary:R,sendMessage:y});return u(P,"postrobot_open_tunnel",{name:l,sendMessage:function(){var O=v.get(T);if(O&&O.source&&!Le(O.source)){try{O.canary()}catch{return}O.sendMessage.apply(this,arguments)}}},{domain:"*"})}}({send:n}),function(c){var u=c.on,h=c.send,l=c.receiveMessage;p.try(function(){var m=Ae(window);if(m&&ta({win:m})){return na(m),(R=m,it("remoteBridgeAwaiters").getOrSet(R,function(){return p.try(function(){var y=Yt(R,vo(ae()));if(y)return L(y)&&Nt(B(y))?y:new p(function(v){var P,T;P=setInterval(function(){if(y&&L(y)&&Nt(B(y)))return clearInterval(P),clearTimeout(T),v(y)},100),T=setTimeout(function(){return clearInterval(P),v()},2e3)})})})).then(function(y){return y?window.name?Nt(B(y)).openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(v){try{}catch{return}if(window&&!window.closed)try{l({data:v,origin:this.origin,source:this.source},{on:u,send:h})}catch(P){p.reject(P)}}}).then(function(v){var P=v.source,T=v.origin,O=v.data;if(P!==m)throw new Error("Source does not match opener");oa(P,T,O.sendMessage)}).catch(function(v){throw go(m,v),v}):go(m,new Error("Can not register with opener: window does not have a name")):go(m,new Error("Can not register with opener: no bridge found in opener"))});var R}})}({on:r,send:n,receiveMessage:i})}function mo(){for(var e=me("idToProxyWindow"),r=0,n=e.keys();r<n.length;r++){var i=n[r];e.get(i).shouldClean()&&e.del(i)}}function aa(e,r){var n=r.send,i=r.id,a=i===void 0?st():i,c=e.then(function(l){if(L(l))return B(l).name}),u=e.then(function(l){if(Le(l))throw new Error("Window is closed, can not determine type");return Ae(l)?q.POPUP:q.IFRAME});c.catch(Ie),u.catch(Ie);var h=function(){return e.then(function(l){if(!Le(l))return L(l)?B(l).name:c})};return{id:a,getType:function(){return u},getInstanceID:Dc(function(){return e.then(function(l){return Yi(l,{send:n})})}),close:function(){return e.then(Ti)},getName:h,focus:function(){return e.then(function(l){l.focus()})},isClosed:function(){return e.then(function(l){return Le(l)})},setLocation:function(l,m){return m===void 0&&(m={}),e.then(function(R){var y=window.location.protocol+"//"+window.location.host,v=m.method,P=v===void 0?"get":v,T=m.body;if(l.indexOf("/")===0)l=""+y+l;else if(!l.match(/^https?:\/\//)&&l.indexOf(y)!==0)throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(l));if(P==="post")return h().then(function(O){if(!O)throw new Error("Can not post to window without target name");(function(x){var W=x.url,z=x.target,J=x.body,M=x.method,V=M===void 0?"post":M,U=document.createElement("form");if(U.setAttribute("target",z),U.setAttribute("method",V),U.setAttribute("action",W),U.style.display="none",J)for(var re=0,H=Object.keys(J);re<H.length;re++){var he,ue=H[re],Q=document.createElement("input");Q.setAttribute("name",ue),Q.setAttribute("value",(he=J[ue])==null?void 0:he.toString()),U.appendChild(Q)}_i().appendChild(U),U.submit(),_i().removeChild(U)})({url:l,target:O,method:P,body:T})});if(P!=="get")throw new Error("Unsupported method: "+P);if(L(R))try{if(R.location&&typeof R.location.replace=="function"){R.location.replace(l);return}}catch{}R.location=l})},setName:function(l){return e.then(function(m){Tn({win:m,name:l});var R=L(m),y=Ri(m);if(!R)throw new Error("Can not set name for cross-domain window: "+l);B(m).name=l,y&&y.setAttribute("name",l),c=p.resolve(l)})}}}var yt=function(){function e(n){var i=n.send,a=n.win,c=n.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new p,this.serializedWindow=c||aa(this.actualWindowPromise,{send:i}),me("idToProxyWindow").set(this.getID(),this),a&&this.setWindow(a,{send:i})}var r=e.prototype;return r.getID=function(){return this.serializedWindow.id},r.getType=function(){return this.serializedWindow.getType()},r.isPopup=function(){return this.getType().then(function(n){return n===q.POPUP})},r.setLocation=function(n,i){var a=this;return this.serializedWindow.setLocation(n,i).then(function(){return a})},r.getName=function(){return this.serializedWindow.getName()},r.setName=function(n){var i=this;return this.serializedWindow.setName(n).then(function(){return i})},r.close=function(){var n=this;return this.serializedWindow.close().then(function(){return n})},r.focus=function(){var n=this,i=this.isPopup(),a=this.getName(),c=p.hash({isPopup:i,name:a}).then(function(h){var l=h.name;h.isPopup&&l&&window.open("",l,"noopener")}),u=this.serializedWindow.focus();return p.all([c,u]).then(function(){return n})},r.isClosed=function(){return this.serializedWindow.isClosed()},r.getWindow=function(){return this.actualWindow},r.setWindow=function(n,i){var a=i.send;this.actualWindow=n,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=aa(this.actualWindowPromise,{send:a,id:this.getID()}),it("winToProxyWindow").set(n,this)},r.awaitWindow=function(){return this.actualWindowPromise},r.matchWindow=function(n,i){var a=this,c=i.send;return p.try(function(){return a.actualWindow?n===a.actualWindow:p.hash({proxyInstanceID:a.getInstanceID(),knownWindowInstanceID:Yi(n,{send:c})}).then(function(u){var h=u.proxyInstanceID===u.knownWindowInstanceID;return h&&a.setWindow(n,{send:c}),h})})},r.unwrap=function(){return this.actualWindow||this},r.getInstanceID=function(){return this.serializedWindow.getInstanceID()},r.shouldClean=function(){return!!(this.actualWindow&&Le(this.actualWindow))},r.serialize=function(){return this.serializedWindow},e.unwrap=function(n){return e.isProxyWindow(n)?n.unwrap():n},e.serialize=function(n,i){var a=i.send;return mo(),e.toProxyWindow(n,{send:a}).serialize()},e.deserialize=function(n,i){var a=i.send;return mo(),me("idToProxyWindow").get(n.id)||new e({serializedWindow:n,send:a})},e.isProxyWindow=function(n){return!!(n&&!ur(n)&&n.isProxyWindow)},e.toProxyWindow=function(n,i){var a=i.send;if(mo(),e.isProxyWindow(n))return n;var c=n;return it("winToProxyWindow").get(c)||new e({win:c,send:a})},e}();function yo(e,r,n,i,a){var c=it("methodStore"),u=me("proxyWindowMethods");yt.isProxyWindow(i)?u.set(e,{val:r,name:n,domain:a,source:i}):(u.del(e),c.getOrSet(i,function(){return{}})[e]={domain:a,name:n,val:r,source:i})}function sa(e,r){var n=it("methodStore"),i=me("proxyWindowMethods");return n.getOrSet(e,function(){return{}})[r]||i.get(r)}function ca(e,r,n,i,a){u=(c={on:a.on,send:a.send}).on,h=c.send,me("builtinListeners").getOrSet("functionCalls",function(){return u("postrobot_method",{domain:"*"},function(R){var y=R.source,v=R.origin,P=R.data,T=P.id,O=P.name,x=sa(y,T);if(!x)throw new Error("Could not find method '"+O+"' with id: "+P.id+" in "+ae(window));var W=x.source,z=x.domain,J=x.val;return p.try(function(){if(!wt(z,v))throw new Error("Method '"+P.name+"' domain "+JSON.stringify(io(x.domain)?x.domain.source:x.domain)+" does not match origin "+v+" in "+ae(window));if(yt.isProxyWindow(W))return W.matchWindow(y,{send:h}).then(function(M){if(!M)throw new Error("Method call '"+P.name+"' failed - proxy window does not match source in "+ae(window))})}).then(function(){return J.apply({source:y,origin:v},P.args)},function(M){return p.try(function(){if(J.onError)return J.onError(M)}).then(function(){throw M.stack&&(M.stack="Remote call to "+O+"("+function(V){return V===void 0&&(V=[]),no(V).map(function(U){return typeof U=="string"?"'"+U+"'":U===void 0?"undefined":U===null?"null":typeof U=="boolean"?U.toString():Array.isArray(U)?"[ ... ]":typeof U=="object"?"{ ... }":typeof U=="function"?"() => { ... }":"<"+typeof U+">"}).join(", ")}(P.args)+`) failed

`+M.stack),M})}).then(function(M){return{result:M,id:T,name:O}})})});var c,u,h,l=n.__id__||st();e=yt.unwrap(e);var m=n.__name__||n.name||i;return typeof m=="string"&&typeof m.indexOf=="function"&&m.indexOf("anonymous::")===0&&(m=m.replace("anonymous::",i+"::")),yt.isProxyWindow(e)?(yo(l,n,m,e,r),e.awaitWindow().then(function(R){yo(l,n,m,R,r)})):yo(l,n,m,e,r),dr("cross_domain_function",{id:l,name:m})}function ua(e,r,n,i){var a,c=i.on,u=i.send;return function(h,l){l===void 0&&(l=zc);var m=JSON.stringify(h,function(R){var y=this[R];if(ho(this))return y;var v=Qi(y);if(!v)return y;var P=l[v]||Lc[v];return P?P(y,R):y});return m===void 0?"undefined":m}(n,((a={}).promise=function(h,l){return function(m,R,y,v,P){return dr("cross_domain_zalgo_promise",{then:ca(m,R,function(T,O){return y.then(T,O)},v,{on:P.on,send:P.send})})}(e,r,h,l,{on:c,send:u})},a.function=function(h,l){return ca(e,r,h,l,{on:c,send:u})},a.object=function(h){return ur(h)||yt.isProxyWindow(h)?dr("cross_domain_window",yt.serialize(h,{send:u})):h},a))}function da(e,r,n,i){var a,c=i.send;return function(u,h){if(h===void 0&&(h=Bc),u!=="undefined")return JSON.parse(u,function(l,m){if(ho(this))return m;var R,y;if(ho(m)?(R=m.__type__,y=m.__val__):(R=Qi(m),y=m),!R)return y;var v=h[R]||Uc[R];return v?v(y,l):y})}(n,((a={}).cross_domain_zalgo_promise=function(u){return function(h,l,m){return new p(m.then)}(0,0,u)},a.cross_domain_function=function(u){return function(h,l,m,R){var y=m.id,v=m.name,P=R.send,T=function(x){x===void 0&&(x={});function W(){var z=arguments;return yt.toProxyWindow(h,{send:P}).awaitWindow().then(function(J){var M=sa(J,y);if(M&&M.val!==W)return M.val.apply({source:window,origin:ae()},z);var V=[].slice.call(z);return x.fireAndForget?P(J,"postrobot_method",{id:y,name:v,args:V},{domain:l,fireAndForget:!0}):P(J,"postrobot_method",{id:y,name:v,args:V},{domain:l,fireAndForget:!1}).then(function(U){return U.data.result})}).catch(function(J){throw J})}return W.__name__=v,W.__origin__=l,W.__source__=h,W.__id__=y,W.origin=l,W},O=T();return O.fireAndForget=T({fireAndForget:!0}),O}(e,r,u,{send:c})},a.cross_domain_window=function(u){return yt.deserialize(u,{send:c})},a))}var Hr={};Hr.postrobot_post_message=function(e,r,n){n.indexOf("file:")===0&&(n="*"),e.postMessage(r,n)},Hr.postrobot_bridge=function(e,r,n){if(!po()&&!ra())throw new Error("Bridge not needed for browser");if(L(e))throw new Error("Post message through bridge disabled between same domain windows");if(cr(window,e)!==!1)throw new Error("Can only use bridge to communicate between two different windows, not between frames");(function(i,a,c){var u=fn(window,i),h=fn(i,window);if(!u&&!h)throw new Error("Can only send messages to and from parent and popup windows");wo(i).then(function(l){return l(i,a,c)})})(e,n,r)},Hr.postrobot_global=function(e,r){if(!Yn(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!L(e))throw new Error("Post message through global disabled between different domain windows");if(cr(window,e)!==!1)throw new Error("Can only use global to communicate between two different windows, not between frames");var n=Nt(e);if(!n)throw new Error("Can not find postRobot global on foreign window");n.receiveMessage({source:window,origin:ae(),data:r})};function Eo(e,r,n,i){var a=i.on,c=i.send;return p.try(function(){var u=it().getOrSet(e,function(){return{}});return u.buffer=u.buffer||[],u.buffer.push(n),u.flush=u.flush||p.flush().then(function(){if(Le(e))throw new Error("Window is closed");var h=ua(e,r,((l={}).__post_robot_11_0_0__=u.buffer||[],l),{on:a,send:c}),l;delete u.buffer;for(var m=Object.keys(Hr),R=[],y=0;y<m.length;y++){var v=m[y];try{Hr[v](e,h,r)}catch(P){R.push(P)}}if(R.length===m.length)throw new Error(`All post-robot messaging strategies failed:

`+R.map(function(P,T){return T+". "+Or(P)}).join(`

`))}),u.flush.then(function(){delete u.flush})}).then(Ie)}function fa(e){return me("responseListeners").get(e)}function la(e){me("responseListeners").del(e)}function ha(e){return me("erroredResponseListeners").has(e)}function pa(e){var r=e.name,n=e.win,i=e.domain,a=it("requestListeners");if(n==="*"&&(n=null),i==="*"&&(i=null),!r)throw new Error("Name required to get request listener");for(var c=0,u=[n,Rn()];c<u.length;c++){var h=u[c];if(h){var l=a.get(h);if(l){var m=l[r];if(m){if(i&&typeof i=="string"){if(m[i])return m[i];if(m.__domain_regex__)for(var R=0,y=m.__domain_regex__;R<y.length;R++){var v=y[R],P=v.listener;if(wt(v.regex,i))return P}}if(m["*"])return m["*"]}}}}}function bo(e,r){var n=r.on,i=r.send,a=me("receivedMessages");try{if(!window||window.closed||!e.source)return}catch{return}var c=e.source,u=e.origin,h=function(y,v,P,T){var O=T.on,x=T.send,W;try{W=da(v,P,y,{on:O,send:x})}catch{return}if(W&&typeof W=="object"&&W!==null){var z=W.__post_robot_11_0_0__;if(Array.isArray(z))return z}}(e.data,c,u,{on:n,send:i});if(h){Xi(c);for(var l,m=function(){var y=h[R];if(a.has(y.id))return{v:void 0};if(a.set(y.id,!0),Le(c)&&!y.fireAndForget)return{v:void 0};y.origin.indexOf("file:")===0&&(u="file://");try{y.type==="postrobot_message_request"?function(v,P,T,O){var x=O.on,W=O.send,z=pa({name:T.name,win:v,domain:P}),J=T.name==="postrobot_method"&&T.data&&typeof T.data.name=="string"?T.data.name+"()":T.name;function M(V,U,re){return p.flush().then(function(){if(!T.fireAndForget&&!Le(v))try{return Eo(v,P,{id:st(),origin:ae(window),type:"postrobot_message_response",hash:T.hash,name:T.name,ack:V,data:U,error:re},{on:x,send:W})}catch(H){throw new Error("Send response message failed for "+J+" in "+ae()+`

`+Or(H))}})}p.all([p.flush().then(function(){if(!T.fireAndForget&&!Le(v))try{return Eo(v,P,{id:st(),origin:ae(window),type:"postrobot_message_ack",hash:T.hash,name:T.name},{on:x,send:W})}catch(V){throw new Error("Send ack message failed for "+J+" in "+ae()+`

`+Or(V))}}),p.try(function(){if(!z)throw new Error("No handler found for post message: "+T.name+" from "+P+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);return z.handler({source:v,origin:P,data:T.data})}).then(function(V){return M("success",V)},function(V){return M("error",null,V)})]).then(Ie).catch(function(V){if(z&&z.handleError)return z.handleError(V);throw V})}(c,u,y,{on:n,send:i}):y.type==="postrobot_message_response"?function(v,P,T){if(!ha(T.hash)){var O=fa(T.hash);if(!O)throw new Error("No handler found for post message response for message: "+T.name+" from "+P+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!wt(O.domain,P))throw new Error("Response origin "+P+" does not match domain "+(x=O.domain,Array.isArray(x)?"("+x.join(" | ")+")":A(x)?"RegExp("+x.toString()+")":x.toString()));var x;if(v!==O.win)throw new Error("Response source does not match registered window");la(T.hash),T.ack==="error"?O.promise.reject(T.error):T.ack==="success"&&O.promise.resolve({source:v,origin:P,data:T.data})}}(c,u,y):y.type==="postrobot_message_ack"&&function(v,P,T){if(!ha(T.hash)){var O=fa(T.hash);if(!O)throw new Error("No handler found for post message ack for message: "+T.name+" from "+P+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!wt(O.domain,P))throw new Error("Ack origin "+P+" does not match domain "+O.domain.toString());if(v!==O.win)throw new Error("Ack source does not match registered window")}catch(x){O.promise.reject(x)}O.ack=!0}}(c,u,y)}catch(v){setTimeout(function(){throw v},0)}},R=0;R<h.length;R++)if(l=m())return l.v}}function Bt(e,r,n){if(!e)throw new Error("Expected name");if(typeof(r=r||{})=="function"&&(n=r,r={}),!n)throw new Error("Expected handler");var i=function a(c,u){var h=c.name,l=c.win,m=c.domain,R=it("requestListeners");if(!h||typeof h!="string")throw new Error("Name required to add request listener");if(l&&l!=="*"&&yt.isProxyWindow(l)){var y=l.awaitWindow().then(function(he){return a({name:h,win:he,domain:m},u)});return{cancel:function(){y.then(function(he){return he.cancel()},Ie)}}}var v=l;if(Array.isArray(v)){for(var P=[],T=0,O=v;T<O.length;T++)P.push(a({name:h,domain:m,win:O[T]},u));return{cancel:function(){for(var he=0;he<P.length;he++)P[he].cancel()}}}if(Array.isArray(m)){for(var x=[],W=0,z=m;W<z.length;W++)x.push(a({name:h,win:v,domain:z[W]},u));return{cancel:function(){for(var he=0;he<x.length;he++)x[he].cancel()}}}var J=pa({name:h,win:v,domain:m});v&&v!=="*"||(v=Rn());var M=(m=m||"*").toString();if(J)throw v&&m?new Error("Request listener already exists for "+h+" on domain "+m.toString()+" for "+(v===Rn()?"wildcard":"specified")+" window"):v?new Error("Request listener already exists for "+h+" for "+(v===Rn()?"wildcard":"specified")+" window"):m?new Error("Request listener already exists for "+h+" on domain "+m.toString()):new Error("Request listener already exists for "+h);var V=R.getOrSet(v,function(){return{}}),U=qr(V,h,function(){return{}}),re,H;return io(m)?(re=qr(U,"__domain_regex__",function(){return[]})).push(H={regex:m,listener:u}):U[M]=u,{cancel:function(){delete U[M],H&&(re.splice(re.indexOf(H,1)),re.length||delete U.__domain_regex__),Object.keys(U).length||delete V[h],v&&!Object.keys(V).length&&R.del(v)}}}({name:e,win:r.window,domain:r.domain||"*"},{handler:n||r.handler,handleError:r.errorHandler||function(a){throw a}});return{cancel:function(){i.cancel()}}}var It=function e(r,n,i,a){var c=(a=a||{}).domain||"*",u=a.timeout||-1,h=a.timeout||5e3,l=a.fireAndForget||!1;return yt.toProxyWindow(r,{send:e}).awaitWindow().then(function(m){return p.try(function(){if(function(R,y,v){if(!R)throw new Error("Expected name");if(v&&typeof v!="string"&&!Array.isArray(v)&&!io(v))throw new TypeError("Can not send "+R+". Expected domain "+JSON.stringify(v)+" to be a string, array, or regex");if(Le(y))throw new Error("Can not send "+R+". Target window is closed")}(n,m,c),function(R,y){var v=Zt(y);if(v)return v===R;if(y===R||xe(y)===y)return!1;for(var P=0,T=Re(R);P<T.length;P++)if(T[P]===y)return!0;return!1}(window,m))return Zi(m,h)}).then(function(R){return function(y,v,P,T){var O=T.send;return p.try(function(){return typeof v=="string"?v:p.try(function(){return P||lo(y,{send:O}).then(function(x){return x.domain})}).then(function(x){if(!wt(v,v))throw new Error("Domain "+wn(v)+" does not match "+wn(v));return x})})}(m,c,(R===void 0?{}:R).domain,{send:e})}).then(function(R){var y=R,v=n==="postrobot_method"&&i&&typeof i.name=="string"?i.name+"()":n,P=new p,T=n+"_"+st();if(!l){var O={name:n,win:m,domain:y,promise:P};(function(U,re){me("responseListeners").set(U,re)})(T,O);var x=it("requestPromises").getOrSet(m,function(){return[]});x.push(P),P.catch(function(){(function(U){me("erroredResponseListeners").set(U,!0)})(T),la(T)});var W=function(U){return it("knownWindows").get(U,!1)}(m)?1e4:2e3,z=u,J=W,M=z,V=jr(function(){return Le(m)?P.reject(new Error("Window closed for "+n+" before "+(O.ack?"response":"ack"))):O.cancelled?P.reject(new Error("Response listener was cancelled for "+n)):(J=Math.max(J-500,0),M!==-1&&(M=Math.max(M-500,0)),O.ack||J!==0?M===0?P.reject(new Error("No response for postMessage "+v+" in "+ae()+" in "+z+"ms")):void 0:P.reject(new Error("No ack for postMessage "+v+" in "+ae()+" in "+W+"ms")))},500);P.finally(function(){V.cancel(),x.splice(x.indexOf(P,1))}).catch(Ie)}return Eo(m,y,{id:st(),origin:ae(window),type:"postrobot_message_request",hash:T,name:n,data:i,fireAndForget:l},{on:Bt,send:e}).then(function(){return l?P.resolve():P},function(U){throw new Error("Send request message failed for "+v+" in "+ae()+`

`+Or(U))})})})};function Vr(e){return yt.toProxyWindow(e,{send:It})}function va(e){for(var r=0,n=it("requestPromises").get(e,[]);r<n.length;r++)n[r].reject(new Error("Window "+(Le(e)?"closed":"cleaned up")+" before response")).catch(Ie)}var kt;kt={setupBridge:ia,openBridge:function(e,r){var n=me("bridges"),i=me("bridgeFrames");return r=r||Ut(e),n.getOrSet(r,function(){return p.try(function(){if(ae()===r)throw new Error("Can not open bridge on the same domain as current domain: "+r);var a=vo(r);if(Yt(window,a))throw new Error("Frame with name "+a+" already exists on page");var c=function(u,h){var l=document.createElement("iframe");return l.setAttribute("name",u),l.setAttribute("id",u),l.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),l.setAttribute("frameborder","0"),l.setAttribute("border","0"),l.setAttribute("scrolling","no"),l.setAttribute("allowTransparency","true"),l.setAttribute("tabindex","-1"),l.setAttribute("hidden","true"),l.setAttribute("title",""),l.setAttribute("role","presentation"),l.src=h,l}(a,e);return i.set(r,c),jc.then(function(u){u.appendChild(c);var h=c.contentWindow;return new p(function(l,m){c.addEventListener("load",l),c.addEventListener("error",m)}).then(function(){return Zi(h,5e3,"Bridge "+e)}).then(function(){return h})})})})},linkWindow:Tn,linkUrl:function(e,r){Tn({win:e,domain:Ut(r)})},isBridge:ra,needsBridge:ta,needsBridgeForBrowser:po,hasBridge:function(e,r){return me("bridges").has(r||Ut(e))},needsBridgeForWin:ki,needsBridgeForDomain:ea,destroyBridges:function(){for(var e=me("bridges"),r=me("bridgeFrames"),n=0,i=r.keys();n<i.length;n++){var a=r.get(i[n]);a&&a.parentNode&&a.parentNode.removeChild(a)}r.reset(),e.reset()}};function Gr(e){if(!L(e))throw new Error("Can not get global for window on different domain");return e.__zoid_10_3_3__||(e.__zoid_10_3_3__={}),e.__zoid_10_3_3__}function wa(e,r){try{return r(Gr(e))}catch{}}function Sn(e){return{get:function(){var r=this;return p.try(function(){if(r.source&&r.source!==window)throw new Error("Can not call get on proxy object from a remote window");return e})}}}function qc(e){return eo(JSON.stringify(e))}function Po(e){var r=Gr(e);return r.references=r.references||{},r.references}function ga(e){var r=e.data,n=e.metaData,i=e.sender,a=e.receiver,c=e.passByReference,u=c!==void 0&&c,h=e.basic,l=h!==void 0&&h,m=Vr(a.win),R=l?JSON.stringify(r):ua(m,a.domain,r,{on:Bt,send:It}),y=u?function(v){var P=st();return Po(window)[P]=v,{type:"uid",uid:P}}(R):{type:"raw",val:R};return{serializedData:qc({sender:{domain:i.domain},metaData:n,reference:y}),cleanReference:function(){v=window,(P=y).type==="uid"&&delete Po(v)[P.uid];var v,P}}}function ma(e){var r=e.sender,n=e.basic,i=n!==void 0&&n,a=function(R){return JSON.parse(function(y){if(typeof atob=="function")return decodeURIComponent([].map.call(atob(y),function(v){return"%"+("00"+v.charCodeAt(0).toString(16)).slice(-2)}).join(""));if(typeof Buffer<"u")return Buffer.from(y,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(R))}(e.data),c=a.reference,u=a.metaData,h;h=typeof r.win=="function"?r.win({metaData:u}):r.win;var l;l=typeof r.domain=="function"?r.domain({metaData:u}):typeof r.domain=="string"?r.domain:a.sender.domain;var m=function(R,y){if(y.type==="raw")return y.val;if(y.type==="uid")return Po(R)[y.uid];throw new Error("Unsupported ref type: "+y.type)}(h,c);return{data:i?JSON.parse(m):function(R,y,v){return da(R,y,v,{on:Bt,send:It})}(h,l,m),metaData:u,sender:{win:h,domain:l},reference:c}}var be={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},On={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},We=q,De={RENDER:"zoid-render",RENDERED:"zoid-rendered",PRERENDER:"zoid-prerender",PRERENDERED:"zoid-prerendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function ya(e){return"__zoid__"+e.name+"__"+e.serializedPayload+"__"}function Ro(e){if(!e)throw new Error("No window name");var r=e.split("__"),n=r[1],i=r[2],a=r[3];if(n!=="zoid")throw new Error("Window not rendered by zoid - got "+n);if(!i)throw new Error("Expected component name");if(!a)throw new Error("Expected serialized payload ref");return{name:i,serializedInitialPayload:a}}var $c=Xt(function(e){var r=ma({data:Ro(e).serializedInitialPayload,sender:{win:function(n){return function(i){if(i.type==="opener")return yn("opener",Ae(window));if(i.type==="parent"&&typeof i.distance=="number")return yn("parent",function(y,v){return v===void 0&&(v=1),function(P,T){T===void 0&&(T=1);for(var O=P,x=0;x<T;x++){if(!O)return;O=ve(O)}return O}(y,Ur(y)-v)}(window,i.distance));if(i.type==="global"&&i.uid&&typeof i.uid=="string"){var a=i.uid,c=Zt(window);if(!c)throw new Error("Can not find ancestor window");for(var u=0,h=Ke(c);u<h.length;u++){var l=h[u];if(L(l)){var m=wa(l,function(y){return y.windows&&y.windows[a]});if(m)return m}}}else if(i.type==="name"){var R=i.name;return yn("namedWindow",function(y,v){return Yt(y,v)||function P(T,O){var x=Yt(T,O);if(x)return x;for(var W=0,z=Re(T);W<z.length;W++){var J=P(z[W],O);if(J)return J}}(xe(y)||y,v)}(yn("ancestor",Zt(window)),R))}throw new Error("Unable to find "+i.type+" parent component window")}(n.metaData.windowRef)}}});return{parent:r.sender,payload:r.data,reference:r.reference}});function Ea(){return $c(window.name)}function Hc(e,r){if(r===void 0&&(r=window),e===ve(r))return{type:"parent",distance:Ur(e)};if(e===Ae(r))return{type:"opener"};if(L(e)&&(i=e,i!==xe(i))){var n=B(e).name;if(n)return{type:"name",name:n}}var i}function ba(e,r,n,i,a){if(!e.hasOwnProperty(n))return i;var c=e[n];return typeof c.childDecorate=="function"?c.childDecorate({value:i,uid:a.uid,tag:a.tag,close:a.close,focus:a.focus,onError:a.onError,onProps:a.onProps,resize:a.resize,getParent:a.getParent,getParentDomain:a.getParentDomain,show:a.show,hide:a.hide,export:a.export,getSiblings:a.getSiblings}):i}function Vc(){return p.try(function(){window.focus()})}function Pa(){return p.try(function(){window.close()})}var jt=function(){return Ie},fr=function(e){return vn(e.value)};function To(e,r,n){for(var i=0,a=Object.keys(w({},e,r));i<a.length;i++){var c=a[i];n(c,r[c],e[c])}}function Ra(e,r,n){var i={};return p.all(function(a,c,u){var h=[];return To(a,c,function(l,m,R){var y=function(v,P,T){return p.resolve().then(function(){var O,x;if(T!=null&&P){var W=(O={},O.get=P.queryParam,O.post=P.bodyParam,O)[n],z=(x={},x.get=P.queryValue,x.post=P.bodyValue,x)[n];if(W)return p.hash({finalParam:p.try(function(){return typeof W=="function"?W({value:T}):typeof W=="string"?W:v}),finalValue:p.try(function(){return typeof z=="function"&&Qt(T)?z({value:T}):T})}).then(function(J){var M=J.finalParam,V=J.finalValue,U;if(typeof V=="boolean")U=V.toString();else if(typeof V=="string")U=V.toString();else if(typeof V=="object"&&V!==null){if(P.serialization===On.JSON)U=JSON.stringify(V);else if(P.serialization===On.BASE64)U=eo(JSON.stringify(V));else if(P.serialization===On.DOTIFY||!P.serialization){U=function ue(Q,G,le){G===void 0&&(G=""),le===void 0&&(le={}),G=G&&G+".";for(var ne in Q)Q.hasOwnProperty(ne)&&Q[ne]!=null&&typeof Q[ne]!="function"&&(Q[ne]&&Array.isArray(Q[ne])&&Q[ne].length&&Q[ne].every(function(Me){return typeof Me!="object"})?le[""+G+ne+"[]"]=Q[ne].join(","):Q[ne]&&typeof Q[ne]=="object"?le=ue(Q[ne],""+G+ne,le):le[""+G+ne]=Q[ne].toString());return le}(V,v);for(var re=0,H=Object.keys(U);re<H.length;re++){var he=H[re];i[he]=U[he]}return}}else typeof V=="number"&&(U=V.toString());i[M]=U})}})}(l,m,R);h.push(y)}),h}(r,e)).then(function(){return i})}function Ta(e){var r=e.uid,n=e.options,i=e.overrides,a=i===void 0?{}:i,c=e.parentWin,u=c===void 0?window:c,h=n.propsDef,l=n.containerTemplate,m=n.prerenderTemplate,R=n.tag,y=n.name,v=n.attributes,P=n.dimensions,T=n.autoResize,O=n.url,x=n.domain,W=n.exports,z=new p,J=[],M=mn(),V={},U={},re={visible:!0},H=a.event?a.event:(he={},ue={},Q={on:function(I,_){var $=ue[I]=ue[I]||[];$.push(_);var j=!1;return{cancel:function(){j||(j=!0,$.splice($.indexOf(_),1))}}},once:function(I,_){var $=Q.on(I,function(){$.cancel(),_()});return $},trigger:function(I){for(var _=arguments.length,$=new Array(_>1?_-1:0),j=1;j<_;j++)$[j-1]=arguments[j];var ie=ue[I],k=[];if(ie)for(var Te=function(){var Xe=ie[Se];k.push(p.try(function(){return Xe.apply(void 0,$)}))},Se=0;Se<ie.length;Se++)Te();return p.all(k).then(Ie)},triggerOnce:function(I){if(he[I])return p.resolve();he[I]=!0;for(var _=arguments.length,$=new Array(_>1?_-1:0),j=1;j<_;j++)$[j-1]=arguments[j];return Q.trigger.apply(Q,[I].concat($))},reset:function(){ue={}}}),he,ue,Q,G=a.props?a.props:{},le,ne,Me,At,Et,er=!1,tr=a.onError,qt=a.getProxyContainer,rr=a.show,nr=a.hide,lr=a.close,or=a.renderContainer,Dt=a.getProxyWindow,hr=a.setProxyWin,ir=a.openFrame,ar=a.openPrerenderFrame,pr=a.prerender,vr=a.open,de=a.openPrerender,bt=a.watchForUnload,fe=a.getInternalState,Ye=a.setInternalState,ze=function(){return typeof P=="function"?P({props:G}):P},Ze=function(){return p.try(function(){return a.resolveInitPromise?a.resolveInitPromise():z.resolve()})},Ne=function(I){return p.try(function(){return a.rejectInitPromise?a.rejectInitPromise(I):z.reject(I)})},ct=function(I){for(var _={},$=0,j=Object.keys(G);$<j.length;$++){var ie=j[$],k=h[ie];if(!k||k.sendToChild!==!1){var Te=k&&k.trustedDomains&&k.trustedDomains.length>0?k.trustedDomains.reduce(function(Se,Xe){return Se||wt(Xe,I)},!1):wt(I,ae(window));k&&k.sameDomain&&!Te||k&&k.trustedDomains&&!Te||(_[ie]=G[ie])}}return p.hash(_)},$e=function(){return p.try(function(){return fe?fe():re})},He=function(I){return p.try(function(){return Ye?Ye(I):re=w({},re,I)})},Pt=function(){return Dt?Dt():p.try(function(){var I=G.window;if(I){var _=Vr(I);return M.register(function(){return I.close()}),_}return new yt({send:It})})},ft=function(I){return hr?hr(I):p.try(function(){le=I})},Ct=function(){return rr?rr():p.hash({setState:He({visible:!0}),showElement:ne?ne.get().then(Ac):null}).then(Ie)},$t=function(){return nr?nr():p.hash({setState:He({visible:!1}),showElement:ne?ne.get().then(Bi):null}).then(Ie)},Dr=function(){return typeof O=="function"?O({props:G}):O},Cr=function(){return typeof v=="function"?v({props:G}):v},wr=function(){return Ut(Dr())},lt=function(I,_){var $=_.windowName;return ir?ir(I,{windowName:$}):p.try(function(){if(I===We.IFRAME)return Sn(zi({attributes:w({name:$,title:y},Cr().iframe)}))})},Jr=function(I){return ar?ar(I):p.try(function(){if(I===We.IFRAME)return Sn(zi({attributes:w({name:"__zoid_prerender_frame__"+y+"_"+st()+"__",title:"prerender__"+y},Cr().iframe)}))})},Kr=function(I,_,$){return de?de(I,_,$):p.try(function(){if(I===We.IFRAME){if(!$)throw new Error("Expected proxy frame to be passed");return $.get().then(function(j){return M.register(function(){return $r(j)}),co(j).then(function(ie){return B(ie)}).then(function(ie){return Vr(ie)})})}if(I===We.POPUP)return _;throw new Error("No render context available for "+I)})},_r=function(){return p.try(function(){if(le)return p.all([H.trigger(De.FOCUS),le.focus()]).then(Ie)})},xn=function(){var I=Gr(window);return I.windows=I.windows||{},I.windows[r]=window,M.register(function(){delete I.windows[r]}),r},Yr=function(I,_,$,j){if(_===ae(window))return{type:"global",uid:xn()};if(I!==window)throw new Error("Can not construct cross-domain window reference for different target window");if(G.window){var ie=j.getWindow();if(!ie)throw new Error("Can not construct cross-domain window reference for lazy window prop");if(Zt(ie)!==window)throw new Error("Can not construct cross-domain window reference for window prop with different ancestor")}if($===We.POPUP)return{type:"opener"};if($===We.IFRAME)return{type:"parent",distance:Ur(window)};throw new Error("Can not construct window reference for child")},In=function(I,_){return p.try(function(){var $;At=I,Me=_,($=le)==null||$.isPopup().then(function(j){if((_==null?void 0:_.name)!==""&&j){var ie;(ie=le)==null||ie.setName(_==null?void 0:_.name)}}).finally(function(){Ze(),M.register(function(){return _.close.fireAndForget().catch(Ie)})})})},Zr=function(I){var _=I.width,$=I.height;return p.try(function(){H.trigger(De.RESIZE,{width:_,height:$})})},Xr=function(I){return p.try(function(){return H.trigger(De.DESTROY)}).catch(Ie).then(function(){return M.all(I)}).then(function(){var _=I||new Error("Component destroyed");Et&&Ir(Et)||_.message==="Window navigated away"?z.resolve():z.asyncReject(_)})},Ht=Xt(function(I){return p.try(function(){return lr?Le(lr.__source__)?void 0:lr():p.try(function(){return H.trigger(De.CLOSE)}).then(function(){return Xr(I||new Error("Component closed"))})})}),xa=function(I,_){var $=_.proxyWin,j=_.proxyFrame,ie=_.windowName;return vr?vr(I,{proxyWin:$,proxyFrame:j,windowName:ie}):p.try(function(){if(I===We.IFRAME){if(!j)throw new Error("Expected proxy frame to be passed");return j.get().then(function(Ue){return co(Ue).then(function(ye){return M.register(function(){return $r(Ue)}),M.register(function(){return va(ye)}),ye})})}if(I===We.POPUP){var k=ze(),Te=k.width,Se=Te===void 0?"300px":Te,Xe=k.height,Ce=Xe===void 0?"150px":Xe;Se=Vi(Se,window.outerWidth),Ce=Vi(Ce,window.outerWidth);var Ve=function(Ue,ye){var Be=(ye=ye||{}).closeOnUnload,_e=Be===void 0?1:Be,ht=ye.name,Qe=ht===void 0?"":ht,pe=ye.width,ke=ye.height,ut=0,rt=0;pe&&(window.outerWidth?rt=Math.round((window.outerWidth-pe)/2)+window.screenX:window.screen.width&&(rt=Math.round((window.screen.width-pe)/2))),ke&&(window.outerHeight?ut=Math.round((window.outerHeight-ke)/2)+window.screenY:window.screen.height&&(ut=Math.round((window.screen.height-ke)/2))),delete ye.closeOnUnload,delete ye.name,pe&&ke&&(ye=w({top:ut,left:rt,width:pe,height:ke,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},ye));var gr=Object.keys(ye).map(function(Wt){if(ye[Wt]!=null)return Wt+"="+wn(ye[Wt])}).filter(Boolean).join(","),Rt;try{Rt=window.open("",Qe,gr)}catch(Wt){throw new so("Can not open popup window - "+(Wt.stack||Wt.message))}if(Le(Rt))throw new so("Can not open popup window - blocked");return _e&&window.addEventListener("unload",function(){return Rt.close()}),Rt}(0,w({name:ie,width:Se,height:Ce},Cr().popup));return M.register(function(){return Ti(Ve)}),M.register(function(){return va(Ve)}),Ve}throw new Error("No render context available for "+I)}).then(function(k){return $.setWindow(k,{send:It}),$.setName(ie).then(function(){return $})})},Ia=function(){return p.try(function(){var I=Ui(window,"unload",vn(function(){Xr(new Error("Window navigated away"))})),_=Pi(u,Xr,3e3);if(M.register(_.cancel),M.register(I.cancel),bt)return bt()})},Da=function(I){var _=!1;return I.isClosed().then(function($){return $?(_=!0,Ht(new Error("Detected component window close"))):p.delay(200).then(function(){return I.isClosed()}).then(function(j){if(j)return _=!0,Ht(new Error("Detected component window close"))})}).then(function(){return _})},Qr=function(I){return tr?tr(I):p.try(function(){if(J.indexOf(I)===-1)return J.push(I),z.asyncReject(I),H.trigger(De.ERROR,I)})},Ca=new p,_a=function(I){return p.try(function(){Ca.resolve(I)})};In.onError=Qr;var Na=function(I,_){return I({uid:r,container:_.container,context:_.context,doc:_.doc,frame:_.frame,prerenderFrame:_.prerenderFrame,focus:_r,close:Ht,state:V,props:G,tag:R,dimensions:ze(),event:H})},Aa=function(I,_){var $=_.context;return pr?pr(I,{context:$}):p.try(function(){if(m){H.trigger(De.PRERENDER);var j=I.getWindow();if(j&&L(j)&&function(Be){try{if(!Be.location.href||Be.location.href==="about:blank")return!0}catch{}return!1}(j)){var ie=(j=B(j)).document,k=Na(m,{context:$,doc:ie});if(k){if(k.ownerDocument!==ie)throw new Error("Expected prerender template to have been created with document from child window");(function(Be,_e){var ht=_e.tagName.toLowerCase();if(ht!=="html")throw new Error("Expected element to be html, got "+ht);for(var Qe=Be.document.documentElement,pe=0,ke=no(Qe.children);pe<ke.length;pe++)Qe.removeChild(ke[pe]);for(var ut=0,rt=no(_e.children);ut<rt.length;ut++)Qe.appendChild(rt[ut])})(j,k);var Te=T.width,Se=Te!==void 0&&Te,Xe=T.height,Ce=Xe!==void 0&&Xe,Ve=T.element,Ue=Ve===void 0?"body":Ve;if((Ue=ao(Ue,ie))&&(Se||Ce)){var ye=ji(Ue,function(Be){Zr({width:Se?Be.width:void 0,height:Ce?Be.height:void 0})},{width:Se,height:Ce,win:j});H.on(De.RENDERED,ye.cancel)}H.trigger(De.PRERENDERED)}}}})},Wa=function(I,_){var $=_.proxyFrame,j=_.proxyPrerenderFrame,ie=_.context,k=_.rerender;return or?or(I,{proxyFrame:$,proxyPrerenderFrame:j,context:ie,rerender:k}):p.hash({container:I.get(),frame:$?$.get():null,prerenderFrame:j?j.get():null,internalState:$e()}).then(function(Te){var Se=Te.container,Xe=Te.internalState.visible,Ce=Na(l,{context:ie,container:Se,frame:Te.frame,prerenderFrame:Te.prerenderFrame,doc:document});if(Ce){Xe||Bi(Ce),Nc(Se,Ce);var Ve=function(Ue,ye){ye=vn(ye);var Be=!1,_e=[],ht,Qe,pe,ke=function(){Be=!0;for(var Rt=0;Rt<_e.length;Rt++)_e[Rt].disconnect();ht&&ht.cancel(),pe&&pe.removeEventListener("unload",ut),Qe&&$r(Qe)},ut=function(){Be||(ye(),ke())};if(Ir(Ue))return ut(),{cancel:ke};if(window.MutationObserver)for(var rt=Ue.parentElement;rt;){var gr=new window.MutationObserver(function(){Ir(Ue)&&ut()});gr.observe(rt,{childList:!0}),_e.push(gr),rt=rt.parentElement}return(Qe=document.createElement("iframe")).setAttribute("name","__detect_close_"+st()+"__"),Qe.style.display="none",co(Qe).then(function(Rt){(pe=B(Rt)).addEventListener("unload",ut)}),Ue.appendChild(Qe),ht=jr(function(){Ir(Ue)&&ut()},1e3),{cancel:ke}}(Ce,function(){var Ue=new Error("Detected container element removed from DOM");return p.delay(1).then(function(){if(!Ir(Ce))return M.all(Ue),k().then(Ze,Ne);Ht(Ue)})});return M.register(function(){return Ve.cancel()}),M.register(function(){return $r(Ce)}),ne=Sn(Ce)}})},Ma=function(){return{state:V,event:H,close:Ht,focus:_r,resize:Zr,onError:Qr,updateProps:ru,show:Ct,hide:$t}},xo=function(I){I===void 0&&(I={});var _=Et,$=Ma();xr(U,I),function(j,ie,k,Te,Se){var Xe=Te.state,Ce=Te.close,Ve=Te.focus,Ue=Te.event,ye=Te.onError;To(k,j,function(Be,_e,ht){var Qe=!1,pe=ht;Object.defineProperty(ie,Be,{configurable:!0,enumerable:!0,get:function(){return Qe?pe:(Qe=!0,function(){if(!_e)return pe;var ke=_e.alias;if(ke&&!Qt(ht)&&Qt(k[ke])&&(pe=k[ke]),_e.value&&(pe=_e.value({props:ie,state:Xe,close:Ce,focus:Ve,event:Ue,onError:ye,container:Se})),!_e.default||Qt(pe)||Qt(k[Be])||(pe=_e.default({props:ie,state:Xe,close:Ce,focus:Ve,event:Ue,onError:ye,container:Se})),Qt(pe)){if(_e.type===be.ARRAY?!Array.isArray(pe):typeof pe!==_e.type)throw new TypeError("Prop is not of type "+_e.type+": "+Be)}else if(_e.required!==!1&&!Qt(k[Be]))throw new Error('Expected prop "'+Be+'" to be defined');return Qt(pe)&&_e.decorate&&(pe=_e.decorate({value:pe,props:ie,state:Xe,close:Ce,focus:Ve,event:Ue,onError:ye,container:Se})),pe}())}})}),To(ie,j,Ie)}(h,G,U,$,_)},ru=function(I){return xo(I),z.then(function(){var _=Me,$=le;if(_&&$&&At)return ct(At).then(function(j){return _.updateProps(j).catch(function(ie){return Da($).then(function(k){if(!k)throw ie})})})})},Fa=function(I){return qt?qt(I):p.try(function(){return Fi(I)}).then(function(_){return uo(_)&&(_=function $(j){var ie=function(Xe){var Ce=function(Ve){for(;Ve.parentNode;)Ve=Ve.parentNode;if(uo(Ve))return Ve}(Xe);if(Ce&&Ce.host)return Ce.host}(j);if(!ie)throw new Error("Element is not in shadow dom");var k="shadow-slot-"+st(),Te=document.createElement("slot");Te.setAttribute("name",k),j.appendChild(Te);var Se=document.createElement("div");return Se.setAttribute("slot",k),ie.appendChild(Se),uo(ie)?$(Se):Se}(_)),Et=_,Sn(_)})};return{init:function(){(function(){H.on(De.RENDER,function(){return G.onRender()}),H.on(De.PRERENDER,function(){return G.onPrerender()}),H.on(De.DISPLAY,function(){return G.onDisplay()}),H.on(De.RENDERED,function(){return G.onRendered()}),H.on(De.PRERENDERED,function(){return G.onPrerendered()}),H.on(De.CLOSE,function(){return G.onClose()}),H.on(De.DESTROY,function(){return G.onDestroy()}),H.on(De.RESIZE,function(){return G.onResize()}),H.on(De.FOCUS,function(){return G.onFocus()}),H.on(De.PROPS,function(I){return G.onProps(I)}),H.on(De.ERROR,function(I){return G&&G.onError?G.onError(I):Ne(I).then(function(){setTimeout(function(){throw I},1)})}),M.register(H.reset)})()},render:function(I){var _=I.target,$=I.container,j=I.context,ie=I.rerender;return p.try(function(){var k=wr(),Te=x||wr();(function(K,et,je){if(K!==window){if(!cr(window,K))throw new Error("Can only renderTo an adjacent frame");var tt=ae();if(!wt(et,tt)&&!L(K))throw new Error("Can not render remotely to "+et.toString()+" - can only render to "+tt);if(je&&typeof je!="string")throw new Error("Container passed to renderTo must be a string selector, got "+typeof je+" }")}})(_,Te,$);var Se=p.try(function(){if(_!==window)return function(K,et){for(var je={},tt=0,vt=Object.keys(G);tt<vt.length;tt++){var qe=vt[tt],St=h[qe];St&&St.allowDelegate&&(je[qe]=G[qe])}var nt=It(et,"zoid_delegate_"+y,{uid:r,overrides:{props:je,event:H,close:Ht,onError:Qr,getInternalState:$e,setInternalState:He,resolveInitPromise:Ze,rejectInitPromise:Ne}}).then(function(ee){var te=ee.data.parent;return M.register(function(F){if(!Le(et))return te.destroy(F)}),te.getDelegateOverrides()}).catch(function(ee){throw new Error(`Unable to delegate rendering. Possibly the component is not loaded in the target window.

`+Or(ee))});return qt=function(){for(var ee=arguments.length,te=new Array(ee),F=0;F<ee;F++)te[F]=arguments[F];return nt.then(function(oe){return oe.getProxyContainer.apply(oe,te)})},or=function(){for(var ee=arguments.length,te=new Array(ee),F=0;F<ee;F++)te[F]=arguments[F];return nt.then(function(oe){return oe.renderContainer.apply(oe,te)})},rr=function(){for(var ee=arguments.length,te=new Array(ee),F=0;F<ee;F++)te[F]=arguments[F];return nt.then(function(oe){return oe.show.apply(oe,te)})},nr=function(){for(var ee=arguments.length,te=new Array(ee),F=0;F<ee;F++)te[F]=arguments[F];return nt.then(function(oe){return oe.hide.apply(oe,te)})},bt=function(){for(var ee=arguments.length,te=new Array(ee),F=0;F<ee;F++)te[F]=arguments[F];return nt.then(function(oe){return oe.watchForUnload.apply(oe,te)})},K===We.IFRAME?(Dt=function(){for(var ee=arguments.length,te=new Array(ee),F=0;F<ee;F++)te[F]=arguments[F];return nt.then(function(oe){return oe.getProxyWindow.apply(oe,te)})},ir=function(){for(var ee=arguments.length,te=new Array(ee),F=0;F<ee;F++)te[F]=arguments[F];return nt.then(function(oe){return oe.openFrame.apply(oe,te)})},ar=function(){for(var ee=arguments.length,te=new Array(ee),F=0;F<ee;F++)te[F]=arguments[F];return nt.then(function(oe){return oe.openPrerenderFrame.apply(oe,te)})},pr=function(){for(var ee=arguments.length,te=new Array(ee),F=0;F<ee;F++)te[F]=arguments[F];return nt.then(function(oe){return oe.prerender.apply(oe,te)})},vr=function(){for(var ee=arguments.length,te=new Array(ee),F=0;F<ee;F++)te[F]=arguments[F];return nt.then(function(oe){return oe.open.apply(oe,te)})},de=function(){for(var ee=arguments.length,te=new Array(ee),F=0;F<ee;F++)te[F]=arguments[F];return nt.then(function(oe){return oe.openPrerender.apply(oe,te)})}):K===We.POPUP&&(hr=function(){for(var ee=arguments.length,te=new Array(ee),F=0;F<ee;F++)te[F]=arguments[F];return nt.then(function(oe){return oe.setProxyWin.apply(oe,te)})}),nt}(j,_)}),Xe=G.window,Ce=Ia(),Ve=Ra(h,G,"post"),Ue=H.trigger(De.RENDER),ye=Fa($),Be=Pt(),_e=ye.then(function(){return xo()}),ht=_e.then(function(){return Ra(h,G,"get").then(function(K){return function(et,je){var tt=je.query||{},vt=je.hash||{},qe,St,nt=et.split("#");St=nt[1];var ee=(qe=nt[0]).split("?");qe=ee[0];var te=Mi(ee[1],tt),F=Mi(St,vt);return te&&(qe=qe+"?"+te),F&&(qe=qe+"#"+F),qe}(Zn(Dr()),{query:K})})}),Qe=Be.then(function(K){return function(je){var tt=je===void 0?{}:je,vt=tt.proxyWin,qe=tt.initialChildDomain,St=tt.childDomainMatch,nt=tt.target,ee=nt===void 0?window:nt,te=tt.context;return function(F){var oe=F===void 0?{}:F,Io=oe.proxyWin,uu=oe.childDomainMatch,du=oe.context;return ct(oe.initialChildDomain).then(function(fu){return{uid:r,context:du,tag:R,childDomainMatch:uu,version:"10_3_3",props:fu,exports:(Ua=Io,{init:function(lu){return In(this.origin,lu)},close:Ht,checkClose:function(){return Da(Ua)},resize:Zr,onError:Qr,show:Ct,hide:$t,export:_a})};var Ua})}({proxyWin:vt,initialChildDomain:qe,childDomainMatch:St,context:te}).then(function(F){var oe=ga({data:F,metaData:{windowRef:Yr(ee,qe,te,vt)},sender:{domain:ae(window)},receiver:{win:vt,domain:St},passByReference:qe===ae()}),Io=oe.serializedData;return M.register(oe.cleanReference),Io})}({proxyWin:(et={proxyWin:K,initialChildDomain:k,childDomainMatch:Te,target:_,context:j}).proxyWin,initialChildDomain:et.initialChildDomain,childDomainMatch:et.childDomainMatch,target:et.target,context:et.context}).then(function(je){return ya({name:y,serializedPayload:je})});var et}),pe=Qe.then(function(K){return lt(j,{windowName:K})}),ke=Jr(j),ut=p.hash({proxyContainer:ye,proxyFrame:pe,proxyPrerenderFrame:ke}).then(function(K){return Wa(K.proxyContainer,{context:j,proxyFrame:K.proxyFrame,proxyPrerenderFrame:K.proxyPrerenderFrame,rerender:ie})}).then(function(K){return K}),rt=p.hash({windowName:Qe,proxyFrame:pe,proxyWin:Be}).then(function(K){var et=K.proxyWin;return Xe?et:xa(j,{windowName:K.windowName,proxyWin:et,proxyFrame:K.proxyFrame})}),gr=p.hash({proxyWin:rt,proxyPrerenderFrame:ke}).then(function(K){return Kr(j,K.proxyWin,K.proxyPrerenderFrame)}),Rt=rt.then(function(K){return le=K,ft(K)}),Wt=p.hash({proxyPrerenderWin:gr,state:Rt}).then(function(K){return Aa(K.proxyPrerenderWin,{context:j})}),La=p.hash({proxyWin:rt,windowName:Qe}).then(function(K){if(Xe)return K.proxyWin.setName(K.windowName)}),nu=p.hash({body:Ve}).then(function(K){return n.method?n.method:Object.keys(K.body).length?"post":"get"}),za=p.hash({proxyWin:rt,windowUrl:ht,body:Ve,method:nu,windowName:La,prerender:Wt}).then(function(K){return K.proxyWin.setLocation(K.windowUrl,{method:K.method,body:K.body})}),ou=rt.then(function(K){(function et(je,tt){var vt=!1;return M.register(function(){vt=!0}),p.delay(2e3).then(function(){return je.isClosed()}).then(function(qe){if(!vt){if(tt===We.POPUP&&qe)return Ht(new Error("Detected popup close"));var St=!!(Et&&Ir(Et));return tt===We.IFRAME&&qe&&(St||er)?Ht(new Error("Detected iframe close")):et(je,tt)}})})(K,j)}),iu=p.hash({container:ut,prerender:Wt}).then(function(){return H.trigger(De.DISPLAY)}),au=rt.then(function(K){return function(et,je,tt){return p.try(function(){return et.awaitWindow()}).then(function(vt){if(kt&&kt.needsBridge({win:vt,domain:je})&&!kt.hasBridge(je,je)){var qe=typeof n.bridgeUrl=="function"?n.bridgeUrl({props:G}):n.bridgeUrl;if(!qe)throw new Error("Bridge needed to render "+tt);var St=Ut(qe);return kt.linkUrl(vt,je),kt.openBridge(Zn(qe),St)}})}(K,k,j)}),su=za.then(function(){return p.try(function(){var K=G.timeout;if(K)return z.timeout(K,new Error("Loading component timed out after "+K+" milliseconds"))})}),cu=z.then(function(){return er=!0,H.trigger(De.RENDERED)});return p.hash({initPromise:z,buildUrlPromise:ht,onRenderPromise:Ue,getProxyContainerPromise:ye,openFramePromise:pe,openPrerenderFramePromise:ke,renderContainerPromise:ut,openPromise:rt,openPrerenderPromise:gr,setStatePromise:Rt,prerenderPromise:Wt,loadUrlPromise:za,buildWindowNamePromise:Qe,setWindowNamePromise:La,watchForClosePromise:ou,onDisplayPromise:iu,openBridgePromise:au,runTimeoutPromise:su,onRenderedPromise:cu,delegatePromise:Se,watchForUnloadPromise:Ce,finalSetPropsPromise:_e})}).catch(function(k){return p.all([Qr(k),Xr(k)]).then(function(){throw k},function(){throw k})}).then(Ie)},destroy:Xr,getProps:function(){return G},setProps:xo,export:_a,getHelpers:Ma,getDelegateOverrides:function(){return p.try(function(){return{getProxyContainer:Fa,show:Ct,hide:$t,renderContainer:Wa,getProxyWindow:Pt,watchForUnload:Ia,openFrame:lt,openPrerenderFrame:Jr,prerender:Aa,open:xa,openPrerender:Kr,setProxyWin:ft}})},getExports:function(){return W({getExports:function(){return Ca}})}}}var Gc={register:function(e,r,n,i){var a=i.React,c=i.ReactDOM;return function(u){b(h,u);function h(){return u.apply(this,arguments)||this}var l=h.prototype;return l.render=function(){return a.createElement("div",null)},l.componentDidMount=function(){var m=c.findDOMNode(this),R=n(xr({},this.props));R.render(m,We.IFRAME),this.setState({parent:R})},l.componentDidUpdate=function(){this.state&&this.state.parent&&this.state.parent.updateProps(xr({},this.props)).catch(Ie)},h}(a.Component)}},Jc={register:function(e,r,n,i){return i.component(e,{render:function(a){return a("div")},inheritAttrs:!1,mounted:function(){var a=this.$el;this.parent=n(w({},(c=this.$attrs,Object.keys(c).reduce(function(u,h){var l=c[h];return h==="style-object"||h==="styleObject"?(u.style=l,u.styleObject=l):h.includes("-")?u[ro(h)]=l:u[h]=l,u},{}))));var c;this.parent.render(a,We.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(w({},this.$attrs)).catch(Ie)},deep:!0}}})}},Kc={register:function(e,r,n){return{template:"<div></div>",inheritAttrs:!1,mounted:function(){var i=this.$el;this.parent=n(w({},(a=this.$attrs,Object.keys(a).reduce(function(c,u){var h=a[u];return u==="style-object"||u==="styleObject"?(c.style=h,c.styleObject=h):u.includes("-")?c[ro(u)]=h:c[u]=h,c},{}))));var a;this.parent.render(i,We.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(w({},this.$attrs)).catch(Ie)},deep:!0}}}}},Yc={register:function(e,r,n,i){return i.module(e,[]).directive(ro(e),function(){for(var a={},c=0,u=Object.keys(r);c<u.length;c++)a[u[c]]="=";return a.props="=",{scope:a,restrict:"E",controller:["$scope","$element",function(h,l){function m(){if(h.$root.$$phase!=="$apply"&&h.$root.$$phase!=="$digest")try{h.$apply()}catch{}}var R=function(){return gn(h.props,function(v){return typeof v=="function"?function(){var P=v.apply(this,arguments);return m(),P}:v})},y=n(R());y.render(l[0],We.IFRAME),h.$watch(function(){y.updateProps(R()).catch(Ie)})}]}})}},Zc={register:function(e,r,n,i){var a=i.Component,c=i.NgModule,u=i.ElementRef,h=i.NgZone,l=i.Inject,m=function(){function y(P,T){this.elementRef=void 0,this.internalProps=void 0,this.parent=void 0,this.props=void 0,this.zone=void 0,this._props=void 0,this._props={},this.elementRef=P,this.zone=T}var v=y.prototype;return v.getProps=function(){var P=this;return gn(w({},this.internalProps,this.props),function(T){if(typeof T=="function"){var O=P.zone;return function(){var x=arguments,W=this;return O.run(function(){return T.apply(W,x)})}}return T})},v.ngOnInit=function(){var P=this.elementRef.nativeElement;this.parent=n(this.getProps()),this.parent.render(P,We.IFRAME)},v.ngDoCheck=function(){this.parent&&!function(P,T){var O={};for(var x in P)if(P.hasOwnProperty(x)&&(O[x]=!0,P[x]!==T[x]))return!1;for(var W in T)if(!O[W])return!1;return!0}(this._props,this.props)&&(this._props=w({},this.props),this.parent.updateProps(this.getProps()))},y}();m.annotations=void 0,m.parameters=void 0,m.parameters=[[new l(u)],[new l(h)]],m.annotations=[new a({selector:e,template:"<div></div>",inputs:["props"]})];var R=function(){};return R.annotations=void 0,R.annotations=[new c({declarations:[m],exports:[m]})],R}};function Xc(e){var r=e.uid,n=e.frame,i=e.prerenderFrame,a=e.doc,c=e.props,u=e.event,h=e.dimensions,l=h.width,m=h.height;if(n&&i){var R=a.createElement("div");R.setAttribute("id",r);var y=a.createElement("style");return c.cspNonce&&y.setAttribute("nonce",c.cspNonce),y.appendChild(a.createTextNode(`
            #`+r+` {
                display: inline-block;
                position: relative;
                width: `+l+`;
                height: `+m+`;
            }

            #`+r+` > iframe {
                display: inline-block;
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                transition: opacity .2s ease-in-out;
            }

            #`+r+` > iframe.zoid-invisible {
                opacity: 0;
            }

            #`+r+` > iframe.zoid-visible {
                opacity: 1;
        }
        `)),R.appendChild(n),R.appendChild(i),R.appendChild(y),i.classList.add("zoid-visible"),n.classList.add("zoid-invisible"),u.on(De.RENDERED,function(){i.classList.remove("zoid-visible"),i.classList.add("zoid-invisible"),n.classList.remove("zoid-invisible"),n.classList.add("zoid-visible"),setTimeout(function(){$r(i)},1)}),u.on(De.RESIZE,function(v){var P=v.width,T=v.height;typeof P=="number"&&(R.style.width=Hi(P)),typeof T=="number"&&(R.style.height=Hi(T))}),R}}function Qc(e){var r=e.doc,n=e.props,i=r.createElement("html"),a=r.createElement("body"),c=r.createElement("style"),u=r.createElement("div");return u.classList.add("spinner"),n.cspNonce&&c.setAttribute("nonce",n.cspNonce),i.appendChild(a),a.appendChild(u),a.appendChild(c),c.appendChild(r.createTextNode(`
            html, body {
                width: 100%;
                height: 100%;
            }

            .spinner {
                position: fixed;
                max-height: 60vmin;
                max-width: 60vmin;
                height: 40px;
                width: 40px;
                top: 50%;
                left: 50%;
                box-sizing: border-box;
                border: 3px solid rgba(0, 0, 0, .2);
                border-top-color: rgba(33, 128, 192, 0.8);
                border-radius: 100%;
                animation: rotation .7s infinite linear;
            }

            @keyframes rotation {
                from {
                    transform: translateX(-50%) translateY(-50%) rotate(0deg);
                }
                to {
                    transform: translateX(-50%) translateY(-50%) rotate(359deg);
                }
            }
        `)),i}var So=mn(),Oo=mn();function kc(e){var r=function(T){var O=T.tag,x=T.url,W=T.domain,z=T.bridgeUrl,J=T.props,M=J===void 0?{}:J,V=T.dimensions,U=V===void 0?{}:V,re=T.autoResize,H=re===void 0?{}:re,he=T.allowedParentDomains,ue=he===void 0?"*":he,Q=T.attributes,G=Q===void 0?{}:Q,le=T.defaultContext,ne=le===void 0?We.IFRAME:le,Me=T.containerTemplate,At=Me===void 0?Xc:Me,Et=T.prerenderTemplate,er=Et===void 0?Qc:Et,tr=T.validate,qt=T.eligible,rr=qt===void 0?function(){return{eligible:!0}}:qt,nr=T.logger,lr=nr===void 0?{info:Ie}:nr,or=T.exports,Dt=or===void 0?Ie:or,hr=T.method,ir=T.children,ar=ir===void 0?function(){return{}}:ir,pr=O.replace(/-/g,"_"),vr=w({},{window:{type:be.OBJECT,sendToChild:!1,required:!1,allowDelegate:!0,validate:function(de){var bt=de.value;if(!ur(bt)&&!yt.isProxyWindow(bt))throw new Error("Expected Window or ProxyWindow");if(ur(bt)){if(Le(bt))throw new Error("Window is closed");if(!L(bt))throw new Error("Window is not same domain")}},decorate:function(de){return Vr(de.value)}},timeout:{type:be.NUMBER,required:!1,sendToChild:!1},cspNonce:{type:be.STRING,required:!1},onDisplay:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:jt,decorate:fr},onRendered:{type:be.FUNCTION,required:!1,sendToChild:!1,default:jt,decorate:fr},onRender:{type:be.FUNCTION,required:!1,sendToChild:!1,default:jt,decorate:fr},onPrerendered:{type:be.FUNCTION,required:!1,sendToChild:!1,default:jt,decorate:fr},onPrerender:{type:be.FUNCTION,required:!1,sendToChild:!1,default:jt,decorate:fr},onClose:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:jt,decorate:fr},onDestroy:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:jt,decorate:fr},onResize:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:jt},onFocus:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:jt},close:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(de){return de.close}},focus:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(de){return de.focus}},resize:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(de){return de.resize}},uid:{type:be.STRING,required:!1,sendToChild:!1,childDecorate:function(de){return de.uid}},tag:{type:be.STRING,required:!1,sendToChild:!1,childDecorate:function(de){return de.tag}},getParent:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(de){return de.getParent}},getParentDomain:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(de){return de.getParentDomain}},show:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(de){return de.show}},hide:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(de){return de.hide}},export:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(de){return de.export}},onError:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(de){return de.onError}},onProps:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(de){return de.onProps}},getSiblings:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(de){return de.getSiblings}}},M);if(!At)throw new Error("Container template required");return{name:pr,tag:O,url:x,domain:W,bridgeUrl:z,method:hr,propsDef:vr,dimensions:U,autoResize:H,allowedParentDomains:ue,attributes:G,defaultContext:ne,containerTemplate:At,prerenderTemplate:er,validate:tr,logger:lr,eligible:rr,children:ar,exports:typeof Dt=="function"?Dt:function(de){for(var bt=de.getExports,fe={},Ye=function(){var Ne=Ze[ze],ct=Dt[Ne].type,$e=bt().then(function(He){return He[Ne]});fe[Ne]=ct===be.FUNCTION?function(){for(var He=arguments.length,Pt=new Array(He),ft=0;ft<He;ft++)Pt[ft]=arguments[ft];return $e.then(function(Ct){return Ct.apply(void 0,Pt)})}:$e},ze=0,Ze=Object.keys(Dt);ze<Ze.length;ze++)Ye();return fe}}}(e),n=r.name,i=r.tag,a=r.defaultContext,c=r.propsDef,u=r.eligible,h=r.children,l=Gr(window),m={},R=[],y=function(){if(function(O){try{return Ro(window.name).name===O}catch{}return!1}(n)){var T=Ea().payload;if(T.tag===i&&wt(T.childDomainMatch,ae()))return!0}return!1},v=Xt(function(){if(y()){if(window.xprops)throw delete l.components[i],new Error("Can not register "+n+" as child - child already registered");var T=function(O){var x=O.tag,W=O.propsDef,z=O.autoResize,J=O.allowedParentDomains,M=[],V=Ea(),U=V.parent,re=V.payload,H=U.win,he=U.domain,ue,Q=new p,G=re.version,le=re.uid,ne=re.exports,Me=re.context,At=re.props;if(!function(fe,Ye){if(!/_/.test(fe)||!/_/.test("10_3_3"))throw new Error("Versions are in an invalid format ("+fe+", 10_3_3)");return fe.split("_")[0]==="10_3_3".split("_")[0]}(G))throw new Error("Parent window has zoid version "+G+", child window has version 10_3_3");var Et=ne.show,er=ne.hide,tr=ne.close,qt=ne.onError,rr=ne.checkClose,nr=ne.export,lr=ne.resize,or=ne.init,Dt=function(){return H},hr=function(){return he},ir=function(fe){return M.push(fe),{cancel:function(){M.splice(M.indexOf(fe),1)}}},ar=function(fe){return lr.fireAndForget({width:fe.width,height:fe.height})},pr=function(fe){return Q.resolve(fe),nr(fe)},vr=function(fe){var Ye=(fe===void 0?{}:fe).anyParent,ze=[],Ze=ue.parent;if(Ye===void 0&&(Ye=!Ze),!Ye&&!Ze)throw new Error("No parent found for "+x+" child");for(var Ne=0,ct=Ke(window);Ne<ct.length;Ne++){var $e=ct[Ne];if(L($e)){var He=B($e).xprops;if(He&&Dt()===He.getParent()){var Pt=He.parent;if(Ye||!Ze||Pt&&Pt.uid===Ze.uid){var ft=wa($e,function(Ct){return Ct.exports});ze.push({props:He,exports:ft})}}}}return ze},de=function(fe,Ye,ze){ze===void 0&&(ze=!1);var Ze=function(ct,$e,He,Pt,ft,Ct){Ct===void 0&&(Ct=!1);for(var $t={},Dr=0,Cr=Object.keys(He);Dr<Cr.length;Dr++){var wr=Cr[Dr],lt=$e[wr],Jr=lt&&lt.trustedDomains&&lt.trustedDomains.length>0?lt.trustedDomains.reduce(function(In,Zr){return In||wt(Zr,ae(window))},!1):Pt===ae(window)||L(ct);if((!lt||!lt.sameDomain||Jr)&&(!lt||!lt.trustedDomains||Jr)){var Kr=ba($e,0,wr,He[wr],ft);$t[wr]=Kr,lt&&lt.alias&&!$t[lt.alias]&&($t[lt.alias]=Kr)}}if(!Ct)for(var _r=0,xn=Object.keys($e);_r<xn.length;_r++){var Yr=xn[_r];He.hasOwnProperty(Yr)||($t[Yr]=ba($e,0,Yr,void 0,ft))}return $t}(H,W,fe,Ye,{tag:x,show:Et,hide:er,close:tr,focus:Vc,onError:qt,resize:ar,getSiblings:vr,onProps:ir,getParent:Dt,getParentDomain:hr,uid:le,export:pr},ze);ue?xr(ue,Ze):ue=Ze;for(var Ne=0;Ne<M.length;Ne++)(0,M[Ne])(ue)},bt=function(fe){return p.try(function(){return de(fe,he,!0)})};return{init:function(){return p.try(function(){var fe="";return L(H)&&(fe=function(Ye){var ze=Ye.componentName,Ze=Ye.parentComponentWindow,Ne=ma({data:Ro(window.name).serializedInitialPayload,sender:{win:Ze},basic:!0}),ct=Ne.sender;if(Ne.reference.type==="uid"||Ne.metaData.windowRef.type==="global"){var $e=ya({name:ze,serializedPayload:ga({data:Ne.data,metaData:{windowRef:Hc(Ze)},sender:{domain:ct.domain},receiver:{win:window,domain:ae()},basic:!0}).serializedData});return window.name=$e,$e}}({componentName:O.name,parentComponentWindow:H})||""),Gr(window).exports=O.exports({getExports:function(){return Q}}),function(Ye,ze){if(!wt(Ye,ze))throw new Error("Can not be rendered by domain: "+ze)}(J,he),Xi(H),function(){window.addEventListener("beforeunload",function(){rr.fireAndForget()}),window.addEventListener("unload",function(){rr.fireAndForget()}),Pi(H,function(){Pa()})}(),or({name:fe,updateProps:bt,close:Pa})}).then(function(){return(fe=z.width,Ye=fe!==void 0&&fe,ze=z.height,Ze=ze!==void 0&&ze,Ne=z.element,Fi(Ne===void 0?"body":Ne).catch(Ie).then(function(ct){return{width:Ye,height:Ze,element:ct}})).then(function(ct){var $e=ct.width,He=ct.height,Pt=ct.element;Pt&&($e||He)&&Me!==We.POPUP&&ji(Pt,function(ft){ar({width:$e?ft.width:void 0,height:He?ft.height:void 0})},{width:$e,height:He})});var fe,Ye,ze,Ze,Ne}).catch(function(fe){qt(fe)})},getProps:function(){return ue||(de(At,he),ue)}}}(r);return T.init(),T}}),P=function T(O){var x,W="zoid-"+i+"-"+st(),z=O||{},J=u({props:z}),M=J.eligible,V=J.reason,U=z.onDestroy;z.onDestroy=function(){if(x&&M&&R.splice(R.indexOf(x),1),U)return U.apply(void 0,arguments)};var re=Ta({uid:W,options:r});re.init(),M?re.setProps(z):z.onDestroy&&z.onDestroy(),So.register(function(ue){return re.destroy(ue||new Error("zoid destroyed all components"))});var H=function(ue){var Q=(ue===void 0?{}:ue).decorate;return T((Q===void 0?Cc:Q)(z))},he=function(ue,Q,G){return p.try(function(){if(!M){var le=new Error(V||n+" component is not eligible");return re.destroy(le).then(function(){throw le})}if(!ur(ue))throw new Error("Must pass window to renderTo");return function(ne,Me){return p.try(function(){if(ne.window)return Vr(ne.window).getType();if(Me){if(Me!==We.IFRAME&&Me!==We.POPUP)throw new Error("Unrecognized context: "+Me);return Me}return a})}(z,G)}).then(function(le){if(Q=function(ne,Me){if(Me){if(typeof Me!="string"&&!Xn(Me))throw new TypeError("Expected string or element selector to be passed");return Me}if(ne===We.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(le,Q),ue!==window&&typeof Q!="string")throw new Error("Must pass string element when rendering to another window");return re.render({target:ue,container:Q,context:le,rerender:function(){var ne=H();return xr(x,ne),ne.renderTo(ue,Q,G)}})}).catch(function(le){return re.destroy(le).then(function(){throw le})})};return x=w({},re.getExports(),re.getHelpers(),function(){for(var ue=h(),Q={},G=function(){var Me=ne[le],At=ue[Me];Q[Me]=function(Et){var er=re.getProps(),tr=w({},Et,{parent:{uid:W,props:er,export:re.export}});return At(tr)}},le=0,ne=Object.keys(ue);le<ne.length;le++)G();return Q}(),{isEligible:function(){return M},clone:H,render:function(ue,Q){return he(window,ue,Q)},renderTo:function(ue,Q,G){return he(ue,Q,G)}}),M&&R.push(x),x};if(v(),function(){var T=Bt("zoid_allow_delegate_"+n,function(){return!0}),O=Bt("zoid_delegate_"+n,function(x){var W=x.data;return{parent:Ta({uid:W.uid,options:r,overrides:W.overrides,parentWin:x.source})}});Oo.register(T.cancel),Oo.register(O.cancel)}(),l.components=l.components||{},l.components[i])throw new Error("Can not register multiple components with the same tag: "+i);return l.components[i]=!0,{init:P,instances:R,driver:function(T,O){var x={react:Gc,angular:Yc,vue:Jc,vue3:Kc,angular2:Zc};if(!x[T])throw new Error("Could not find driver for framework: "+T);return m[T]||(m[T]=x[T].register(i,c,P,O)),m[T]},isChild:y,canRenderTo:function(T){return It(T,"zoid_allow_delegate_"+n).then(function(O){return O.data}).catch(function(){return!1})},registerChild:v}}var eu=function(e){(function(){Nt().initialized||(Nt().initialized=!0,c=(a={on:Bt,send:It}).on,u=a.send,(h=Nt()).receiveMessage=h.receiveMessage||function(l){return bo(l,{on:c,send:u})},function(l){var m=l.on,R=l.send;me().getOrSet("postMessageListener",function(){return Ui(window,"message",function(y){(function(v,P){var T=P.on,O=P.send;p.try(function(){var x=v.source||v.sourceElement,W=v.origin||v.originalEvent&&v.originalEvent.origin,z=v.data;if(W==="null"&&(W="file://"),x){if(!W)throw new Error("Post message did not have origin domain");bo({source:x,origin:W,data:z},{on:T,send:O})}})})(y,{on:m,send:R})})})}({on:Bt,send:It}),ia({on:Bt,send:It,receiveMessage:bo}),function(l){var m=l.on,R=l.send;me("builtinListeners").getOrSet("helloListener",function(){var y=m("postrobot_hello",{domain:"*"},function(P){return Ki(P.source,{domain:P.origin}),{instanceID:Ji()}}),v=Zt();return v&&lo(v,{send:R}).catch(function(P){}),y})}({on:Bt,send:It}));var a,c,u,h})();var r=kc(e),n=function(a){return r.init(a)};n.driver=function(a,c){return r.driver(a,c)},n.isChild=function(){return r.isChild()},n.canRenderTo=function(a){return r.canRenderTo(a)},n.instances=r.instances;var i=r.registerChild();return i&&(window.xprops=n.xprops=i.getProps()),n};function Sa(e){kt&&kt.destroyBridges();var r=So.all(e);return So=mn(),r}var Oa=Sa;function tu(e){return Oa(),delete window.__zoid_10_3_3__,function(){(function(){for(var n=me("responseListeners"),i=0,a=n.keys();i<a.length;i++){var c=a[i],u=n.get(c);u&&(u.cancelled=!0),n.del(c)}})(),(r=me().get("postMessageListener"))&&r.cancel();var r;delete window.__post_robot_11_0_0__}(),Oo.all(e)}}])})})(fi);var li=fi.exports;const hi=li.EVENT,Sr={VISIBLE:"zoid-visible",INVISIBLE:"zoid-invisible"};function tc({uid:t,frame:o,prerenderFrame:s,doc:d,props:f,event:g,dimensions:b}){const{width:w,height:S}=b,{top:D=0,left:E=0}=f;if(!o||!s)return;const C=d.createElement("div");C.setAttribute("id",t);const N=d.createElement("style");return f.cspNonce&&N.setAttribute("nonce",f.cspNonce),N.appendChild(d.createTextNode(`
          #${t} {
              display: inline-block;
              position: absolute;
              width: ${w};
              height: ${S};
              z-index: 1049;
              border: none;
              top: ${D}px;
              left: ${E}px;
              overflow: hidden;
          }

          #${t} > iframe {
              display: inline-block;
              position: absolute;
              width: 100%;
              height: 100%;
              top: 0;
              left: 0;
              transition: opacity .2s ease-in-out;
              border: none;
              background-color: transparent;
              overflow: hidden;
          }

          #${t} > iframe.${Sr.INVISIBLE} {
              opacity: 0;
          }

          #${t} > iframe.${Sr.VISIBLE} {
              opacity: 1;
        }
      `)),C.appendChild(o),C.appendChild(s),C.appendChild(N),s.classList.add(Sr.INVISIBLE),o.classList.add(Sr.INVISIBLE),g.on(hi.RENDERED,()=>{setTimeout(()=>{o.classList.remove(Sr.INVISIBLE),o.classList.add(Sr.VISIBLE)},100),setTimeout(()=>{s.remove()},1)}),g.on(hi.RESIZE,({width:se,height:ce})=>{typeof se=="number"&&(C.style.width=`${se}px`),typeof ce=="number"&&(C.style.height=`${ce}px`)}),C}function rc(t){return li.create({dimensions:{width:"100%",height:"100%"},tag:`wta${t}`,url:({props:o})=>o.appConfig.sdkBaseUrl,props:{appConfig:{type:"object",required:!0},icons:{type:"array",required:!0}},containerTemplate:tc})}function nc(t){return rc(t.id)(t)}class oc extends Error{constructor(o,s){super(o,s),this.name="FetchError",s!=null&&s.cause&&!this.cause&&(this.cause=s.cause)}}function ic(t){var S,D,E,C,N;const o=((S=t.error)==null?void 0:S.message)||((D=t.error)==null?void 0:D.toString())||"",s=((E=t.request)==null?void 0:E.method)||((C=t.options)==null?void 0:C.method)||"GET",d=((N=t.request)==null?void 0:N.url)||String(t.request)||"/",f=`[${s}] ${JSON.stringify(d)}`,g=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",b=`${f}: ${g}${o?` ${o}`:""}`,w=new oc(b,t.error?{cause:t.error}:void 0);for(const se of["request","options","response"])Object.defineProperty(w,se,{get(){return t[se]}});for(const[se,ce]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(w,se,{get(){return t.response&&t.response[ce]}});return w}const ac=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function pi(t="GET"){return ac.has(t.toUpperCase())}function sc(t){if(t===void 0)return!1;const o=typeof t;return o==="string"||o==="number"||o==="boolean"||o===null?!0:o!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const cc=new Set(["image/svg","application/xml","application/xhtml","application/html"]),uc=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function dc(t=""){if(!t)return"json";const o=t.split(";").shift()||"";return uc.test(o)?"json":cc.has(o)||o.startsWith("text/")?"text":"blob"}function fc(t,o,s=globalThis.Headers){const d={...o,...t};if(o!=null&&o.params&&(t!=null&&t.params)&&(d.params={...o==null?void 0:o.params,...t==null?void 0:t.params}),o!=null&&o.query&&(t!=null&&t.query)&&(d.query={...o==null?void 0:o.query,...t==null?void 0:t.query}),o!=null&&o.headers&&(t!=null&&t.headers)){d.headers=new s((o==null?void 0:o.headers)||{});for(const[f,g]of new s((t==null?void 0:t.headers)||{}))d.headers.set(f,g)}return d}const lc=new Set([408,409,425,429,500,502,503,504]),hc=new Set([101,204,205,304]);function vi(t={}){const{fetch:o=globalThis.fetch,Headers:s=globalThis.Headers,AbortController:d=globalThis.AbortController}=t;async function f(w){const S=w.error&&w.error.name==="AbortError"&&!w.options.timeout||!1;if(w.options.retry!==!1&&!S){let E;typeof w.options.retry=="number"?E=w.options.retry:E=pi(w.options.method)?0:1;const C=w.response&&w.response.status||500;if(E>0&&(Array.isArray(w.options.retryStatusCodes)?w.options.retryStatusCodes.includes(C):lc.has(C))){const N=w.options.retryDelay||0;return N>0&&await new Promise(se=>setTimeout(se,N)),g(w.request,{...w.options,retry:E-1})}}const D=ic(w);throw Error.captureStackTrace&&Error.captureStackTrace(D,g),D}const g=async function(S,D={}){var se;const E={request:S,options:fc(D,t.defaults,s),response:void 0,error:void 0};E.options.method=(se=E.options.method)==null?void 0:se.toUpperCase(),E.options.onRequest&&await E.options.onRequest(E),typeof E.request=="string"&&(E.options.baseURL&&(E.request=os(E.request,E.options.baseURL)),(E.options.query||E.options.params)&&(E.request=kr(E.request,{...E.options.params,...E.options.query}))),E.options.body&&pi(E.options.method)&&(sc(E.options.body)?(E.options.body=typeof E.options.body=="string"?E.options.body:JSON.stringify(E.options.body),E.options.headers=new s(E.options.headers||{}),E.options.headers.has("content-type")||E.options.headers.set("content-type","application/json"),E.options.headers.has("accept")||E.options.headers.set("accept","application/json")):("pipeTo"in E.options.body&&typeof E.options.body.pipeTo=="function"||typeof E.options.body.pipe=="function")&&("duplex"in E.options||(E.options.duplex="half")));let C;if(!E.options.signal&&E.options.timeout){const ce=new d;C=setTimeout(()=>ce.abort(),E.options.timeout),E.options.signal=ce.signal}try{E.response=await o(E.request,E.options)}catch(ce){return E.error=ce,E.options.onRequestError&&await E.options.onRequestError(E),await f(E)}finally{C&&clearTimeout(C)}if(E.response.body&&!hc.has(E.response.status)&&E.options.method!=="HEAD"){const ce=(E.options.parseResponse?"json":E.options.responseType)||dc(E.response.headers.get("content-type")||"");switch(ce){case"json":{const Je=await E.response.text(),p=E.options.parseResponse||di;E.response._data=p(Je);break}case"stream":{E.response._data=E.response.body;break}default:E.response._data=await E.response[ce]()}}return E.options.onResponse&&await E.options.onResponse(E),!E.options.ignoreResponseError&&E.response.status>=400&&E.response.status<600?(E.options.onResponseError&&await E.options.onResponseError(E),await f(E)):E.response},b=async function(S,D){return(await g(S,D))._data};return b.raw=g,b.native=(...w)=>o(...w),b.create=(w={})=>vi({...t,defaults:{...t.defaults,...w}}),b}const Jn=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),pc=Jn.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),vc=Jn.Headers,wc=Jn.AbortController,gc=vi({fetch:pc,Headers:vc,AbortController:wc}).create({credentials:"omit",onResponseError({response:t,error:o}){console.log("[LOG] ~ error:",o)},onRequest:({options:t,request:o})=>{const s=t.token;s&&(t.headers=t.headers||{},t.headers.Authorization=`${s}`)},onResponse({response:t,options:o}){}}),Kt={DEBUG:0,INFO:1,WARN:2,ERROR:3};function mc(){return(window==null?void 0:window.CSPM_LOG_LEVEL)||"INFO"}class wi{constructor(o="[APP]",s=mc()){Tt(this,"prefix");Tt(this,"logLevel");this.prefix=o,this.logLevel=s}setPrefix(o){this.prefix=o}debug(...o){Kt[this.logLevel]<=Kt.DEBUG&&console.log(`${this.prefix} [DEBUG]`,...o)}info(...o){Kt[this.logLevel]<=Kt.INFO&&console.log(`${this.prefix} [INFO]`,...o)}warn(...o){Kt[this.logLevel]<=Kt.WARN&&console.warn(`${this.prefix} [WARN]`,...o)}error(...o){Kt[this.logLevel]<=Kt.ERROR&&console.error(`${this.prefix} [ERROR]`,...o)}}const Kn=new wi("[HLSAdapter]");function gi({adsUrl:t,sdk:o,loader:s}){return class extends s{constructor(f){super(f)}load(f,g,b){const w=b.onSuccess;b.onSuccess=async(S,D,E)=>{if(E.type==="manifest"||E.type==="level"||E.type==="audioTrack"){const C=S.data;Kn.debug("getLoader","params",{url:S.url,type:E.type}),Kn.debug("getLoader",`before 
`,C);const N=await this.modifyManifest(S.url,S.data,E.type);Kn.debug("getLoader",`after 
`,N),S.data=N}w(S,D,E)},super.load(f,g,b)}async modifyManifest(f,g,b){const w={proxyAds:{uri:t,timeout:2},log:{level:(window==null?void 0:window.CSPM_LOG_LEVEL)||"ERROR"}};try{return await o.loadSource({config:w,manifest:g,masterUri:f})}catch(S){return console.error("[LOG] ~ error:",S),g}}}}function yc(){var t=t||window;const o=new TextEncoder("utf-8"),s=new TextDecoder("utf-8");let d=new DataView(new ArrayBuffer(8));var f=[];class g{constructor(){this._callbackTimeouts=new Map,this._nextCallbackTimeoutID=1;const w=()=>new DataView(this._inst.exports.memory.buffer),S=p=>{d.setBigInt64(0,p,!0);const A=d.getFloat64(0,!0);if(A===0)return;if(!isNaN(A))return A;const q=0xffffffffn&p;return this._values[q]},D=p=>{let A=w().getBigUint64(p,!0);return S(A)},E=p=>{const A=0x7ff80000n;if(typeof p=="number")return isNaN(p)?A<<32n:p===0?A<<32n|1n:(d.setFloat64(0,p,!0),d.getBigInt64(0,!0));switch(p){case void 0:return 0n;case null:return A<<32n|2n;case!0:return A<<32n|3n;case!1:return A<<32n|4n}let q=this._ids.get(p);q===void 0&&(q=this._idPool.pop(),q===void 0&&(q=BigInt(this._values.length)),this._values[q]=p,this._goRefCounts[q]=0,this._ids.set(p,q)),this._goRefCounts[q]++;let Y=1n;switch(typeof p){case"string":Y=2n;break;case"symbol":Y=3n;break;case"function":Y=4n}return q|(A|Y)<<32n},C=(p,A)=>{let q=E(A);w().setBigUint64(p,q,!0)},N=(p,A,q)=>new Uint8Array(this._inst.exports.memory.buffer,p,A),se=(p,A,q)=>{const Y=new Array(A);for(let Ee=0;Ee<A;Ee++)Y[Ee]=D(p+8*Ee);return Y},ce=(p,A)=>s.decode(new DataView(this._inst.exports.memory.buffer,p,A)),Je=Date.now()-performance.now();this.importObject={wasi_snapshot_preview1:{fd_write:function(p,A,q,Y){let Ee=0;if(p==1)for(let Oe=0;Oe<q;Oe++){let Fe=A+8*Oe,ve=w().getUint32(Fe+0,!0),Ae=w().getUint32(Fe+4,!0);Ee+=Ae;for(let Z=0;Z<Ae;Z++){let Pe=w().getUint8(ve+Z);if(Pe!=13)if(Pe==10){let ae=s.decode(new Uint8Array(f));f=[],console.log(ae)}else f.push(Pe)}}else console.error("invalid file descriptor:",p);return w().setUint32(Y,Ee,!0),0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit:p=>{if(!t.process)throw"trying to exit with code "+p;process.exit(p)},random_get:(p,A)=>(crypto.getRandomValues(N(p,A)),0)},gojs:{"runtime.ticks":()=>Je+performance.now(),"runtime.sleepTicks":p=>{setTimeout(this._inst.exports.go_scheduler,p)},"syscall/js.finalizeRef":p=>{const A=w().getUint32(S(p),!0);if(this._goRefCounts[A]--,this._goRefCounts[A]===0){const q=this._values[A];this._values[A]=null,this._ids.delete(q),this._idPool.push(A)}},"syscall/js.stringVal":(p,A)=>{const q=ce(p,A);return E(q)},"syscall/js.valueGet":(p,A,q)=>{let Y=ce(A,q),Ee=S(p),Oe=Reflect.get(Ee,Y);return E(Oe)},"syscall/js.valueSet":(p,A,q,Y)=>{const Ee=S(p),Oe=ce(A,q),Fe=S(Y);Reflect.set(Ee,Oe,Fe)},"syscall/js.valueDelete":(p,A,q)=>{const Y=S(p),Ee=ce(A,q);Reflect.deleteProperty(Y,Ee)},"syscall/js.valueIndex":(p,A)=>E(Reflect.get(S(p),A)),"syscall/js.valueSetIndex":(p,A,q)=>{Reflect.set(S(p),A,S(q))},"syscall/js.valueCall":(p,A,q,Y,Ee,Oe,Fe)=>{const ve=S(A),Ae=ce(q,Y),Z=se(Ee,Oe);try{const Pe=Reflect.get(ve,Ae);C(p,Reflect.apply(Pe,ve,Z)),w().setUint8(p+8,1)}catch(Pe){C(p,Pe),w().setUint8(p+8,0)}},"syscall/js.valueInvoke":(p,A,q,Y,Ee)=>{try{const Oe=S(A),Fe=se(q,Y);C(p,Reflect.apply(Oe,void 0,Fe)),w().setUint8(p+8,1)}catch(Oe){C(p,Oe),w().setUint8(p+8,0)}},"syscall/js.valueNew":(p,A,q,Y,Ee)=>{const Oe=S(A),Fe=se(q,Y);try{C(p,Reflect.construct(Oe,Fe)),w().setUint8(p+8,1)}catch(ve){C(p,ve),w().setUint8(p+8,0)}},"syscall/js.valueLength":p=>S(p).length,"syscall/js.valuePrepareString":(p,A)=>{const q=String(S(A)),Y=o.encode(q);C(p,Y),w().setInt32(p+8,Y.length,!0)},"syscall/js.valueLoadString":(p,A,q,Y)=>{const Ee=S(p);N(A,q).set(Ee)},"syscall/js.valueInstanceOf":(p,A)=>S(p)instanceof S(A),"syscall/js.copyBytesToGo":(p,A,q,Y,Ee)=>{let Oe=p,Fe=p+4;const ve=N(A,q),Ae=S(Ee);if(!(Ae instanceof Uint8Array||Ae instanceof Uint8ClampedArray))return void w().setUint8(Fe,0);const Z=Ae.subarray(0,ve.length);ve.set(Z),w().setUint32(Oe,Z.length,!0),w().setUint8(Fe,1)},"syscall/js.copyBytesToJS":(p,A,q,Y,Ee)=>{let Oe=p,Fe=p+4;const ve=S(A),Ae=N(q,Y);if(!(ve instanceof Uint8Array||ve instanceof Uint8ClampedArray))return void w().setUint8(Fe,0);const Z=Ae.subarray(0,ve.length);ve.set(Z),w().setUint32(Oe,Z.length,!0),w().setUint8(Fe,1)}}},this.importObject.env=this.importObject.gojs}async run(w){for(this._inst=w,this._values=[NaN,0,null,!0,!1,t,this],this._goRefCounts=[],this._ids=new Map,this._idPool=[],this.exited=!1;;){const S=new Promise(D=>{this._resolveCallbackPromise=()=>{if(this.exited)throw new Error("bad callback: Go program has already exited");setTimeout(D,0)}});if(this._inst.exports._start(),this.exited)break;await S}}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(w){const S=this;return function(){const D={id:w,this:this,args:arguments};return S._pendingEvent=D,S._resume(),D.result}}}return new g}class Ec{constructor(){Tt(this,"data");Tt(this,"mutex");this.mutex=new mi,this.data=""}async loadSource(o){await this.mutex.acquire();try{this.data&&(o.session=this.data);const s=JSON.stringify(o);for(let d=1;d<=3;d++)try{const f=await Lr.getInstance({}),{manifest:g,err:b,session:w}=await f.loadSource(s);if(b)throw new Error(b);return this.data=w,g}catch(f){if(console.warn(`Attempt ${d} failed:`,f,s),d===3)throw console.log("paramsStr",s),f}}finally{this.mutex.release()}return null}async getEventTracking(){return await(await Lr.getInstance({})).getEventTracking(this.data)}async acquire(){return new Promise(o=>{this._locked?this._queue.push(o):(this._locked=!0,o())})}release(){if(this._queue.length>0){const o=this._queue.shift();o&&o()}else this._locked=!1}}class mi{constructor(){Tt(this,"_queue");Tt(this,"_locked");this._queue=[],this._locked=!1}async acquire(){return new Promise(o=>{this._locked?this._queue.push(o):(this._locked=!0,o())})}release(){if(this._queue.length>0){const o=this._queue.shift();o&&o()}else this._locked=!1}}const zt=class zt{constructor(o){Tt(this,"mutex");Tt(this,"instanceExpiration");Tt(this,"wasm");Tt(this,"uri");Tt(this,"go");var s;this.uri=o,o||(this.uri=(s=window==null?void 0:window.sigmaCSPMEnv)==null?void 0:s.WASM_URL),this.instanceExpiration=Date.now()+1e3,this.mutex=new mi}static async getInstance(o){if(!zt.instance)zt.instance=new zt(o.uri),zt.instance.initializeInstance(1e3);else if(!zt.instance)throw new Error("Manager not initialized");return zt.instance}async useInstance(o){await this.initializeInstance(1e3),await this.mutex.acquire();try{if(this.wasm)return await o()}finally{this.mutex.release()}}async initializeInstance(o,s){await this.mutex.acquire();try{if(this.isExpired()||s||!this.wasm){if(this.instanceExpiration=Date.now()+o,!this.wasm){const g=await fetch(this.uri);this.wasm=await g.arrayBuffer()}window.loadSource!==null&&(window.loadSource=null),window.getEventTracking=null,this.go&&(this.go=null);const d=yc();this.instanceExpiration=Date.now()+1e3;const f=await WebAssembly.instantiate(this.wasm,d.importObject);d.run(f.instance),this.go=d}}finally{this.mutex.release()}}async loadSource(o){return await this.useInstance(async()=>{try{return await window.loadSource(o)}catch(d){return{err:d}}})}async getEventTracking(o){const s=await this.useInstance(async()=>{try{return await window.getEventTracking(o)}catch(d){throw console.log("Error",d),d}});return{avails:JSON.parse(s.avails)}}isExpired(){return Date.now()>this.instanceExpiration}createSession(){return new Ec}};Tt(zt,"instance");let Lr=zt;const bc=new wi("[AdsTracking]");function yi(t,o,s){var w;bc.debug("getCurrentAds",{query:t,avails:o,currentAds:s});const d=o==null?void 0:o.find(S=>S.id==t.availId),f=(w=d==null?void 0:d.ads)==null?void 0:w.filter(S=>(S==null?void 0:S.id)==(t==null?void 0:t.adsId)),g=f==null?void 0:f.find(S=>S.position===(t==null?void 0:t.position));return!g||(g.availId=d==null?void 0:d.id,s&&s.id==(g==null?void 0:g.id)&&s.availId==g.availId)?s:{...g,impression:!1}}function Pc(t){try{return atob(t)}catch(o){return console.error("Invalid base64 string:",o),null}}function Rc(t){try{const s=new URL(t).hash.substring(1),d=Pc(s);return d?JSON.parse(d):null}catch(o){return console.error("Error parsing URI:",o),null}}function Tc({video:t,adContainer:o,startSession:s,sdk:d,domain:f}){const g=Qs(),b=Lt(!1),w=Lt(),S=Math.random().toString(36).slice(6);function D({icons:L}){const B=en(f,"/build/dist/wta/index.html");return{id:S,appConfig:{sdkBaseUrl:kr(B||"https://localhost:4222/wta/index.html",{id:S})},icons:L}}if(!!o){const L=nc(D({icons:[]}));L.render(o),L.hide(),o.style.display="none",Ps(()=>{var B;if(w.value){const X=((B=w.value)==null?void 0:B.icons)||[];o.style.display="block",L.updateProps(D({icons:X})),L.show()}else o.style.display="none",L.hide()})}const C=Lt([]),N=Lt(),se=Lt([]);async function ce(L){var B;try{const X=(B=w.value)==null?void 0:B.trackingEvents.find(Re=>Re.eventType===L);if(!X)return;g.trigger(X),X.beaconUrls.map(Re=>ks(gc(Re,{retry:3,retryDelay:500})))}catch(X){console.error("[ERROR] ~ error:",X)}}const Je=new Map;let p,A;function q(L,B,X){L.addEventListener(B,X),Je.set(B,X)}async function Y(L){const B=Rc(L);if(B){const{avails:X}=await d.getEventTracking();w.value=yi(B,X,w.value),B.events.forEach(Re=>{w.value&&(w.value.impression||(ce("impression"),w.value.impression=!0),ce(Re),Re==="complete"&&(w.value=void 0))})}}function Ee(){return b.value=!1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(L=>{q(t,L,()=>{const B=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;ce(B?"fullscreen":"exitFullscreen")})}),q(t,"pause",()=>ce("pause")),q(t,"play",()=>ce("resume")),q(t,"rewind",()=>ce("rewind")),q(t,"mute",()=>ce("mute")),q(t,"unmute",()=>ce("unmute")),async(L,B)=>{const{tagList:X,_url:Re}=B.frag;X.flat().find(xe=>xe==="EXT-X-CUE-OUT-CONT"||xe==="EXT-X-CUE-OUT"||xe==="EXT-X-CUE-IN")&&Y(Re)}}async function Oe(){return d.getEventTracking().then(L=>{for(const B of(L==null?void 0:L.avails)||[])for(const X of B.ads){const Re=`${B.id}_${X.id}_${X.startTimeInSeconds}`;for(const ot of X.trackingEvents){const xe=`${Re}_${ot.eventType}`;se.value.find(at=>at.key===xe)||se.value.push({...ot,key:xe,ad:{...X,key:Re},tracked:!1})}}})}function Fe(){return async(L,B)=>{function X(xe){for(let Ke=0;Ke<xe.length;Ke++)if(xe[Ke]===0)return Ke;return xe.length}const{start:Re,sn:ot}=B.frag;for(let xe=0;xe<B.samples.length;xe++){const Ke=B.samples[xe],at=Ke.data,_t=Ke.pts;if(String.fromCharCode.apply(null,at.slice(0,3))!=="ID3"||String.fromCharCode.apply(null,at.slice(10,14))!=="TXXX")continue;const Yt=at.slice(21,at.length),fn=X(Yt),Zt=Yt.slice(fn+1,Yt.length),zr=X(Zt),Ur=new TextDecoder("utf-8").decode(Zt.slice(0,zr)),cr={sn:ot,time:_t-Re,value:di(Ur)};if(N.value&&ot<N.value)return;C.value.push(cr),cr.value.event==="start"&&Oe()}}}function ve(){return L=>{const B=L.track;B.kind==="metadata"&&(B.oncuechange=async()=>{const X=B.activeCues;for(let Re=0;Re<X.length;Re++){const ot=X[Re];if(ot.value&&ot.value.uri){const xe=ot.value.uri;Y(xe)}}})}}function Ae(){return async L=>{var X,Re;const B=(X=L==null?void 0:L.detail)==null?void 0:X.value;if(((Re=L==null?void 0:L.detail)==null?void 0:Re.schemeIdUri)==="urn:sigma:dai:2018")try{const xe=(at=>{try{return atob(at)}catch(_t){return console.error("Invalid base64 string:",_t),null}})(B),Ke=JSON.parse(xe);if(Ke.event=L.detail.id,Ke){const{avails:at}=await d.getEventTracking();w.value=yi(Ke,at,w.value);const _t=Ke.event;w.value&&(w.value.impression||(ce("impression"),w.value.impression=!0),ce(_t),_t==="complete"&&(w.value=void 0))}}catch(ot){console.error("Error decoding base64:",ot)}}}function Z(L,B){g.on(X=>{(L==="*"||X.eventType===L)&&B(X)})}function Pe(){w.value=void 0,C.value=[],se.value=[],zo(p),zo(A),Je.forEach((L,B)=>{t.removeEventListener(B,L)}),Je.clear()}function ae(){return{eventTracking:C,trackingDataEvent:se}}return{destroy:Pe,onEventTracking:Z,hlsHelper:{createHlsFragChanged:Ee,createHlsFragParsingMetadata:Fe},videojsHelper:{createVideojsAddTrack:ve},shakaPlayerHelper:{createShakaPlayerHandlerEvent:Ae},getLog:ae}}async function Sc({video:t,adContainer:o,adsUrl:s,baseURL:d}){const f=d||"https://cdn.jsdelivr.net/gh/sigmaott/sigma-ssai-web-sdk@v1.5.0",b=(await Lr.getInstance({uri:en(f,"/build/dist/sigma-cspm.wasm")||"https://localhost:4222/sigma-cspm.wasm"})).createSession();function w(){}const{onEventTracking:S,destroy:D,videojsHelper:E,hlsHelper:C,shakaPlayerHelper:N,getLog:se}=Tc({video:t,adContainer:o,trackingUrl:"",startSession:w,sdk:b,domain:f}),ce=Lt(),Je=Lt();function p(Z){Z.config.loader=gi({adsUrl:s,sdk:b,loader:Hls.DefaultConfig.loader}),ce.value=Z;const Pe=C.createHlsFragChanged(),ae=C.createHlsFragParsingMetadata();Z.on("hlsFragChanged",Pe),Z.on("hlsFragParsingMetadata",ae),Z.on(Hls.Events.ERROR,(L,B)=>{console.error("HLS Error:",L,B),B.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",B.details):B.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",B.details):console.error("Other Error:",B.details)}),Je.value=()=>{Z.off("hlsFragChanged",Pe),Z.off("hlsFragParsingMetadata",ae)}}function A(Z){const Pe=Z.config;Z.config={...Pe,loader:gi({adsUrl:s,sdk:b,loader:SigmaManager.DefaultConfig.loader})},ce.value=Z;const ae=C.createHlsFragChanged(),L=C.createHlsFragParsingMetadata();Z.on("hlsFragChanged",ae),Z.on("hlsFragParsingMetadata",L),Z.on(SigmaManager==null?void 0:SigmaManager.Events.ERROR,(B,X)=>{console.error("HLS Error:",B,X),X.type===(SigmaManager==null?void 0:SigmaManager.ErrorTypes.NETWORK_ERROR)?console.error("Network Error:",X.details):X.type===(SigmaManager==null?void 0:SigmaManager.ErrorTypes.MEDIA_ERROR)?console.error("Media Error:",X.details):console.error("Other Error:",X.details)}),Je.value=()=>{Z.destroy()}}const q=Lt(),Y=Lt(),Oe={instance:b,config:{proxyAds:{uri:s,timeout:2}}};function Fe(Z){q.value=Z;const Pe=E.createVideojsAddTrack();Z.textTracks().on("addtrack",Pe),Y.value=()=>{Z.textTracks().off("addtrack",Pe)}}function ve(Z,Pe){const ae=N.createShakaPlayerHandlerEvent();Z.addEventListener("timelineregionenter",ae),Z.getNetworkingEngine().registerResponseFilter(async(L,B)=>{if(L===0){const X=new TextDecoder().decode(B.data),Re=await b.loadSource({config:{proxyAds:{uri:s,timeout:2e3}},masterUri:Pe,manifest:X});B.data=new TextEncoder().encode(Re)}})}function Ae(){var Z,Pe;D(),(Z=Je.value)==null||Z.call(Je),(Pe=Y.value)==null||Pe.call(Y),ce.value=null,q.value=null,Je.value=null,Y.value=null}return{onEventTracking:S,destroy:Ae,sigmaPlayer:{attachVideojs:Fe,attachHls:p,attachSigmaDrm:A,getLog:se,attachShaka:ve},sdk:b,cspm:Oe}}const Ei=window==null?void 0:window.videojs;function bi(t){if((t==null?void 0:t.VERSION)==="7.10.2"){let o=t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist;t!=null&&t.originalSetupInitialPlaylist?o=t.originalSetupInitialPlaylist:t.originalSetupInitialPlaylist=o,t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist=async function(f){var g;if((g=this.vhs_.options_)!=null&&g.cspm)try{const w=await(await fetch(this.src)).text();await this.vhs_.options_.cspm.instance.loadSource({config:this.vhs_.options_.cspm.config,manifest:w,masterUri:this.src})}catch(b){console.error("Error loading source:",b)}o.apply(this,[f])};let s=t.Vhs.PlaylistLoader.prototype.haveMetadata;t!=null&&t.originalHaveMetadata?s=t.originalHaveMetadata:t.originalHaveMetadata=s,t.Vhs.PlaylistLoader.prototype.haveMetadata=async function({playlistString:f,playlistObject:g,url:b,id:w}){var D,E;const S=(D=this.vhs_.options_.cspm)==null?void 0:D.config;try{f&&((E=this.vhs_.options_)!=null&&E.cspm)&&(f=await this.vhs_.options_.cspm.instance.loadSource({config:S,manifest:f,masterUri:this.master.playlists[w].resolvedUri})),s.apply(this,[{playlistString:f,playlistObject:g,url:b,id:w}])}catch(C){console.error("Error loading source:",C)}};const d=(f,g,b)=>f&&b&&b.responseURL&&g!==b.responseURL?b.responseURL:g;t.Vhs.PlaylistLoader.prototype.media=function(f,g){if(!f)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error(`Cannot switch media playlist from ${this.state}`);if(typeof f=="string"){if(!this.master.playlists[f])throw new Error(`Unknown playlist URI: ${f}`);f=this.master.playlists[f]}if(window.clearTimeout(this.finalRenditionTimeout),g){const S=f.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,f,!1),S);return}const b=this.state,w=!this.media_||f.id!==this.media_.id;if(this.master.playlists[f.id].endList||f.endList&&f.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=f,w&&(this.trigger("mediachanging"),b==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(w){if(this.state="SWITCHING_MEDIA",this.request){if(f.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:f.resolvedUri,withCredentials:this.withCredentials},(S,D)=>{if(this.request){if(f.resolvedUri=d(this.handleManifestRedirects,f.resolvedUri,D),S)return this.playlistRequestError(this.request,f,b);this.haveMetadata({playlistString:D.responseText,url:f.uri,id:f.id}).then(()=>{b==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")})}})}}}else{let o=t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist;t!=null&&t.originalSetupInitialPlaylist?o=t.originalSetupInitialPlaylist:t.originalSetupInitialPlaylist=o,t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist=async function(b){if(b.manifestString&&this.vhs_.options_.cspm)try{await this.vhs_.options_.cspm.instance.loadSource({config:this.vhs_.options_.cspm.config,manifest:b.manifestString,masterUri:this.src})}catch(w){console.error("Error loading source:",w)}o.apply(this,[b])};let s=t.Vhs.PlaylistLoader.prototype.parseManifest_;t!=null&&t.originalParseManifest?s=t.originalParseManifest:t.originalParseManifest=s,t.Vhs.PlaylistLoader.prototype.parseManifest_=function({url:b,manifestString:w}){const S=s.apply(this,[{url:b,manifestString:w}]);return S.playlists&&S.playlists.length&&(S.manifestString=w),S};let d=t.Vhs.PlaylistLoader.prototype.haveMetadata;t.Vhs.PlaylistLoader.prototype.haveMetadata=async function({playlistString:b,playlistObject:w,url:S,id:D}){try{if(b&&this.vhs_.options_.cspm){const E=this.vhs_.options_.cspm.config;b=await this.vhs_.options_.cspm.instance.loadSource({config:E,manifest:b,masterUri:this.main.playlists[D].resolvedUri})}d.apply(this,[{playlistString:b,playlistObject:w,url:S,id:D}])}catch(E){throw console.error("Error loading source:",E),E}},t!=null&&t.originalHaveMetadata?d=t.originalHaveMetadata:t.originalHaveMetadata=d;const f=(b,w)=>{const S=b.segments||[],D=S[S.length-1],E=D&&D.parts&&D.parts[D.parts.length-1],C=E&&E.duration||D&&D.duration;return C?C*1e3:(b.partTargetDuration||b.targetDuration||10)*500},g=(b,w)=>w&&w.responseURL&&b!==w.responseURL?w.responseURL:b;t.Vhs.PlaylistLoader.prototype.media=function(b,w){if(!b)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error(`Cannot switch media playlist from ${this.state}`);if(typeof b=="string"){if(!this.main.playlists[b])throw new Error(`Unknown playlist URI: ${b}`);b=this.main.playlists[b]}if(window.clearTimeout(this.finalRenditionTimeout),w){const N=(b.partTargetDuration||b.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,b,!1),N);return}const S=this.state,D=!this.media_||b.id!==this.media_.id,E=this.main.playlists[b.id];if(E&&E.endList||b.endList&&b.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=b,D&&(this.trigger("mediachanging"),S==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(f(b)),!D)return;if(this.state="SWITCHING_MEDIA",this.request){if(b.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=b;const C={playlistInfo:{type:"media",uri:b.uri}};this.trigger({type:"playlistrequeststart",metadata:C}),this.request=this.vhs_.xhr({uri:b.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(N,se)=>{if(this.request){if(b.lastRequest=Date.now(),b.resolvedUri=g(b.resolvedUri,se),N)return this.playlistRequestError(this.request,b,S);this.haveMetadata({playlistString:se.responseText,url:b.uri,id:b.id}).then(()=>{this.trigger({type:"playlistrequestcomplete",metadata:C}),S==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")})}})}}return t}Ei&&bi(Ei);function Oc(t){const o="https://dai.sigma.video/api/proxy-ads/ads/",s=Nn(t),d=`${s.protocol}//${s.host}${s.pathname}`;if(!s.search)return{playerUrl:t,adsUrl:null};const f=is(t),g=f["sigma.dai.adsEndpoint"];if(!g)return{playerUrl:t,adsUrl:null};const b={},w={};for(const[D,E]of Object.entries(f))D.startsWith("sigma.dai")?D!=="sigma.dai.adsEndpoint"&&(b[D.replace("sigma.dai.","")]=E):w[D]=E;return{playerUrl:kr(d,w),adsUrl:kr(en(o,g),b)}}return Ot.createSigmaDai=Sc,Ot.processURL=Oc,Ot.videojsForCSPM=bi,Object.defineProperty(Ot,Symbol.toStringTag,{value:"Module"}),Ot}({});
