var SigmaDaiSdk=function(Ct){"use strict";var au=Object.defineProperty;var su=(Ct,Mt,mr)=>Mt in Ct?au(Ct,Mt,{enumerable:!0,configurable:!0,writable:!0,value:mr}):Ct[Mt]=mr;var Dt=(Ct,Mt,mr)=>su(Ct,typeof Mt!="symbol"?Mt+"":Mt,mr);const Mt=/#/g,mr=/&/g,Ma=/\//g,Fa=/=/g,In=/\+/g,za=/%5e/gi,Ua=/%60/gi,La=/%7c/gi,ja=/%20/gi;function Ba(t){return encodeURI(""+t).replace(La,"|")}function Dn(t){return Ba(typeof t=="string"?t:JSON.stringify(t)).replace(In,"%2B").replace(ja,"+").replace(Mt,"%23").replace(mr,"%26").replace(Ua,"`").replace(za,"^").replace(Ma,"%2F")}function Cn(t){return Dn(t).replace(Fa,"%3D")}function xo(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function qa(t){return xo(t.replace(In," "))}function Ha(t){return xo(t.replace(In," "))}function Io(t=""){const o={};t[0]==="?"&&(t=t.slice(1));for(const s of t.split("&")){const c=s.match(/([^=]+)=?(.*)/)||[];if(c.length<2)continue;const f=qa(c[1]);if(f==="__proto__"||f==="constructor")continue;const v=Ha(c[2]||"");o[f]===void 0?o[f]=v:Array.isArray(o[f])?o[f].push(v):o[f]=[o[f],v]}return o}function $a(t,o){return(typeof o=="number"||typeof o=="boolean")&&(o=String(o)),o?Array.isArray(o)?o.map(s=>`${Cn(t)}=${Dn(s)}`).join("&"):`${Cn(t)}=${Dn(o)}`:Cn(t)}function Va(t){return Object.keys(t).filter(o=>t[o]!==void 0).map(o=>$a(o,t[o])).filter(Boolean).join("&")}const Ga=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Ja=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Ka=/^([/\\]\s*){2,}[^/\\]/,Ya=/^\.?\//;function Do(t,o={}){return typeof o=="boolean"&&(o={acceptRelative:o}),o.strict?Ga.test(t):Ja.test(t)||(o.acceptRelative?Ka.test(t):!1)}function Za(t="",o){return t.endsWith("/")}function Xa(t="",o){return(Za(t)?t.slice(0,-1):t)||"/"}function Qa(t="",o){return t.endsWith("/")?t:t+"/"}function ka(t,o){if(ts(o)||Do(t))return t;const s=Xa(o);return t.startsWith(s)?t:kr(s,t)}function Qr(t,o){const s=_n(t),c={...Io(s.search),...o};return s.search=Va(c),ns(s)}function es(t){return Io(_n(t).search)}function ts(t){return!t||t==="/"}function rs(t){return t&&t!=="/"}function kr(t,...o){let s=t||"";for(const c of o.filter(f=>rs(f)))if(s){const f=c.replace(Ya,"");s=Qa(s)+f}else s=c;return s}const Co=Symbol.for("ufo:protocolRelative");function _n(t="",o){const s=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(s){const[,_,F=""]=s;return{protocol:_.toLowerCase(),pathname:F,href:_+F,auth:"",host:"",search:"",hash:""}}if(!Do(t,{acceptRelative:!0}))return _o(t);const[,c="",f,v=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,R="",m=""]=v.match(/([^#/?]*)(.*)?/)||[];c==="file:"&&(m=m.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:I,search:C,hash:b}=_o(m);return{protocol:c.toLowerCase(),auth:f?f.slice(0,Math.max(0,f.length-1)):"",host:R,pathname:I,search:C,hash:b,[Co]:!c}}function _o(t=""){const[o="",s="",c=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:o,search:s,hash:c}}function ns(t){const o=t.pathname||"",s=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",c=t.hash||"",f=t.auth?t.auth+"@":"",v=t.host||"";return(t.protocol||t[Co]?(t.protocol||"")+"//":"")+f+v+o+s+c}const os=t=>(o,s)=>(t.set(o,s),s),No=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,Ao=536870912,Wo=Ao*2,is=(t,o)=>s=>{const c=o.get(s);let f=c===void 0?s.size:c<Wo?c+1:0;if(!s.has(f))return t(s,f);if(s.size<Ao){for(;s.has(f);)f=Math.floor(Math.random()*Wo);return t(s,f)}if(s.size>No)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;s.has(f);)f=Math.floor(Math.random()*No);return t(s,f)},Mo=new WeakMap,as=os(Mo),en=is(as,Mo),ss=t=>t.method!==void 0&&t.method==="call",cs=t=>typeof t.id=="number"&&typeof t.result=="boolean",us=((t,o)=>{let s=null;return()=>{if(s!==null)return s;const c=new Blob([o],{type:"application/javascript; charset=utf-8"}),f=URL.createObjectURL(c);return s=t(f),setTimeout(()=>URL.revokeObjectURL(f)),s}})(t=>{const o=new Map([[0,()=>{}]]),s=new Map([[0,()=>{}]]),c=new Map,f=new Worker(t);return f.addEventListener("message",({data:C})=>{if(ss(C)){const{params:{timerId:b,timerType:_}}=C;if(_==="interval"){const F=o.get(b);if(typeof F===void 0)throw new Error("The timer is in an undefined state.");if(typeof F=="number"){const de=c.get(F);if(de===void 0||de.timerId!==b||de.timerType!==_)throw new Error("The timer is in an undefined state.")}else typeof F=="function"&&F()}else if(_==="timeout"){const F=s.get(b);if(typeof F===void 0)throw new Error("The timer is in an undefined state.");if(typeof F=="number"){const de=c.get(F);if(de===void 0||de.timerId!==b||de.timerType!==_)throw new Error("The timer is in an undefined state.")}else typeof F=="function"&&(F(),s.delete(b))}}else if(cs(C)){const{id:b}=C,_=c.get(b);if(_===void 0)throw new Error("The timer is in an undefined state.");const{timerId:F,timerType:de}=_;c.delete(b),de==="interval"?o.delete(F):s.delete(F)}else{const{error:{message:b}}=C;throw new Error(b)}}),{clearInterval:C=>{if(typeof o.get(C)=="function"){const b=en(c);c.set(b,{timerId:C,timerType:"interval"}),o.set(C,b),f.postMessage({id:b,method:"clear",params:{timerId:C,timerType:"interval"}})}},clearTimeout:C=>{if(typeof s.get(C)=="function"){const b=en(c);c.set(b,{timerId:C,timerType:"timeout"}),s.set(C,b),f.postMessage({id:b,method:"clear",params:{timerId:C,timerType:"timeout"}})}},setInterval:(C,b=0,..._)=>{const F=en(o);return o.set(F,()=>{C(..._),typeof o.get(F)=="function"&&f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:F,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:F,timerType:"interval"}}),F},setTimeout:(C,b=0,..._)=>{const F=en(s);return s.set(F,()=>C(..._)),f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:F,timerType:"timeout"}}),F}}},`(()=>{"use strict";const e=new Map,t=new Map,r=t=>{const r=e.get(t);return void 0!==r&&(clearTimeout(r),e.delete(t),!0)},s=e=>{const r=t.get(e);return void 0!==r&&(clearTimeout(r),t.delete(e),!0)},o=(e,t)=>{const r=performance.now(),s=e+t-r-performance.timeOrigin;return{expected:r+s,remainingDelay:s}},i=(e,t,r,s)=>{const o=r-performance.now();o>0?e.set(t,setTimeout(i,o,e,t,r,s)):(e.delete(t),postMessage({id:null,method:"call",params:{timerId:t,timerType:s}}))};addEventListener("message",(n=>{let{data:a}=n;try{if("clear"===a.method){const{id:e,params:{timerId:t,timerType:o}}=a;if("interval"===o)postMessage({id:e,result:r(t)});else{if("timeout"!==o)throw new Error('The given type "'.concat(o,'" is not supported'));postMessage({id:e,result:s(t)})}}else{if("set"!==a.method)throw new Error('The given method "'.concat(a.method,'" is not supported'));{const{params:{delay:r,now:s,timerId:n,timerType:m}}=a;if("interval"===m)((t,r,s)=>{const{expected:n,remainingDelay:a}=o(t,s);e.set(r,setTimeout(i,a,e,r,n,"interval"))})(r,n,s);else{if("timeout"!==m)throw new Error('The given type "'.concat(m,'" is not supported'));((e,r,s)=>{const{expected:n,remainingDelay:a}=o(e,s);t.set(r,setTimeout(i,a,t,r,n,"timeout"))})(r,n,s)}}}}catch(e){postMessage({error:{message:e.message},id:a.id,result:null})}}))})();`),Fo=t=>us().clearTimeout(t);/**
* @vue/shared v3.5.1
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ds(t,o){const s=new Set(t.split(","));return c=>s.has(c)}const zo=Object.assign,fs=Object.prototype.hasOwnProperty,Nn=(t,o)=>fs.call(t,o),gr=Array.isArray,_r=t=>Uo(t)==="[object Map]",ls=t=>typeof t=="string",Nr=t=>typeof t=="symbol",tn=t=>t!==null&&typeof t=="object",hs=Object.prototype.toString,Uo=t=>hs.call(t),Lo=t=>Uo(t).slice(8,-1),An=t=>ls(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ps=(t=>{const o=Object.create(null);return s=>o[s]||(o[s]=t(s))})(t=>t.charAt(0).toUpperCase()+t.slice(1)),yr=(t,o)=>!Object.is(t,o);var Ge={};function Er(t,...o){console.warn(`[Vue warn] ${t}`,...o)}let we;const Wn=new WeakSet;class jo{constructor(o){this.fn=o,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Wn.has(this)&&(Wn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=Ar,Ar=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Vo(this),qo(this);const o=we,s=St;we=this,St=!0;try{return this.fn()}finally{Ge.NODE_ENV!=="production"&&we!==this&&Er("Active effect was not restored correctly - this is likely a Vue internal bug."),Ho(this),we=o,St=s,this.flags&=-3}}stop(){if(this.flags&1){for(let o=this.deps;o;o=o.nextDep)Un(o);this.deps=this.depsTail=void 0,Vo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Wn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){zn(this)&&this.run()}get dirty(){return zn(this)}}let Bo=0,Ar;function Mn(){Bo++}function Fn(){if(--Bo>0)return;let t;for(;Ar;){let o=Ar;for(Ar=void 0;o;){const s=o.nextEffect;if(o.nextEffect=void 0,o.flags&=-9,o.flags&1)try{o.trigger()}catch(c){t||(t=c)}o=s}}if(t)throw t}function qo(t){for(let o=t.deps;o;o=o.nextDep)o.version=-1,o.prevActiveLink=o.dep.activeLink,o.dep.activeLink=o}function Ho(t){let o,s=t.depsTail;for(let c=s;c;c=c.prevDep)c.version===-1?(c===s&&(s=c.prevDep),Un(c),ws(c)):o=c,c.dep.activeLink=c.prevActiveLink,c.prevActiveLink=void 0;t.deps=o,t.depsTail=s}function zn(t){for(let o=t.deps;o;o=o.nextDep)if(o.dep.version!==o.version||o.dep.computed&&vs(o.dep.computed)===!1||o.dep.version!==o.version)return!0;return!!t._dirty}function vs(t){if(t.flags&2)return!1;if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===rn))return;t.globalVersion=rn;const o=t.dep;if(t.flags|=2,o.version>0&&!t.isSSR&&!zn(t)){t.flags&=-3;return}const s=we,c=St;we=t,St=!0;try{qo(t);const f=t.fn();(o.version===0||yr(f,t._value))&&(t._value=f,o.version++)}catch(f){throw o.version++,f}finally{we=s,St=c,Ho(t),t.flags&=-3}}function Un(t){const{dep:o,prevSub:s,nextSub:c}=t;if(s&&(s.nextSub=c,t.prevSub=void 0),c&&(c.prevSub=s,t.nextSub=void 0),o.subs===t&&(o.subs=s),!o.subs&&o.computed){o.computed.flags&=-5;for(let f=o.computed.deps;f;f=f.nextDep)Un(f)}}function ws(t){const{prevDep:o,nextDep:s}=t;o&&(o.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=o,t.nextDep=void 0)}function ms(t,o){t.effect instanceof jo&&(t=t.effect.fn);const s=new jo(t);try{s.run()}catch(f){throw s.stop(),f}const c=s.run.bind(s);return c.effect=s,c}let St=!0;const $o=[];function gs(){$o.push(St),St=!1}function ys(){const t=$o.pop();St=t===void 0?!0:t}function Vo(t){const{cleanup:o}=t;if(t.cleanup=void 0,o){const s=we;we=void 0;try{o()}finally{we=s}}}let rn=0;class Go{constructor(o){this.computed=o,this.version=0,this.activeLink=void 0,this.subs=void 0,Ge.NODE_ENV!=="production"&&(this.subsHead=void 0)}track(o){if(!we||!St)return;let s=this.activeLink;if(s===void 0||s.sub!==we)s=this.activeLink={dep:this,sub:we,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},we.deps?(s.prevDep=we.depsTail,we.depsTail.nextDep=s,we.depsTail=s):we.deps=we.depsTail=s,we.flags&4&&Jo(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const c=s.nextDep;c.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=c),s.prevDep=we.depsTail,s.nextDep=void 0,we.depsTail.nextDep=s,we.depsTail=s,we.deps===s&&(we.deps=c)}return Ge.NODE_ENV!=="production"&&we.onTrack&&we.onTrack(zo({effect:we},o)),s}trigger(o){this.version++,rn++,this.notify(o)}notify(o){Mn();try{if(Ge.NODE_ENV!=="production")for(let s=this.subsHead;s;s=s.nextSub)Ge.NODE_ENV!=="production"&&s.sub.onTrigger&&!(s.sub.flags&8)&&s.sub.onTrigger(zo({effect:s.sub},o));for(let s=this.subs;s;s=s.prevSub)s.sub.notify()}finally{Fn()}}}function Jo(t){const o=t.dep.computed;if(o&&!t.dep.subs){o.flags|=20;for(let c=o.deps;c;c=c.nextDep)Jo(c)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),Ge.NODE_ENV!=="production"&&t.dep.subsHead===void 0&&(t.dep.subsHead=t),t.dep.subs=t}const Ln=new WeakMap,ar=Symbol(Ge.NODE_ENV!=="production"?"Object iterate":""),jn=Symbol(Ge.NODE_ENV!=="production"?"Map keys iterate":""),Wr=Symbol(Ge.NODE_ENV!=="production"?"Array iterate":"");function pt(t,o,s){if(St&&we){let c=Ln.get(t);c||Ln.set(t,c=new Map);let f=c.get(s);f||c.set(s,f=new Go),Ge.NODE_ENV!=="production"?f.track({target:t,type:o,key:s}):f.track()}}function Vt(t,o,s,c,f,v){const R=Ln.get(t);if(!R){rn++;return}let m=[];if(o==="clear")m=[...R.values()];else{const I=gr(t),C=I&&An(s);if(I&&s==="length"){const b=Number(c);R.forEach((_,F)=>{(F==="length"||F===Wr||!Nr(F)&&F>=b)&&m.push(_)})}else{const b=_=>_&&m.push(_);switch(s!==void 0&&b(R.get(s)),C&&b(R.get(Wr)),o){case"add":I?C&&b(R.get("length")):(b(R.get(ar)),_r(t)&&b(R.get(jn)));break;case"delete":I||(b(R.get(ar)),_r(t)&&b(R.get(jn)));break;case"set":_r(t)&&b(R.get(ar));break}}}Mn();for(const I of m)Ge.NODE_ENV!=="production"?I.trigger({target:t,type:o,key:s,newValue:c,oldValue:f,oldTarget:v}):I.trigger();Fn()}function br(t){const o=me(t);return o===t?o:(pt(o,"iterate",Wr),Jt(t)?o:o.map(dt))}function Bn(t){return pt(t=me(t),"iterate",Wr),t}const Es={__proto__:null,[Symbol.iterator](){return qn(this,Symbol.iterator,dt)},concat(...t){return br(this).concat(...t.map(o=>gr(o)?br(o):o))},entries(){return qn(this,"entries",t=>(t[1]=dt(t[1]),t))},every(t,o){return Ft(this,"every",t,o,void 0,arguments)},filter(t,o){return Ft(this,"filter",t,o,s=>s.map(dt),arguments)},find(t,o){return Ft(this,"find",t,o,dt,arguments)},findIndex(t,o){return Ft(this,"findIndex",t,o,void 0,arguments)},findLast(t,o){return Ft(this,"findLast",t,o,dt,arguments)},findLastIndex(t,o){return Ft(this,"findLastIndex",t,o,void 0,arguments)},forEach(t,o){return Ft(this,"forEach",t,o,void 0,arguments)},includes(...t){return Hn(this,"includes",t)},indexOf(...t){return Hn(this,"indexOf",t)},join(t){return br(this).join(t)},lastIndexOf(...t){return Hn(this,"lastIndexOf",t)},map(t,o){return Ft(this,"map",t,o,void 0,arguments)},pop(){return Mr(this,"pop")},push(...t){return Mr(this,"push",t)},reduce(t,...o){return Ko(this,"reduce",t,o)},reduceRight(t,...o){return Ko(this,"reduceRight",t,o)},shift(){return Mr(this,"shift")},some(t,o){return Ft(this,"some",t,o,void 0,arguments)},splice(...t){return Mr(this,"splice",t)},toReversed(){return br(this).toReversed()},toSorted(t){return br(this).toSorted(t)},toSpliced(...t){return br(this).toSpliced(...t)},unshift(...t){return Mr(this,"unshift",t)},values(){return qn(this,"values",dt)}};function qn(t,o,s){const c=Bn(t),f=c[o]();return c!==t&&!Jt(t)&&(f._next=f.next,f.next=()=>{const v=f._next();return v.value&&(v.value=s(v.value)),v}),f}const bs=Array.prototype;function Ft(t,o,s,c,f,v){const R=Bn(t),m=R!==t&&!Jt(t),I=R[o];if(I!==bs[o]){const _=I.apply(t,v);return m?dt(_):_}let C=s;R!==t&&(m?C=function(_,F){return s.call(this,dt(_),F,t)}:s.length>2&&(C=function(_,F){return s.call(this,_,F,t)}));const b=I.call(R,C,c);return m&&f?f(b):b}function Ko(t,o,s,c){const f=Bn(t);let v=s;return f!==t&&(Jt(t)?s.length>3&&(v=function(R,m,I){return s.call(this,R,m,I,t)}):v=function(R,m,I){return s.call(this,R,dt(m),I,t)}),f[o](v,...c)}function Hn(t,o,s){const c=me(t);pt(c,"iterate",Wr);const f=c[o](...s);return(f===-1||f===!1)&&Ls(s[0])?(s[0]=me(s[0]),c[o](...s)):f}function Mr(t,o,s=[]){gs(),Mn();const c=me(t)[o].apply(t,s);return Fn(),ys(),c}const Ps=ds("__proto__,__v_isRef,__isVue"),Yo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Nr));function Ts(t){Nr(t)||(t=String(t));const o=me(this);return pt(o,"has",t),o.hasOwnProperty(t)}class Zo{constructor(o=!1,s=!1){this._isReadonly=o,this._isShallow=s}get(o,s,c){const f=this._isReadonly,v=this._isShallow;if(s==="__v_isReactive")return!f;if(s==="__v_isReadonly")return f;if(s==="__v_isShallow")return v;if(s==="__v_raw")return c===(f?v?Fs:oi:v?Ms:ni).get(o)||Object.getPrototypeOf(o)===Object.getPrototypeOf(c)?o:void 0;const R=gr(o);if(!f){let I;if(R&&(I=Es[s]))return I;if(s==="hasOwnProperty")return Ts}const m=Reflect.get(o,s,Tr(o)?o:c);return(Nr(s)?Yo.has(s):Ps(s))||(f||pt(o,"get",s),v)?m:Tr(m)?R&&An(s)?m:m.value:tn(m)?f?ai(m):ii(m):m}}class Rs extends Zo{constructor(o=!1){super(!1,o)}set(o,s,c,f){let v=o[s];if(!this._isShallow){const I=Pr(v);if(!Jt(c)&&!Pr(c)&&(v=me(v),c=me(c)),!gr(o)&&Tr(v)&&!Tr(c))return I?!1:(v.value=c,!0)}const R=gr(o)&&An(s)?Number(s)<o.length:Nn(o,s),m=Reflect.set(o,s,c,Tr(o)?o:f);return o===me(f)&&(R?yr(c,v)&&Vt(o,"set",s,c,v):Vt(o,"add",s,c)),m}deleteProperty(o,s){const c=Nn(o,s),f=o[s],v=Reflect.deleteProperty(o,s);return v&&c&&Vt(o,"delete",s,void 0,f),v}has(o,s){const c=Reflect.has(o,s);return(!Nr(s)||!Yo.has(s))&&pt(o,"has",s),c}ownKeys(o){return pt(o,"iterate",gr(o)?"length":ar),Reflect.ownKeys(o)}}class Ss extends Zo{constructor(o=!1){super(!0,o)}set(o,s){return Ge.NODE_ENV!=="production"&&Er(`Set operation on key "${String(s)}" failed: target is readonly.`,o),!0}deleteProperty(o,s){return Ge.NODE_ENV!=="production"&&Er(`Delete operation on key "${String(s)}" failed: target is readonly.`,o),!0}}const Os=new Rs,xs=new Ss,$n=t=>t,nn=t=>Reflect.getPrototypeOf(t);function on(t,o,s=!1,c=!1){t=t.__v_raw;const f=me(t),v=me(o);s||(yr(o,v)&&pt(f,"get",o),pt(f,"get",v));const{has:R}=nn(f),m=c?$n:s?Vn:dt;if(R.call(f,o))return m(t.get(o));if(R.call(f,v))return m(t.get(v));t!==f&&t.get(o)}function an(t,o=!1){const s=this.__v_raw,c=me(s),f=me(t);return o||(yr(t,f)&&pt(c,"has",t),pt(c,"has",f)),t===f?s.has(t):s.has(t)||s.has(f)}function sn(t,o=!1){return t=t.__v_raw,!o&&pt(me(t),"iterate",ar),Reflect.get(t,"size",t)}function Xo(t,o=!1){!o&&!Jt(t)&&!Pr(t)&&(t=me(t));const s=me(this);return nn(s).has.call(s,t)||(s.add(t),Vt(s,"add",t,t)),this}function Qo(t,o,s=!1){!s&&!Jt(o)&&!Pr(o)&&(o=me(o));const c=me(this),{has:f,get:v}=nn(c);let R=f.call(c,t);R?Ge.NODE_ENV!=="production"&&ri(c,f,t):(t=me(t),R=f.call(c,t));const m=v.call(c,t);return c.set(t,o),R?yr(o,m)&&Vt(c,"set",t,o,m):Vt(c,"add",t,o),this}function ko(t){const o=me(this),{has:s,get:c}=nn(o);let f=s.call(o,t);f?Ge.NODE_ENV!=="production"&&ri(o,s,t):(t=me(t),f=s.call(o,t));const v=c?c.call(o,t):void 0,R=o.delete(t);return f&&Vt(o,"delete",t,void 0,v),R}function ei(){const t=me(this),o=t.size!==0,s=Ge.NODE_ENV!=="production"?_r(t)?new Map(t):new Set(t):void 0,c=t.clear();return o&&Vt(t,"clear",void 0,void 0,s),c}function cn(t,o){return function(c,f){const v=this,R=v.__v_raw,m=me(R),I=o?$n:t?Vn:dt;return!t&&pt(m,"iterate",ar),R.forEach((C,b)=>c.call(f,I(C),I(b),v))}}function un(t,o,s){return function(...c){const f=this.__v_raw,v=me(f),R=_r(v),m=t==="entries"||t===Symbol.iterator&&R,I=t==="keys"&&R,C=f[t](...c),b=s?$n:o?Vn:dt;return!o&&pt(v,"iterate",I?jn:ar),{next(){const{value:_,done:F}=C.next();return F?{value:_,done:F}:{value:m?[b(_[0]),b(_[1])]:b(_),done:F}},[Symbol.iterator](){return this}}}}function Gt(t){return function(...o){if(Ge.NODE_ENV!=="production"){const s=o[0]?`on key "${o[0]}" `:"";Er(`${ps(t)} operation ${s}failed: target is readonly.`,me(this))}return t==="delete"?!1:t==="clear"?void 0:this}}function Is(){const t={get(v){return on(this,v)},get size(){return sn(this)},has:an,add:Xo,set:Qo,delete:ko,clear:ei,forEach:cn(!1,!1)},o={get(v){return on(this,v,!1,!0)},get size(){return sn(this)},has:an,add(v){return Xo.call(this,v,!0)},set(v,R){return Qo.call(this,v,R,!0)},delete:ko,clear:ei,forEach:cn(!1,!0)},s={get(v){return on(this,v,!0)},get size(){return sn(this,!0)},has(v){return an.call(this,v,!0)},add:Gt("add"),set:Gt("set"),delete:Gt("delete"),clear:Gt("clear"),forEach:cn(!0,!1)},c={get(v){return on(this,v,!0,!0)},get size(){return sn(this,!0)},has(v){return an.call(this,v,!0)},add:Gt("add"),set:Gt("set"),delete:Gt("delete"),clear:Gt("clear"),forEach:cn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(v=>{t[v]=un(v,!1,!1),s[v]=un(v,!0,!1),o[v]=un(v,!1,!0),c[v]=un(v,!0,!0)}),[t,s,o,c]}const[Ds,Cs,_s,Ns]=Is();function ti(t,o){const s=o?t?Ns:_s:t?Cs:Ds;return(c,f,v)=>f==="__v_isReactive"?!t:f==="__v_isReadonly"?t:f==="__v_raw"?c:Reflect.get(Nn(s,f)&&f in c?s:c,f,v)}const As={get:ti(!1,!1)},Ws={get:ti(!0,!1)};function ri(t,o,s){const c=me(s);if(c!==s&&o.call(t,c)){const f=Lo(t);Er(`Reactive ${f} contains both the raw and reactive versions of the same object${f==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const ni=new WeakMap,Ms=new WeakMap,oi=new WeakMap,Fs=new WeakMap;function zs(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Us(t){return t.__v_skip||!Object.isExtensible(t)?0:zs(Lo(t))}function ii(t){return Pr(t)?t:si(t,!1,Os,As,ni)}function ai(t){return si(t,!0,xs,Ws,oi)}function si(t,o,s,c,f){if(!tn(t))return Ge.NODE_ENV!=="production"&&Er(`value cannot be made ${o?"readonly":"reactive"}: ${String(t)}`),t;if(t.__v_raw&&!(o&&t.__v_isReactive))return t;const v=f.get(t);if(v)return v;const R=Us(t);if(R===0)return t;const m=new Proxy(t,R===2?c:s);return f.set(t,m),m}function Pr(t){return!!(t&&t.__v_isReadonly)}function Jt(t){return!!(t&&t.__v_isShallow)}function Ls(t){return t?!!t.__v_raw:!1}function me(t){const o=t&&t.__v_raw;return o?me(o):t}const dt=t=>tn(t)?ii(t):t,Vn=t=>tn(t)?ai(t):t;function Tr(t){return t?t.__v_isRef===!0:!1}function zt(t){return js(t,!1)}function js(t,o){return Tr(t)?t:new Bs(t,o)}class Bs{constructor(o,s){this.dep=new Go,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?o:me(o),this._value=s?o:dt(o),this.__v_isShallow=s}get value(){return Ge.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track(),this._value}set value(o){const s=this._rawValue,c=this.__v_isShallow||Jt(o)||Pr(o);o=c?o:me(o),yr(o,s)&&(this._rawValue=o,this._value=c?o:dt(o),Ge.NODE_ENV!=="production"?this.dep.trigger({target:this,type:"set",key:"value",newValue:o,oldValue:s}):this.dep.trigger())}}const qs=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Hs=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,$s=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Vs(t,o){if(t==="__proto__"||t==="constructor"&&o&&typeof o=="object"&&"prototype"in o){Gs(t);return}return o}function Gs(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function ci(t,o={}){if(typeof t!="string")return t;const s=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return s.slice(1,-1);if(s.length<=9){const c=s.toLowerCase();if(c==="true")return!0;if(c==="false")return!1;if(c==="undefined")return;if(c==="null")return null;if(c==="nan")return Number.NaN;if(c==="infinity")return Number.POSITIVE_INFINITY;if(c==="-infinity")return Number.NEGATIVE_INFINITY}if(!$s.test(t)){if(o.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(qs.test(t)||Hs.test(t)){if(o.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Vs)}return JSON.parse(t)}catch(c){if(o.strict)throw c;return t}}function Js(){const t=new Set,o=f=>{t.delete(f)};return{on:f=>(t.add(f),{off:()=>o(f)}),off:o,trigger:(...f)=>Promise.all(Array.from(t).map(v=>v(...f)))}}async function Ks(t){try{return{data:await t,error:null}}catch(o){return{data:null,error:o||{message:"Unknown error"}}}}var Ys=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ui={exports:{}};(function(t,o){(function(s,c){t.exports=c()})(typeof self<"u"?self:Ys,function(){return function(s){var c={};function f(v){if(c[v])return c[v].exports;var R=c[v]={i:v,l:!1,exports:{}};return s[v].call(R.exports,R,R.exports,f),R.l=!0,R.exports}return f.m=s,f.c=c,f.d=function(v,R,m){f.o(v,R)||Object.defineProperty(v,R,{enumerable:!0,get:m})},f.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})},f.t=function(v,R){if(1&R&&(v=f(v)),8&R||4&R&&typeof v=="object"&&v&&v.__esModule)return v;var m=Object.create(null);if(f.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:v}),2&R&&typeof v!="string")for(var I in v)f.d(m,I,(function(C){return v[C]}).bind(null,I));return m},f.n=function(v){var R=v&&v.__esModule?function(){return v.default}:function(){return v};return f.d(R,"a",R),R},f.o=function(v,R){return{}.hasOwnProperty.call(v,R)},f.p="",f(f.s=0)}([function(s,c,f){f.r(c),f.d(c,"PopupOpenError",function(){return io}),f.d(c,"create",function(){return Jc}),f.d(c,"destroy",function(){return Kc}),f.d(c,"destroyComponents",function(){return Ea}),f.d(c,"destroyAll",function(){return ba}),f.d(c,"PROP_TYPE",function(){return be}),f.d(c,"PROP_SERIALIZATION",function(){return Sn}),f.d(c,"CONTEXT",function(){return We}),f.d(c,"EVENT",function(){return De});function v(e,r){return(v=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(e,r)}function R(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,v(e,r)}function m(){return(m=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function I(e){try{if(!e)return!1;if(typeof Promise<"u"&&e instanceof Promise)return!0;if(typeof window<"u"&&typeof window.Window=="function"&&e instanceof window.Window||typeof window<"u"&&typeof window.constructor=="function"&&e instanceof window.constructor)return!1;var r={}.toString;if(r){var n=r.call(e);if(n==="[object Window]"||n==="[object global]"||n==="[object DOMWindow]")return!1}if(typeof e.then=="function")return!0}catch{return!1}return!1}var C=[],b=[],_=0,F;function de(){if(!_&&F){var e=F;F=null,e.resolve()}}function ae(){_+=1}function Je(){_-=1,de()}var p=function(){function e(n){var i=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var a,u,d=!1,h=!1,l=!1;ae();try{n(function(g){l?i.resolve(g):(d=!0,a=g)},function(g){l?i.reject(g):(h=!0,u=g)})}catch(g){Je(),this.reject(g);return}Je(),l=!0,d?this.resolve(a):h&&this.reject(u)}}var r=e.prototype;return r.resolve=function(n){if(this.resolved||this.rejected)return this;if(I(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},r.reject=function(n){var i=this;if(this.resolved||this.rejected)return this;if(I(n))throw new Error("Can not reject promise with another promise");if(!n){var a=n&&typeof n.toString=="function"?n.toString():{}.toString.call(n);n=new Error("Expected reject to be called with Error, got "+a)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){i.errorHandled||function(u,d){if(C.indexOf(u)===-1){C.push(u),setTimeout(function(){throw u},1);for(var h=0;h<b.length;h++)b[h](u,d)}}(n,i)},1),this.dispatch(),this},r.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},r.dispatch=function(){var n=this.resolved,i=this.rejected,a=this.handlers;if(!this.dispatching&&(n||i)){this.dispatching=!0,ae();for(var u=function(E,T){return E.then(function(S){T.resolve(S)},function(S){T.reject(S)})},d=0;d<a.length;d++){var h=a[d],l=h.onSuccess,g=h.onError,P=h.promise,y=void 0;if(n)try{y=l?l(this.value):this.value}catch(E){P.reject(E);continue}else if(i){if(!g){P.reject(this.error);continue}try{y=g(this.error)}catch(E){P.reject(E);continue}}if(y instanceof e&&(y.resolved||y.rejected)){var w=y;w.resolved?P.resolve(w.value):P.reject(w.error),w.errorHandled=!0}else I(y)?y instanceof e&&(y.resolved||y.rejected)?y.resolved?P.resolve(y.value):P.reject(y.error):u(y,P):P.resolve(y)}a.length=0,this.dispatching=!1,Je()}},r.then=function(n,i){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.then expected a function for success handler");if(i&&typeof i!="function"&&!i.call)throw new Error("Promise.then expected a function for error handler");var a=new e;return this.handlers.push({promise:a,onSuccess:n,onError:i}),this.errorHandled=!0,this.dispatch(),a},r.catch=function(n){return this.then(void 0,n)},r.finally=function(n){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(i){return e.try(n).then(function(){return i})},function(i){return e.try(n).then(function(){throw i})})},r.timeout=function(n,i){var a=this;if(this.resolved||this.rejected)return this;var u=setTimeout(function(){a.resolved||a.rejected||a.reject(i||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(d){return clearTimeout(u),d})},r.toPromise=function(){if(typeof Promise>"u")throw new TypeError("Could not find Promise");return Promise.resolve(this)},r.lazy=function(){return this.errorHandled=!0,this},e.resolve=function(n){return n instanceof e?n:I(n)?new e(function(i,a){return n.then(i,a)}):new e().resolve(n)},e.reject=function(n){return new e().reject(n)},e.asyncReject=function(n){return new e().asyncReject(n)},e.all=function(n){var i=new e,a=n.length,u=[].slice();if(!a)return i.resolve(u),i;for(var d=function(g,P,y){return P.then(function(w){u[g]=w,(a-=1)==0&&i.resolve(u)},function(w){y.reject(w)})},h=0;h<n.length;h++){var l=n[h];if(l instanceof e){if(l.resolved){u[h]=l.value,a-=1;continue}}else if(!I(l)){u[h]=l,a-=1;continue}d(h,e.resolve(l),i)}return a===0&&i.resolve(u),i},e.hash=function(n){var i={},a=[],u=function(h){if(n.hasOwnProperty(h)){var l=n[h];I(l)?a.push(l.then(function(g){i[h]=g})):i[h]=l}};for(var d in n)u(d);return e.all(a).then(function(){return i})},e.map=function(n,i){return e.all(n.map(i))},e.onPossiblyUnhandledException=function(n){return function(i){return b.push(i),{cancel:function(){b.splice(b.indexOf(i),1)}}}(n)},e.try=function(n,i,a){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.try expected a function");var u;ae();try{u=n.apply(i,a||[])}catch(d){return Je(),e.reject(d)}return Je(),e.resolve(u)},e.delay=function(n){return new e(function(i){setTimeout(i,n)})},e.isPromise=function(n){return!!(n&&n instanceof e)||I(n)},e.flush=function(){return function(n){var i=F=F||new n;return de(),i}(e)},e}();function N(e){return{}.toString.call(e)==="[object RegExp]"}var q={IFRAME:"iframe",POPUP:"popup"},Y=`Call was rejected by callee.\r
`;function Ee(e){return e===void 0&&(e=window),e.location.protocol}function Oe(e){if(e===void 0&&(e=window),e.mockDomain){var r=e.mockDomain.split("//")[0];if(r)return r}return Ee(e)}function Fe(e){return e===void 0&&(e=window),Oe(e)==="about:"}function ve(e){if(e===void 0&&(e=window),e)try{if(e.parent&&e.parent!==e)return e.parent}catch{}}function Ae(e){if(e===void 0&&(e=window),e&&!ve(e))try{return e.opener}catch{}}function Z(e){try{return!0}catch{}return!1}function Pe(e){e===void 0&&(e=window);var r=e.location;if(!r)throw new Error("Can not read window location");var n=Ee(e);if(!n)throw new Error("Can not read window protocol");if(n==="file:")return"file://";if(n==="about:"){var i=ve(e);return i&&Z()?Pe(i):"about://"}var a=r.host;if(!a)throw new Error("Can not read window host");return n+"//"+a}function ie(e){e===void 0&&(e=window);var r=Pe(e);return r&&e.mockDomain&&e.mockDomain.indexOf("mock:")===0?e.mockDomain:r}function U(e){if(!function(r){try{if(r===window)return!0}catch{}try{var n=Object.getOwnPropertyDescriptor(r,"location");if(n&&n.enumerable===!1)return!1}catch{}try{if(Fe(r)&&Z())return!0}catch{}try{if(function(i){return i===void 0&&(i=window),Oe(i)==="mock:"}(r)&&Z())return!0}catch{}try{if(Pe(r)===Pe(window))return!0}catch{}return!1}(e))return!1;try{if(e===window||Fe(e)&&Z()||ie(window)===ie(e))return!0}catch{}return!1}function z(e){if(!U(e))throw new Error("Expected window to be same domain");return e}function ue(e,r){if(!e||!r)return!1;var n=ve(r);return n?n===e:function(i){var a=[];try{for(;i.parent!==i;)a.push(i.parent),i=i.parent}catch{}return a}(r).indexOf(e)!==-1}function Te(e){var r=[],n;try{n=e.frames}catch{n=e}var i;try{i=n.length}catch{}if(i===0)return r;if(i){for(var a=0;a<i;a++){var u=void 0;try{u=n[a]}catch{continue}r.push(u)}return r}for(var d=0;d<100;d++){var h=void 0;try{h=n[d]}catch{return r}if(!h)return r;r.push(h)}return r}function ot(e){for(var r=[],n=0,i=Te(e);n<i.length;n++){var a=i[n];r.push(a);for(var u=0,d=ot(a);u<d.length;u++)r.push(d[u])}return r}function xe(e){e===void 0&&(e=window);try{if(e.top)return e.top}catch{}if(ve(e)===e)return e;try{if(ue(window,e)&&window.top)return window.top}catch{}try{if(ue(e,window)&&window.top)return window.top}catch{}for(var r=0,n=ot(e);r<n.length;r++){var i=n[r];try{if(i.top)return i.top}catch{}if(ve(i)===i)return i}}function Ke(e){var r=xe(e);if(!r)throw new Error("Can not determine top window");var n=[].concat(ot(r),[r]);return n.indexOf(e)===-1&&(n=[].concat(n,[e],ot(e))),n}var at=[],_t=[];function ze(e,r){r===void 0&&(r=!0);try{if(e===window)return!1}catch{return!0}try{if(!e)return!0}catch{return!0}try{if(e.closed)return!0}catch(a){return!a||a.message!==Y}if(r&&U(e))try{if(e.mockclosed)return!0}catch{}try{if(!e.parent||!e.top)return!0}catch{}var n=function(a,u){for(var d=0;d<a.length;d++)try{if(a[d]===u)return d}catch{}return-1}(at,e);if(n!==-1){var i=_t[n];if(i&&function(a){if(!a.contentWindow||!a.parentNode)return!0;var u=a.ownerDocument;if(u&&u.documentElement&&!u.documentElement.contains(a)){for(var d=a;d.parentNode&&d.parentNode!==d;)d=d.parentNode;if(!d.host||!u.documentElement.contains(d.host))return!0}return!1}(i))return!0}return!1}function Jn(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent}function Kt(e,r){for(var n=Te(e),i=0;i<n.length;i++){var a=n[i];try{if(U(a)&&a.name===r&&n.indexOf(a)!==-1)return a}catch{}}try{if(n.indexOf(e.frames[r])!==-1)return e.frames[r]}catch{}try{if(n.indexOf(e[r])!==-1)return e[r]}catch{}}function dn(e,r){return e===Ae(r)}function Yt(e){return e===void 0&&(e=window),Ae(e=e||window)||ve(e)||void 0}function zr(e,r){for(var n=0;n<e.length;n++)for(var i=e[n],a=0;a<r.length;a++)if(i===r[a])return!0;return!1}function Ur(e){e===void 0&&(e=window);for(var r=0,n=e;n;)(n=ve(n))&&(r+=1);return r}function sr(e,r){var n=xe(e)||e,i=xe(r)||r;try{if(n&&i)return n===i}catch{}var a=Ke(e),u=Ke(r);if(zr(a,u))return!0;var d=Ae(n),h=Ae(i);return d&&zr(Ke(d),u)||h&&zr(Ke(h),a),!1}function wt(e,r){if(typeof e=="string"){if(typeof r=="string")return e==="*"||r===e;if(N(r)||Array.isArray(r))return!1}return N(e)?N(r)?e.toString()===r.toString():!Array.isArray(r)&&!!r.match(e):!!Array.isArray(e)&&(Array.isArray(r)?JSON.stringify(e)===JSON.stringify(r):!N(r)&&e.some(function(n){return wt(n,r)}))}function Lt(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):ie()}function mi(e,r,n,i){n===void 0&&(n=1e3),i===void 0&&(i=1/0);var a;return function u(){if(ze(e))return a&&clearTimeout(a),r();i<=0?clearTimeout(a):(i-=n,a=setTimeout(u,n))}(),{cancel:function(){a&&clearTimeout(a)}}}function cr(e){try{if(e===window)return!0}catch(r){if(r&&r.message===Y)return!0}try{if({}.toString.call(e)==="[object Window]")return!0}catch(r){if(r&&r.message===Y)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(r){if(r&&r.message===Y)return!0}try{if(e&&e.self===e)return!0}catch(r){if(r&&r.message===Y)return!0}try{if(e&&e.parent===e)return!0}catch(r){if(r&&r.message===Y)return!0}try{if(e&&e.top===e)return!0}catch(r){if(r&&r.message===Y)return!0}try{if(e&&e.__cross_domain_utils_window_check__==="__unlikely_value__")return!1}catch{return!0}try{if("postMessage"in e&&"self"in e&&"location"in e)return!0}catch{}return!1}function Kn(e){if(r=Lt(e),r.indexOf("mock:")!==0)return e;var r;throw new Error("Mock urls not supported out of test mode")}function gi(e){if(U(e))return z(e).frameElement;for(var r=0,n=document.querySelectorAll("iframe");r<n.length;r++){var i=n[r];if(i&&i.contentWindow&&i.contentWindow===e)return i}}function yi(e){if(function(n){return n===void 0&&(n=window),!!ve(n)}(e)){var r=gi(e);if(r&&r.parentElement){r.parentElement.removeChild(r);return}}try{e.close()}catch{}}function fn(e,r){for(var n=0;n<e.length;n++)try{if(e[n]===r)return n}catch{}return-1}var ln=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if(typeof WeakMap>"u"||Object.freeze===void 0)return!1;try{var n=new WeakMap,i={};return Object.freeze(i),n.set(i,"__testvalue__"),n.get(i)==="__testvalue__"}catch{return!1}}())try{this.weakmap=new WeakMap}catch{}this.keys=[],this.values=[]}var r=e.prototype;return r._cleanupClosedWindows=function(){for(var n=this.weakmap,i=this.keys,a=0;a<i.length;a++){var u=i[a];if(cr(u)&&ze(u)){if(n)try{n.delete(u)}catch{}i.splice(a,1),this.values.splice(a,1),a-=1}}},r.isSafeToReadWrite=function(n){return!cr(n)},r.set=function(n,i){if(!n)throw new Error("WeakMap expected key");var a=this.weakmap;if(a)try{a.set(n,i)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var u=this.name,d=n[u];d&&d[0]===n?d[1]=i:Object.defineProperty(n,u,{value:[n,i],writable:!0});return}catch{}this._cleanupClosedWindows();var h=this.keys,l=this.values,g=fn(h,n);g===-1?(h.push(n),l.push(i)):l[g]=i},r.get=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{if(i.has(n))return i.get(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return a&&a[0]===n?a[1]:void 0}catch{}this._cleanupClosedWindows();var u=fn(this.keys,n);if(u!==-1)return this.values[u]},r.delete=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{i.delete(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];a&&a[0]===n&&(a[0]=a[1]=void 0)}catch{}this._cleanupClosedWindows();var u=this.keys,d=fn(u,n);d!==-1&&(u.splice(d,1),this.values.splice(d,1))},r.has=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{if(i.has(n))return!0}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return!(!a||a[0]!==n)}catch{}return this._cleanupClosedWindows(),fn(this.keys,n)!==-1},r.getOrSet=function(n,i){if(this.has(n))return this.get(n);var a=i();return this.set(n,a),a},e}();function Ei(e){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function Ec(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function bi(e,r,n){return(bi=Ec()?Reflect.construct:function(i,a,u){var d=[null];d.push.apply(d,a);var h=new(Function.bind.apply(i,d));return u&&v(h,u.prototype),h}).apply(null,arguments)}function Pi(e){var r=typeof Map=="function"?new Map:void 0;return(Pi=function(n){if(n===null||(i=n,Function.toString.call(i).indexOf("[native code]")===-1))return n;var i;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(n))return r.get(n);r.set(n,a)}function a(){return bi(n,arguments,Ei(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),v(a,n)})(e)}function Yn(e){var r=!1;try{(e instanceof window.Element||e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object")&&(r=!0)}catch{}return r}function Zn(e){return e.name||e.__name__||e.displayName||"anonymous"}function Xn(e,r){try{delete e.name,e.name=r}catch{}return e.__name__=e.displayName=r,e}function Qn(e){if(typeof btoa=="function")return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(r,n){return String.fromCharCode(parseInt(n,16))})).replace(/[=]/g,"");if(typeof Buffer<"u")return Buffer.from(e,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}function st(){var e="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+Qn(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var hn;function kn(e){try{return JSON.stringify([].slice.call(e),function(r,n){return typeof n=="function"?"memoize["+function(i){if(hn=hn||new ln,i==null||typeof i!="object"&&typeof i!="function")throw new Error("Invalid object");var a=hn.get(i);return a||(a=typeof i+":"+st(),hn.set(i,a)),a}(n)+"]":Yn(n)?{}:n})}catch{throw new Error("Arguments not serializable -- can not be used to memoize")}}function bc(){return{}}var Lr=0,Ti=0;function Zt(e,r){r===void 0&&(r={});var n=r.thisNamespace,i=n!==void 0&&n,a=r.time,u,d,h=Lr;Lr+=1;var l=function(){for(var g=arguments.length,P=new Array(g),y=0;y<g;y++)P[y]=arguments[y];h<Ti&&(u=null,d=null,h=Lr,Lr+=1);var w;w=i?(d=d||new ln).getOrSet(this,bc):u=u||{};var E;try{E=kn(P)}catch{return e.apply(this,arguments)}var T=w[E];if(T&&a&&Date.now()-T.time<a&&(delete w[E],T=null),T)return T.value;var S=Date.now(),O=e.apply(this,arguments);return w[E]={time:S,value:O},O};return l.reset=function(){u=null,d=null},Xn(l,(r.name||Zn(e))+"::memoized")}Zt.clear=function(){Ti=Lr};function Pc(e){var r={};function n(){for(var i=arguments,a=this,u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];var l=kn(d);return r.hasOwnProperty(l)||(r[l]=p.try(function(){return e.apply(a,i)}).finally(function(){delete r[l]})),r[l]}return n.reset=function(){r={}},Xn(n,Zn(e)+"::promiseMemoized")}function Ie(){}function pn(e){var r=!1;return Xn(function(){if(!r)return r=!0,e.apply(this,arguments)},Zn(e)+"::once")}function Sr(e,r){if(r===void 0&&(r=1),r>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+{}.toString.call(e)+">";if(typeof e=="string")return e;if(e instanceof Error){var n=e&&e.stack,i=e&&e.message;if(n&&i)return n.indexOf(i)!==-1?n:i+`
`+n;if(n)return n;if(i)return i}return e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}catch(a){return"Error while stringifying error: "+Sr(a,r+1)}}function vn(e){return typeof e=="string"?e:e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}function Or(e,r){if(!r)return e;if(Object.assign)return Object.assign(e,r);for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}Zt(function(e){if(Object.values)return Object.values(e);var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(e[n]);return r});function Tc(e){return e}function jr(e,r){var n;return function i(){n=setTimeout(function(){e(),i()},r)}(),{cancel:function(){clearTimeout(n)}}}function eo(e){return e.replace(/-([a-z])/g,function(r){return r[1].toUpperCase()})}function Ri(e,r,n){if(Array.isArray(e)){if(typeof r!="number")throw new TypeError("Array key must be number")}else if(typeof e=="object"&&e!==null&&typeof r!="string")throw new TypeError("Object key must be string");Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){delete e[r];var i=n();return e[r]=i,i},set:function(i){delete e[r],e[r]=i}})}function to(e){return[].slice.call(e)}function Si(e){return typeof(r=e)=="object"&&r!==null&&{}.toString.call(e)==="[object Object]";var r}function ro(e){if(!Si(e))return!1;var r=e.constructor;if(typeof r!="function")return!1;var n=r.prototype;return!!Si(n)&&!!n.hasOwnProperty("isPrototypeOf")}function wn(e,r,n){if(n===void 0&&(n=""),Array.isArray(e)){for(var i=e.length,a=[],u=function(P){Ri(a,P,function(){var y=n?n+"."+P:""+P,w=r(e[P],P,y);return(ro(w)||Array.isArray(w))&&(w=wn(w,r,y)),w})},d=0;d<i;d++)u(d);return a}if(ro(e)){var h={},l=function(P){if(!e.hasOwnProperty(P))return 1;Ri(h,P,function(){var y=n?n+"."+P:""+P,w=r(e[P],P,y);return(ro(w)||Array.isArray(w))&&(w=wn(w,r,y)),w})};for(var g in e)l(g);return h}throw new Error("Pass an object or array")}function Xt(e){return e!=null}function no(e){return{}.toString.call(e)==="[object RegExp]"}function Br(e,r,n){if(e.hasOwnProperty(r))return e[r];var i=n();return e[r]=i,i}function mn(e){var r=[],n=!1,i,a={set:function(u,d){return n||(e[u]=d,a.register(function(){delete e[u]})),d},register:function(u){var d=pn(function(){return u(i)});return n?u(i):r.push(d),{cancel:function(){var h=r.indexOf(d);h!==-1&&r.splice(h,1)}}},all:function(u){i=u;var d=[];for(n=!0;r.length;){var h=r.shift();d.push(h())}return p.all(d).then(Ie)}};return a}function gn(e,r){if(r==null)throw new Error("Expected "+e+" to be present");return r}var Rc=function(e){R(r,e);function r(n){var i;return(i=e.call(this,n)||this).name=i.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(i),i.constructor):i.stack=new Error(n).stack,i}return r}(Pi(Error));function Oi(){var e=document.body;if(!e)throw new Error("Body element not found");return e}function yn(){return!!document.body&&document.readyState==="complete"}function xi(){return!!document.body&&document.readyState==="interactive"}function Ii(e){return encodeURIComponent(e)}Zt(function(){return new p(function(e){if(yn()||xi())return e();var r=setInterval(function(){if(yn()||xi())return clearInterval(r),e()},10)})});function Di(e){return function(r,n,i){i===void 0&&(i=[]);var a=r.__inline_memoize_cache__=r.__inline_memoize_cache__||{},u=kn(i);return a.hasOwnProperty(u)?a[u]:a[u]=(function(){var d={};if(!e||e.indexOf("=")===-1)return d;for(var h=0,l=e.split("&");h<l.length;h++){var g=l[h];(g=g.split("="))[0]&&g[1]&&(d[decodeURIComponent(g[0])]=decodeURIComponent(g[1]))}return d}).apply(void 0,i)}(Di,0,[e])}function Ci(e,r){return r===void 0&&(r={}),r&&Object.keys(r).length?function(n){return n===void 0&&(n={}),Object.keys(n).filter(function(i){return typeof n[i]=="string"||typeof n[i]=="boolean"}).map(function(i){var a=n[i];if(typeof a!="string"&&typeof a!="boolean")throw new TypeError("Invalid type for query");return Ii(i)+"="+Ii(a.toString())}).join("&")}(m({},Di(e),r)):e}function Sc(e,r){e.appendChild(r)}function oo(e,r){return r===void 0&&(r=document),Yn(e)?e:typeof e=="string"?r.querySelector(e):void 0}function _i(e){return new p(function(r,n){var i=vn(e),a=oo(e);if(a)return r(a);if(yn())return n(new Error("Document is ready and element "+i+" does not exist"));var u=setInterval(function(){if(a=oo(e))r(a),clearInterval(u);else if(yn())return clearInterval(u),n(new Error("Document is ready and element "+i+" does not exist"))},10)})}var io=function(e){R(r,e);function r(){return e.apply(this,arguments)||this}return r}(Rc),En;function Ni(e){if((En=En||new ln).has(e)){var r=En.get(e);if(r)return r}var n=new p(function(i,a){e.addEventListener("load",function(){(function(u){if(function(){for(var d=0;d<at.length;d++){var h=!1;try{h=at[d].closed}catch{}h&&(_t.splice(d,1),at.splice(d,1))}}(),u&&u.contentWindow)try{at.push(u.contentWindow),_t.push(u)}catch{}})(e),i(e)}),e.addEventListener("error",function(u){e.contentWindow?i(e):a(u)})});return En.set(e,n),n}function ao(e){return Ni(e).then(function(r){if(!r.contentWindow)throw new Error("Could not find window in iframe");return r.contentWindow})}function Ai(e,r){e===void 0&&(e={});var n=e.style||{},i=function(u,d,h){u===void 0&&(u="div"),d===void 0&&(d={}),u=u.toLowerCase();var l=document.createElement(u);if(d.style&&Or(l.style,d.style),d.class&&(l.className=d.class.join(" ")),d.id&&l.setAttribute("id",d.id),d.attributes)for(var g=0,P=Object.keys(d.attributes);g<P.length;g++){var y=P[g];l.setAttribute(y,d.attributes[y])}if(d.styleSheet&&function(w,E,T){T===void 0&&(T=window.document),w.styleSheet?w.styleSheet.cssText=E:w.appendChild(T.createTextNode(E))}(l,d.styleSheet),d.html){if(u==="iframe")throw new Error("Iframe html can not be written unless container provided and iframe in DOM");l.innerHTML=d.html}return l}("iframe",{attributes:m({allowTransparency:"true"},e.attributes||{}),style:m({backgroundColor:"transparent",border:"none"},n),html:e.html,class:e.class}),a=window.navigator.userAgent.match(/MSIE|Edge/i);return i.hasAttribute("id")||i.setAttribute("id",st()),Ni(i),(e.url||a)&&i.setAttribute("src",e.url||"about:blank"),i}function Wi(e,r,n){return e.addEventListener(r,n),{cancel:function(){e.removeEventListener(r,n)}}}function Oc(e){e.style.setProperty("display","")}function Mi(e){e.style.setProperty("display","none","important")}function qr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function xr(e){return!(e&&e.parentNode&&e.ownerDocument&&e.ownerDocument.documentElement&&e.ownerDocument.documentElement.contains(e))}function Fi(e,r,n){var i=n===void 0?{}:n,a=i.width,u=a===void 0||a,d=i.height,h=d===void 0||d,l=i.interval,g=l===void 0?100:l,P=i.win,y=P===void 0?window:P,w=e.offsetWidth,E=e.offsetHeight,T=!1;r({width:w,height:E});var S=function(){if(!T&&function(W){return!!(W.offsetWidth||W.offsetHeight||W.getClientRects().length)}(e)){var L=e.offsetWidth,J=e.offsetHeight;(u&&L!==w||h&&J!==E)&&r({width:L,height:J}),w=L,E=J}},O,A;return y.addEventListener("resize",S),y.ResizeObserver!==void 0?((O=new y.ResizeObserver(S)).observe(e),A=jr(S,10*g)):y.MutationObserver!==void 0?((O=new y.MutationObserver(S)).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),A=jr(S,10*g)):A=jr(S,g),{cancel:function(){T=!0,O.disconnect(),window.removeEventListener("resize",S),A.cancel()}}}function so(e){for(;e.parentNode;)e=e.parentNode;return e.toString()==="[object ShadowRoot]"}var bn=typeof document<"u"?document.currentScript:null,xc=Zt(function(){if(bn||(bn=function(){try{var e=function(){try{throw new Error("_")}catch(d){return d.stack||""}}(),r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(e),n=r&&r[1];if(!n)return;for(var i=0,a=[].slice.call(document.getElementsByTagName("script")).reverse();i<a.length;i++){var u=a[i];if(u.src&&u.src===n)return u}}catch{}}()))return bn;throw new Error("Can not determine current script")}),Ic=st();Zt(function(){var e;try{e=xc()}catch{return Ic}var r=e.getAttribute("data-uid");if(r&&typeof r=="string"||(r=e.getAttribute("data-uid-auto"))&&typeof r=="string")return r;if(e.src){var n=function(i){for(var a="",u=0;u<i.length;u++){var d=i[u].charCodeAt(0)*u;i[u+1]&&(d+=i[u+1].charCodeAt(0)*(u-1)),a+=String.fromCharCode(97+Math.abs(d)%26)}return a}(JSON.stringify({src:e.src,dataset:e.dataset}));r="uid_"+n.slice(n.length-30)}else r=st();return e.setAttribute("data-uid-auto",r),r});function zi(e){return typeof e=="string"&&/^[0-9]+%$/.test(e)}function co(e){if(typeof e=="number")return e;var r=e.match(/^([0-9]+)(px|%)$/);if(!r)throw new Error("Could not match css value from "+e);return parseInt(r[1],10)}function Ui(e){return co(e)+"px"}function Li(e){return typeof e=="number"?Ui(e):zi(e)?e:Ui(e)}function ji(e,r){if(typeof e=="number")return e;if(zi(e))return parseInt(r*co(e)/100,10);if(typeof(n=e)=="string"&&/^[0-9]+px$/.test(n))return co(e);var n;throw new Error("Can not normalize dimension: "+e)}function Nt(e){e===void 0&&(e=window);var r="__post_robot_11_0_0__";return e!==window?e[r]:e[r]=e[r]||{}}var Bi=function(){return{}};function ge(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Bi),Br(Nt(),e,function(){var n=r();return{has:function(i){return n.hasOwnProperty(i)},get:function(i,a){return n.hasOwnProperty(i)?n[i]:a},set:function(i,a){return n[i]=a,a},del:function(i){delete n[i]},getOrSet:function(i,a){return Br(n,i,a)},reset:function(){n=r()},keys:function(){return Object.keys(n)}}})}var Dc=function(){};function Pn(){var e=Nt();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new Dc,e.WINDOW_WILDCARD}function it(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Bi),ge("windowStore").getOrSet(e,function(){var n=new ln,i=function(a){return n.getOrSet(a,r)};return{has:function(a){return i(a).hasOwnProperty(e)},get:function(a,u){var d=i(a);return d.hasOwnProperty(e)?d[e]:u},set:function(a,u){return i(a)[e]=u,u},del:function(a){delete i(a)[e]},getOrSet:function(a,u){return Br(i(a),e,u)}}})}function qi(){return ge("instance").getOrSet("instanceID",st)}function Hi(e,r){var n=r.domain,i=it("helloPromises"),a=i.get(e);a&&a.resolve({domain:n});var u=p.resolve({domain:n});return i.set(e,u),u}function uo(e,r){return(0,r.send)(e,"postrobot_hello",{instanceID:qi()},{domain:"*",timeout:-1}).then(function(n){var i=n.origin,a=n.data.instanceID;return Hi(e,{domain:i}),{win:e,domain:i,instanceID:a}})}function $i(e,r){var n=r.send;return it("windowInstanceIDPromises").getOrSet(e,function(){return uo(e,{send:n}).then(function(i){return i.instanceID})})}function Vi(e,r,n){r===void 0&&(r=5e3),n===void 0&&(n="Window");var i=function(a){return it("helloPromises").getOrSet(a,function(){return new p})}(e);return r!==-1&&(i=i.timeout(r,new Error(n+" did not load after "+r+"ms"))),i}function Gi(e){it("knownWindows").set(e,!0)}function fo(e){return typeof e=="object"&&e!==null&&typeof e.__type__=="string"}function Ji(e){return e===void 0?"undefined":e===null?"null":Array.isArray(e)?"array":typeof e=="function"?"function":typeof e=="object"?e instanceof Error?"error":typeof e.then=="function"?"promise":{}.toString.call(e)==="[object RegExp]"?"regex":{}.toString.call(e)==="[object Date]"?"date":"object":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":void 0}function ur(e,r){return{__type__:e,__val__:r}}var mt,Cc=((mt={}).function=function(){},mt.error=function(e){return ur("error",{message:e.message,stack:e.stack,code:e.code,data:e.data})},mt.promise=function(){},mt.regex=function(e){return ur("regex",e.source)},mt.date=function(e){return ur("date",e.toJSON())},mt.array=function(e){return e},mt.object=function(e){return e},mt.string=function(e){return e},mt.number=function(e){return e},mt.boolean=function(e){return e},mt.null=function(e){return e},mt[void 0]=function(e){return ur("undefined",e)},mt),_c={},gt,Nc=((gt={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},gt.error=function(e){var r=e.stack,n=e.code,i=e.data,a=new Error(e.message);return a.code=n,i&&(a.data=i),a.stack=r+`

`+a.stack,a},gt.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},gt.regex=function(e){return new RegExp(e)},gt.date=function(e){return new Date(e)},gt.array=function(e){return e},gt.object=function(e){return e},gt.string=function(e){return e},gt.number=function(e){return e},gt.boolean=function(e){return e},gt.null=function(e){return e},gt[void 0]=function(){},gt),Ac={};function lo(){return!!Jn(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function Ki(e){return!sr(window,e)}function Yi(e,r){if(e){if(ie()!==Lt(e))return!0}else if(r&&!U(r))return!0;return!1}function Zi(e){var r=e.win,n=e.domain;return!(!lo()||n&&!Yi(n,r)||r&&!Ki(r))}function ho(e){return"__postrobot_bridge___"+(e=e||Lt(e)).replace(/[^a-zA-Z0-9]+/g,"_")}function Xi(){return!!(window.name&&window.name===ho(ie()))}var Wc=new p(function(e){if(window.document&&window.document.body)return e(window.document.body);var r=setInterval(function(){if(window.document&&window.document.body)return clearInterval(r),e(window.document.body)},10)});function Qi(e){it("remoteWindowPromises").getOrSet(e,function(){return new p})}function po(e){var r=it("remoteWindowPromises").get(e);if(!r)throw new Error("Remote window promise not found");return r}function ki(e,r,n){po(e).resolve(function(i,a,u){if(i!==e)throw new Error("Remote window does not match window");if(!wt(a,r))throw new Error("Remote domain "+a+" does not match domain "+r);n.fireAndForget(u)})}function vo(e,r){po(e).reject(r).catch(Ie)}function Tn(e){for(var r=e.win,n=e.name,i=e.domain,a=ge("popupWindowsByName"),u=it("popupWindowsByWin"),d=0,h=a.keys();d<h.length;d++){var l=h[d],g=a.get(l);g&&!ze(g.win)||a.del(l)}if(ze(r))return{win:r,name:n,domain:i};var P=u.getOrSet(r,function(){return n?a.getOrSet(n,function(){return{win:r,name:n}}):{win:r}});if(P.win&&P.win!==r)throw new Error("Different window already linked for window: "+(n||"undefined"));return n&&(P.name=n,a.set(n,P)),i&&(P.domain=i,Qi(r)),u.set(r,P),P}function ea(e){var r=e.on,n=e.send,i=e.receiveMessage;a=window.open,window.open=function(u,d,h,l){var g=a.call(this,Kn(u),d,h,l);return g&&(Tn({win:g,name:d,domain:u?Lt(u):null}),g)};var a;(function(u){var d=u.on,h=u.send,l=u.receiveMessage,g=ge("popupWindowsByName");d("postrobot_open_tunnel",function(P){var y=P.source,w=P.origin,E=P.data,T=ge("bridges").get(w);if(!T)throw new Error("Can not find bridge promise for domain "+w);return T.then(function(S){if(y!==S)throw new Error("Message source does not matched registered bridge for domain "+w);if(!E.name)throw new Error("Register window expected to be passed window name");if(!E.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!g.has(E.name))throw new Error("Window with name "+E.name+" does not exist, or was not opened by this window");var O=function(){return g.get(E.name)};if(!O().domain)throw new Error("We do not have a registered domain for window "+E.name);if(O().domain!==w)throw new Error("Message origin "+w+" does not matched registered window origin "+(O().domain||"unknown"));return ki(O().win,w,E.sendMessage),{sendMessage:function(A){if(window&&!window.closed&&O()){var L=O().domain;if(L)try{l({data:A,origin:L,source:O().win},{on:d,send:h})}catch(J){p.reject(J)}}}}})})})({on:r,send:n,receiveMessage:i}),function(u){var d=u.send;Nt(window).openTunnelToParent=function(h){var l=h.name,g=h.source,P=h.canary,y=h.sendMessage,w=ge("tunnelWindows"),E=ve(window);if(!E)throw new Error("No parent window found to open tunnel to");var T=function(S){var O=S.name,A=S.source,L=S.canary,J=S.sendMessage;(function(){for(var V=ge("tunnelWindows"),j=0,te=V.keys();j<te.length;j++){var $=te[j];ze(V[$].source)&&V.del($)}})();var W=st();return ge("tunnelWindows").set(W,{name:O,source:A,canary:L,sendMessage:J}),W}({name:l,source:g,canary:P,sendMessage:y});return d(E,"postrobot_open_tunnel",{name:l,sendMessage:function(){var S=w.get(T);if(S&&S.source&&!ze(S.source)){try{S.canary()}catch{return}S.sendMessage.apply(this,arguments)}}},{domain:"*"})}}({send:n}),function(u){var d=u.on,h=u.send,l=u.receiveMessage;p.try(function(){var g=Ae(window);if(g&&Zi({win:g})){return Qi(g),(P=g,it("remoteBridgeAwaiters").getOrSet(P,function(){return p.try(function(){var y=Kt(P,ho(ie()));if(y)return U(y)&&Nt(z(y))?y:new p(function(w){var E,T;E=setInterval(function(){if(y&&U(y)&&Nt(z(y)))return clearInterval(E),clearTimeout(T),w(y)},100),T=setTimeout(function(){return clearInterval(E),w()},2e3)})})})).then(function(y){return y?window.name?Nt(z(y)).openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(w){try{}catch{return}if(window&&!window.closed)try{l({data:w,origin:this.origin,source:this.source},{on:d,send:h})}catch(E){p.reject(E)}}}).then(function(w){var E=w.source,T=w.origin,S=w.data;if(E!==g)throw new Error("Source does not match opener");ki(E,T,S.sendMessage)}).catch(function(w){throw vo(g,w),w}):vo(g,new Error("Can not register with opener: window does not have a name")):vo(g,new Error("Can not register with opener: no bridge found in opener"))});var P}})}({on:r,send:n,receiveMessage:i})}function wo(){for(var e=ge("idToProxyWindow"),r=0,n=e.keys();r<n.length;r++){var i=n[r];e.get(i).shouldClean()&&e.del(i)}}function ta(e,r){var n=r.send,i=r.id,a=i===void 0?st():i,u=e.then(function(l){if(U(l))return z(l).name}),d=e.then(function(l){if(ze(l))throw new Error("Window is closed, can not determine type");return Ae(l)?q.POPUP:q.IFRAME});u.catch(Ie),d.catch(Ie);var h=function(){return e.then(function(l){if(!ze(l))return U(l)?z(l).name:u})};return{id:a,getType:function(){return d},getInstanceID:Pc(function(){return e.then(function(l){return $i(l,{send:n})})}),close:function(){return e.then(yi)},getName:h,focus:function(){return e.then(function(l){l.focus()})},isClosed:function(){return e.then(function(l){return ze(l)})},setLocation:function(l,g){return g===void 0&&(g={}),e.then(function(P){var y=window.location.protocol+"//"+window.location.host,w=g.method,E=w===void 0?"get":w,T=g.body;if(l.indexOf("/")===0)l=""+y+l;else if(!l.match(/^https?:\/\//)&&l.indexOf(y)!==0)throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(l));if(E==="post")return h().then(function(S){if(!S)throw new Error("Can not post to window without target name");(function(O){var A=O.url,L=O.target,J=O.body,W=O.method,V=W===void 0?"post":W,j=document.createElement("form");if(j.setAttribute("target",L),j.setAttribute("method",V),j.setAttribute("action",A),j.style.display="none",J)for(var te=0,$=Object.keys(J);te<$.length;te++){var he,se=$[te],X=document.createElement("input");X.setAttribute("name",se),X.setAttribute("value",(he=J[se])==null?void 0:he.toString()),j.appendChild(X)}Oi().appendChild(j),j.submit(),Oi().removeChild(j)})({url:l,target:S,method:E,body:T})});if(E!=="get")throw new Error("Unsupported method: "+E);if(U(P))try{if(P.location&&typeof P.location.replace=="function"){P.location.replace(l);return}}catch{}P.location=l})},setName:function(l){return e.then(function(g){Tn({win:g,name:l});var P=U(g),y=gi(g);if(!P)throw new Error("Can not set name for cross-domain window: "+l);z(g).name=l,y&&y.setAttribute("name",l),u=p.resolve(l)})}}}var yt=function(){function e(n){var i=n.send,a=n.win,u=n.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new p,this.serializedWindow=u||ta(this.actualWindowPromise,{send:i}),ge("idToProxyWindow").set(this.getID(),this),a&&this.setWindow(a,{send:i})}var r=e.prototype;return r.getID=function(){return this.serializedWindow.id},r.getType=function(){return this.serializedWindow.getType()},r.isPopup=function(){return this.getType().then(function(n){return n===q.POPUP})},r.setLocation=function(n,i){var a=this;return this.serializedWindow.setLocation(n,i).then(function(){return a})},r.getName=function(){return this.serializedWindow.getName()},r.setName=function(n){var i=this;return this.serializedWindow.setName(n).then(function(){return i})},r.close=function(){var n=this;return this.serializedWindow.close().then(function(){return n})},r.focus=function(){var n=this,i=this.isPopup(),a=this.getName(),u=p.hash({isPopup:i,name:a}).then(function(h){var l=h.name;h.isPopup&&l&&window.open("",l,"noopener")}),d=this.serializedWindow.focus();return p.all([u,d]).then(function(){return n})},r.isClosed=function(){return this.serializedWindow.isClosed()},r.getWindow=function(){return this.actualWindow},r.setWindow=function(n,i){var a=i.send;this.actualWindow=n,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=ta(this.actualWindowPromise,{send:a,id:this.getID()}),it("winToProxyWindow").set(n,this)},r.awaitWindow=function(){return this.actualWindowPromise},r.matchWindow=function(n,i){var a=this,u=i.send;return p.try(function(){return a.actualWindow?n===a.actualWindow:p.hash({proxyInstanceID:a.getInstanceID(),knownWindowInstanceID:$i(n,{send:u})}).then(function(d){var h=d.proxyInstanceID===d.knownWindowInstanceID;return h&&a.setWindow(n,{send:u}),h})})},r.unwrap=function(){return this.actualWindow||this},r.getInstanceID=function(){return this.serializedWindow.getInstanceID()},r.shouldClean=function(){return!!(this.actualWindow&&ze(this.actualWindow))},r.serialize=function(){return this.serializedWindow},e.unwrap=function(n){return e.isProxyWindow(n)?n.unwrap():n},e.serialize=function(n,i){var a=i.send;return wo(),e.toProxyWindow(n,{send:a}).serialize()},e.deserialize=function(n,i){var a=i.send;return wo(),ge("idToProxyWindow").get(n.id)||new e({serializedWindow:n,send:a})},e.isProxyWindow=function(n){return!!(n&&!cr(n)&&n.isProxyWindow)},e.toProxyWindow=function(n,i){var a=i.send;if(wo(),e.isProxyWindow(n))return n;var u=n;return it("winToProxyWindow").get(u)||new e({win:u,send:a})},e}();function mo(e,r,n,i,a){var u=it("methodStore"),d=ge("proxyWindowMethods");yt.isProxyWindow(i)?d.set(e,{val:r,name:n,domain:a,source:i}):(d.del(e),u.getOrSet(i,function(){return{}})[e]={domain:a,name:n,val:r,source:i})}function ra(e,r){var n=it("methodStore"),i=ge("proxyWindowMethods");return n.getOrSet(e,function(){return{}})[r]||i.get(r)}function na(e,r,n,i,a){d=(u={on:a.on,send:a.send}).on,h=u.send,ge("builtinListeners").getOrSet("functionCalls",function(){return d("postrobot_method",{domain:"*"},function(P){var y=P.source,w=P.origin,E=P.data,T=E.id,S=E.name,O=ra(y,T);if(!O)throw new Error("Could not find method '"+S+"' with id: "+E.id+" in "+ie(window));var A=O.source,L=O.domain,J=O.val;return p.try(function(){if(!wt(L,w))throw new Error("Method '"+E.name+"' domain "+JSON.stringify(no(O.domain)?O.domain.source:O.domain)+" does not match origin "+w+" in "+ie(window));if(yt.isProxyWindow(A))return A.matchWindow(y,{send:h}).then(function(W){if(!W)throw new Error("Method call '"+E.name+"' failed - proxy window does not match source in "+ie(window))})}).then(function(){return J.apply({source:y,origin:w},E.args)},function(W){return p.try(function(){if(J.onError)return J.onError(W)}).then(function(){throw W.stack&&(W.stack="Remote call to "+S+"("+function(V){return V===void 0&&(V=[]),to(V).map(function(j){return typeof j=="string"?"'"+j+"'":j===void 0?"undefined":j===null?"null":typeof j=="boolean"?j.toString():Array.isArray(j)?"[ ... ]":typeof j=="object"?"{ ... }":typeof j=="function"?"() => { ... }":"<"+typeof j+">"}).join(", ")}(E.args)+`) failed

`+W.stack),W})}).then(function(W){return{result:W,id:T,name:S}})})});var u,d,h,l=n.__id__||st();e=yt.unwrap(e);var g=n.__name__||n.name||i;return typeof g=="string"&&typeof g.indexOf=="function"&&g.indexOf("anonymous::")===0&&(g=g.replace("anonymous::",i+"::")),yt.isProxyWindow(e)?(mo(l,n,g,e,r),e.awaitWindow().then(function(P){mo(l,n,g,P,r)})):mo(l,n,g,e,r),ur("cross_domain_function",{id:l,name:g})}function oa(e,r,n,i){var a,u=i.on,d=i.send;return function(h,l){l===void 0&&(l=_c);var g=JSON.stringify(h,function(P){var y=this[P];if(fo(this))return y;var w=Ji(y);if(!w)return y;var E=l[w]||Cc[w];return E?E(y,P):y});return g===void 0?"undefined":g}(n,((a={}).promise=function(h,l){return function(g,P,y,w,E){return ur("cross_domain_zalgo_promise",{then:na(g,P,function(T,S){return y.then(T,S)},w,{on:E.on,send:E.send})})}(e,r,h,l,{on:u,send:d})},a.function=function(h,l){return na(e,r,h,l,{on:u,send:d})},a.object=function(h){return cr(h)||yt.isProxyWindow(h)?ur("cross_domain_window",yt.serialize(h,{send:d})):h},a))}function ia(e,r,n,i){var a,u=i.send;return function(d,h){if(h===void 0&&(h=Ac),d!=="undefined")return JSON.parse(d,function(l,g){if(fo(this))return g;var P,y;if(fo(g)?(P=g.__type__,y=g.__val__):(P=Ji(g),y=g),!P)return y;var w=h[P]||Nc[P];return w?w(y,l):y})}(n,((a={}).cross_domain_zalgo_promise=function(d){return function(h,l,g){return new p(g.then)}(0,0,d)},a.cross_domain_function=function(d){return function(h,l,g,P){var y=g.id,w=g.name,E=P.send,T=function(O){O===void 0&&(O={});function A(){var L=arguments;return yt.toProxyWindow(h,{send:E}).awaitWindow().then(function(J){var W=ra(J,y);if(W&&W.val!==A)return W.val.apply({source:window,origin:ie()},L);var V=[].slice.call(L);return O.fireAndForget?E(J,"postrobot_method",{id:y,name:w,args:V},{domain:l,fireAndForget:!0}):E(J,"postrobot_method",{id:y,name:w,args:V},{domain:l,fireAndForget:!1}).then(function(j){return j.data.result})}).catch(function(J){throw J})}return A.__name__=w,A.__origin__=l,A.__source__=h,A.__id__=y,A.origin=l,A},S=T();return S.fireAndForget=T({fireAndForget:!0}),S}(e,r,d,{send:u})},a.cross_domain_window=function(d){return yt.deserialize(d,{send:u})},a))}var Hr={};Hr.postrobot_post_message=function(e,r,n){n.indexOf("file:")===0&&(n="*"),e.postMessage(r,n)},Hr.postrobot_bridge=function(e,r,n){if(!lo()&&!Xi())throw new Error("Bridge not needed for browser");if(U(e))throw new Error("Post message through bridge disabled between same domain windows");if(sr(window,e)!==!1)throw new Error("Can only use bridge to communicate between two different windows, not between frames");(function(i,a,u){var d=dn(window,i),h=dn(i,window);if(!d&&!h)throw new Error("Can only send messages to and from parent and popup windows");po(i).then(function(l){return l(i,a,u)})})(e,n,r)},Hr.postrobot_global=function(e,r){if(!Jn(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!U(e))throw new Error("Post message through global disabled between different domain windows");if(sr(window,e)!==!1)throw new Error("Can only use global to communicate between two different windows, not between frames");var n=Nt(e);if(!n)throw new Error("Can not find postRobot global on foreign window");n.receiveMessage({source:window,origin:ie(),data:r})};function go(e,r,n,i){var a=i.on,u=i.send;return p.try(function(){var d=it().getOrSet(e,function(){return{}});return d.buffer=d.buffer||[],d.buffer.push(n),d.flush=d.flush||p.flush().then(function(){if(ze(e))throw new Error("Window is closed");var h=oa(e,r,((l={}).__post_robot_11_0_0__=d.buffer||[],l),{on:a,send:u}),l;delete d.buffer;for(var g=Object.keys(Hr),P=[],y=0;y<g.length;y++){var w=g[y];try{Hr[w](e,h,r)}catch(E){P.push(E)}}if(P.length===g.length)throw new Error(`All post-robot messaging strategies failed:

`+P.map(function(E,T){return T+". "+Sr(E)}).join(`

`))}),d.flush.then(function(){delete d.flush})}).then(Ie)}function aa(e){return ge("responseListeners").get(e)}function sa(e){ge("responseListeners").del(e)}function ca(e){return ge("erroredResponseListeners").has(e)}function ua(e){var r=e.name,n=e.win,i=e.domain,a=it("requestListeners");if(n==="*"&&(n=null),i==="*"&&(i=null),!r)throw new Error("Name required to get request listener");for(var u=0,d=[n,Pn()];u<d.length;u++){var h=d[u];if(h){var l=a.get(h);if(l){var g=l[r];if(g){if(i&&typeof i=="string"){if(g[i])return g[i];if(g.__domain_regex__)for(var P=0,y=g.__domain_regex__;P<y.length;P++){var w=y[P],E=w.listener;if(wt(w.regex,i))return E}}if(g["*"])return g["*"]}}}}}function yo(e,r){var n=r.on,i=r.send,a=ge("receivedMessages");try{if(!window||window.closed||!e.source)return}catch{return}var u=e.source,d=e.origin,h=function(y,w,E,T){var S=T.on,O=T.send,A;try{A=ia(w,E,y,{on:S,send:O})}catch{return}if(A&&typeof A=="object"&&A!==null){var L=A.__post_robot_11_0_0__;if(Array.isArray(L))return L}}(e.data,u,d,{on:n,send:i});if(h){Gi(u);for(var l,g=function(){var y=h[P];if(a.has(y.id))return{v:void 0};if(a.set(y.id,!0),ze(u)&&!y.fireAndForget)return{v:void 0};y.origin.indexOf("file:")===0&&(d="file://");try{y.type==="postrobot_message_request"?function(w,E,T,S){var O=S.on,A=S.send,L=ua({name:T.name,win:w,domain:E}),J=T.name==="postrobot_method"&&T.data&&typeof T.data.name=="string"?T.data.name+"()":T.name;function W(V,j,te){return p.flush().then(function(){if(!T.fireAndForget&&!ze(w))try{return go(w,E,{id:st(),origin:ie(window),type:"postrobot_message_response",hash:T.hash,name:T.name,ack:V,data:j,error:te},{on:O,send:A})}catch($){throw new Error("Send response message failed for "+J+" in "+ie()+`

`+Sr($))}})}p.all([p.flush().then(function(){if(!T.fireAndForget&&!ze(w))try{return go(w,E,{id:st(),origin:ie(window),type:"postrobot_message_ack",hash:T.hash,name:T.name},{on:O,send:A})}catch(V){throw new Error("Send ack message failed for "+J+" in "+ie()+`

`+Sr(V))}}),p.try(function(){if(!L)throw new Error("No handler found for post message: "+T.name+" from "+E+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);return L.handler({source:w,origin:E,data:T.data})}).then(function(V){return W("success",V)},function(V){return W("error",null,V)})]).then(Ie).catch(function(V){if(L&&L.handleError)return L.handleError(V);throw V})}(u,d,y,{on:n,send:i}):y.type==="postrobot_message_response"?function(w,E,T){if(!ca(T.hash)){var S=aa(T.hash);if(!S)throw new Error("No handler found for post message response for message: "+T.name+" from "+E+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!wt(S.domain,E))throw new Error("Response origin "+E+" does not match domain "+(O=S.domain,Array.isArray(O)?"("+O.join(" | ")+")":N(O)?"RegExp("+O.toString()+")":O.toString()));var O;if(w!==S.win)throw new Error("Response source does not match registered window");sa(T.hash),T.ack==="error"?S.promise.reject(T.error):T.ack==="success"&&S.promise.resolve({source:w,origin:E,data:T.data})}}(u,d,y):y.type==="postrobot_message_ack"&&function(w,E,T){if(!ca(T.hash)){var S=aa(T.hash);if(!S)throw new Error("No handler found for post message ack for message: "+T.name+" from "+E+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!wt(S.domain,E))throw new Error("Ack origin "+E+" does not match domain "+S.domain.toString());if(w!==S.win)throw new Error("Ack source does not match registered window")}catch(O){S.promise.reject(O)}S.ack=!0}}(u,d,y)}catch(w){setTimeout(function(){throw w},0)}},P=0;P<h.length;P++)if(l=g())return l.v}}function jt(e,r,n){if(!e)throw new Error("Expected name");if(typeof(r=r||{})=="function"&&(n=r,r={}),!n)throw new Error("Expected handler");var i=function a(u,d){var h=u.name,l=u.win,g=u.domain,P=it("requestListeners");if(!h||typeof h!="string")throw new Error("Name required to add request listener");if(l&&l!=="*"&&yt.isProxyWindow(l)){var y=l.awaitWindow().then(function(he){return a({name:h,win:he,domain:g},d)});return{cancel:function(){y.then(function(he){return he.cancel()},Ie)}}}var w=l;if(Array.isArray(w)){for(var E=[],T=0,S=w;T<S.length;T++)E.push(a({name:h,domain:g,win:S[T]},d));return{cancel:function(){for(var he=0;he<E.length;he++)E[he].cancel()}}}if(Array.isArray(g)){for(var O=[],A=0,L=g;A<L.length;A++)O.push(a({name:h,win:w,domain:L[A]},d));return{cancel:function(){for(var he=0;he<O.length;he++)O[he].cancel()}}}var J=ua({name:h,win:w,domain:g});w&&w!=="*"||(w=Pn());var W=(g=g||"*").toString();if(J)throw w&&g?new Error("Request listener already exists for "+h+" on domain "+g.toString()+" for "+(w===Pn()?"wildcard":"specified")+" window"):w?new Error("Request listener already exists for "+h+" for "+(w===Pn()?"wildcard":"specified")+" window"):g?new Error("Request listener already exists for "+h+" on domain "+g.toString()):new Error("Request listener already exists for "+h);var V=P.getOrSet(w,function(){return{}}),j=Br(V,h,function(){return{}}),te,$;return no(g)?(te=Br(j,"__domain_regex__",function(){return[]})).push($={regex:g,listener:d}):j[W]=d,{cancel:function(){delete j[W],$&&(te.splice(te.indexOf($,1)),te.length||delete j.__domain_regex__),Object.keys(j).length||delete V[h],w&&!Object.keys(V).length&&P.del(w)}}}({name:e,win:r.window,domain:r.domain||"*"},{handler:n||r.handler,handleError:r.errorHandler||function(a){throw a}});return{cancel:function(){i.cancel()}}}var Ot=function e(r,n,i,a){var u=(a=a||{}).domain||"*",d=a.timeout||-1,h=a.timeout||5e3,l=a.fireAndForget||!1;return yt.toProxyWindow(r,{send:e}).awaitWindow().then(function(g){return p.try(function(){if(function(P,y,w){if(!P)throw new Error("Expected name");if(w&&typeof w!="string"&&!Array.isArray(w)&&!no(w))throw new TypeError("Can not send "+P+". Expected domain "+JSON.stringify(w)+" to be a string, array, or regex");if(ze(y))throw new Error("Can not send "+P+". Target window is closed")}(n,g,u),function(P,y){var w=Yt(y);if(w)return w===P;if(y===P||xe(y)===y)return!1;for(var E=0,T=Te(P);E<T.length;E++)if(T[E]===y)return!0;return!1}(window,g))return Vi(g,h)}).then(function(P){return function(y,w,E,T){var S=T.send;return p.try(function(){return typeof w=="string"?w:p.try(function(){return E||uo(y,{send:S}).then(function(O){return O.domain})}).then(function(O){if(!wt(w,w))throw new Error("Domain "+vn(w)+" does not match "+vn(w));return O})})}(g,u,(P===void 0?{}:P).domain,{send:e})}).then(function(P){var y=P,w=n==="postrobot_method"&&i&&typeof i.name=="string"?i.name+"()":n,E=new p,T=n+"_"+st();if(!l){var S={name:n,win:g,domain:y,promise:E};(function(j,te){ge("responseListeners").set(j,te)})(T,S);var O=it("requestPromises").getOrSet(g,function(){return[]});O.push(E),E.catch(function(){(function(j){ge("erroredResponseListeners").set(j,!0)})(T),sa(T)});var A=function(j){return it("knownWindows").get(j,!1)}(g)?1e4:2e3,L=d,J=A,W=L,V=jr(function(){return ze(g)?E.reject(new Error("Window closed for "+n+" before "+(S.ack?"response":"ack"))):S.cancelled?E.reject(new Error("Response listener was cancelled for "+n)):(J=Math.max(J-500,0),W!==-1&&(W=Math.max(W-500,0)),S.ack||J!==0?W===0?E.reject(new Error("No response for postMessage "+w+" in "+ie()+" in "+L+"ms")):void 0:E.reject(new Error("No ack for postMessage "+w+" in "+ie()+" in "+A+"ms")))},500);E.finally(function(){V.cancel(),O.splice(O.indexOf(E,1))}).catch(Ie)}return go(g,y,{id:st(),origin:ie(window),type:"postrobot_message_request",hash:T,name:n,data:i,fireAndForget:l},{on:jt,send:e}).then(function(){return l?E.resolve():E},function(j){throw new Error("Send request message failed for "+w+" in "+ie()+`

`+Sr(j))})})})};function $r(e){return yt.toProxyWindow(e,{send:Ot})}function da(e){for(var r=0,n=it("requestPromises").get(e,[]);r<n.length;r++)n[r].reject(new Error("Window "+(ze(e)?"closed":"cleaned up")+" before response")).catch(Ie)}var Qt;Qt={setupBridge:ea,openBridge:function(e,r){var n=ge("bridges"),i=ge("bridgeFrames");return r=r||Lt(e),n.getOrSet(r,function(){return p.try(function(){if(ie()===r)throw new Error("Can not open bridge on the same domain as current domain: "+r);var a=ho(r);if(Kt(window,a))throw new Error("Frame with name "+a+" already exists on page");var u=function(d,h){var l=document.createElement("iframe");return l.setAttribute("name",d),l.setAttribute("id",d),l.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),l.setAttribute("frameborder","0"),l.setAttribute("border","0"),l.setAttribute("scrolling","no"),l.setAttribute("allowTransparency","true"),l.setAttribute("tabindex","-1"),l.setAttribute("hidden","true"),l.setAttribute("title",""),l.setAttribute("role","presentation"),l.src=h,l}(a,e);return i.set(r,u),Wc.then(function(d){d.appendChild(u);var h=u.contentWindow;return new p(function(l,g){u.addEventListener("load",l),u.addEventListener("error",g)}).then(function(){return Vi(h,5e3,"Bridge "+e)}).then(function(){return h})})})})},linkWindow:Tn,linkUrl:function(e,r){Tn({win:e,domain:Lt(r)})},isBridge:Xi,needsBridge:Zi,needsBridgeForBrowser:lo,hasBridge:function(e,r){return ge("bridges").has(r||Lt(e))},needsBridgeForWin:Ki,needsBridgeForDomain:Yi,destroyBridges:function(){for(var e=ge("bridges"),r=ge("bridgeFrames"),n=0,i=r.keys();n<i.length;n++){var a=r.get(i[n]);a&&a.parentNode&&a.parentNode.removeChild(a)}r.reset(),e.reset()}};function Vr(e){if(!U(e))throw new Error("Can not get global for window on different domain");return e.__zoid_10_3_3__||(e.__zoid_10_3_3__={}),e.__zoid_10_3_3__}function fa(e,r){try{return r(Vr(e))}catch{}}function Rn(e){return{get:function(){var r=this;return p.try(function(){if(r.source&&r.source!==window)throw new Error("Can not call get on proxy object from a remote window");return e})}}}function Mc(e){return Qn(JSON.stringify(e))}function Eo(e){var r=Vr(e);return r.references=r.references||{},r.references}function la(e){var r=e.data,n=e.metaData,i=e.sender,a=e.receiver,u=e.passByReference,d=u!==void 0&&u,h=e.basic,l=h!==void 0&&h,g=$r(a.win),P=l?JSON.stringify(r):oa(g,a.domain,r,{on:jt,send:Ot}),y=d?function(w){var E=st();return Eo(window)[E]=w,{type:"uid",uid:E}}(P):{type:"raw",val:P};return{serializedData:Mc({sender:{domain:i.domain},metaData:n,reference:y}),cleanReference:function(){w=window,(E=y).type==="uid"&&delete Eo(w)[E.uid];var w,E}}}function ha(e){var r=e.sender,n=e.basic,i=n!==void 0&&n,a=function(P){return JSON.parse(function(y){if(typeof atob=="function")return decodeURIComponent([].map.call(atob(y),function(w){return"%"+("00"+w.charCodeAt(0).toString(16)).slice(-2)}).join(""));if(typeof Buffer<"u")return Buffer.from(y,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(P))}(e.data),u=a.reference,d=a.metaData,h;h=typeof r.win=="function"?r.win({metaData:d}):r.win;var l;l=typeof r.domain=="function"?r.domain({metaData:d}):typeof r.domain=="string"?r.domain:a.sender.domain;var g=function(P,y){if(y.type==="raw")return y.val;if(y.type==="uid")return Eo(P)[y.uid];throw new Error("Unsupported ref type: "+y.type)}(h,u);return{data:i?JSON.parse(g):function(P,y,w){return ia(P,y,w,{on:jt,send:Ot})}(h,l,g),metaData:d,sender:{win:h,domain:l},reference:u}}var be={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},Sn={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},We=q,De={RENDER:"zoid-render",RENDERED:"zoid-rendered",PRERENDER:"zoid-prerender",PRERENDERED:"zoid-prerendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function pa(e){return"__zoid__"+e.name+"__"+e.serializedPayload+"__"}function bo(e){if(!e)throw new Error("No window name");var r=e.split("__"),n=r[1],i=r[2],a=r[3];if(n!=="zoid")throw new Error("Window not rendered by zoid - got "+n);if(!i)throw new Error("Expected component name");if(!a)throw new Error("Expected serialized payload ref");return{name:i,serializedInitialPayload:a}}var Fc=Zt(function(e){var r=ha({data:bo(e).serializedInitialPayload,sender:{win:function(n){return function(i){if(i.type==="opener")return gn("opener",Ae(window));if(i.type==="parent"&&typeof i.distance=="number")return gn("parent",function(y,w){return w===void 0&&(w=1),function(E,T){T===void 0&&(T=1);for(var S=E,O=0;O<T;O++){if(!S)return;S=ve(S)}return S}(y,Ur(y)-w)}(window,i.distance));if(i.type==="global"&&i.uid&&typeof i.uid=="string"){var a=i.uid,u=Yt(window);if(!u)throw new Error("Can not find ancestor window");for(var d=0,h=Ke(u);d<h.length;d++){var l=h[d];if(U(l)){var g=fa(l,function(y){return y.windows&&y.windows[a]});if(g)return g}}}else if(i.type==="name"){var P=i.name;return gn("namedWindow",function(y,w){return Kt(y,w)||function E(T,S){var O=Kt(T,S);if(O)return O;for(var A=0,L=Te(T);A<L.length;A++){var J=E(L[A],S);if(J)return J}}(xe(y)||y,w)}(gn("ancestor",Yt(window)),P))}throw new Error("Unable to find "+i.type+" parent component window")}(n.metaData.windowRef)}}});return{parent:r.sender,payload:r.data,reference:r.reference}});function va(){return Fc(window.name)}function zc(e,r){if(r===void 0&&(r=window),e===ve(r))return{type:"parent",distance:Ur(e)};if(e===Ae(r))return{type:"opener"};if(U(e)&&(i=e,i!==xe(i))){var n=z(e).name;if(n)return{type:"name",name:n}}var i}function wa(e,r,n,i,a){if(!e.hasOwnProperty(n))return i;var u=e[n];return typeof u.childDecorate=="function"?u.childDecorate({value:i,uid:a.uid,tag:a.tag,close:a.close,focus:a.focus,onError:a.onError,onProps:a.onProps,resize:a.resize,getParent:a.getParent,getParentDomain:a.getParentDomain,show:a.show,hide:a.hide,export:a.export,getSiblings:a.getSiblings}):i}function Uc(){return p.try(function(){window.focus()})}function ma(){return p.try(function(){window.close()})}var Bt=function(){return Ie},dr=function(e){return pn(e.value)};function Po(e,r,n){for(var i=0,a=Object.keys(m({},e,r));i<a.length;i++){var u=a[i];n(u,r[u],e[u])}}function ga(e,r,n){var i={};return p.all(function(a,u,d){var h=[];return Po(a,u,function(l,g,P){var y=function(w,E,T){return p.resolve().then(function(){var S,O;if(T!=null&&E){var A=(S={},S.get=E.queryParam,S.post=E.bodyParam,S)[n],L=(O={},O.get=E.queryValue,O.post=E.bodyValue,O)[n];if(A)return p.hash({finalParam:p.try(function(){return typeof A=="function"?A({value:T}):typeof A=="string"?A:w}),finalValue:p.try(function(){return typeof L=="function"&&Xt(T)?L({value:T}):T})}).then(function(J){var W=J.finalParam,V=J.finalValue,j;if(typeof V=="boolean")j=V.toString();else if(typeof V=="string")j=V.toString();else if(typeof V=="object"&&V!==null){if(E.serialization===Sn.JSON)j=JSON.stringify(V);else if(E.serialization===Sn.BASE64)j=Qn(JSON.stringify(V));else if(E.serialization===Sn.DOTIFY||!E.serialization){j=function se(X,G,le){G===void 0&&(G=""),le===void 0&&(le={}),G=G&&G+".";for(var re in X)X.hasOwnProperty(re)&&X[re]!=null&&typeof X[re]!="function"&&(X[re]&&Array.isArray(X[re])&&X[re].length&&X[re].every(function(Me){return typeof Me!="object"})?le[""+G+re+"[]"]=X[re].join(","):X[re]&&typeof X[re]=="object"?le=se(X[re],""+G+re,le):le[""+G+re]=X[re].toString());return le}(V,w);for(var te=0,$=Object.keys(j);te<$.length;te++){var he=$[te];i[he]=j[he]}return}}else typeof V=="number"&&(j=V.toString());i[W]=j})}})}(l,g,P);h.push(y)}),h}(r,e)).then(function(){return i})}function ya(e){var r=e.uid,n=e.options,i=e.overrides,a=i===void 0?{}:i,u=e.parentWin,d=u===void 0?window:u,h=n.propsDef,l=n.containerTemplate,g=n.prerenderTemplate,P=n.tag,y=n.name,w=n.attributes,E=n.dimensions,T=n.autoResize,S=n.url,O=n.domain,A=n.exports,L=new p,J=[],W=mn(),V={},j={},te={visible:!0},$=a.event?a.event:(he={},se={},X={on:function(x,D){var H=se[x]=se[x]||[];H.push(D);var B=!1;return{cancel:function(){B||(B=!0,H.splice(H.indexOf(D),1))}}},once:function(x,D){var H=X.on(x,function(){H.cancel(),D()});return H},trigger:function(x){for(var D=arguments.length,H=new Array(D>1?D-1:0),B=1;B<D;B++)H[B-1]=arguments[B];var oe=se[x],Q=[];if(oe)for(var Re=function(){var Xe=oe[Se];Q.push(p.try(function(){return Xe.apply(void 0,H)}))},Se=0;Se<oe.length;Se++)Re();return p.all(Q).then(Ie)},triggerOnce:function(x){if(he[x])return p.resolve();he[x]=!0;for(var D=arguments.length,H=new Array(D>1?D-1:0),B=1;B<D;B++)H[B-1]=arguments[B];return X.trigger.apply(X,[x].concat(H))},reset:function(){se={}}}),he,se,X,G=a.props?a.props:{},le,re,Me,At,Et,kt=!1,er=a.onError,qt=a.getProxyContainer,tr=a.show,rr=a.hide,fr=a.close,nr=a.renderContainer,xt=a.getProxyWindow,lr=a.setProxyWin,or=a.openFrame,ir=a.openPrerenderFrame,hr=a.prerender,pr=a.open,ce=a.openPrerender,bt=a.watchForUnload,fe=a.getInternalState,Ye=a.setInternalState,Ue=function(){return typeof E=="function"?E({props:G}):E},Ze=function(){return p.try(function(){return a.resolveInitPromise?a.resolveInitPromise():L.resolve()})},Ne=function(x){return p.try(function(){return a.rejectInitPromise?a.rejectInitPromise(x):L.reject(x)})},ct=function(x){for(var D={},H=0,B=Object.keys(G);H<B.length;H++){var oe=B[H],Q=h[oe];if(!Q||Q.sendToChild!==!1){var Re=Q&&Q.trustedDomains&&Q.trustedDomains.length>0?Q.trustedDomains.reduce(function(Se,Xe){return Se||wt(Xe,x)},!1):wt(x,ie(window));Q&&Q.sameDomain&&!Re||Q&&Q.trustedDomains&&!Re||(D[oe]=G[oe])}}return p.hash(D)},He=function(){return p.try(function(){return fe?fe():te})},$e=function(x){return p.try(function(){return Ye?Ye(x):te=m({},te,x)})},Pt=function(){return xt?xt():p.try(function(){var x=G.window;if(x){var D=$r(x);return W.register(function(){return x.close()}),D}return new yt({send:Ot})})},ft=function(x){return lr?lr(x):p.try(function(){le=x})},It=function(){return tr?tr():p.hash({setState:$e({visible:!0}),showElement:re?re.get().then(Oc):null}).then(Ie)},Ht=function(){return rr?rr():p.hash({setState:$e({visible:!1}),showElement:re?re.get().then(Mi):null}).then(Ie)},Ir=function(){return typeof S=="function"?S({props:G}):S},Dr=function(){return typeof w=="function"?w({props:G}):w},vr=function(){return Lt(Ir())},lt=function(x,D){var H=D.windowName;return or?or(x,{windowName:H}):p.try(function(){if(x===We.IFRAME)return Rn(Ai({attributes:m({name:H,title:y},Dr().iframe)}))})},Gr=function(x){return ir?ir(x):p.try(function(){if(x===We.IFRAME)return Rn(Ai({attributes:m({name:"__zoid_prerender_frame__"+y+"_"+st()+"__",title:"prerender__"+y},Dr().iframe)}))})},Jr=function(x,D,H){return ce?ce(x,D,H):p.try(function(){if(x===We.IFRAME){if(!H)throw new Error("Expected proxy frame to be passed");return H.get().then(function(B){return W.register(function(){return qr(B)}),ao(B).then(function(oe){return z(oe)}).then(function(oe){return $r(oe)})})}if(x===We.POPUP)return D;throw new Error("No render context available for "+x)})},Cr=function(){return p.try(function(){if(le)return p.all([$.trigger(De.FOCUS),le.focus()]).then(Ie)})},On=function(){var x=Vr(window);return x.windows=x.windows||{},x.windows[r]=window,W.register(function(){delete x.windows[r]}),r},Kr=function(x,D,H,B){if(D===ie(window))return{type:"global",uid:On()};if(x!==window)throw new Error("Can not construct cross-domain window reference for different target window");if(G.window){var oe=B.getWindow();if(!oe)throw new Error("Can not construct cross-domain window reference for lazy window prop");if(Yt(oe)!==window)throw new Error("Can not construct cross-domain window reference for window prop with different ancestor")}if(H===We.POPUP)return{type:"opener"};if(H===We.IFRAME)return{type:"parent",distance:Ur(window)};throw new Error("Can not construct window reference for child")},xn=function(x,D){return p.try(function(){var H;At=x,Me=D,(H=le)==null||H.isPopup().then(function(B){if((D==null?void 0:D.name)!==""&&B){var oe;(oe=le)==null||oe.setName(D==null?void 0:D.name)}}).finally(function(){Ze(),W.register(function(){return D.close.fireAndForget().catch(Ie)})})})},Yr=function(x){var D=x.width,H=x.height;return p.try(function(){$.trigger(De.RESIZE,{width:D,height:H})})},Zr=function(x){return p.try(function(){return $.trigger(De.DESTROY)}).catch(Ie).then(function(){return W.all(x)}).then(function(){var D=x||new Error("Component destroyed");Et&&xr(Et)||D.message==="Window navigated away"?L.resolve():L.asyncReject(D)})},$t=Zt(function(x){return p.try(function(){return fr?ze(fr.__source__)?void 0:fr():p.try(function(){return $.trigger(De.CLOSE)}).then(function(){return Zr(x||new Error("Component closed"))})})}),Pa=function(x,D){var H=D.proxyWin,B=D.proxyFrame,oe=D.windowName;return pr?pr(x,{proxyWin:H,proxyFrame:B,windowName:oe}):p.try(function(){if(x===We.IFRAME){if(!B)throw new Error("Expected proxy frame to be passed");return B.get().then(function(Le){return ao(Le).then(function(ye){return W.register(function(){return qr(Le)}),W.register(function(){return da(ye)}),ye})})}if(x===We.POPUP){var Q=Ue(),Re=Q.width,Se=Re===void 0?"300px":Re,Xe=Q.height,Ce=Xe===void 0?"150px":Xe;Se=ji(Se,window.outerWidth),Ce=ji(Ce,window.outerWidth);var Ve=function(Le,ye){var je=(ye=ye||{}).closeOnUnload,_e=je===void 0?1:je,ht=ye.name,Qe=ht===void 0?"":ht,pe=ye.width,ke=ye.height,ut=0,rt=0;pe&&(window.outerWidth?rt=Math.round((window.outerWidth-pe)/2)+window.screenX:window.screen.width&&(rt=Math.round((window.screen.width-pe)/2))),ke&&(window.outerHeight?ut=Math.round((window.outerHeight-ke)/2)+window.screenY:window.screen.height&&(ut=Math.round((window.screen.height-ke)/2))),delete ye.closeOnUnload,delete ye.name,pe&&ke&&(ye=m({top:ut,left:rt,width:pe,height:ke,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},ye));var wr=Object.keys(ye).map(function(Wt){if(ye[Wt]!=null)return Wt+"="+vn(ye[Wt])}).filter(Boolean).join(","),Tt;try{Tt=window.open("",Qe,wr)}catch(Wt){throw new io("Can not open popup window - "+(Wt.stack||Wt.message))}if(ze(Tt))throw new io("Can not open popup window - blocked");return _e&&window.addEventListener("unload",function(){return Tt.close()}),Tt}(0,m({name:oe,width:Se,height:Ce},Dr().popup));return W.register(function(){return yi(Ve)}),W.register(function(){return da(Ve)}),Ve}throw new Error("No render context available for "+x)}).then(function(Q){return H.setWindow(Q,{send:Ot}),H.setName(oe).then(function(){return H})})},Ta=function(){return p.try(function(){var x=Wi(window,"unload",pn(function(){Zr(new Error("Window navigated away"))})),D=mi(d,Zr,3e3);if(W.register(D.cancel),W.register(x.cancel),bt)return bt()})},Ra=function(x){var D=!1;return x.isClosed().then(function(H){return H?(D=!0,$t(new Error("Detected component window close"))):p.delay(200).then(function(){return x.isClosed()}).then(function(B){if(B)return D=!0,$t(new Error("Detected component window close"))})}).then(function(){return D})},Xr=function(x){return er?er(x):p.try(function(){if(J.indexOf(x)===-1)return J.push(x),L.asyncReject(x),$.trigger(De.ERROR,x)})},Sa=new p,Oa=function(x){return p.try(function(){Sa.resolve(x)})};xn.onError=Xr;var xa=function(x,D){return x({uid:r,container:D.container,context:D.context,doc:D.doc,frame:D.frame,prerenderFrame:D.prerenderFrame,focus:Cr,close:$t,state:V,props:G,tag:P,dimensions:Ue(),event:$})},Ia=function(x,D){var H=D.context;return hr?hr(x,{context:H}):p.try(function(){if(g){$.trigger(De.PRERENDER);var B=x.getWindow();if(B&&U(B)&&function(je){try{if(!je.location.href||je.location.href==="about:blank")return!0}catch{}return!1}(B)){var oe=(B=z(B)).document,Q=xa(g,{context:H,doc:oe});if(Q){if(Q.ownerDocument!==oe)throw new Error("Expected prerender template to have been created with document from child window");(function(je,_e){var ht=_e.tagName.toLowerCase();if(ht!=="html")throw new Error("Expected element to be html, got "+ht);for(var Qe=je.document.documentElement,pe=0,ke=to(Qe.children);pe<ke.length;pe++)Qe.removeChild(ke[pe]);for(var ut=0,rt=to(_e.children);ut<rt.length;ut++)Qe.appendChild(rt[ut])})(B,Q);var Re=T.width,Se=Re!==void 0&&Re,Xe=T.height,Ce=Xe!==void 0&&Xe,Ve=T.element,Le=Ve===void 0?"body":Ve;if((Le=oo(Le,oe))&&(Se||Ce)){var ye=Fi(Le,function(je){Yr({width:Se?je.width:void 0,height:Ce?je.height:void 0})},{width:Se,height:Ce,win:B});$.on(De.RENDERED,ye.cancel)}$.trigger(De.PRERENDERED)}}}})},Da=function(x,D){var H=D.proxyFrame,B=D.proxyPrerenderFrame,oe=D.context,Q=D.rerender;return nr?nr(x,{proxyFrame:H,proxyPrerenderFrame:B,context:oe,rerender:Q}):p.hash({container:x.get(),frame:H?H.get():null,prerenderFrame:B?B.get():null,internalState:He()}).then(function(Re){var Se=Re.container,Xe=Re.internalState.visible,Ce=xa(l,{context:oe,container:Se,frame:Re.frame,prerenderFrame:Re.prerenderFrame,doc:document});if(Ce){Xe||Mi(Ce),Sc(Se,Ce);var Ve=function(Le,ye){ye=pn(ye);var je=!1,_e=[],ht,Qe,pe,ke=function(){je=!0;for(var Tt=0;Tt<_e.length;Tt++)_e[Tt].disconnect();ht&&ht.cancel(),pe&&pe.removeEventListener("unload",ut),Qe&&qr(Qe)},ut=function(){je||(ye(),ke())};if(xr(Le))return ut(),{cancel:ke};if(window.MutationObserver)for(var rt=Le.parentElement;rt;){var wr=new window.MutationObserver(function(){xr(Le)&&ut()});wr.observe(rt,{childList:!0}),_e.push(wr),rt=rt.parentElement}return(Qe=document.createElement("iframe")).setAttribute("name","__detect_close_"+st()+"__"),Qe.style.display="none",ao(Qe).then(function(Tt){(pe=z(Tt)).addEventListener("unload",ut)}),Le.appendChild(Qe),ht=jr(function(){xr(Le)&&ut()},1e3),{cancel:ke}}(Ce,function(){var Le=new Error("Detected container element removed from DOM");return p.delay(1).then(function(){if(!xr(Ce))return W.all(Le),Q().then(Ze,Ne);$t(Le)})});return W.register(function(){return Ve.cancel()}),W.register(function(){return qr(Ce)}),re=Rn(Ce)}})},Ca=function(){return{state:V,event:$,close:$t,focus:Cr,resize:Yr,onError:Xr,updateProps:Yc,show:It,hide:Ht}},So=function(x){x===void 0&&(x={});var D=Et,H=Ca();Or(j,x),function(B,oe,Q,Re,Se){var Xe=Re.state,Ce=Re.close,Ve=Re.focus,Le=Re.event,ye=Re.onError;Po(Q,B,function(je,_e,ht){var Qe=!1,pe=ht;Object.defineProperty(oe,je,{configurable:!0,enumerable:!0,get:function(){return Qe?pe:(Qe=!0,function(){if(!_e)return pe;var ke=_e.alias;if(ke&&!Xt(ht)&&Xt(Q[ke])&&(pe=Q[ke]),_e.value&&(pe=_e.value({props:oe,state:Xe,close:Ce,focus:Ve,event:Le,onError:ye,container:Se})),!_e.default||Xt(pe)||Xt(Q[je])||(pe=_e.default({props:oe,state:Xe,close:Ce,focus:Ve,event:Le,onError:ye,container:Se})),Xt(pe)){if(_e.type===be.ARRAY?!Array.isArray(pe):typeof pe!==_e.type)throw new TypeError("Prop is not of type "+_e.type+": "+je)}else if(_e.required!==!1&&!Xt(Q[je]))throw new Error('Expected prop "'+je+'" to be defined');return Xt(pe)&&_e.decorate&&(pe=_e.decorate({value:pe,props:oe,state:Xe,close:Ce,focus:Ve,event:Le,onError:ye,container:Se})),pe}())}})}),Po(oe,B,Ie)}(h,G,j,H,D)},Yc=function(x){return So(x),L.then(function(){var D=Me,H=le;if(D&&H&&At)return ct(At).then(function(B){return D.updateProps(B).catch(function(oe){return Ra(H).then(function(Q){if(!Q)throw oe})})})})},_a=function(x){return qt?qt(x):p.try(function(){return _i(x)}).then(function(D){return so(D)&&(D=function H(B){var oe=function(Xe){var Ce=function(Ve){for(;Ve.parentNode;)Ve=Ve.parentNode;if(so(Ve))return Ve}(Xe);if(Ce&&Ce.host)return Ce.host}(B);if(!oe)throw new Error("Element is not in shadow dom");var Q="shadow-slot-"+st(),Re=document.createElement("slot");Re.setAttribute("name",Q),B.appendChild(Re);var Se=document.createElement("div");return Se.setAttribute("slot",Q),oe.appendChild(Se),so(oe)?H(Se):Se}(D)),Et=D,Rn(D)})};return{init:function(){(function(){$.on(De.RENDER,function(){return G.onRender()}),$.on(De.PRERENDER,function(){return G.onPrerender()}),$.on(De.DISPLAY,function(){return G.onDisplay()}),$.on(De.RENDERED,function(){return G.onRendered()}),$.on(De.PRERENDERED,function(){return G.onPrerendered()}),$.on(De.CLOSE,function(){return G.onClose()}),$.on(De.DESTROY,function(){return G.onDestroy()}),$.on(De.RESIZE,function(){return G.onResize()}),$.on(De.FOCUS,function(){return G.onFocus()}),$.on(De.PROPS,function(x){return G.onProps(x)}),$.on(De.ERROR,function(x){return G&&G.onError?G.onError(x):Ne(x).then(function(){setTimeout(function(){throw x},1)})}),W.register($.reset)})()},render:function(x){var D=x.target,H=x.container,B=x.context,oe=x.rerender;return p.try(function(){var Q=vr(),Re=O||vr();(function(K,et,Be){if(K!==window){if(!sr(window,K))throw new Error("Can only renderTo an adjacent frame");var tt=ie();if(!wt(et,tt)&&!U(K))throw new Error("Can not render remotely to "+et.toString()+" - can only render to "+tt);if(Be&&typeof Be!="string")throw new Error("Container passed to renderTo must be a string selector, got "+typeof Be+" }")}})(D,Re,H);var Se=p.try(function(){if(D!==window)return function(K,et){for(var Be={},tt=0,vt=Object.keys(G);tt<vt.length;tt++){var qe=vt[tt],Rt=h[qe];Rt&&Rt.allowDelegate&&(Be[qe]=G[qe])}var nt=Ot(et,"zoid_delegate_"+y,{uid:r,overrides:{props:Be,event:$,close:$t,onError:Xr,getInternalState:He,setInternalState:$e,resolveInitPromise:Ze,rejectInitPromise:Ne}}).then(function(k){var ee=k.data.parent;return W.register(function(M){if(!ze(et))return ee.destroy(M)}),ee.getDelegateOverrides()}).catch(function(k){throw new Error(`Unable to delegate rendering. Possibly the component is not loaded in the target window.

`+Sr(k))});return qt=function(){for(var k=arguments.length,ee=new Array(k),M=0;M<k;M++)ee[M]=arguments[M];return nt.then(function(ne){return ne.getProxyContainer.apply(ne,ee)})},nr=function(){for(var k=arguments.length,ee=new Array(k),M=0;M<k;M++)ee[M]=arguments[M];return nt.then(function(ne){return ne.renderContainer.apply(ne,ee)})},tr=function(){for(var k=arguments.length,ee=new Array(k),M=0;M<k;M++)ee[M]=arguments[M];return nt.then(function(ne){return ne.show.apply(ne,ee)})},rr=function(){for(var k=arguments.length,ee=new Array(k),M=0;M<k;M++)ee[M]=arguments[M];return nt.then(function(ne){return ne.hide.apply(ne,ee)})},bt=function(){for(var k=arguments.length,ee=new Array(k),M=0;M<k;M++)ee[M]=arguments[M];return nt.then(function(ne){return ne.watchForUnload.apply(ne,ee)})},K===We.IFRAME?(xt=function(){for(var k=arguments.length,ee=new Array(k),M=0;M<k;M++)ee[M]=arguments[M];return nt.then(function(ne){return ne.getProxyWindow.apply(ne,ee)})},or=function(){for(var k=arguments.length,ee=new Array(k),M=0;M<k;M++)ee[M]=arguments[M];return nt.then(function(ne){return ne.openFrame.apply(ne,ee)})},ir=function(){for(var k=arguments.length,ee=new Array(k),M=0;M<k;M++)ee[M]=arguments[M];return nt.then(function(ne){return ne.openPrerenderFrame.apply(ne,ee)})},hr=function(){for(var k=arguments.length,ee=new Array(k),M=0;M<k;M++)ee[M]=arguments[M];return nt.then(function(ne){return ne.prerender.apply(ne,ee)})},pr=function(){for(var k=arguments.length,ee=new Array(k),M=0;M<k;M++)ee[M]=arguments[M];return nt.then(function(ne){return ne.open.apply(ne,ee)})},ce=function(){for(var k=arguments.length,ee=new Array(k),M=0;M<k;M++)ee[M]=arguments[M];return nt.then(function(ne){return ne.openPrerender.apply(ne,ee)})}):K===We.POPUP&&(lr=function(){for(var k=arguments.length,ee=new Array(k),M=0;M<k;M++)ee[M]=arguments[M];return nt.then(function(ne){return ne.setProxyWin.apply(ne,ee)})}),nt}(B,D)}),Xe=G.window,Ce=Ta(),Ve=ga(h,G,"post"),Le=$.trigger(De.RENDER),ye=_a(H),je=Pt(),_e=ye.then(function(){return So()}),ht=_e.then(function(){return ga(h,G,"get").then(function(K){return function(et,Be){var tt=Be.query||{},vt=Be.hash||{},qe,Rt,nt=et.split("#");Rt=nt[1];var k=(qe=nt[0]).split("?");qe=k[0];var ee=Ci(k[1],tt),M=Ci(Rt,vt);return ee&&(qe=qe+"?"+ee),M&&(qe=qe+"#"+M),qe}(Kn(Ir()),{query:K})})}),Qe=je.then(function(K){return function(Be){var tt=Be===void 0?{}:Be,vt=tt.proxyWin,qe=tt.initialChildDomain,Rt=tt.childDomainMatch,nt=tt.target,k=nt===void 0?window:nt,ee=tt.context;return function(M){var ne=M===void 0?{}:M,Oo=ne.proxyWin,ru=ne.childDomainMatch,nu=ne.context;return ct(ne.initialChildDomain).then(function(ou){return{uid:r,context:nu,tag:P,childDomainMatch:ru,version:"10_3_3",props:ou,exports:(Wa=Oo,{init:function(iu){return xn(this.origin,iu)},close:$t,checkClose:function(){return Ra(Wa)},resize:Yr,onError:Xr,show:It,hide:Ht,export:Oa})};var Wa})}({proxyWin:vt,initialChildDomain:qe,childDomainMatch:Rt,context:ee}).then(function(M){var ne=la({data:M,metaData:{windowRef:Kr(k,qe,ee,vt)},sender:{domain:ie(window)},receiver:{win:vt,domain:Rt},passByReference:qe===ie()}),Oo=ne.serializedData;return W.register(ne.cleanReference),Oo})}({proxyWin:(et={proxyWin:K,initialChildDomain:Q,childDomainMatch:Re,target:D,context:B}).proxyWin,initialChildDomain:et.initialChildDomain,childDomainMatch:et.childDomainMatch,target:et.target,context:et.context}).then(function(Be){return pa({name:y,serializedPayload:Be})});var et}),pe=Qe.then(function(K){return lt(B,{windowName:K})}),ke=Gr(B),ut=p.hash({proxyContainer:ye,proxyFrame:pe,proxyPrerenderFrame:ke}).then(function(K){return Da(K.proxyContainer,{context:B,proxyFrame:K.proxyFrame,proxyPrerenderFrame:K.proxyPrerenderFrame,rerender:oe})}).then(function(K){return K}),rt=p.hash({windowName:Qe,proxyFrame:pe,proxyWin:je}).then(function(K){var et=K.proxyWin;return Xe?et:Pa(B,{windowName:K.windowName,proxyWin:et,proxyFrame:K.proxyFrame})}),wr=p.hash({proxyWin:rt,proxyPrerenderFrame:ke}).then(function(K){return Jr(B,K.proxyWin,K.proxyPrerenderFrame)}),Tt=rt.then(function(K){return le=K,ft(K)}),Wt=p.hash({proxyPrerenderWin:wr,state:Tt}).then(function(K){return Ia(K.proxyPrerenderWin,{context:B})}),Na=p.hash({proxyWin:rt,windowName:Qe}).then(function(K){if(Xe)return K.proxyWin.setName(K.windowName)}),Zc=p.hash({body:Ve}).then(function(K){return n.method?n.method:Object.keys(K.body).length?"post":"get"}),Aa=p.hash({proxyWin:rt,windowUrl:ht,body:Ve,method:Zc,windowName:Na,prerender:Wt}).then(function(K){return K.proxyWin.setLocation(K.windowUrl,{method:K.method,body:K.body})}),Xc=rt.then(function(K){(function et(Be,tt){var vt=!1;return W.register(function(){vt=!0}),p.delay(2e3).then(function(){return Be.isClosed()}).then(function(qe){if(!vt){if(tt===We.POPUP&&qe)return $t(new Error("Detected popup close"));var Rt=!!(Et&&xr(Et));return tt===We.IFRAME&&qe&&(Rt||kt)?$t(new Error("Detected iframe close")):et(Be,tt)}})})(K,B)}),Qc=p.hash({container:ut,prerender:Wt}).then(function(){return $.trigger(De.DISPLAY)}),kc=rt.then(function(K){return function(et,Be,tt){return p.try(function(){return et.awaitWindow()}).then(function(vt){if(Qt&&Qt.needsBridge({win:vt,domain:Be})&&!Qt.hasBridge(Be,Be)){var qe=typeof n.bridgeUrl=="function"?n.bridgeUrl({props:G}):n.bridgeUrl;if(!qe)throw new Error("Bridge needed to render "+tt);var Rt=Lt(qe);return Qt.linkUrl(vt,Be),Qt.openBridge(Kn(qe),Rt)}})}(K,Q,B)}),eu=Aa.then(function(){return p.try(function(){var K=G.timeout;if(K)return L.timeout(K,new Error("Loading component timed out after "+K+" milliseconds"))})}),tu=L.then(function(){return kt=!0,$.trigger(De.RENDERED)});return p.hash({initPromise:L,buildUrlPromise:ht,onRenderPromise:Le,getProxyContainerPromise:ye,openFramePromise:pe,openPrerenderFramePromise:ke,renderContainerPromise:ut,openPromise:rt,openPrerenderPromise:wr,setStatePromise:Tt,prerenderPromise:Wt,loadUrlPromise:Aa,buildWindowNamePromise:Qe,setWindowNamePromise:Na,watchForClosePromise:Xc,onDisplayPromise:Qc,openBridgePromise:kc,runTimeoutPromise:eu,onRenderedPromise:tu,delegatePromise:Se,watchForUnloadPromise:Ce,finalSetPropsPromise:_e})}).catch(function(Q){return p.all([Xr(Q),Zr(Q)]).then(function(){throw Q},function(){throw Q})}).then(Ie)},destroy:Zr,getProps:function(){return G},setProps:So,export:Oa,getHelpers:Ca,getDelegateOverrides:function(){return p.try(function(){return{getProxyContainer:_a,show:It,hide:Ht,renderContainer:Da,getProxyWindow:Pt,watchForUnload:Ta,openFrame:lt,openPrerenderFrame:Gr,prerender:Ia,open:Pa,openPrerender:Jr,setProxyWin:ft}})},getExports:function(){return A({getExports:function(){return Sa}})}}}var Lc={register:function(e,r,n,i){var a=i.React,u=i.ReactDOM;return function(d){R(h,d);function h(){return d.apply(this,arguments)||this}var l=h.prototype;return l.render=function(){return a.createElement("div",null)},l.componentDidMount=function(){var g=u.findDOMNode(this),P=n(Or({},this.props));P.render(g,We.IFRAME),this.setState({parent:P})},l.componentDidUpdate=function(){this.state&&this.state.parent&&this.state.parent.updateProps(Or({},this.props)).catch(Ie)},h}(a.Component)}},jc={register:function(e,r,n,i){return i.component(e,{render:function(a){return a("div")},inheritAttrs:!1,mounted:function(){var a=this.$el;this.parent=n(m({},(u=this.$attrs,Object.keys(u).reduce(function(d,h){var l=u[h];return h==="style-object"||h==="styleObject"?(d.style=l,d.styleObject=l):h.includes("-")?d[eo(h)]=l:d[h]=l,d},{}))));var u;this.parent.render(a,We.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(m({},this.$attrs)).catch(Ie)},deep:!0}}})}},Bc={register:function(e,r,n){return{template:"<div></div>",inheritAttrs:!1,mounted:function(){var i=this.$el;this.parent=n(m({},(a=this.$attrs,Object.keys(a).reduce(function(u,d){var h=a[d];return d==="style-object"||d==="styleObject"?(u.style=h,u.styleObject=h):d.includes("-")?u[eo(d)]=h:u[d]=h,u},{}))));var a;this.parent.render(i,We.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(m({},this.$attrs)).catch(Ie)},deep:!0}}}}},qc={register:function(e,r,n,i){return i.module(e,[]).directive(eo(e),function(){for(var a={},u=0,d=Object.keys(r);u<d.length;u++)a[d[u]]="=";return a.props="=",{scope:a,restrict:"E",controller:["$scope","$element",function(h,l){function g(){if(h.$root.$$phase!=="$apply"&&h.$root.$$phase!=="$digest")try{h.$apply()}catch{}}var P=function(){return wn(h.props,function(w){return typeof w=="function"?function(){var E=w.apply(this,arguments);return g(),E}:w})},y=n(P());y.render(l[0],We.IFRAME),h.$watch(function(){y.updateProps(P()).catch(Ie)})}]}})}},Hc={register:function(e,r,n,i){var a=i.Component,u=i.NgModule,d=i.ElementRef,h=i.NgZone,l=i.Inject,g=function(){function y(E,T){this.elementRef=void 0,this.internalProps=void 0,this.parent=void 0,this.props=void 0,this.zone=void 0,this._props=void 0,this._props={},this.elementRef=E,this.zone=T}var w=y.prototype;return w.getProps=function(){var E=this;return wn(m({},this.internalProps,this.props),function(T){if(typeof T=="function"){var S=E.zone;return function(){var O=arguments,A=this;return S.run(function(){return T.apply(A,O)})}}return T})},w.ngOnInit=function(){var E=this.elementRef.nativeElement;this.parent=n(this.getProps()),this.parent.render(E,We.IFRAME)},w.ngDoCheck=function(){this.parent&&!function(E,T){var S={};for(var O in E)if(E.hasOwnProperty(O)&&(S[O]=!0,E[O]!==T[O]))return!1;for(var A in T)if(!S[A])return!1;return!0}(this._props,this.props)&&(this._props=m({},this.props),this.parent.updateProps(this.getProps()))},y}();g.annotations=void 0,g.parameters=void 0,g.parameters=[[new l(d)],[new l(h)]],g.annotations=[new a({selector:e,template:"<div></div>",inputs:["props"]})];var P=function(){};return P.annotations=void 0,P.annotations=[new u({declarations:[g],exports:[g]})],P}};function $c(e){var r=e.uid,n=e.frame,i=e.prerenderFrame,a=e.doc,u=e.props,d=e.event,h=e.dimensions,l=h.width,g=h.height;if(n&&i){var P=a.createElement("div");P.setAttribute("id",r);var y=a.createElement("style");return u.cspNonce&&y.setAttribute("nonce",u.cspNonce),y.appendChild(a.createTextNode(`
            #`+r+` {
                display: inline-block;
                position: relative;
                width: `+l+`;
                height: `+g+`;
            }

            #`+r+` > iframe {
                display: inline-block;
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                transition: opacity .2s ease-in-out;
            }

            #`+r+` > iframe.zoid-invisible {
                opacity: 0;
            }

            #`+r+` > iframe.zoid-visible {
                opacity: 1;
        }
        `)),P.appendChild(n),P.appendChild(i),P.appendChild(y),i.classList.add("zoid-visible"),n.classList.add("zoid-invisible"),d.on(De.RENDERED,function(){i.classList.remove("zoid-visible"),i.classList.add("zoid-invisible"),n.classList.remove("zoid-invisible"),n.classList.add("zoid-visible"),setTimeout(function(){qr(i)},1)}),d.on(De.RESIZE,function(w){var E=w.width,T=w.height;typeof E=="number"&&(P.style.width=Li(E)),typeof T=="number"&&(P.style.height=Li(T))}),P}}function Vc(e){var r=e.doc,n=e.props,i=r.createElement("html"),a=r.createElement("body"),u=r.createElement("style"),d=r.createElement("div");return d.classList.add("spinner"),n.cspNonce&&u.setAttribute("nonce",n.cspNonce),i.appendChild(a),a.appendChild(d),a.appendChild(u),u.appendChild(r.createTextNode(`
            html, body {
                width: 100%;
                height: 100%;
            }

            .spinner {
                position: fixed;
                max-height: 60vmin;
                max-width: 60vmin;
                height: 40px;
                width: 40px;
                top: 50%;
                left: 50%;
                box-sizing: border-box;
                border: 3px solid rgba(0, 0, 0, .2);
                border-top-color: rgba(33, 128, 192, 0.8);
                border-radius: 100%;
                animation: rotation .7s infinite linear;
            }

            @keyframes rotation {
                from {
                    transform: translateX(-50%) translateY(-50%) rotate(0deg);
                }
                to {
                    transform: translateX(-50%) translateY(-50%) rotate(359deg);
                }
            }
        `)),i}var To=mn(),Ro=mn();function Gc(e){var r=function(T){var S=T.tag,O=T.url,A=T.domain,L=T.bridgeUrl,J=T.props,W=J===void 0?{}:J,V=T.dimensions,j=V===void 0?{}:V,te=T.autoResize,$=te===void 0?{}:te,he=T.allowedParentDomains,se=he===void 0?"*":he,X=T.attributes,G=X===void 0?{}:X,le=T.defaultContext,re=le===void 0?We.IFRAME:le,Me=T.containerTemplate,At=Me===void 0?$c:Me,Et=T.prerenderTemplate,kt=Et===void 0?Vc:Et,er=T.validate,qt=T.eligible,tr=qt===void 0?function(){return{eligible:!0}}:qt,rr=T.logger,fr=rr===void 0?{info:Ie}:rr,nr=T.exports,xt=nr===void 0?Ie:nr,lr=T.method,or=T.children,ir=or===void 0?function(){return{}}:or,hr=S.replace(/-/g,"_"),pr=m({},{window:{type:be.OBJECT,sendToChild:!1,required:!1,allowDelegate:!0,validate:function(ce){var bt=ce.value;if(!cr(bt)&&!yt.isProxyWindow(bt))throw new Error("Expected Window or ProxyWindow");if(cr(bt)){if(ze(bt))throw new Error("Window is closed");if(!U(bt))throw new Error("Window is not same domain")}},decorate:function(ce){return $r(ce.value)}},timeout:{type:be.NUMBER,required:!1,sendToChild:!1},cspNonce:{type:be.STRING,required:!1},onDisplay:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Bt,decorate:dr},onRendered:{type:be.FUNCTION,required:!1,sendToChild:!1,default:Bt,decorate:dr},onRender:{type:be.FUNCTION,required:!1,sendToChild:!1,default:Bt,decorate:dr},onPrerendered:{type:be.FUNCTION,required:!1,sendToChild:!1,default:Bt,decorate:dr},onPrerender:{type:be.FUNCTION,required:!1,sendToChild:!1,default:Bt,decorate:dr},onClose:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Bt,decorate:dr},onDestroy:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Bt,decorate:dr},onResize:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Bt},onFocus:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Bt},close:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.close}},focus:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.focus}},resize:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.resize}},uid:{type:be.STRING,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.uid}},tag:{type:be.STRING,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.tag}},getParent:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.getParent}},getParentDomain:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.getParentDomain}},show:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.show}},hide:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.hide}},export:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.export}},onError:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.onError}},onProps:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.onProps}},getSiblings:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ce){return ce.getSiblings}}},W);if(!At)throw new Error("Container template required");return{name:hr,tag:S,url:O,domain:A,bridgeUrl:L,method:lr,propsDef:pr,dimensions:j,autoResize:$,allowedParentDomains:se,attributes:G,defaultContext:re,containerTemplate:At,prerenderTemplate:kt,validate:er,logger:fr,eligible:tr,children:ir,exports:typeof xt=="function"?xt:function(ce){for(var bt=ce.getExports,fe={},Ye=function(){var Ne=Ze[Ue],ct=xt[Ne].type,He=bt().then(function($e){return $e[Ne]});fe[Ne]=ct===be.FUNCTION?function(){for(var $e=arguments.length,Pt=new Array($e),ft=0;ft<$e;ft++)Pt[ft]=arguments[ft];return He.then(function(It){return It.apply(void 0,Pt)})}:He},Ue=0,Ze=Object.keys(xt);Ue<Ze.length;Ue++)Ye();return fe}}}(e),n=r.name,i=r.tag,a=r.defaultContext,u=r.propsDef,d=r.eligible,h=r.children,l=Vr(window),g={},P=[],y=function(){if(function(S){try{return bo(window.name).name===S}catch{}return!1}(n)){var T=va().payload;if(T.tag===i&&wt(T.childDomainMatch,ie()))return!0}return!1},w=Zt(function(){if(y()){if(window.xprops)throw delete l.components[i],new Error("Can not register "+n+" as child - child already registered");var T=function(S){var O=S.tag,A=S.propsDef,L=S.autoResize,J=S.allowedParentDomains,W=[],V=va(),j=V.parent,te=V.payload,$=j.win,he=j.domain,se,X=new p,G=te.version,le=te.uid,re=te.exports,Me=te.context,At=te.props;if(!function(fe,Ye){if(!/_/.test(fe)||!/_/.test("10_3_3"))throw new Error("Versions are in an invalid format ("+fe+", 10_3_3)");return fe.split("_")[0]==="10_3_3".split("_")[0]}(G))throw new Error("Parent window has zoid version "+G+", child window has version 10_3_3");var Et=re.show,kt=re.hide,er=re.close,qt=re.onError,tr=re.checkClose,rr=re.export,fr=re.resize,nr=re.init,xt=function(){return $},lr=function(){return he},or=function(fe){return W.push(fe),{cancel:function(){W.splice(W.indexOf(fe),1)}}},ir=function(fe){return fr.fireAndForget({width:fe.width,height:fe.height})},hr=function(fe){return X.resolve(fe),rr(fe)},pr=function(fe){var Ye=(fe===void 0?{}:fe).anyParent,Ue=[],Ze=se.parent;if(Ye===void 0&&(Ye=!Ze),!Ye&&!Ze)throw new Error("No parent found for "+O+" child");for(var Ne=0,ct=Ke(window);Ne<ct.length;Ne++){var He=ct[Ne];if(U(He)){var $e=z(He).xprops;if($e&&xt()===$e.getParent()){var Pt=$e.parent;if(Ye||!Ze||Pt&&Pt.uid===Ze.uid){var ft=fa(He,function(It){return It.exports});Ue.push({props:$e,exports:ft})}}}}return Ue},ce=function(fe,Ye,Ue){Ue===void 0&&(Ue=!1);var Ze=function(ct,He,$e,Pt,ft,It){It===void 0&&(It=!1);for(var Ht={},Ir=0,Dr=Object.keys($e);Ir<Dr.length;Ir++){var vr=Dr[Ir],lt=He[vr],Gr=lt&&lt.trustedDomains&&lt.trustedDomains.length>0?lt.trustedDomains.reduce(function(xn,Yr){return xn||wt(Yr,ie(window))},!1):Pt===ie(window)||U(ct);if((!lt||!lt.sameDomain||Gr)&&(!lt||!lt.trustedDomains||Gr)){var Jr=wa(He,0,vr,$e[vr],ft);Ht[vr]=Jr,lt&&lt.alias&&!Ht[lt.alias]&&(Ht[lt.alias]=Jr)}}if(!It)for(var Cr=0,On=Object.keys(He);Cr<On.length;Cr++){var Kr=On[Cr];$e.hasOwnProperty(Kr)||(Ht[Kr]=wa(He,0,Kr,void 0,ft))}return Ht}($,A,fe,Ye,{tag:O,show:Et,hide:kt,close:er,focus:Uc,onError:qt,resize:ir,getSiblings:pr,onProps:or,getParent:xt,getParentDomain:lr,uid:le,export:hr},Ue);se?Or(se,Ze):se=Ze;for(var Ne=0;Ne<W.length;Ne++)(0,W[Ne])(se)},bt=function(fe){return p.try(function(){return ce(fe,he,!0)})};return{init:function(){return p.try(function(){var fe="";return U($)&&(fe=function(Ye){var Ue=Ye.componentName,Ze=Ye.parentComponentWindow,Ne=ha({data:bo(window.name).serializedInitialPayload,sender:{win:Ze},basic:!0}),ct=Ne.sender;if(Ne.reference.type==="uid"||Ne.metaData.windowRef.type==="global"){var He=pa({name:Ue,serializedPayload:la({data:Ne.data,metaData:{windowRef:zc(Ze)},sender:{domain:ct.domain},receiver:{win:window,domain:ie()},basic:!0}).serializedData});return window.name=He,He}}({componentName:S.name,parentComponentWindow:$})||""),Vr(window).exports=S.exports({getExports:function(){return X}}),function(Ye,Ue){if(!wt(Ye,Ue))throw new Error("Can not be rendered by domain: "+Ue)}(J,he),Gi($),function(){window.addEventListener("beforeunload",function(){tr.fireAndForget()}),window.addEventListener("unload",function(){tr.fireAndForget()}),mi($,function(){ma()})}(),nr({name:fe,updateProps:bt,close:ma})}).then(function(){return(fe=L.width,Ye=fe!==void 0&&fe,Ue=L.height,Ze=Ue!==void 0&&Ue,Ne=L.element,_i(Ne===void 0?"body":Ne).catch(Ie).then(function(ct){return{width:Ye,height:Ze,element:ct}})).then(function(ct){var He=ct.width,$e=ct.height,Pt=ct.element;Pt&&(He||$e)&&Me!==We.POPUP&&Fi(Pt,function(ft){ir({width:He?ft.width:void 0,height:$e?ft.height:void 0})},{width:He,height:$e})});var fe,Ye,Ue,Ze,Ne}).catch(function(fe){qt(fe)})},getProps:function(){return se||(ce(At,he),se)}}}(r);return T.init(),T}}),E=function T(S){var O,A="zoid-"+i+"-"+st(),L=S||{},J=d({props:L}),W=J.eligible,V=J.reason,j=L.onDestroy;L.onDestroy=function(){if(O&&W&&P.splice(P.indexOf(O),1),j)return j.apply(void 0,arguments)};var te=ya({uid:A,options:r});te.init(),W?te.setProps(L):L.onDestroy&&L.onDestroy(),To.register(function(se){return te.destroy(se||new Error("zoid destroyed all components"))});var $=function(se){var X=(se===void 0?{}:se).decorate;return T((X===void 0?Tc:X)(L))},he=function(se,X,G){return p.try(function(){if(!W){var le=new Error(V||n+" component is not eligible");return te.destroy(le).then(function(){throw le})}if(!cr(se))throw new Error("Must pass window to renderTo");return function(re,Me){return p.try(function(){if(re.window)return $r(re.window).getType();if(Me){if(Me!==We.IFRAME&&Me!==We.POPUP)throw new Error("Unrecognized context: "+Me);return Me}return a})}(L,G)}).then(function(le){if(X=function(re,Me){if(Me){if(typeof Me!="string"&&!Yn(Me))throw new TypeError("Expected string or element selector to be passed");return Me}if(re===We.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(le,X),se!==window&&typeof X!="string")throw new Error("Must pass string element when rendering to another window");return te.render({target:se,container:X,context:le,rerender:function(){var re=$();return Or(O,re),re.renderTo(se,X,G)}})}).catch(function(le){return te.destroy(le).then(function(){throw le})})};return O=m({},te.getExports(),te.getHelpers(),function(){for(var se=h(),X={},G=function(){var Me=re[le],At=se[Me];X[Me]=function(Et){var kt=te.getProps(),er=m({},Et,{parent:{uid:A,props:kt,export:te.export}});return At(er)}},le=0,re=Object.keys(se);le<re.length;le++)G();return X}(),{isEligible:function(){return W},clone:$,render:function(se,X){return he(window,se,X)},renderTo:function(se,X,G){return he(se,X,G)}}),W&&P.push(O),O};if(w(),function(){var T=jt("zoid_allow_delegate_"+n,function(){return!0}),S=jt("zoid_delegate_"+n,function(O){var A=O.data;return{parent:ya({uid:A.uid,options:r,overrides:A.overrides,parentWin:O.source})}});Ro.register(T.cancel),Ro.register(S.cancel)}(),l.components=l.components||{},l.components[i])throw new Error("Can not register multiple components with the same tag: "+i);return l.components[i]=!0,{init:E,instances:P,driver:function(T,S){var O={react:Lc,angular:qc,vue:jc,vue3:Bc,angular2:Hc};if(!O[T])throw new Error("Could not find driver for framework: "+T);return g[T]||(g[T]=O[T].register(i,u,E,S)),g[T]},isChild:y,canRenderTo:function(T){return Ot(T,"zoid_allow_delegate_"+n).then(function(S){return S.data}).catch(function(){return!1})},registerChild:w}}var Jc=function(e){(function(){Nt().initialized||(Nt().initialized=!0,u=(a={on:jt,send:Ot}).on,d=a.send,(h=Nt()).receiveMessage=h.receiveMessage||function(l){return yo(l,{on:u,send:d})},function(l){var g=l.on,P=l.send;ge().getOrSet("postMessageListener",function(){return Wi(window,"message",function(y){(function(w,E){var T=E.on,S=E.send;p.try(function(){var O=w.source||w.sourceElement,A=w.origin||w.originalEvent&&w.originalEvent.origin,L=w.data;if(A==="null"&&(A="file://"),O){if(!A)throw new Error("Post message did not have origin domain");yo({source:O,origin:A,data:L},{on:T,send:S})}})})(y,{on:g,send:P})})})}({on:jt,send:Ot}),ea({on:jt,send:Ot,receiveMessage:yo}),function(l){var g=l.on,P=l.send;ge("builtinListeners").getOrSet("helloListener",function(){var y=g("postrobot_hello",{domain:"*"},function(E){return Hi(E.source,{domain:E.origin}),{instanceID:qi()}}),w=Yt();return w&&uo(w,{send:P}).catch(function(E){}),y})}({on:jt,send:Ot}));var a,u,d,h})();var r=Gc(e),n=function(a){return r.init(a)};n.driver=function(a,u){return r.driver(a,u)},n.isChild=function(){return r.isChild()},n.canRenderTo=function(a){return r.canRenderTo(a)},n.instances=r.instances;var i=r.registerChild();return i&&(window.xprops=n.xprops=i.getProps()),n};function Ea(e){Qt&&Qt.destroyBridges();var r=To.all(e);return To=mn(),r}var ba=Ea;function Kc(e){return ba(),delete window.__zoid_10_3_3__,function(){(function(){for(var n=ge("responseListeners"),i=0,a=n.keys();i<a.length;i++){var u=a[i],d=n.get(u);d&&(d.cancelled=!0),n.del(u)}})(),(r=ge().get("postMessageListener"))&&r.cancel();var r;delete window.__post_robot_11_0_0__}(),Ro.all(e)}}])})})(ui);var di=ui.exports;const fi=di.EVENT,Rr={VISIBLE:"zoid-visible",INVISIBLE:"zoid-invisible"};function Zs({uid:t,frame:o,prerenderFrame:s,doc:c,props:f,event:v,dimensions:R}){const{width:m,height:I}=R,{top:C=0,left:b=0}=f;if(!o||!s)return;const _=c.createElement("div");_.setAttribute("id",t);const F=c.createElement("style");return f.cspNonce&&F.setAttribute("nonce",f.cspNonce),F.appendChild(c.createTextNode(`
          #${t} {
              display: inline-block;
              position: absolute;
              width: ${m};
              height: ${I};
              z-index: 1049;
              border: none;
              top: ${C}px;
              left: ${b}px;
              overflow: hidden;
          }

          #${t} > iframe {
              display: inline-block;
              position: absolute;
              width: 100%;
              height: 100%;
              top: 0;
              left: 0;
              transition: opacity .2s ease-in-out;
              border: none;
              background-color: transparent;
              overflow: hidden;
          }

          #${t} > iframe.${Rr.INVISIBLE} {
              opacity: 0;
          }

          #${t} > iframe.${Rr.VISIBLE} {
              opacity: 1;
        }
      `)),_.appendChild(o),_.appendChild(s),_.appendChild(F),s.classList.add(Rr.INVISIBLE),o.classList.add(Rr.INVISIBLE),v.on(fi.RENDERED,()=>{setTimeout(()=>{o.classList.remove(Rr.INVISIBLE),o.classList.add(Rr.VISIBLE)},100),setTimeout(()=>{s.remove()},1)}),v.on(fi.RESIZE,({width:de,height:ae})=>{typeof de=="number"&&(_.style.width=`${de}px`),typeof ae=="number"&&(_.style.height=`${ae}px`)}),_}function Xs(t){return di.create({dimensions:{width:"100%",height:"100%"},tag:`wta${t}`,url:({props:o})=>o.appConfig.sdkBaseUrl,props:{appConfig:{type:"object",required:!0},icons:{type:"array",required:!0}},containerTemplate:Zs})}function Qs(t){return Xs(t.id)(t)}class ks extends Error{constructor(o,s){super(o,s),this.name="FetchError",s!=null&&s.cause&&!this.cause&&(this.cause=s.cause)}}function ec(t){var I,C,b,_,F;const o=((I=t.error)==null?void 0:I.message)||((C=t.error)==null?void 0:C.toString())||"",s=((b=t.request)==null?void 0:b.method)||((_=t.options)==null?void 0:_.method)||"GET",c=((F=t.request)==null?void 0:F.url)||String(t.request)||"/",f=`[${s}] ${JSON.stringify(c)}`,v=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",R=`${f}: ${v}${o?` ${o}`:""}`,m=new ks(R,t.error?{cause:t.error}:void 0);for(const de of["request","options","response"])Object.defineProperty(m,de,{get(){return t[de]}});for(const[de,ae]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(m,de,{get(){return t.response&&t.response[ae]}});return m}const tc=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function li(t="GET"){return tc.has(t.toUpperCase())}function rc(t){if(t===void 0)return!1;const o=typeof t;return o==="string"||o==="number"||o==="boolean"||o===null?!0:o!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const nc=new Set(["image/svg","application/xml","application/xhtml","application/html"]),oc=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function ic(t=""){if(!t)return"json";const o=t.split(";").shift()||"";return oc.test(o)?"json":nc.has(o)||o.startsWith("text/")?"text":"blob"}function ac(t,o,s=globalThis.Headers){const c={...o,...t};if(o!=null&&o.params&&(t!=null&&t.params)&&(c.params={...o==null?void 0:o.params,...t==null?void 0:t.params}),o!=null&&o.query&&(t!=null&&t.query)&&(c.query={...o==null?void 0:o.query,...t==null?void 0:t.query}),o!=null&&o.headers&&(t!=null&&t.headers)){c.headers=new s((o==null?void 0:o.headers)||{});for(const[f,v]of new s((t==null?void 0:t.headers)||{}))c.headers.set(f,v)}return c}const sc=new Set([408,409,425,429,500,502,503,504]),cc=new Set([101,204,205,304]);function hi(t={}){const{fetch:o=globalThis.fetch,Headers:s=globalThis.Headers,AbortController:c=globalThis.AbortController}=t;async function f(m){const I=m.error&&m.error.name==="AbortError"&&!m.options.timeout||!1;if(m.options.retry!==!1&&!I){let b;typeof m.options.retry=="number"?b=m.options.retry:b=li(m.options.method)?0:1;const _=m.response&&m.response.status||500;if(b>0&&(Array.isArray(m.options.retryStatusCodes)?m.options.retryStatusCodes.includes(_):sc.has(_))){const F=m.options.retryDelay||0;return F>0&&await new Promise(de=>setTimeout(de,F)),v(m.request,{...m.options,retry:b-1})}}const C=ec(m);throw Error.captureStackTrace&&Error.captureStackTrace(C,v),C}const v=async function(I,C={}){var de;const b={request:I,options:ac(C,t.defaults,s),response:void 0,error:void 0};b.options.method=(de=b.options.method)==null?void 0:de.toUpperCase(),b.options.onRequest&&await b.options.onRequest(b),typeof b.request=="string"&&(b.options.baseURL&&(b.request=ka(b.request,b.options.baseURL)),(b.options.query||b.options.params)&&(b.request=Qr(b.request,{...b.options.params,...b.options.query}))),b.options.body&&li(b.options.method)&&(rc(b.options.body)?(b.options.body=typeof b.options.body=="string"?b.options.body:JSON.stringify(b.options.body),b.options.headers=new s(b.options.headers||{}),b.options.headers.has("content-type")||b.options.headers.set("content-type","application/json"),b.options.headers.has("accept")||b.options.headers.set("accept","application/json")):("pipeTo"in b.options.body&&typeof b.options.body.pipeTo=="function"||typeof b.options.body.pipe=="function")&&("duplex"in b.options||(b.options.duplex="half")));let _;if(!b.options.signal&&b.options.timeout){const ae=new c;_=setTimeout(()=>ae.abort(),b.options.timeout),b.options.signal=ae.signal}try{b.response=await o(b.request,b.options)}catch(ae){return b.error=ae,b.options.onRequestError&&await b.options.onRequestError(b),await f(b)}finally{_&&clearTimeout(_)}if(b.response.body&&!cc.has(b.response.status)&&b.options.method!=="HEAD"){const ae=(b.options.parseResponse?"json":b.options.responseType)||ic(b.response.headers.get("content-type")||"");switch(ae){case"json":{const Je=await b.response.text(),p=b.options.parseResponse||ci;b.response._data=p(Je);break}case"stream":{b.response._data=b.response.body;break}default:b.response._data=await b.response[ae]()}}return b.options.onResponse&&await b.options.onResponse(b),!b.options.ignoreResponseError&&b.response.status>=400&&b.response.status<600?(b.options.onResponseError&&await b.options.onResponseError(b),await f(b)):b.response},R=async function(I,C){return(await v(I,C))._data};return R.raw=v,R.native=(...m)=>o(...m),R.create=(m={})=>hi({...t,defaults:{...t.defaults,...m}}),R}const Gn=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),uc=Gn.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),dc=Gn.Headers,fc=Gn.AbortController,lc=hi({fetch:uc,Headers:dc,AbortController:fc}).create({credentials:"omit",onResponseError({response:t,error:o}){console.log("[LOG] ~ error:",o)},onRequest:({options:t,request:o})=>{const s=t.token;s&&(t.headers=t.headers||{},t.headers.Authorization=`${s}`)},onResponse({response:t,options:o}){}});function hc(){var t=t||window;const o=new TextEncoder("utf-8"),s=new TextDecoder("utf-8");let c=new DataView(new ArrayBuffer(8));var f=[];class v{constructor(){this._callbackTimeouts=new Map,this._nextCallbackTimeoutID=1;const m=()=>new DataView(this._inst.exports.memory.buffer),I=p=>{c.setBigInt64(0,p,!0);const N=c.getFloat64(0,!0);if(N===0)return;if(!isNaN(N))return N;const q=0xffffffffn&p;return this._values[q]},C=p=>{let N=m().getBigUint64(p,!0);return I(N)},b=p=>{const N=0x7ff80000n;if(typeof p=="number")return isNaN(p)?N<<32n:p===0?N<<32n|1n:(c.setFloat64(0,p,!0),c.getBigInt64(0,!0));switch(p){case void 0:return 0n;case null:return N<<32n|2n;case!0:return N<<32n|3n;case!1:return N<<32n|4n}let q=this._ids.get(p);q===void 0&&(q=this._idPool.pop(),q===void 0&&(q=BigInt(this._values.length)),this._values[q]=p,this._goRefCounts[q]=0,this._ids.set(p,q)),this._goRefCounts[q]++;let Y=1n;switch(typeof p){case"string":Y=2n;break;case"symbol":Y=3n;break;case"function":Y=4n}return q|(N|Y)<<32n},_=(p,N)=>{let q=b(N);m().setBigUint64(p,q,!0)},F=(p,N,q)=>new Uint8Array(this._inst.exports.memory.buffer,p,N),de=(p,N,q)=>{const Y=new Array(N);for(let Ee=0;Ee<N;Ee++)Y[Ee]=C(p+8*Ee);return Y},ae=(p,N)=>s.decode(new DataView(this._inst.exports.memory.buffer,p,N)),Je=Date.now()-performance.now();this.importObject={wasi_snapshot_preview1:{fd_write:function(p,N,q,Y){let Ee=0;if(p==1)for(let Oe=0;Oe<q;Oe++){let Fe=N+8*Oe,ve=m().getUint32(Fe+0,!0),Ae=m().getUint32(Fe+4,!0);Ee+=Ae;for(let Z=0;Z<Ae;Z++){let Pe=m().getUint8(ve+Z);if(Pe!=13)if(Pe==10){let ie=s.decode(new Uint8Array(f));f=[],console.log(ie)}else f.push(Pe)}}else console.error("invalid file descriptor:",p);return m().setUint32(Y,Ee,!0),0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit:p=>{if(!t.process)throw"trying to exit with code "+p;process.exit(p)},random_get:(p,N)=>(crypto.getRandomValues(F(p,N)),0)},gojs:{"runtime.ticks":()=>Je+performance.now(),"runtime.sleepTicks":p=>{setTimeout(this._inst.exports.go_scheduler,p)},"syscall/js.finalizeRef":p=>{const N=m().getUint32(I(p),!0);if(this._goRefCounts[N]--,this._goRefCounts[N]===0){const q=this._values[N];this._values[N]=null,this._ids.delete(q),this._idPool.push(N)}},"syscall/js.stringVal":(p,N)=>{const q=ae(p,N);return b(q)},"syscall/js.valueGet":(p,N,q)=>{let Y=ae(N,q),Ee=I(p),Oe=Reflect.get(Ee,Y);return b(Oe)},"syscall/js.valueSet":(p,N,q,Y)=>{const Ee=I(p),Oe=ae(N,q),Fe=I(Y);Reflect.set(Ee,Oe,Fe)},"syscall/js.valueDelete":(p,N,q)=>{const Y=I(p),Ee=ae(N,q);Reflect.deleteProperty(Y,Ee)},"syscall/js.valueIndex":(p,N)=>b(Reflect.get(I(p),N)),"syscall/js.valueSetIndex":(p,N,q)=>{Reflect.set(I(p),N,I(q))},"syscall/js.valueCall":(p,N,q,Y,Ee,Oe,Fe)=>{const ve=I(N),Ae=ae(q,Y),Z=de(Ee,Oe);try{const Pe=Reflect.get(ve,Ae);_(p,Reflect.apply(Pe,ve,Z)),m().setUint8(p+8,1)}catch(Pe){_(p,Pe),m().setUint8(p+8,0)}},"syscall/js.valueInvoke":(p,N,q,Y,Ee)=>{try{const Oe=I(N),Fe=de(q,Y);_(p,Reflect.apply(Oe,void 0,Fe)),m().setUint8(p+8,1)}catch(Oe){_(p,Oe),m().setUint8(p+8,0)}},"syscall/js.valueNew":(p,N,q,Y,Ee)=>{const Oe=I(N),Fe=de(q,Y);try{_(p,Reflect.construct(Oe,Fe)),m().setUint8(p+8,1)}catch(ve){_(p,ve),m().setUint8(p+8,0)}},"syscall/js.valueLength":p=>I(p).length,"syscall/js.valuePrepareString":(p,N)=>{const q=String(I(N)),Y=o.encode(q);_(p,Y),m().setInt32(p+8,Y.length,!0)},"syscall/js.valueLoadString":(p,N,q,Y)=>{const Ee=I(p);F(N,q).set(Ee)},"syscall/js.valueInstanceOf":(p,N)=>I(p)instanceof I(N),"syscall/js.copyBytesToGo":(p,N,q,Y,Ee)=>{let Oe=p,Fe=p+4;const ve=F(N,q),Ae=I(Ee);if(!(Ae instanceof Uint8Array||Ae instanceof Uint8ClampedArray))return void m().setUint8(Fe,0);const Z=Ae.subarray(0,ve.length);ve.set(Z),m().setUint32(Oe,Z.length,!0),m().setUint8(Fe,1)},"syscall/js.copyBytesToJS":(p,N,q,Y,Ee)=>{let Oe=p,Fe=p+4;const ve=I(N),Ae=F(q,Y);if(!(ve instanceof Uint8Array||ve instanceof Uint8ClampedArray))return void m().setUint8(Fe,0);const Z=Ae.subarray(0,ve.length);ve.set(Z),m().setUint32(Oe,Z.length,!0),m().setUint8(Fe,1)}}},this.importObject.env=this.importObject.gojs}async run(m){for(this._inst=m,this._values=[NaN,0,null,!0,!1,t,this],this._goRefCounts=[],this._ids=new Map,this._idPool=[],this.exited=!1;;){const I=new Promise(C=>{this._resolveCallbackPromise=()=>{if(this.exited)throw new Error("bad callback: Go program has already exited");setTimeout(C,0)}});if(this._inst.exports._start(),this.exited)break;await I}}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(m){const I=this;return function(){const C={id:m,this:this,args:arguments};return I._pendingEvent=C,I._resume(),C.result}}}return new v}class pc{constructor(){Dt(this,"data");Dt(this,"mutex");this.mutex=new pi,this.data=""}async loadSource(o){await this.mutex.acquire();try{this.data&&(o.session=this.data);const s=JSON.stringify(o);for(let c=1;c<=3;c++)try{const f=await Fr.getInstance({}),{manifest:v,err:R,session:m}=await f.loadSource(s);if(R)throw new Error(R);return this.data=m,v}catch(f){if(console.log(`Attempt ${c} failed:`,f,s),c===3)throw console.log("session:",this.data),f}}finally{this.mutex.release()}return null}async getEventTracking(){return await(await Fr.getInstance({})).getEventTracking(this.data)}async acquire(){return new Promise(o=>{this._locked?this._queue.push(o):(this._locked=!0,o())})}release(){if(this._queue.length>0){const o=this._queue.shift();o&&o()}else this._locked=!1}}class pi{constructor(){Dt(this,"_queue");Dt(this,"_locked");this._queue=[],this._locked=!1}async acquire(){return new Promise(o=>{this._locked?this._queue.push(o):(this._locked=!0,o())})}release(){if(this._queue.length>0){const o=this._queue.shift();o&&o()}else this._locked=!1}}const Ut=class Ut{constructor(o){Dt(this,"mutex");Dt(this,"instanceExpiration");Dt(this,"wasm");Dt(this,"uri");Dt(this,"go");var s;this.uri=o,o||(this.uri=(s=window==null?void 0:window.sigmaCSPMEnv)==null?void 0:s.WASM_URL),this.instanceExpiration=Date.now()+1e3,this.mutex=new pi}static async getInstance(o){if(!Ut.instance)Ut.instance=new Ut(o.uri),Ut.instance.initializeInstance(1e3);else if(!Ut.instance)throw new Error("Manager not initialized");return Ut.instance}async useInstance(o){await this.initializeInstance(1e3),await this.mutex.acquire();try{if(this.wasm)return await o()}finally{this.mutex.release()}}async initializeInstance(o,s){await this.mutex.acquire();try{if(this.isExpired()||s||!this.wasm){if(this.instanceExpiration=Date.now()+o,!this.wasm){const v=await fetch(this.uri);this.wasm=await v.arrayBuffer()}window.loadSource!==null&&(window.loadSource=null),window.getEventTracking=null,this.go&&(this.go=null);const c=hc();this.instanceExpiration=Date.now()+1e3;const f=await WebAssembly.instantiate(this.wasm,c.importObject);c.run(f.instance),this.go=c}}finally{this.mutex.release()}}async loadSource(o){return await this.useInstance(async()=>{try{return await window.loadSource(o)}catch(c){return{err:c}}})}async getEventTracking(o){const s=await this.useInstance(async()=>{try{return await window.getEventTracking(o)}catch(c){throw console.log("Error",c),c}});return{avails:JSON.parse(s.avails)}}isExpired(){return Date.now()>this.instanceExpiration}createSession(){return new pc}};Dt(Ut,"instance");let Fr=Ut;function vi(t,o,s){var R;const c=o==null?void 0:o.find(m=>(m==null?void 0:m.id)==(t==null?void 0:t.availId)),v=((R=c==null?void 0:c.ads)==null?void 0:R.filter(m=>(m==null?void 0:m.id)==(t==null?void 0:t.adsId))).find(m=>m.position===(t==null?void 0:t.position));return v&&(v.availId=c==null?void 0:c.id),s&&(s==null?void 0:s.id)==(v==null?void 0:v.id)&&s.availId==(v==null?void 0:v.availId)?s:v?{...v,impression:!1}:null}const vc=t=>{try{return atob(t)}catch(o){return console.error("Invalid base64 string:",o),null}};function wc(t){const s=new URL(t).hash,c=vc(s.substring(1));if(c)try{return{...JSON.parse(c)}}catch(f){console.error("Invalid JSON string:",f)}return null}function wi({adsUrl:t,sdk:o,loader:s}){return class extends s{constructor(f){super(f)}load(f,v,R){const m=R.onSuccess;R.onSuccess=async(I,C,b)=>{(b.type==="manifest"||b.type==="level"||b.type==="audioTrack")&&(I.data=await this.modifyManifest(I.url,I.data,b.type)),m(I,C,b)},super.load(f,v,R)}async modifyManifest(f,v,R){const m={proxyAds:{uri:t,timeout:2}};try{return await o.loadSource({config:m,manifest:v,masterUri:f})}catch(I){return console.error("[LOG] ~ error:",I),v}}}}function mc({video:t,adContainer:o,startSession:s,sdk:c,domain:f}){const v=Js(),R=zt(!1),m=zt(),I=Math.random().toString(36).slice(6);function C({icons:U}){const z=kr(f,"/build/dist/wta/index.html");return{id:I,appConfig:{sdkBaseUrl:Qr(z||"https://localhost:4222/wta/index.html",{id:I})},icons:U}}if(!!o){const U=Qs(C({icons:[]}));U.render(o),U.hide(),o.style.display="none",ms(()=>{var z;if(m.value){const ue=((z=m.value)==null?void 0:z.icons)||[];o.style.display="block",U.updateProps(C({icons:ue})),U.show()}else o.style.display="none",U.hide()})}const _=zt([]),F=zt(),de=zt([]);async function ae(U){var z;try{const ue=(z=m.value)==null?void 0:z.trackingEvents.find(Te=>Te.eventType===U);if(!ue)return;v.trigger(ue),ue.beaconUrls.map(Te=>Ks(lc(Te,{retry:3,retryDelay:500})))}catch(ue){console.error("[ERROR] ~ error:",ue)}}const Je=new Map;let p,N;function q(U,z,ue){U.addEventListener(z,ue),Je.set(z,ue)}async function Y(U){const z=wc(U);if(z){const{avails:ue}=await c.getEventTracking();m.value=vi(z,ue,m.value),z.events.forEach(Te=>{m.value&&(m.value.impression||(ae("impression"),m.value.impression=!0),ae(Te),Te==="complete"&&(m.value=void 0))})}}function Ee(){return R.value=!1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(U=>{q(t,U,()=>{const z=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;ae(z?"fullscreen":"exitFullscreen")})}),q(t,"pause",()=>ae("pause")),q(t,"play",()=>ae("resume")),q(t,"rewind",()=>ae("rewind")),q(t,"mute",()=>ae("mute")),q(t,"unmute",()=>ae("unmute")),async(U,z)=>{const{tagList:ue,_url:Te}=z.frag;ue.flat().find(xe=>xe==="EXT-X-CUE-OUT-CONT"||xe==="EXT-X-CUE-OUT"||xe==="EXT-X-CUE-IN")&&Y(Te)}}async function Oe(){return c.getEventTracking().then(U=>{for(const z of(U==null?void 0:U.avails)||[])for(const ue of z.ads){const Te=`${z.id}_${ue.id}_${ue.startTimeInSeconds}`;for(const ot of ue.trackingEvents){const xe=`${Te}_${ot.eventType}`;de.value.find(at=>at.key===xe)||de.value.push({...ot,key:xe,ad:{...ue,key:Te},tracked:!1})}}})}function Fe(){return async(U,z)=>{function ue(xe){for(let Ke=0;Ke<xe.length;Ke++)if(xe[Ke]===0)return Ke;return xe.length}const{start:Te,sn:ot}=z.frag;for(let xe=0;xe<z.samples.length;xe++){const Ke=z.samples[xe],at=Ke.data,_t=Ke.pts;if(String.fromCharCode.apply(null,at.slice(0,3))!=="ID3"||String.fromCharCode.apply(null,at.slice(10,14))!=="TXXX")continue;const Kt=at.slice(21,at.length),dn=ue(Kt),Yt=Kt.slice(dn+1,Kt.length),zr=ue(Yt),Ur=new TextDecoder("utf-8").decode(Yt.slice(0,zr)),sr={sn:ot,time:_t-Te,value:ci(Ur)};if(F.value&&ot<F.value)return;_.value.push(sr),sr.value.event==="start"&&Oe()}}}function ve(){return U=>{const z=U.track;z.kind==="metadata"&&(z.oncuechange=async()=>{const ue=z.activeCues;for(let Te=0;Te<ue.length;Te++){const ot=ue[Te];if(ot.value&&ot.value.uri){const xe=ot.value.uri;Y(xe)}}})}}function Ae(){return async U=>{var ue,Te;const z=(ue=U==null?void 0:U.detail)==null?void 0:ue.value;if(((Te=U==null?void 0:U.detail)==null?void 0:Te.schemeIdUri)==="urn:sigma:dai:2018")try{const xe=(at=>{try{return atob(at)}catch(_t){return console.error("Invalid base64 string:",_t),null}})(z),Ke=JSON.parse(xe);if(Ke.event=U.detail.id,Ke){const{avails:at}=await c.getEventTracking();m.value=vi(Ke,at,m.value);const _t=Ke.event;m.value&&(m.value.impression||(ae("impression"),m.value.impression=!0),ae(_t),_t==="complete"&&(m.value=void 0))}}catch(ot){console.error("Error decoding base64:",ot)}}}function Z(U,z){v.on(ue=>{(U==="*"||ue.eventType===U)&&z(ue)})}function Pe(){m.value=void 0,_.value=[],de.value=[],Fo(p),Fo(N),Je.forEach((U,z)=>{t.removeEventListener(z,U)}),Je.clear()}function ie(){return{eventTracking:_,trackingDataEvent:de}}return{destroy:Pe,onEventTracking:Z,hlsHelper:{createHlsFragChanged:Ee,createHlsFragParsingMetadata:Fe},videojsHelper:{createVideojsAddTrack:ve},shakaPlayerHelper:{createShakaPlayerHandlerEvent:Ae},getLog:ie}}async function gc({video:t,adContainer:o,adsUrl:s,baseURL:c}){const f=c||"https://cdn.jsdelivr.net/gh/sigmaott/sigma-ssai-web-sdk@v1.2.0",R=(await Fr.getInstance({uri:kr(f,"/build/dist/sigma-cspm.wasm")||"https://localhost:4222/sigma-cspm.wasm"})).createSession();function m(){}const{onEventTracking:I,destroy:C,videojsHelper:b,hlsHelper:_,shakaPlayerHelper:F,getLog:de}=mc({video:t,adContainer:o,trackingUrl:"",startSession:m,sdk:R,domain:f}),ae=zt(),Je=zt();function p(Z){Z.config.loader=wi({adsUrl:s,sdk:R,loader:Hls.DefaultConfig.loader}),ae.value=Z;const Pe=_.createHlsFragChanged(),ie=_.createHlsFragParsingMetadata();Z.on("hlsFragChanged",Pe),Z.on("hlsFragParsingMetadata",ie),Z.on(Hls.Events.ERROR,(U,z)=>{console.error("HLS Error:",U,z),z.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",z.details):z.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",z.details):console.error("Other Error:",z.details)}),Je.value=()=>{Z.off("hlsFragChanged",Pe),Z.off("hlsFragParsingMetadata",ie)}}function N(Z){Z.hls.config.loader=wi({adsUrl:s,sdk:R,loader:SigmaManager.DefaultConfig.loader}),ae.value=Z.hls;const Pe=_.createHlsFragChanged(),ie=_.createHlsFragParsingMetadata();Z.hls.on("hlsFragChanged",Pe),Z.hls.on("hlsFragParsingMetadata",ie),Z.on(SigmaManager.Events.ERROR,(U,z)=>{console.error("HLS Error:",U,z),z.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",z.details):z.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",z.details):console.error("Other Error:",z.details)}),Je.value=()=>{Z.hls.destroy()}}const q=zt(),Y=zt(),Oe={instance:R,config:{proxyAds:{uri:s,timeout:2}}};function Fe(Z){q.value=Z;const Pe=b.createVideojsAddTrack();Z.textTracks().on("addtrack",Pe),Y.value=()=>{Z.textTracks().off("addtrack",Pe)}}function ve(Z,Pe){const ie=F.createShakaPlayerHandlerEvent();Z.addEventListener("timelineregionenter",ie),Z.getNetworkingEngine().registerRequestFilter((U,z)=>{}),Z.getNetworkingEngine().registerResponseFilter(async(U,z)=>{if(U===0){const ue=new TextDecoder().decode(z.data),Te=await R.loadSource({config:{proxyAds:{uri:s,timeout:2e3}},masterUri:Pe,manifest:ue});z.data=new TextEncoder().encode(Te)}})}function Ae(){var Z,Pe;C(),(Z=Je.value)==null||Z.call(Je),(Pe=Y.value)==null||Pe.call(Y),ae.value=null,q.value=null,Je.value=null,Y.value=null}return{onEventTracking:I,destroy:Ae,sigmaPlayer:{attachVideojs:Fe,attachHls:p,attachSigmaDrm:N,getLog:de,attachShaka:ve},sdk:R,cspm:Oe}}window.videojs&&(window.videojs.VERSION==="7.10.2"?(function(t){const o=t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist;t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist=async function(s){if(this.vhs_.options_.cspm)try{const f=await(await fetch(this.src)).text();await this.vhs_.options_.cspm.instance.loadSource({config:this.vhs_.options_.cspm.config,manifest:f,masterUri:this.src})}catch(c){console.error("Error loading source:",c)}o.apply(this,[s])}}(videojs),function(t){const o=t.Vhs.PlaylistLoader.prototype.haveMetadata;t.Vhs.PlaylistLoader.prototype.haveMetadata=async function({playlistString:s,playlistObject:c,url:f,id:v}){const R=this.vhs_.options_.cspm.config;try{s&&this.vhs_.options_.cspm&&(s=await this.vhs_.options_.cspm.instance.loadSource({config:R,manifest:s,masterUri:this.master.playlists[v].resolvedUri})),o.apply(this,[{playlistString:s,playlistObject:c,url:f,id:v}])}catch(m){console.error("Error loading source:",m)}}}(videojs),function(t){const o=(s,c,f)=>s&&f&&f.responseURL&&c!==f.responseURL?f.responseURL:c;t.Vhs.PlaylistLoader.prototype.media=function(s,c){if(!s)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof s=="string"){if(!this.master.playlists[s])throw new Error("Unknown playlist URI: "+s);s=this.master.playlists[s]}if(window.clearTimeout(this.finalRenditionTimeout),c){const R=s.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,s,!1),R);return}const f=this.state,v=!this.media_||s.id!==this.media_.id;if(this.master.playlists[s.id].endList||s.endList&&s.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=s,v&&(this.trigger("mediachanging"),f==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(v){if(this.state="SWITCHING_MEDIA",this.request){if(s.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:s.resolvedUri,withCredentials:this.withCredentials},(R,m)=>{if(this.request){if(s.resolvedUri=o(this.handleManifestRedirects,s.resolvedUri,m),R)return this.playlistRequestError(this.request,s,f);this.haveMetadata({playlistString:m.responseText,url:s.uri,id:s.id}).then(()=>{f==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")})}})}}}(videojs)):(function(t){const o=t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist;t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist=async function(s){if(s.manifestString&&this.vhs_.options_.cspm)try{await this.vhs_.options_.cspm.instance.loadSource({config:this.vhs_.options_.cspm.config,manifest:s.manifestString,masterUri:this.src})}catch(c){console.error("Error loading source:",c)}o.apply(this,[s])}}(videojs),function(t){const o=t.Vhs.PlaylistLoader.prototype.parseManifest_;t.Vhs.PlaylistLoader.prototype.parseManifest_=function({url:s,manifestString:c}){const f=o.apply(this,[{url:s,manifestString:c}]);return f.playlists&&f.playlists.length&&(f.manifestString=c),f}}(videojs),function(t){const o=t.Vhs.PlaylistLoader.prototype.haveMetadata;t.Vhs.PlaylistLoader.prototype.haveMetadata=async function({playlistString:s,playlistObject:c,url:f,id:v}){try{if(s&&this.vhs_.options_.cspm){const R=this.vhs_.options_.cspm.config;s=await this.vhs_.options_.cspm.instance.loadSource({config:R,manifest:s,masterUri:this.main.playlists[v].resolvedUri})}o.apply(this,[{playlistString:s,playlistObject:c,url:f,id:v}])}catch(R){throw console.error("Error loading source:",R),R}}}(videojs),function(t){const o=(c,f)=>{const v=c.segments||[],R=v[v.length-1],m=R&&R.parts&&R.parts[R.parts.length-1],I=m&&m.duration||R&&R.duration;return I?I*1e3:(c.partTargetDuration||c.targetDuration||10)*500},s=(c,f)=>f&&f.responseURL&&c!==f.responseURL?f.responseURL:c;t.Vhs.PlaylistLoader.prototype.media=function(c,f){if(!c)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error(`Cannot switch media playlist from ${this.state}`);if(typeof c=="string"){if(!this.main.playlists[c])throw new Error(`Unknown playlist URI: ${c}`);c=this.main.playlists[c]}if(window.clearTimeout(this.finalRenditionTimeout),f){const C=(c.partTargetDuration||c.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,c,!1),C);return}const v=this.state,R=!this.media_||c.id!==this.media_.id,m=this.main.playlists[c.id];if(m&&m.endList||c.endList&&c.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=c,R&&(this.trigger("mediachanging"),v==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(o(c)),!R)return;if(this.state="SWITCHING_MEDIA",this.request){if(c.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=c;const I={playlistInfo:{type:"media",uri:c.uri}};this.trigger({type:"playlistrequeststart",metadata:I}),this.request=this.vhs_.xhr({uri:c.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(C,b)=>{if(this.request){if(c.lastRequest=Date.now(),c.resolvedUri=s(c.resolvedUri,b),C)return this.playlistRequestError(this.request,c,v);this.haveMetadata({playlistString:b.responseText,url:c.uri,id:c.id}).then(()=>{this.trigger({type:"playlistrequestcomplete",metadata:I}),v==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")})}})}}(videojs)));function yc(t){const o="https://dai.sigma.video/api/proxy-ads/ads/",s=_n(t),c=`${s.protocol}//${s.host}${s.pathname}`;if(!s.search)return{playerUrl:t,adsUrl:null};const f=es(t),v=f["sigma.dai.adsEndpoint"];if(!v)return{playerUrl:t,adsUrl:null};const R={},m={};for(const[C,b]of Object.entries(f))C.startsWith("sigma.dai")?C!=="sigma.dai.adsEndpoint"&&(R[C.replace("sigma.dai.","")]=b):m[C]=b;return{playerUrl:Qr(c,m),adsUrl:Qr(kr(o,v),R)}}return Ct.createSigmaDai=gc,Ct.processURL=yc,Object.defineProperty(Ct,Symbol.toStringTag,{value:"Module"}),Ct}({});
