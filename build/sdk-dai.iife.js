var SigmaDaiSdk=function(It){"use strict";var au=Object.defineProperty;var su=(It,At,pr)=>At in It?au(It,At,{enumerable:!0,configurable:!0,writable:!0,value:pr}):It[At]=pr;var Dt=(It,At,pr)=>su(It,typeof At!="symbol"?At+"":At,pr);const At=/#/g,pr=/&/g,Wa=/\//g,Ma=/=/g,In=/\+/g,Fa=/%5e/gi,za=/%60/gi,Ua=/%7c/gi,La=/%20/gi;function ja(t){return encodeURI(""+t).replace(Ua,"|")}function Cn(t){return ja(typeof t=="string"?t:JSON.stringify(t)).replace(In,"%2B").replace(La,"+").replace(At,"%23").replace(pr,"%26").replace(za,"`").replace(Fa,"^").replace(Wa,"%2F")}function _n(t){return Cn(t).replace(Ma,"%3D")}function xo(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function Ba(t){return xo(t.replace(In," "))}function qa(t){return xo(t.replace(In," "))}function Do(t=""){const o={};t[0]==="?"&&(t=t.slice(1));for(const s of t.split("&")){const c=s.match(/([^=]+)=?(.*)/)||[];if(c.length<2)continue;const f=Ba(c[1]);if(f==="__proto__"||f==="constructor")continue;const v=qa(c[2]||"");o[f]===void 0?o[f]=v:Array.isArray(o[f])?o[f].push(v):o[f]=[o[f],v]}return o}function $a(t,o){return(typeof o=="number"||typeof o=="boolean")&&(o=String(o)),o?Array.isArray(o)?o.map(s=>`${_n(t)}=${Cn(s)}`).join("&"):`${_n(t)}=${Cn(o)}`:_n(t)}function Ha(t){return Object.keys(t).filter(o=>t[o]!==void 0).map(o=>$a(o,t[o])).filter(Boolean).join("&")}const Va=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Ga=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Ja=/^([/\\]\s*){2,}[^/\\]/,Ka=/^\.?\//;function Io(t,o={}){return typeof o=="boolean"&&(o={acceptRelative:o}),o.strict?Va.test(t):Ga.test(t)||(o.acceptRelative?Ja.test(t):!1)}function Ya(t="",o){return t.endsWith("/")}function Za(t="",o){return(Ya(t)?t.slice(0,-1):t)||"/"}function Xa(t="",o){return t.endsWith("/")?t:t+"/"}function Qa(t,o){if(es(o)||Io(t))return t;const s=Za(o);return t.startsWith(s)?t:kr(s,t)}function Qr(t,o){const s=Nn(t),c={...Do(s.search),...o};return s.search=Ha(c),rs(s)}function ka(t){return Do(Nn(t).search)}function es(t){return!t||t==="/"}function ts(t){return t&&t!=="/"}function kr(t,...o){let s=t||"";for(const c of o.filter(f=>ts(f)))if(s){const f=c.replace(Ka,"");s=Xa(s)+f}else s=c;return s}const Co=Symbol.for("ufo:protocolRelative");function Nn(t="",o){const s=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(s){const[,N,U=""]=s;return{protocol:N.toLowerCase(),pathname:U,href:N+U,auth:"",host:"",search:"",hash:""}}if(!Io(t,{acceptRelative:!0}))return _o(t);const[,c="",f,v=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,R="",y=""]=v.match(/([^#/?]*)(.*)?/)||[];c==="file:"&&(y=y.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:D,search:_,hash:b}=_o(y);return{protocol:c.toLowerCase(),auth:f?f.slice(0,Math.max(0,f.length-1)):"",host:R,pathname:D,search:_,hash:b,[Co]:!c}}function _o(t=""){const[o="",s="",c=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:o,search:s,hash:c}}function rs(t){const o=t.pathname||"",s=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",c=t.hash||"",f=t.auth?t.auth+"@":"",v=t.host||"";return(t.protocol||t[Co]?(t.protocol||"")+"//":"")+f+v+o+s+c}const ns=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,os=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,is=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function as(t,o){if(t==="__proto__"||t==="constructor"&&o&&typeof o=="object"&&"prototype"in o){ss(t);return}return o}function ss(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function No(t,o={}){if(typeof t!="string")return t;const s=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return s.slice(1,-1);if(s.length<=9){const c=s.toLowerCase();if(c==="true")return!0;if(c==="false")return!1;if(c==="undefined")return;if(c==="null")return null;if(c==="nan")return Number.NaN;if(c==="infinity")return Number.POSITIVE_INFINITY;if(c==="-infinity")return Number.NEGATIVE_INFINITY}if(!is.test(t)){if(o.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(ns.test(t)||os.test(t)){if(o.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,as)}return JSON.parse(t)}catch(c){if(o.strict)throw c;return t}}class cs extends Error{constructor(o,s){super(o,s),this.name="FetchError",s!=null&&s.cause&&!this.cause&&(this.cause=s.cause)}}function us(t){var D,_,b,N,U;const o=((D=t.error)==null?void 0:D.message)||((_=t.error)==null?void 0:_.toString())||"",s=((b=t.request)==null?void 0:b.method)||((N=t.options)==null?void 0:N.method)||"GET",c=((U=t.request)==null?void 0:U.url)||String(t.request)||"/",f=`[${s}] ${JSON.stringify(c)}`,v=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",R=`${f}: ${v}${o?` ${o}`:""}`,y=new cs(R,t.error?{cause:t.error}:void 0);for(const se of["request","options","response"])Object.defineProperty(y,se,{get(){return t[se]}});for(const[se,ae]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(y,se,{get(){return t.response&&t.response[ae]}});return y}const ds=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Ao(t="GET"){return ds.has(t.toUpperCase())}function fs(t){if(t===void 0)return!1;const o=typeof t;return o==="string"||o==="number"||o==="boolean"||o===null?!0:o!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const ls=new Set(["image/svg","application/xml","application/xhtml","application/html"]),hs=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function ps(t=""){if(!t)return"json";const o=t.split(";").shift()||"";return hs.test(o)?"json":ls.has(o)||o.startsWith("text/")?"text":"blob"}function vs(t,o,s=globalThis.Headers){const c={...o,...t};if(o!=null&&o.params&&(t!=null&&t.params)&&(c.params={...o==null?void 0:o.params,...t==null?void 0:t.params}),o!=null&&o.query&&(t!=null&&t.query)&&(c.query={...o==null?void 0:o.query,...t==null?void 0:t.query}),o!=null&&o.headers&&(t!=null&&t.headers)){c.headers=new s((o==null?void 0:o.headers)||{});for(const[f,v]of new s((t==null?void 0:t.headers)||{}))c.headers.set(f,v)}return c}const ws=new Set([408,409,425,429,500,502,503,504]),ms=new Set([101,204,205,304]);function Wo(t={}){const{fetch:o=globalThis.fetch,Headers:s=globalThis.Headers,AbortController:c=globalThis.AbortController}=t;async function f(y){const D=y.error&&y.error.name==="AbortError"&&!y.options.timeout||!1;if(y.options.retry!==!1&&!D){let b;typeof y.options.retry=="number"?b=y.options.retry:b=Ao(y.options.method)?0:1;const N=y.response&&y.response.status||500;if(b>0&&(Array.isArray(y.options.retryStatusCodes)?y.options.retryStatusCodes.includes(N):ws.has(N))){const U=y.options.retryDelay||0;return U>0&&await new Promise(se=>setTimeout(se,U)),v(y.request,{...y.options,retry:b-1})}}const _=us(y);throw Error.captureStackTrace&&Error.captureStackTrace(_,v),_}const v=async function(D,_={}){var se;const b={request:D,options:vs(_,t.defaults,s),response:void 0,error:void 0};b.options.method=(se=b.options.method)==null?void 0:se.toUpperCase(),b.options.onRequest&&await b.options.onRequest(b),typeof b.request=="string"&&(b.options.baseURL&&(b.request=Qa(b.request,b.options.baseURL)),(b.options.query||b.options.params)&&(b.request=Qr(b.request,{...b.options.params,...b.options.query}))),b.options.body&&Ao(b.options.method)&&(fs(b.options.body)?(b.options.body=typeof b.options.body=="string"?b.options.body:JSON.stringify(b.options.body),b.options.headers=new s(b.options.headers||{}),b.options.headers.has("content-type")||b.options.headers.set("content-type","application/json"),b.options.headers.has("accept")||b.options.headers.set("accept","application/json")):("pipeTo"in b.options.body&&typeof b.options.body.pipeTo=="function"||typeof b.options.body.pipe=="function")&&("duplex"in b.options||(b.options.duplex="half")));let N;if(!b.options.signal&&b.options.timeout){const ae=new c;N=setTimeout(()=>ae.abort(),b.options.timeout),b.options.signal=ae.signal}try{b.response=await o(b.request,b.options)}catch(ae){return b.error=ae,b.options.onRequestError&&await b.options.onRequestError(b),await f(b)}finally{N&&clearTimeout(N)}if(b.response.body&&!ms.has(b.response.status)&&b.options.method!=="HEAD"){const ae=(b.options.parseResponse?"json":b.options.responseType)||ps(b.response.headers.get("content-type")||"");switch(ae){case"json":{const at=await b.response.text(),p=b.options.parseResponse||No;b.response._data=p(at);break}case"stream":{b.response._data=b.response.body;break}default:b.response._data=await b.response[ae]()}}return b.options.onResponse&&await b.options.onResponse(b),!b.options.ignoreResponseError&&b.response.status>=400&&b.response.status<600?(b.options.onResponseError&&await b.options.onResponseError(b),await f(b)):b.response},R=async function(D,_){return(await v(D,_))._data};return R.raw=v,R.native=(...y)=>o(...y),R.create=(y={})=>Wo({...t,defaults:{...t.defaults,...y}}),R}const An=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),gs=An.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),ys=An.Headers,Es=An.AbortController,bs=Wo({fetch:gs,Headers:ys,AbortController:Es}).create({credentials:"omit",onResponseError({response:t,error:o}){console.log("[LOG] ~ error:",o)},onRequest:({options:t,request:o})=>{const s=t.token;s&&(t.headers=t.headers||{},t.headers.Authorization=`${s}`)},onResponse({response:t,options:o}){}}),Ps=t=>(o,s)=>(t.set(o,s),s),Mo=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,Fo=536870912,zo=Fo*2,Ts=(t,o)=>s=>{const c=o.get(s);let f=c===void 0?s.size:c<zo?c+1:0;if(!s.has(f))return t(s,f);if(s.size<Fo){for(;s.has(f);)f=Math.floor(Math.random()*zo);return t(s,f)}if(s.size>Mo)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;s.has(f);)f=Math.floor(Math.random()*Mo);return t(s,f)},Uo=new WeakMap,Rs=Ps(Uo),en=Ts(Rs,Uo),Ss=t=>t.method!==void 0&&t.method==="call",Os=t=>typeof t.id=="number"&&typeof t.result=="boolean",xs=((t,o)=>{let s=null;return()=>{if(s!==null)return s;const c=new Blob([o],{type:"application/javascript; charset=utf-8"}),f=URL.createObjectURL(c);return s=t(f),setTimeout(()=>URL.revokeObjectURL(f)),s}})(t=>{const o=new Map([[0,()=>{}]]),s=new Map([[0,()=>{}]]),c=new Map,f=new Worker(t);return f.addEventListener("message",({data:_})=>{if(Ss(_)){const{params:{timerId:b,timerType:N}}=_;if(N==="interval"){const U=o.get(b);if(typeof U===void 0)throw new Error("The timer is in an undefined state.");if(typeof U=="number"){const se=c.get(U);if(se===void 0||se.timerId!==b||se.timerType!==N)throw new Error("The timer is in an undefined state.")}else typeof U=="function"&&U()}else if(N==="timeout"){const U=s.get(b);if(typeof U===void 0)throw new Error("The timer is in an undefined state.");if(typeof U=="number"){const se=c.get(U);if(se===void 0||se.timerId!==b||se.timerType!==N)throw new Error("The timer is in an undefined state.")}else typeof U=="function"&&(U(),s.delete(b))}}else if(Os(_)){const{id:b}=_,N=c.get(b);if(N===void 0)throw new Error("The timer is in an undefined state.");const{timerId:U,timerType:se}=N;c.delete(b),se==="interval"?o.delete(U):s.delete(U)}else{const{error:{message:b}}=_;throw new Error(b)}}),{clearInterval:_=>{if(typeof o.get(_)=="function"){const b=en(c);c.set(b,{timerId:_,timerType:"interval"}),o.set(_,b),f.postMessage({id:b,method:"clear",params:{timerId:_,timerType:"interval"}})}},clearTimeout:_=>{if(typeof s.get(_)=="function"){const b=en(c);c.set(b,{timerId:_,timerType:"timeout"}),s.set(_,b),f.postMessage({id:b,method:"clear",params:{timerId:_,timerType:"timeout"}})}},setInterval:(_,b=0,...N)=>{const U=en(o);return o.set(U,()=>{_(...N),typeof o.get(U)=="function"&&f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:U,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:U,timerType:"interval"}}),U},setTimeout:(_,b=0,...N)=>{const U=en(s);return s.set(U,()=>_(...N)),f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:U,timerType:"timeout"}}),U}}},`(()=>{"use strict";const e=new Map,t=new Map,r=t=>{const r=e.get(t);return void 0!==r&&(clearTimeout(r),e.delete(t),!0)},s=e=>{const r=t.get(e);return void 0!==r&&(clearTimeout(r),t.delete(e),!0)},o=(e,t)=>{const r=performance.now(),s=e+t-r-performance.timeOrigin;return{expected:r+s,remainingDelay:s}},i=(e,t,r,s)=>{const o=r-performance.now();o>0?e.set(t,setTimeout(i,o,e,t,r,s)):(e.delete(t),postMessage({id:null,method:"call",params:{timerId:t,timerType:s}}))};addEventListener("message",(n=>{let{data:a}=n;try{if("clear"===a.method){const{id:e,params:{timerId:t,timerType:o}}=a;if("interval"===o)postMessage({id:e,result:r(t)});else{if("timeout"!==o)throw new Error('The given type "'.concat(o,'" is not supported'));postMessage({id:e,result:s(t)})}}else{if("set"!==a.method)throw new Error('The given method "'.concat(a.method,'" is not supported'));{const{params:{delay:r,now:s,timerId:n,timerType:m}}=a;if("interval"===m)((t,r,s)=>{const{expected:n,remainingDelay:a}=o(t,s);e.set(r,setTimeout(i,a,e,r,n,"interval"))})(r,n,s);else{if("timeout"!==m)throw new Error('The given type "'.concat(m,'" is not supported'));((e,r,s)=>{const{expected:n,remainingDelay:a}=o(e,s);t.set(r,setTimeout(i,a,t,r,n,"timeout"))})(r,n,s)}}}}catch(e){postMessage({error:{message:e.message},id:a.id,result:null})}}))})();`),Lo=t=>xs().clearTimeout(t);/**
* @vue/shared v3.5.1
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ds(t,o){const s=new Set(t.split(","));return c=>s.has(c)}const jo=Object.assign,Is=Object.prototype.hasOwnProperty,Wn=(t,o)=>Is.call(t,o),vr=Array.isArray,_r=t=>Bo(t)==="[object Map]",Cs=t=>typeof t=="string",Nr=t=>typeof t=="symbol",tn=t=>t!==null&&typeof t=="object",_s=Object.prototype.toString,Bo=t=>_s.call(t),qo=t=>Bo(t).slice(8,-1),Mn=t=>Cs(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ns=(t=>{const o=Object.create(null);return s=>o[s]||(o[s]=t(s))})(t=>t.charAt(0).toUpperCase()+t.slice(1)),wr=(t,o)=>!Object.is(t,o);var He={};function mr(t,...o){console.warn(`[Vue warn] ${t}`,...o)}let we;const Fn=new WeakSet;class $o{constructor(o){this.fn=o,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Fn.has(this)&&(Fn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=Ar,Ar=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ko(this),Vo(this);const o=we,s=Rt;we=this,Rt=!0;try{return this.fn()}finally{He.NODE_ENV!=="production"&&we!==this&&mr("Active effect was not restored correctly - this is likely a Vue internal bug."),Go(this),we=o,Rt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let o=this.deps;o;o=o.nextDep)jn(o);this.deps=this.depsTail=void 0,Ko(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Fn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ln(this)&&this.run()}get dirty(){return Ln(this)}}let Ho=0,Ar;function zn(){Ho++}function Un(){if(--Ho>0)return;let t;for(;Ar;){let o=Ar;for(Ar=void 0;o;){const s=o.nextEffect;if(o.nextEffect=void 0,o.flags&=-9,o.flags&1)try{o.trigger()}catch(c){t||(t=c)}o=s}}if(t)throw t}function Vo(t){for(let o=t.deps;o;o=o.nextDep)o.version=-1,o.prevActiveLink=o.dep.activeLink,o.dep.activeLink=o}function Go(t){let o,s=t.depsTail;for(let c=s;c;c=c.prevDep)c.version===-1?(c===s&&(s=c.prevDep),jn(c),Ws(c)):o=c,c.dep.activeLink=c.prevActiveLink,c.prevActiveLink=void 0;t.deps=o,t.depsTail=s}function Ln(t){for(let o=t.deps;o;o=o.nextDep)if(o.dep.version!==o.version||o.dep.computed&&As(o.dep.computed)===!1||o.dep.version!==o.version)return!0;return!!t._dirty}function As(t){if(t.flags&2)return!1;if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===rn))return;t.globalVersion=rn;const o=t.dep;if(t.flags|=2,o.version>0&&!t.isSSR&&!Ln(t)){t.flags&=-3;return}const s=we,c=Rt;we=t,Rt=!0;try{Vo(t);const f=t.fn();(o.version===0||wr(f,t._value))&&(t._value=f,o.version++)}catch(f){throw o.version++,f}finally{we=s,Rt=c,Go(t),t.flags&=-3}}function jn(t){const{dep:o,prevSub:s,nextSub:c}=t;if(s&&(s.nextSub=c,t.prevSub=void 0),c&&(c.prevSub=s,t.nextSub=void 0),o.subs===t&&(o.subs=s),!o.subs&&o.computed){o.computed.flags&=-5;for(let f=o.computed.deps;f;f=f.nextDep)jn(f)}}function Ws(t){const{prevDep:o,nextDep:s}=t;o&&(o.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=o,t.nextDep=void 0)}function Ms(t,o){t.effect instanceof $o&&(t=t.effect.fn);const s=new $o(t);try{s.run()}catch(f){throw s.stop(),f}const c=s.run.bind(s);return c.effect=s,c}let Rt=!0;const Jo=[];function Fs(){Jo.push(Rt),Rt=!1}function zs(){const t=Jo.pop();Rt=t===void 0?!0:t}function Ko(t){const{cleanup:o}=t;if(t.cleanup=void 0,o){const s=we;we=void 0;try{o()}finally{we=s}}}let rn=0;class Yo{constructor(o){this.computed=o,this.version=0,this.activeLink=void 0,this.subs=void 0,He.NODE_ENV!=="production"&&(this.subsHead=void 0)}track(o){if(!we||!Rt)return;let s=this.activeLink;if(s===void 0||s.sub!==we)s=this.activeLink={dep:this,sub:we,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},we.deps?(s.prevDep=we.depsTail,we.depsTail.nextDep=s,we.depsTail=s):we.deps=we.depsTail=s,we.flags&4&&Zo(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const c=s.nextDep;c.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=c),s.prevDep=we.depsTail,s.nextDep=void 0,we.depsTail.nextDep=s,we.depsTail=s,we.deps===s&&(we.deps=c)}return He.NODE_ENV!=="production"&&we.onTrack&&we.onTrack(jo({effect:we},o)),s}trigger(o){this.version++,rn++,this.notify(o)}notify(o){zn();try{if(He.NODE_ENV!=="production")for(let s=this.subsHead;s;s=s.nextSub)He.NODE_ENV!=="production"&&s.sub.onTrigger&&!(s.sub.flags&8)&&s.sub.onTrigger(jo({effect:s.sub},o));for(let s=this.subs;s;s=s.prevSub)s.sub.notify()}finally{Un()}}}function Zo(t){const o=t.dep.computed;if(o&&!t.dep.subs){o.flags|=20;for(let c=o.deps;c;c=c.nextDep)Zo(c)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),He.NODE_ENV!=="production"&&t.dep.subsHead===void 0&&(t.dep.subsHead=t),t.dep.subs=t}const Bn=new WeakMap,rr=Symbol(He.NODE_ENV!=="production"?"Object iterate":""),qn=Symbol(He.NODE_ENV!=="production"?"Map keys iterate":""),Wr=Symbol(He.NODE_ENV!=="production"?"Array iterate":"");function lt(t,o,s){if(Rt&&we){let c=Bn.get(t);c||Bn.set(t,c=new Map);let f=c.get(s);f||c.set(s,f=new Yo),He.NODE_ENV!=="production"?f.track({target:t,type:o,key:s}):f.track()}}function $t(t,o,s,c,f,v){const R=Bn.get(t);if(!R){rn++;return}let y=[];if(o==="clear")y=[...R.values()];else{const D=vr(t),_=D&&Mn(s);if(D&&s==="length"){const b=Number(c);R.forEach((N,U)=>{(U==="length"||U===Wr||!Nr(U)&&U>=b)&&y.push(N)})}else{const b=N=>N&&y.push(N);switch(s!==void 0&&b(R.get(s)),_&&b(R.get(Wr)),o){case"add":D?_&&b(R.get("length")):(b(R.get(rr)),_r(t)&&b(R.get(qn)));break;case"delete":D||(b(R.get(rr)),_r(t)&&b(R.get(qn)));break;case"set":_r(t)&&b(R.get(rr));break}}}zn();for(const D of y)He.NODE_ENV!=="production"?D.trigger({target:t,type:o,key:s,newValue:c,oldValue:f,oldTarget:v}):D.trigger();Un()}function gr(t){const o=me(t);return o===t?o:(lt(o,"iterate",Wr),Vt(t)?o:o.map(it))}function $n(t){return lt(t=me(t),"iterate",Wr),t}const Us={__proto__:null,[Symbol.iterator](){return Hn(this,Symbol.iterator,it)},concat(...t){return gr(this).concat(...t.map(o=>vr(o)?gr(o):o))},entries(){return Hn(this,"entries",t=>(t[1]=it(t[1]),t))},every(t,o){return Wt(this,"every",t,o,void 0,arguments)},filter(t,o){return Wt(this,"filter",t,o,s=>s.map(it),arguments)},find(t,o){return Wt(this,"find",t,o,it,arguments)},findIndex(t,o){return Wt(this,"findIndex",t,o,void 0,arguments)},findLast(t,o){return Wt(this,"findLast",t,o,it,arguments)},findLastIndex(t,o){return Wt(this,"findLastIndex",t,o,void 0,arguments)},forEach(t,o){return Wt(this,"forEach",t,o,void 0,arguments)},includes(...t){return Vn(this,"includes",t)},indexOf(...t){return Vn(this,"indexOf",t)},join(t){return gr(this).join(t)},lastIndexOf(...t){return Vn(this,"lastIndexOf",t)},map(t,o){return Wt(this,"map",t,o,void 0,arguments)},pop(){return Mr(this,"pop")},push(...t){return Mr(this,"push",t)},reduce(t,...o){return Xo(this,"reduce",t,o)},reduceRight(t,...o){return Xo(this,"reduceRight",t,o)},shift(){return Mr(this,"shift")},some(t,o){return Wt(this,"some",t,o,void 0,arguments)},splice(...t){return Mr(this,"splice",t)},toReversed(){return gr(this).toReversed()},toSorted(t){return gr(this).toSorted(t)},toSpliced(...t){return gr(this).toSpliced(...t)},unshift(...t){return Mr(this,"unshift",t)},values(){return Hn(this,"values",it)}};function Hn(t,o,s){const c=$n(t),f=c[o]();return c!==t&&!Vt(t)&&(f._next=f.next,f.next=()=>{const v=f._next();return v.value&&(v.value=s(v.value)),v}),f}const Ls=Array.prototype;function Wt(t,o,s,c,f,v){const R=$n(t),y=R!==t&&!Vt(t),D=R[o];if(D!==Ls[o]){const N=D.apply(t,v);return y?it(N):N}let _=s;R!==t&&(y?_=function(N,U){return s.call(this,it(N),U,t)}:s.length>2&&(_=function(N,U){return s.call(this,N,U,t)}));const b=D.call(R,_,c);return y&&f?f(b):b}function Xo(t,o,s,c){const f=$n(t);let v=s;return f!==t&&(Vt(t)?s.length>3&&(v=function(R,y,D){return s.call(this,R,y,D,t)}):v=function(R,y,D){return s.call(this,R,it(y),D,t)}),f[o](v,...c)}function Vn(t,o,s){const c=me(t);lt(c,"iterate",Wr);const f=c[o](...s);return(f===-1||f===!1)&&nc(s[0])?(s[0]=me(s[0]),c[o](...s)):f}function Mr(t,o,s=[]){Fs(),zn();const c=me(t)[o].apply(t,s);return Un(),zs(),c}const js=Ds("__proto__,__v_isRef,__isVue"),Qo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Nr));function Bs(t){Nr(t)||(t=String(t));const o=me(this);return lt(o,"has",t),o.hasOwnProperty(t)}class ko{constructor(o=!1,s=!1){this._isReadonly=o,this._isShallow=s}get(o,s,c){const f=this._isReadonly,v=this._isShallow;if(s==="__v_isReactive")return!f;if(s==="__v_isReadonly")return f;if(s==="__v_isShallow")return v;if(s==="__v_raw")return c===(f?v?ec:si:v?ks:ai).get(o)||Object.getPrototypeOf(o)===Object.getPrototypeOf(c)?o:void 0;const R=vr(o);if(!f){let D;if(R&&(D=Us[s]))return D;if(s==="hasOwnProperty")return Bs}const y=Reflect.get(o,s,Er(o)?o:c);return(Nr(s)?Qo.has(s):js(s))||(f||lt(o,"get",s),v)?y:Er(y)?R&&Mn(s)?y:y.value:tn(y)?f?ui(y):ci(y):y}}class qs extends ko{constructor(o=!1){super(!1,o)}set(o,s,c,f){let v=o[s];if(!this._isShallow){const D=yr(v);if(!Vt(c)&&!yr(c)&&(v=me(v),c=me(c)),!vr(o)&&Er(v)&&!Er(c))return D?!1:(v.value=c,!0)}const R=vr(o)&&Mn(s)?Number(s)<o.length:Wn(o,s),y=Reflect.set(o,s,c,Er(o)?o:f);return o===me(f)&&(R?wr(c,v)&&$t(o,"set",s,c,v):$t(o,"add",s,c)),y}deleteProperty(o,s){const c=Wn(o,s),f=o[s],v=Reflect.deleteProperty(o,s);return v&&c&&$t(o,"delete",s,void 0,f),v}has(o,s){const c=Reflect.has(o,s);return(!Nr(s)||!Qo.has(s))&&lt(o,"has",s),c}ownKeys(o){return lt(o,"iterate",vr(o)?"length":rr),Reflect.ownKeys(o)}}class $s extends ko{constructor(o=!1){super(!0,o)}set(o,s){return He.NODE_ENV!=="production"&&mr(`Set operation on key "${String(s)}" failed: target is readonly.`,o),!0}deleteProperty(o,s){return He.NODE_ENV!=="production"&&mr(`Delete operation on key "${String(s)}" failed: target is readonly.`,o),!0}}const Hs=new qs,Vs=new $s,Gn=t=>t,nn=t=>Reflect.getPrototypeOf(t);function on(t,o,s=!1,c=!1){t=t.__v_raw;const f=me(t),v=me(o);s||(wr(o,v)&&lt(f,"get",o),lt(f,"get",v));const{has:R}=nn(f),y=c?Gn:s?Jn:it;if(R.call(f,o))return y(t.get(o));if(R.call(f,v))return y(t.get(v));t!==f&&t.get(o)}function an(t,o=!1){const s=this.__v_raw,c=me(s),f=me(t);return o||(wr(t,f)&&lt(c,"has",t),lt(c,"has",f)),t===f?s.has(t):s.has(t)||s.has(f)}function sn(t,o=!1){return t=t.__v_raw,!o&&lt(me(t),"iterate",rr),Reflect.get(t,"size",t)}function ei(t,o=!1){!o&&!Vt(t)&&!yr(t)&&(t=me(t));const s=me(this);return nn(s).has.call(s,t)||(s.add(t),$t(s,"add",t,t)),this}function ti(t,o,s=!1){!s&&!Vt(o)&&!yr(o)&&(o=me(o));const c=me(this),{has:f,get:v}=nn(c);let R=f.call(c,t);R?He.NODE_ENV!=="production"&&ii(c,f,t):(t=me(t),R=f.call(c,t));const y=v.call(c,t);return c.set(t,o),R?wr(o,y)&&$t(c,"set",t,o,y):$t(c,"add",t,o),this}function ri(t){const o=me(this),{has:s,get:c}=nn(o);let f=s.call(o,t);f?He.NODE_ENV!=="production"&&ii(o,s,t):(t=me(t),f=s.call(o,t));const v=c?c.call(o,t):void 0,R=o.delete(t);return f&&$t(o,"delete",t,void 0,v),R}function ni(){const t=me(this),o=t.size!==0,s=He.NODE_ENV!=="production"?_r(t)?new Map(t):new Set(t):void 0,c=t.clear();return o&&$t(t,"clear",void 0,void 0,s),c}function cn(t,o){return function(c,f){const v=this,R=v.__v_raw,y=me(R),D=o?Gn:t?Jn:it;return!t&&lt(y,"iterate",rr),R.forEach((_,b)=>c.call(f,D(_),D(b),v))}}function un(t,o,s){return function(...c){const f=this.__v_raw,v=me(f),R=_r(v),y=t==="entries"||t===Symbol.iterator&&R,D=t==="keys"&&R,_=f[t](...c),b=s?Gn:o?Jn:it;return!o&&lt(v,"iterate",D?qn:rr),{next(){const{value:N,done:U}=_.next();return U?{value:N,done:U}:{value:y?[b(N[0]),b(N[1])]:b(N),done:U}},[Symbol.iterator](){return this}}}}function Ht(t){return function(...o){if(He.NODE_ENV!=="production"){const s=o[0]?`on key "${o[0]}" `:"";mr(`${Ns(t)} operation ${s}failed: target is readonly.`,me(this))}return t==="delete"?!1:t==="clear"?void 0:this}}function Gs(){const t={get(v){return on(this,v)},get size(){return sn(this)},has:an,add:ei,set:ti,delete:ri,clear:ni,forEach:cn(!1,!1)},o={get(v){return on(this,v,!1,!0)},get size(){return sn(this)},has:an,add(v){return ei.call(this,v,!0)},set(v,R){return ti.call(this,v,R,!0)},delete:ri,clear:ni,forEach:cn(!1,!0)},s={get(v){return on(this,v,!0)},get size(){return sn(this,!0)},has(v){return an.call(this,v,!0)},add:Ht("add"),set:Ht("set"),delete:Ht("delete"),clear:Ht("clear"),forEach:cn(!0,!1)},c={get(v){return on(this,v,!0,!0)},get size(){return sn(this,!0)},has(v){return an.call(this,v,!0)},add:Ht("add"),set:Ht("set"),delete:Ht("delete"),clear:Ht("clear"),forEach:cn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(v=>{t[v]=un(v,!1,!1),s[v]=un(v,!0,!1),o[v]=un(v,!1,!0),c[v]=un(v,!0,!0)}),[t,s,o,c]}const[Js,Ks,Ys,Zs]=Gs();function oi(t,o){const s=o?t?Zs:Ys:t?Ks:Js;return(c,f,v)=>f==="__v_isReactive"?!t:f==="__v_isReadonly"?t:f==="__v_raw"?c:Reflect.get(Wn(s,f)&&f in c?s:c,f,v)}const Xs={get:oi(!1,!1)},Qs={get:oi(!0,!1)};function ii(t,o,s){const c=me(s);if(c!==s&&o.call(t,c)){const f=qo(t);mr(`Reactive ${f} contains both the raw and reactive versions of the same object${f==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const ai=new WeakMap,ks=new WeakMap,si=new WeakMap,ec=new WeakMap;function tc(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rc(t){return t.__v_skip||!Object.isExtensible(t)?0:tc(qo(t))}function ci(t){return yr(t)?t:di(t,!1,Hs,Xs,ai)}function ui(t){return di(t,!0,Vs,Qs,si)}function di(t,o,s,c,f){if(!tn(t))return He.NODE_ENV!=="production"&&mr(`value cannot be made ${o?"readonly":"reactive"}: ${String(t)}`),t;if(t.__v_raw&&!(o&&t.__v_isReactive))return t;const v=f.get(t);if(v)return v;const R=rc(t);if(R===0)return t;const y=new Proxy(t,R===2?c:s);return f.set(t,y),y}function yr(t){return!!(t&&t.__v_isReadonly)}function Vt(t){return!!(t&&t.__v_isShallow)}function nc(t){return t?!!t.__v_raw:!1}function me(t){const o=t&&t.__v_raw;return o?me(o):t}const it=t=>tn(t)?ci(t):t,Jn=t=>tn(t)?ui(t):t;function Er(t){return t?t.__v_isRef===!0:!1}function Mt(t){return oc(t,!1)}function oc(t,o){return Er(t)?t:new ic(t,o)}class ic{constructor(o,s){this.dep=new Yo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?o:me(o),this._value=s?o:it(o),this.__v_isShallow=s}get value(){return He.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track(),this._value}set value(o){const s=this._rawValue,c=this.__v_isShallow||Vt(o)||yr(o);o=c?o:me(o),wr(o,s)&&(this._rawValue=o,this._value=c?o:it(o),He.NODE_ENV!=="production"?this.dep.trigger({target:this,type:"set",key:"value",newValue:o,oldValue:s}):this.dep.trigger())}}function ac(){const t=new Set,o=f=>{t.delete(f)};return{on:f=>(t.add(f),{off:()=>o(f)}),off:o,trigger:(...f)=>Promise.all(Array.from(t).map(v=>v(...f)))}}async function sc(t){try{return{data:await t,error:null}}catch(o){return{data:null,error:o||{message:"Unknown error"}}}}var cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fi={exports:{}};(function(t,o){(function(s,c){t.exports=c()})(typeof self<"u"?self:cc,function(){return function(s){var c={};function f(v){if(c[v])return c[v].exports;var R=c[v]={i:v,l:!1,exports:{}};return s[v].call(R.exports,R,R.exports,f),R.l=!0,R.exports}return f.m=s,f.c=c,f.d=function(v,R,y){f.o(v,R)||Object.defineProperty(v,R,{enumerable:!0,get:y})},f.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})},f.t=function(v,R){if(1&R&&(v=f(v)),8&R||4&R&&typeof v=="object"&&v&&v.__esModule)return v;var y=Object.create(null);if(f.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:v}),2&R&&typeof v!="string")for(var D in v)f.d(y,D,(function(_){return v[_]}).bind(null,D));return y},f.n=function(v){var R=v&&v.__esModule?function(){return v.default}:function(){return v};return f.d(R,"a",R),R},f.o=function(v,R){return{}.hasOwnProperty.call(v,R)},f.p="",f(f.s=0)}([function(s,c,f){f.r(c),f.d(c,"PopupOpenError",function(){return io}),f.d(c,"create",function(){return Jc}),f.d(c,"destroy",function(){return Kc}),f.d(c,"destroyComponents",function(){return ya}),f.d(c,"destroyAll",function(){return Ea}),f.d(c,"PROP_TYPE",function(){return be}),f.d(c,"PROP_SERIALIZATION",function(){return On}),f.d(c,"CONTEXT",function(){return Ce}),f.d(c,"EVENT",function(){return Oe});function v(e,r){return(v=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(e,r)}function R(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,v(e,r)}function y(){return(y=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function D(e){try{if(!e)return!1;if(typeof Promise<"u"&&e instanceof Promise)return!0;if(typeof window<"u"&&typeof window.Window=="function"&&e instanceof window.Window||typeof window<"u"&&typeof window.constructor=="function"&&e instanceof window.constructor)return!1;var r={}.toString;if(r){var n=r.call(e);if(n==="[object Window]"||n==="[object global]"||n==="[object DOMWindow]")return!1}if(typeof e.then=="function")return!0}catch{return!1}return!1}var _=[],b=[],N=0,U;function se(){if(!N&&U){var e=U;U=null,e.resolve()}}function ae(){N+=1}function at(){N-=1,se()}var p=function(){function e(n){var i=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var a,u,d=!1,h=!1,l=!1;ae();try{n(function(m){l?i.resolve(m):(d=!0,a=m)},function(m){l?i.reject(m):(h=!0,u=m)})}catch(m){at(),this.reject(m);return}at(),l=!0,d?this.resolve(a):h&&this.reject(u)}}var r=e.prototype;return r.resolve=function(n){if(this.resolved||this.rejected)return this;if(D(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},r.reject=function(n){var i=this;if(this.resolved||this.rejected)return this;if(D(n))throw new Error("Can not reject promise with another promise");if(!n){var a=n&&typeof n.toString=="function"?n.toString():{}.toString.call(n);n=new Error("Expected reject to be called with Error, got "+a)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){i.errorHandled||function(u,d){if(_.indexOf(u)===-1){_.push(u),setTimeout(function(){throw u},1);for(var h=0;h<b.length;h++)b[h](u,d)}}(n,i)},1),this.dispatch(),this},r.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},r.dispatch=function(){var n=this.resolved,i=this.rejected,a=this.handlers;if(!this.dispatching&&(n||i)){this.dispatching=!0,ae();for(var u=function(E,T){return E.then(function(S){T.resolve(S)},function(S){T.reject(S)})},d=0;d<a.length;d++){var h=a[d],l=h.onSuccess,m=h.onError,P=h.promise,g=void 0;if(n)try{g=l?l(this.value):this.value}catch(E){P.reject(E);continue}else if(i){if(!m){P.reject(this.error);continue}try{g=m(this.error)}catch(E){P.reject(E);continue}}if(g instanceof e&&(g.resolved||g.rejected)){var w=g;w.resolved?P.resolve(w.value):P.reject(w.error),w.errorHandled=!0}else D(g)?g instanceof e&&(g.resolved||g.rejected)?g.resolved?P.resolve(g.value):P.reject(g.error):u(g,P):P.resolve(g)}a.length=0,this.dispatching=!1,at()}},r.then=function(n,i){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.then expected a function for success handler");if(i&&typeof i!="function"&&!i.call)throw new Error("Promise.then expected a function for error handler");var a=new e;return this.handlers.push({promise:a,onSuccess:n,onError:i}),this.errorHandled=!0,this.dispatch(),a},r.catch=function(n){return this.then(void 0,n)},r.finally=function(n){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(i){return e.try(n).then(function(){return i})},function(i){return e.try(n).then(function(){throw i})})},r.timeout=function(n,i){var a=this;if(this.resolved||this.rejected)return this;var u=setTimeout(function(){a.resolved||a.rejected||a.reject(i||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(d){return clearTimeout(u),d})},r.toPromise=function(){if(typeof Promise>"u")throw new TypeError("Could not find Promise");return Promise.resolve(this)},r.lazy=function(){return this.errorHandled=!0,this},e.resolve=function(n){return n instanceof e?n:D(n)?new e(function(i,a){return n.then(i,a)}):new e().resolve(n)},e.reject=function(n){return new e().reject(n)},e.asyncReject=function(n){return new e().asyncReject(n)},e.all=function(n){var i=new e,a=n.length,u=[].slice();if(!a)return i.resolve(u),i;for(var d=function(m,P,g){return P.then(function(w){u[m]=w,(a-=1)==0&&i.resolve(u)},function(w){g.reject(w)})},h=0;h<n.length;h++){var l=n[h];if(l instanceof e){if(l.resolved){u[h]=l.value,a-=1;continue}}else if(!D(l)){u[h]=l,a-=1;continue}d(h,e.resolve(l),i)}return a===0&&i.resolve(u),i},e.hash=function(n){var i={},a=[],u=function(h){if(n.hasOwnProperty(h)){var l=n[h];D(l)?a.push(l.then(function(m){i[h]=m})):i[h]=l}};for(var d in n)u(d);return e.all(a).then(function(){return i})},e.map=function(n,i){return e.all(n.map(i))},e.onPossiblyUnhandledException=function(n){return function(i){return b.push(i),{cancel:function(){b.splice(b.indexOf(i),1)}}}(n)},e.try=function(n,i,a){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.try expected a function");var u;ae();try{u=n.apply(i,a||[])}catch(d){return at(),e.reject(d)}return at(),e.resolve(u)},e.delay=function(n){return new e(function(i){setTimeout(i,n)})},e.isPromise=function(n){return!!(n&&n instanceof e)||D(n)},e.flush=function(){return function(n){var i=U=U||new n;return se(),i}(e)},e}();function A(e){return{}.toString.call(e)==="[object RegExp]"}var B={IFRAME:"iframe",POPUP:"popup"},ie=`Call was rejected by callee.\r
`;function ge(e){return e===void 0&&(e=window),e.location.protocol}function Re(e){if(e===void 0&&(e=window),e.mockDomain){var r=e.mockDomain.split("//")[0];if(r)return r}return ge(e)}function Ne(e){return e===void 0&&(e=window),Re(e)==="about:"}function ve(e){if(e===void 0&&(e=window),e)try{if(e.parent&&e.parent!==e)return e.parent}catch{}}function Y(e){if(e===void 0&&(e=window),e&&!ve(e))try{return e.opener}catch{}}function he(e){try{return!0}catch{}return!1}function Ae(e){e===void 0&&(e=window);var r=e.location;if(!r)throw new Error("Can not read window location");var n=ge(e);if(!n)throw new Error("Can not read window protocol");if(n==="file:")return"file://";if(n==="about:"){var i=ve(e);return i&&he()?Ae(i):"about://"}var a=r.host;if(!a)throw new Error("Can not read window host");return n+"//"+a}function z(e){e===void 0&&(e=window);var r=Ae(e);return r&&e.mockDomain&&e.mockDomain.indexOf("mock:")===0?e.mockDomain:r}function C(e){if(!function(r){try{if(r===window)return!0}catch{}try{var n=Object.getOwnPropertyDescriptor(r,"location");if(n&&n.enumerable===!1)return!1}catch{}try{if(Ne(r)&&he())return!0}catch{}try{if(function(i){return i===void 0&&(i=window),Re(i)==="mock:"}(r)&&he())return!0}catch{}try{if(Ae(r)===Ae(window))return!0}catch{}return!1}(e))return!1;try{if(e===window||Ne(e)&&he()||z(window)===z(e))return!0}catch{}return!1}function oe(e){if(!C(e))throw new Error("Expected window to be same domain");return e}function Qe(e,r){if(!e||!r)return!1;var n=ve(r);return n?n===e:function(i){var a=[];try{for(;i.parent!==i;)a.push(i.parent),i=i.parent}catch{}return a}(r).indexOf(e)!==-1}function st(e){var r=[],n;try{n=e.frames}catch{n=e}var i;try{i=n.length}catch{}if(i===0)return r;if(i){for(var a=0;a<i;a++){var u=void 0;try{u=n[a]}catch{continue}r.push(u)}return r}for(var d=0;d<100;d++){var h=void 0;try{h=n[d]}catch{return r}if(!h)return r;r.push(h)}return r}function je(e){for(var r=[],n=0,i=st(e);n<i.length;n++){var a=i[n];r.push(a);for(var u=0,d=je(a);u<d.length;u++)r.push(d[u])}return r}function ct(e){e===void 0&&(e=window);try{if(e.top)return e.top}catch{}if(ve(e)===e)return e;try{if(Qe(window,e)&&window.top)return window.top}catch{}try{if(Qe(e,window)&&window.top)return window.top}catch{}for(var r=0,n=je(e);r<n.length;r++){var i=n[r];try{if(i.top)return i.top}catch{}if(ve(i)===i)return i}}function ht(e){var r=ct(e);if(!r)throw new Error("Can not determine top window");var n=[].concat(je(r),[r]);return n.indexOf(e)===-1&&(n=[].concat(n,[e],je(e))),n}var nr=[],dn=[];function We(e,r){r===void 0&&(r=!0);try{if(e===window)return!1}catch{return!0}try{if(!e)return!0}catch{return!0}try{if(e.closed)return!0}catch(a){return!a||a.message!==ie}if(r&&C(e))try{if(e.mockclosed)return!0}catch{}try{if(!e.parent||!e.top)return!0}catch{}var n=function(a,u){for(var d=0;d<a.length;d++)try{if(a[d]===u)return d}catch{}return-1}(nr,e);if(n!==-1){var i=dn[n];if(i&&function(a){if(!a.contentWindow||!a.parentNode)return!0;var u=a.ownerDocument;if(u&&u.documentElement&&!u.documentElement.contains(a)){for(var d=a;d.parentNode&&d.parentNode!==d;)d=d.parentNode;if(!d.host||!u.documentElement.contains(d.host))return!0}return!1}(i))return!0}return!1}function Pr(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent}function Tr(e,r){for(var n=st(e),i=0;i<n.length;i++){var a=n[i];try{if(C(a)&&a.name===r&&n.indexOf(a)!==-1)return a}catch{}}try{if(n.indexOf(e.frames[r])!==-1)return e.frames[r]}catch{}try{if(n.indexOf(e[r])!==-1)return e[r]}catch{}}function zr(e,r){return e===Y(r)}function or(e){return e===void 0&&(e=window),Y(e=e||window)||ve(e)||void 0}function Ur(e,r){for(var n=0;n<e.length;n++)for(var i=e[n],a=0;a<r.length;a++)if(i===r[a])return!0;return!1}function Rr(e){e===void 0&&(e=window);for(var r=0,n=e;n;)(n=ve(n))&&(r+=1);return r}function fn(e,r){var n=ct(e)||e,i=ct(r)||r;try{if(n&&i)return n===i}catch{}var a=ht(e),u=ht(r);if(Ur(a,u))return!0;var d=Y(n),h=Y(i);return d&&Ur(ht(d),u)||h&&Ur(ht(h),a),!1}function vt(e,r){if(typeof e=="string"){if(typeof r=="string")return e==="*"||r===e;if(A(r)||Array.isArray(r))return!1}return A(e)?A(r)?e.toString()===r.toString():!Array.isArray(r)&&!!r.match(e):!!Array.isArray(e)&&(Array.isArray(r)?JSON.stringify(e)===JSON.stringify(r):!A(r)&&e.some(function(n){return vt(n,r)}))}function zt(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):z()}function wi(e,r,n,i){n===void 0&&(n=1e3),i===void 0&&(i=1/0);var a;return function u(){if(We(e))return a&&clearTimeout(a),r();i<=0?clearTimeout(a):(i-=n,a=setTimeout(u,n))}(),{cancel:function(){a&&clearTimeout(a)}}}function ir(e){try{if(e===window)return!0}catch(r){if(r&&r.message===ie)return!0}try{if({}.toString.call(e)==="[object Window]")return!0}catch(r){if(r&&r.message===ie)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(r){if(r&&r.message===ie)return!0}try{if(e&&e.self===e)return!0}catch(r){if(r&&r.message===ie)return!0}try{if(e&&e.parent===e)return!0}catch(r){if(r&&r.message===ie)return!0}try{if(e&&e.top===e)return!0}catch(r){if(r&&r.message===ie)return!0}try{if(e&&e.__cross_domain_utils_window_check__==="__unlikely_value__")return!1}catch{return!0}try{if("postMessage"in e&&"self"in e&&"location"in e)return!0}catch{}return!1}function Kn(e){if(r=zt(e),r.indexOf("mock:")!==0)return e;var r;throw new Error("Mock urls not supported out of test mode")}function mi(e){if(C(e))return oe(e).frameElement;for(var r=0,n=document.querySelectorAll("iframe");r<n.length;r++){var i=n[r];if(i&&i.contentWindow&&i.contentWindow===e)return i}}function gi(e){if(function(n){return n===void 0&&(n=window),!!ve(n)}(e)){var r=mi(e);if(r&&r.parentElement){r.parentElement.removeChild(r);return}}try{e.close()}catch{}}function ln(e,r){for(var n=0;n<e.length;n++)try{if(e[n]===r)return n}catch{}return-1}var hn=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if(typeof WeakMap>"u"||Object.freeze===void 0)return!1;try{var n=new WeakMap,i={};return Object.freeze(i),n.set(i,"__testvalue__"),n.get(i)==="__testvalue__"}catch{return!1}}())try{this.weakmap=new WeakMap}catch{}this.keys=[],this.values=[]}var r=e.prototype;return r._cleanupClosedWindows=function(){for(var n=this.weakmap,i=this.keys,a=0;a<i.length;a++){var u=i[a];if(ir(u)&&We(u)){if(n)try{n.delete(u)}catch{}i.splice(a,1),this.values.splice(a,1),a-=1}}},r.isSafeToReadWrite=function(n){return!ir(n)},r.set=function(n,i){if(!n)throw new Error("WeakMap expected key");var a=this.weakmap;if(a)try{a.set(n,i)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var u=this.name,d=n[u];d&&d[0]===n?d[1]=i:Object.defineProperty(n,u,{value:[n,i],writable:!0});return}catch{}this._cleanupClosedWindows();var h=this.keys,l=this.values,m=ln(h,n);m===-1?(h.push(n),l.push(i)):l[m]=i},r.get=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{if(i.has(n))return i.get(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return a&&a[0]===n?a[1]:void 0}catch{}this._cleanupClosedWindows();var u=ln(this.keys,n);if(u!==-1)return this.values[u]},r.delete=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{i.delete(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];a&&a[0]===n&&(a[0]=a[1]=void 0)}catch{}this._cleanupClosedWindows();var u=this.keys,d=ln(u,n);d!==-1&&(u.splice(d,1),this.values.splice(d,1))},r.has=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{if(i.has(n))return!0}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return!(!a||a[0]!==n)}catch{}return this._cleanupClosedWindows(),ln(this.keys,n)!==-1},r.getOrSet=function(n,i){if(this.has(n))return this.get(n);var a=i();return this.set(n,a),a},e}();function yi(e){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function Ec(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ei(e,r,n){return(Ei=Ec()?Reflect.construct:function(i,a,u){var d=[null];d.push.apply(d,a);var h=new(Function.bind.apply(i,d));return u&&v(h,u.prototype),h}).apply(null,arguments)}function bi(e){var r=typeof Map=="function"?new Map:void 0;return(bi=function(n){if(n===null||(i=n,Function.toString.call(i).indexOf("[native code]")===-1))return n;var i;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(n))return r.get(n);r.set(n,a)}function a(){return Ei(n,arguments,yi(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),v(a,n)})(e)}function Yn(e){var r=!1;try{(e instanceof window.Element||e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object")&&(r=!0)}catch{}return r}function Zn(e){return e.name||e.__name__||e.displayName||"anonymous"}function Xn(e,r){try{delete e.name,e.name=r}catch{}return e.__name__=e.displayName=r,e}function Qn(e){if(typeof btoa=="function")return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(r,n){return String.fromCharCode(parseInt(n,16))})).replace(/[=]/g,"");if(typeof Buffer<"u")return Buffer.from(e,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}function rt(){var e="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+Qn(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var pn;function kn(e){try{return JSON.stringify([].slice.call(e),function(r,n){return typeof n=="function"?"memoize["+function(i){if(pn=pn||new hn,i==null||typeof i!="object"&&typeof i!="function")throw new Error("Invalid object");var a=pn.get(i);return a||(a=typeof i+":"+rt(),pn.set(i,a)),a}(n)+"]":Yn(n)?{}:n})}catch{throw new Error("Arguments not serializable -- can not be used to memoize")}}function bc(){return{}}var Lr=0,Pi=0;function Gt(e,r){r===void 0&&(r={});var n=r.thisNamespace,i=n!==void 0&&n,a=r.time,u,d,h=Lr;Lr+=1;var l=function(){for(var m=arguments.length,P=new Array(m),g=0;g<m;g++)P[g]=arguments[g];h<Pi&&(u=null,d=null,h=Lr,Lr+=1);var w;w=i?(d=d||new hn).getOrSet(this,bc):u=u||{};var E;try{E=kn(P)}catch{return e.apply(this,arguments)}var T=w[E];if(T&&a&&Date.now()-T.time<a&&(delete w[E],T=null),T)return T.value;var S=Date.now(),O=e.apply(this,arguments);return w[E]={time:S,value:O},O};return l.reset=function(){u=null,d=null},Xn(l,(r.name||Zn(e))+"::memoized")}Gt.clear=function(){Pi=Lr};function Pc(e){var r={};function n(){for(var i=arguments,a=this,u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];var l=kn(d);return r.hasOwnProperty(l)||(r[l]=p.try(function(){return e.apply(a,i)}).finally(function(){delete r[l]})),r[l]}return n.reset=function(){r={}},Xn(n,Zn(e)+"::promiseMemoized")}function Se(){}function vn(e){var r=!1;return Xn(function(){if(!r)return r=!0,e.apply(this,arguments)},Zn(e)+"::once")}function Sr(e,r){if(r===void 0&&(r=1),r>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+{}.toString.call(e)+">";if(typeof e=="string")return e;if(e instanceof Error){var n=e&&e.stack,i=e&&e.message;if(n&&i)return n.indexOf(i)!==-1?n:i+`
`+n;if(n)return n;if(i)return i}return e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}catch(a){return"Error while stringifying error: "+Sr(a,r+1)}}function wn(e){return typeof e=="string"?e:e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}function Or(e,r){if(!r)return e;if(Object.assign)return Object.assign(e,r);for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}Gt(function(e){if(Object.values)return Object.values(e);var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(e[n]);return r});function Tc(e){return e}function jr(e,r){var n;return function i(){n=setTimeout(function(){e(),i()},r)}(),{cancel:function(){clearTimeout(n)}}}function eo(e){return e.replace(/-([a-z])/g,function(r){return r[1].toUpperCase()})}function Ti(e,r,n){if(Array.isArray(e)){if(typeof r!="number")throw new TypeError("Array key must be number")}else if(typeof e=="object"&&e!==null&&typeof r!="string")throw new TypeError("Object key must be string");Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){delete e[r];var i=n();return e[r]=i,i},set:function(i){delete e[r],e[r]=i}})}function to(e){return[].slice.call(e)}function Ri(e){return typeof(r=e)=="object"&&r!==null&&{}.toString.call(e)==="[object Object]";var r}function ro(e){if(!Ri(e))return!1;var r=e.constructor;if(typeof r!="function")return!1;var n=r.prototype;return!!Ri(n)&&!!n.hasOwnProperty("isPrototypeOf")}function mn(e,r,n){if(n===void 0&&(n=""),Array.isArray(e)){for(var i=e.length,a=[],u=function(P){Ti(a,P,function(){var g=n?n+"."+P:""+P,w=r(e[P],P,g);return(ro(w)||Array.isArray(w))&&(w=mn(w,r,g)),w})},d=0;d<i;d++)u(d);return a}if(ro(e)){var h={},l=function(P){if(!e.hasOwnProperty(P))return 1;Ti(h,P,function(){var g=n?n+"."+P:""+P,w=r(e[P],P,g);return(ro(w)||Array.isArray(w))&&(w=mn(w,r,g)),w})};for(var m in e)l(m);return h}throw new Error("Pass an object or array")}function Jt(e){return e!=null}function no(e){return{}.toString.call(e)==="[object RegExp]"}function Br(e,r,n){if(e.hasOwnProperty(r))return e[r];var i=n();return e[r]=i,i}function gn(e){var r=[],n=!1,i,a={set:function(u,d){return n||(e[u]=d,a.register(function(){delete e[u]})),d},register:function(u){var d=vn(function(){return u(i)});return n?u(i):r.push(d),{cancel:function(){var h=r.indexOf(d);h!==-1&&r.splice(h,1)}}},all:function(u){i=u;var d=[];for(n=!0;r.length;){var h=r.shift();d.push(h())}return p.all(d).then(Se)}};return a}function yn(e,r){if(r==null)throw new Error("Expected "+e+" to be present");return r}var Rc=function(e){R(r,e);function r(n){var i;return(i=e.call(this,n)||this).name=i.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(i),i.constructor):i.stack=new Error(n).stack,i}return r}(bi(Error));function Si(){var e=document.body;if(!e)throw new Error("Body element not found");return e}function En(){return!!document.body&&document.readyState==="complete"}function Oi(){return!!document.body&&document.readyState==="interactive"}function xi(e){return encodeURIComponent(e)}Gt(function(){return new p(function(e){if(En()||Oi())return e();var r=setInterval(function(){if(En()||Oi())return clearInterval(r),e()},10)})});function Di(e){return function(r,n,i){i===void 0&&(i=[]);var a=r.__inline_memoize_cache__=r.__inline_memoize_cache__||{},u=kn(i);return a.hasOwnProperty(u)?a[u]:a[u]=(function(){var d={};if(!e||e.indexOf("=")===-1)return d;for(var h=0,l=e.split("&");h<l.length;h++){var m=l[h];(m=m.split("="))[0]&&m[1]&&(d[decodeURIComponent(m[0])]=decodeURIComponent(m[1]))}return d}).apply(void 0,i)}(Di,0,[e])}function Ii(e,r){return r===void 0&&(r={}),r&&Object.keys(r).length?function(n){return n===void 0&&(n={}),Object.keys(n).filter(function(i){return typeof n[i]=="string"||typeof n[i]=="boolean"}).map(function(i){var a=n[i];if(typeof a!="string"&&typeof a!="boolean")throw new TypeError("Invalid type for query");return xi(i)+"="+xi(a.toString())}).join("&")}(y({},Di(e),r)):e}function Sc(e,r){e.appendChild(r)}function oo(e,r){return r===void 0&&(r=document),Yn(e)?e:typeof e=="string"?r.querySelector(e):void 0}function Ci(e){return new p(function(r,n){var i=wn(e),a=oo(e);if(a)return r(a);if(En())return n(new Error("Document is ready and element "+i+" does not exist"));var u=setInterval(function(){if(a=oo(e))r(a),clearInterval(u);else if(En())return clearInterval(u),n(new Error("Document is ready and element "+i+" does not exist"))},10)})}var io=function(e){R(r,e);function r(){return e.apply(this,arguments)||this}return r}(Rc),bn;function _i(e){if((bn=bn||new hn).has(e)){var r=bn.get(e);if(r)return r}var n=new p(function(i,a){e.addEventListener("load",function(){(function(u){if(function(){for(var d=0;d<nr.length;d++){var h=!1;try{h=nr[d].closed}catch{}h&&(dn.splice(d,1),nr.splice(d,1))}}(),u&&u.contentWindow)try{nr.push(u.contentWindow),dn.push(u)}catch{}})(e),i(e)}),e.addEventListener("error",function(u){e.contentWindow?i(e):a(u)})});return bn.set(e,n),n}function ao(e){return _i(e).then(function(r){if(!r.contentWindow)throw new Error("Could not find window in iframe");return r.contentWindow})}function Ni(e,r){e===void 0&&(e={});var n=e.style||{},i=function(u,d,h){u===void 0&&(u="div"),d===void 0&&(d={}),u=u.toLowerCase();var l=document.createElement(u);if(d.style&&Or(l.style,d.style),d.class&&(l.className=d.class.join(" ")),d.id&&l.setAttribute("id",d.id),d.attributes)for(var m=0,P=Object.keys(d.attributes);m<P.length;m++){var g=P[m];l.setAttribute(g,d.attributes[g])}if(d.styleSheet&&function(w,E,T){T===void 0&&(T=window.document),w.styleSheet?w.styleSheet.cssText=E:w.appendChild(T.createTextNode(E))}(l,d.styleSheet),d.html){if(u==="iframe")throw new Error("Iframe html can not be written unless container provided and iframe in DOM");l.innerHTML=d.html}return l}("iframe",{attributes:y({allowTransparency:"true"},e.attributes||{}),style:y({backgroundColor:"transparent",border:"none"},n),html:e.html,class:e.class}),a=window.navigator.userAgent.match(/MSIE|Edge/i);return i.hasAttribute("id")||i.setAttribute("id",rt()),_i(i),(e.url||a)&&i.setAttribute("src",e.url||"about:blank"),i}function Ai(e,r,n){return e.addEventListener(r,n),{cancel:function(){e.removeEventListener(r,n)}}}function Oc(e){e.style.setProperty("display","")}function Wi(e){e.style.setProperty("display","none","important")}function qr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function xr(e){return!(e&&e.parentNode&&e.ownerDocument&&e.ownerDocument.documentElement&&e.ownerDocument.documentElement.contains(e))}function Mi(e,r,n){var i=n===void 0?{}:n,a=i.width,u=a===void 0||a,d=i.height,h=d===void 0||d,l=i.interval,m=l===void 0?100:l,P=i.win,g=P===void 0?window:P,w=e.offsetWidth,E=e.offsetHeight,T=!1;r({width:w,height:E});var S=function(){if(!T&&function(M){return!!(M.offsetWidth||M.offsetHeight||M.getClientRects().length)}(e)){var L=e.offsetWidth,J=e.offsetHeight;(u&&L!==w||h&&J!==E)&&r({width:L,height:J}),w=L,E=J}},O,W;return g.addEventListener("resize",S),g.ResizeObserver!==void 0?((O=new g.ResizeObserver(S)).observe(e),W=jr(S,10*m)):g.MutationObserver!==void 0?((O=new g.MutationObserver(S)).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),W=jr(S,10*m)):W=jr(S,m),{cancel:function(){T=!0,O.disconnect(),window.removeEventListener("resize",S),W.cancel()}}}function so(e){for(;e.parentNode;)e=e.parentNode;return e.toString()==="[object ShadowRoot]"}var Pn=typeof document<"u"?document.currentScript:null,xc=Gt(function(){if(Pn||(Pn=function(){try{var e=function(){try{throw new Error("_")}catch(d){return d.stack||""}}(),r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(e),n=r&&r[1];if(!n)return;for(var i=0,a=[].slice.call(document.getElementsByTagName("script")).reverse();i<a.length;i++){var u=a[i];if(u.src&&u.src===n)return u}}catch{}}()))return Pn;throw new Error("Can not determine current script")}),Dc=rt();Gt(function(){var e;try{e=xc()}catch{return Dc}var r=e.getAttribute("data-uid");if(r&&typeof r=="string"||(r=e.getAttribute("data-uid-auto"))&&typeof r=="string")return r;if(e.src){var n=function(i){for(var a="",u=0;u<i.length;u++){var d=i[u].charCodeAt(0)*u;i[u+1]&&(d+=i[u+1].charCodeAt(0)*(u-1)),a+=String.fromCharCode(97+Math.abs(d)%26)}return a}(JSON.stringify({src:e.src,dataset:e.dataset}));r="uid_"+n.slice(n.length-30)}else r=rt();return e.setAttribute("data-uid-auto",r),r});function Fi(e){return typeof e=="string"&&/^[0-9]+%$/.test(e)}function co(e){if(typeof e=="number")return e;var r=e.match(/^([0-9]+)(px|%)$/);if(!r)throw new Error("Could not match css value from "+e);return parseInt(r[1],10)}function zi(e){return co(e)+"px"}function Ui(e){return typeof e=="number"?zi(e):Fi(e)?e:zi(e)}function Li(e,r){if(typeof e=="number")return e;if(Fi(e))return parseInt(r*co(e)/100,10);if(typeof(n=e)=="string"&&/^[0-9]+px$/.test(n))return co(e);var n;throw new Error("Can not normalize dimension: "+e)}function Ct(e){e===void 0&&(e=window);var r="__post_robot_11_0_0__";return e!==window?e[r]:e[r]=e[r]||{}}var ji=function(){return{}};function ye(e,r){return e===void 0&&(e="store"),r===void 0&&(r=ji),Br(Ct(),e,function(){var n=r();return{has:function(i){return n.hasOwnProperty(i)},get:function(i,a){return n.hasOwnProperty(i)?n[i]:a},set:function(i,a){return n[i]=a,a},del:function(i){delete n[i]},getOrSet:function(i,a){return Br(n,i,a)},reset:function(){n=r()},keys:function(){return Object.keys(n)}}})}var Ic=function(){};function Tn(){var e=Ct();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new Ic,e.WINDOW_WILDCARD}function tt(e,r){return e===void 0&&(e="store"),r===void 0&&(r=ji),ye("windowStore").getOrSet(e,function(){var n=new hn,i=function(a){return n.getOrSet(a,r)};return{has:function(a){return i(a).hasOwnProperty(e)},get:function(a,u){var d=i(a);return d.hasOwnProperty(e)?d[e]:u},set:function(a,u){return i(a)[e]=u,u},del:function(a){delete i(a)[e]},getOrSet:function(a,u){return Br(i(a),e,u)}}})}function Bi(){return ye("instance").getOrSet("instanceID",rt)}function qi(e,r){var n=r.domain,i=tt("helloPromises"),a=i.get(e);a&&a.resolve({domain:n});var u=p.resolve({domain:n});return i.set(e,u),u}function uo(e,r){return(0,r.send)(e,"postrobot_hello",{instanceID:Bi()},{domain:"*",timeout:-1}).then(function(n){var i=n.origin,a=n.data.instanceID;return qi(e,{domain:i}),{win:e,domain:i,instanceID:a}})}function $i(e,r){var n=r.send;return tt("windowInstanceIDPromises").getOrSet(e,function(){return uo(e,{send:n}).then(function(i){return i.instanceID})})}function Hi(e,r,n){r===void 0&&(r=5e3),n===void 0&&(n="Window");var i=function(a){return tt("helloPromises").getOrSet(a,function(){return new p})}(e);return r!==-1&&(i=i.timeout(r,new Error(n+" did not load after "+r+"ms"))),i}function Vi(e){tt("knownWindows").set(e,!0)}function fo(e){return typeof e=="object"&&e!==null&&typeof e.__type__=="string"}function Gi(e){return e===void 0?"undefined":e===null?"null":Array.isArray(e)?"array":typeof e=="function"?"function":typeof e=="object"?e instanceof Error?"error":typeof e.then=="function"?"promise":{}.toString.call(e)==="[object RegExp]"?"regex":{}.toString.call(e)==="[object Date]"?"date":"object":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":void 0}function ar(e,r){return{__type__:e,__val__:r}}var wt,Cc=((wt={}).function=function(){},wt.error=function(e){return ar("error",{message:e.message,stack:e.stack,code:e.code,data:e.data})},wt.promise=function(){},wt.regex=function(e){return ar("regex",e.source)},wt.date=function(e){return ar("date",e.toJSON())},wt.array=function(e){return e},wt.object=function(e){return e},wt.string=function(e){return e},wt.number=function(e){return e},wt.boolean=function(e){return e},wt.null=function(e){return e},wt[void 0]=function(e){return ar("undefined",e)},wt),_c={},mt,Nc=((mt={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},mt.error=function(e){var r=e.stack,n=e.code,i=e.data,a=new Error(e.message);return a.code=n,i&&(a.data=i),a.stack=r+`

`+a.stack,a},mt.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},mt.regex=function(e){return new RegExp(e)},mt.date=function(e){return new Date(e)},mt.array=function(e){return e},mt.object=function(e){return e},mt.string=function(e){return e},mt.number=function(e){return e},mt.boolean=function(e){return e},mt.null=function(e){return e},mt[void 0]=function(){},mt),Ac={};function lo(){return!!Pr(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function Ji(e){return!fn(window,e)}function Ki(e,r){if(e){if(z()!==zt(e))return!0}else if(r&&!C(r))return!0;return!1}function Yi(e){var r=e.win,n=e.domain;return!(!lo()||n&&!Ki(n,r)||r&&!Ji(r))}function ho(e){return"__postrobot_bridge___"+(e=e||zt(e)).replace(/[^a-zA-Z0-9]+/g,"_")}function Zi(){return!!(window.name&&window.name===ho(z()))}var Wc=new p(function(e){if(window.document&&window.document.body)return e(window.document.body);var r=setInterval(function(){if(window.document&&window.document.body)return clearInterval(r),e(window.document.body)},10)});function Xi(e){tt("remoteWindowPromises").getOrSet(e,function(){return new p})}function po(e){var r=tt("remoteWindowPromises").get(e);if(!r)throw new Error("Remote window promise not found");return r}function Qi(e,r,n){po(e).resolve(function(i,a,u){if(i!==e)throw new Error("Remote window does not match window");if(!vt(a,r))throw new Error("Remote domain "+a+" does not match domain "+r);n.fireAndForget(u)})}function vo(e,r){po(e).reject(r).catch(Se)}function Rn(e){for(var r=e.win,n=e.name,i=e.domain,a=ye("popupWindowsByName"),u=tt("popupWindowsByWin"),d=0,h=a.keys();d<h.length;d++){var l=h[d],m=a.get(l);m&&!We(m.win)||a.del(l)}if(We(r))return{win:r,name:n,domain:i};var P=u.getOrSet(r,function(){return n?a.getOrSet(n,function(){return{win:r,name:n}}):{win:r}});if(P.win&&P.win!==r)throw new Error("Different window already linked for window: "+(n||"undefined"));return n&&(P.name=n,a.set(n,P)),i&&(P.domain=i,Xi(r)),u.set(r,P),P}function ki(e){var r=e.on,n=e.send,i=e.receiveMessage;a=window.open,window.open=function(u,d,h,l){var m=a.call(this,Kn(u),d,h,l);return m&&(Rn({win:m,name:d,domain:u?zt(u):null}),m)};var a;(function(u){var d=u.on,h=u.send,l=u.receiveMessage,m=ye("popupWindowsByName");d("postrobot_open_tunnel",function(P){var g=P.source,w=P.origin,E=P.data,T=ye("bridges").get(w);if(!T)throw new Error("Can not find bridge promise for domain "+w);return T.then(function(S){if(g!==S)throw new Error("Message source does not matched registered bridge for domain "+w);if(!E.name)throw new Error("Register window expected to be passed window name");if(!E.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!m.has(E.name))throw new Error("Window with name "+E.name+" does not exist, or was not opened by this window");var O=function(){return m.get(E.name)};if(!O().domain)throw new Error("We do not have a registered domain for window "+E.name);if(O().domain!==w)throw new Error("Message origin "+w+" does not matched registered window origin "+(O().domain||"unknown"));return Qi(O().win,w,E.sendMessage),{sendMessage:function(W){if(window&&!window.closed&&O()){var L=O().domain;if(L)try{l({data:W,origin:L,source:O().win},{on:d,send:h})}catch(J){p.reject(J)}}}}})})})({on:r,send:n,receiveMessage:i}),function(u){var d=u.send;Ct(window).openTunnelToParent=function(h){var l=h.name,m=h.source,P=h.canary,g=h.sendMessage,w=ye("tunnelWindows"),E=ve(window);if(!E)throw new Error("No parent window found to open tunnel to");var T=function(S){var O=S.name,W=S.source,L=S.canary,J=S.sendMessage;(function(){for(var V=ye("tunnelWindows"),j=0,ee=V.keys();j<ee.length;j++){var H=ee[j];We(V[H].source)&&V.del(H)}})();var M=rt();return ye("tunnelWindows").set(M,{name:O,source:W,canary:L,sendMessage:J}),M}({name:l,source:m,canary:P,sendMessage:g});return d(E,"postrobot_open_tunnel",{name:l,sendMessage:function(){var S=w.get(T);if(S&&S.source&&!We(S.source)){try{S.canary()}catch{return}S.sendMessage.apply(this,arguments)}}},{domain:"*"})}}({send:n}),function(u){var d=u.on,h=u.send,l=u.receiveMessage;p.try(function(){var m=Y(window);if(m&&Yi({win:m})){return Xi(m),(P=m,tt("remoteBridgeAwaiters").getOrSet(P,function(){return p.try(function(){var g=Tr(P,ho(z()));if(g)return C(g)&&Ct(oe(g))?g:new p(function(w){var E,T;E=setInterval(function(){if(g&&C(g)&&Ct(oe(g)))return clearInterval(E),clearTimeout(T),w(g)},100),T=setTimeout(function(){return clearInterval(E),w()},2e3)})})})).then(function(g){return g?window.name?Ct(oe(g)).openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(w){try{}catch{return}if(window&&!window.closed)try{l({data:w,origin:this.origin,source:this.source},{on:d,send:h})}catch(E){p.reject(E)}}}).then(function(w){var E=w.source,T=w.origin,S=w.data;if(E!==m)throw new Error("Source does not match opener");Qi(E,T,S.sendMessage)}).catch(function(w){throw vo(m,w),w}):vo(m,new Error("Can not register with opener: window does not have a name")):vo(m,new Error("Can not register with opener: no bridge found in opener"))});var P}})}({on:r,send:n,receiveMessage:i})}function wo(){for(var e=ye("idToProxyWindow"),r=0,n=e.keys();r<n.length;r++){var i=n[r];e.get(i).shouldClean()&&e.del(i)}}function ea(e,r){var n=r.send,i=r.id,a=i===void 0?rt():i,u=e.then(function(l){if(C(l))return oe(l).name}),d=e.then(function(l){if(We(l))throw new Error("Window is closed, can not determine type");return Y(l)?B.POPUP:B.IFRAME});u.catch(Se),d.catch(Se);var h=function(){return e.then(function(l){if(!We(l))return C(l)?oe(l).name:u})};return{id:a,getType:function(){return d},getInstanceID:Pc(function(){return e.then(function(l){return $i(l,{send:n})})}),close:function(){return e.then(gi)},getName:h,focus:function(){return e.then(function(l){l.focus()})},isClosed:function(){return e.then(function(l){return We(l)})},setLocation:function(l,m){return m===void 0&&(m={}),e.then(function(P){var g=window.location.protocol+"//"+window.location.host,w=m.method,E=w===void 0?"get":w,T=m.body;if(l.indexOf("/")===0)l=""+g+l;else if(!l.match(/^https?:\/\//)&&l.indexOf(g)!==0)throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(l));if(E==="post")return h().then(function(S){if(!S)throw new Error("Can not post to window without target name");(function(O){var W=O.url,L=O.target,J=O.body,M=O.method,V=M===void 0?"post":M,j=document.createElement("form");if(j.setAttribute("target",L),j.setAttribute("method",V),j.setAttribute("action",W),j.style.display="none",J)for(var ee=0,H=Object.keys(J);ee<H.length;ee++){var le,ce=H[ee],Z=document.createElement("input");Z.setAttribute("name",ce),Z.setAttribute("value",(le=J[ce])==null?void 0:le.toString()),j.appendChild(Z)}Si().appendChild(j),j.submit(),Si().removeChild(j)})({url:l,target:S,method:E,body:T})});if(E!=="get")throw new Error("Unsupported method: "+E);if(C(P))try{if(P.location&&typeof P.location.replace=="function"){P.location.replace(l);return}}catch{}P.location=l})},setName:function(l){return e.then(function(m){Rn({win:m,name:l});var P=C(m),g=mi(m);if(!P)throw new Error("Can not set name for cross-domain window: "+l);oe(m).name=l,g&&g.setAttribute("name",l),u=p.resolve(l)})}}}var gt=function(){function e(n){var i=n.send,a=n.win,u=n.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new p,this.serializedWindow=u||ea(this.actualWindowPromise,{send:i}),ye("idToProxyWindow").set(this.getID(),this),a&&this.setWindow(a,{send:i})}var r=e.prototype;return r.getID=function(){return this.serializedWindow.id},r.getType=function(){return this.serializedWindow.getType()},r.isPopup=function(){return this.getType().then(function(n){return n===B.POPUP})},r.setLocation=function(n,i){var a=this;return this.serializedWindow.setLocation(n,i).then(function(){return a})},r.getName=function(){return this.serializedWindow.getName()},r.setName=function(n){var i=this;return this.serializedWindow.setName(n).then(function(){return i})},r.close=function(){var n=this;return this.serializedWindow.close().then(function(){return n})},r.focus=function(){var n=this,i=this.isPopup(),a=this.getName(),u=p.hash({isPopup:i,name:a}).then(function(h){var l=h.name;h.isPopup&&l&&window.open("",l,"noopener")}),d=this.serializedWindow.focus();return p.all([u,d]).then(function(){return n})},r.isClosed=function(){return this.serializedWindow.isClosed()},r.getWindow=function(){return this.actualWindow},r.setWindow=function(n,i){var a=i.send;this.actualWindow=n,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=ea(this.actualWindowPromise,{send:a,id:this.getID()}),tt("winToProxyWindow").set(n,this)},r.awaitWindow=function(){return this.actualWindowPromise},r.matchWindow=function(n,i){var a=this,u=i.send;return p.try(function(){return a.actualWindow?n===a.actualWindow:p.hash({proxyInstanceID:a.getInstanceID(),knownWindowInstanceID:$i(n,{send:u})}).then(function(d){var h=d.proxyInstanceID===d.knownWindowInstanceID;return h&&a.setWindow(n,{send:u}),h})})},r.unwrap=function(){return this.actualWindow||this},r.getInstanceID=function(){return this.serializedWindow.getInstanceID()},r.shouldClean=function(){return!!(this.actualWindow&&We(this.actualWindow))},r.serialize=function(){return this.serializedWindow},e.unwrap=function(n){return e.isProxyWindow(n)?n.unwrap():n},e.serialize=function(n,i){var a=i.send;return wo(),e.toProxyWindow(n,{send:a}).serialize()},e.deserialize=function(n,i){var a=i.send;return wo(),ye("idToProxyWindow").get(n.id)||new e({serializedWindow:n,send:a})},e.isProxyWindow=function(n){return!!(n&&!ir(n)&&n.isProxyWindow)},e.toProxyWindow=function(n,i){var a=i.send;if(wo(),e.isProxyWindow(n))return n;var u=n;return tt("winToProxyWindow").get(u)||new e({win:u,send:a})},e}();function mo(e,r,n,i,a){var u=tt("methodStore"),d=ye("proxyWindowMethods");gt.isProxyWindow(i)?d.set(e,{val:r,name:n,domain:a,source:i}):(d.del(e),u.getOrSet(i,function(){return{}})[e]={domain:a,name:n,val:r,source:i})}function ta(e,r){var n=tt("methodStore"),i=ye("proxyWindowMethods");return n.getOrSet(e,function(){return{}})[r]||i.get(r)}function ra(e,r,n,i,a){d=(u={on:a.on,send:a.send}).on,h=u.send,ye("builtinListeners").getOrSet("functionCalls",function(){return d("postrobot_method",{domain:"*"},function(P){var g=P.source,w=P.origin,E=P.data,T=E.id,S=E.name,O=ta(g,T);if(!O)throw new Error("Could not find method '"+S+"' with id: "+E.id+" in "+z(window));var W=O.source,L=O.domain,J=O.val;return p.try(function(){if(!vt(L,w))throw new Error("Method '"+E.name+"' domain "+JSON.stringify(no(O.domain)?O.domain.source:O.domain)+" does not match origin "+w+" in "+z(window));if(gt.isProxyWindow(W))return W.matchWindow(g,{send:h}).then(function(M){if(!M)throw new Error("Method call '"+E.name+"' failed - proxy window does not match source in "+z(window))})}).then(function(){return J.apply({source:g,origin:w},E.args)},function(M){return p.try(function(){if(J.onError)return J.onError(M)}).then(function(){throw M.stack&&(M.stack="Remote call to "+S+"("+function(V){return V===void 0&&(V=[]),to(V).map(function(j){return typeof j=="string"?"'"+j+"'":j===void 0?"undefined":j===null?"null":typeof j=="boolean"?j.toString():Array.isArray(j)?"[ ... ]":typeof j=="object"?"{ ... }":typeof j=="function"?"() => { ... }":"<"+typeof j+">"}).join(", ")}(E.args)+`) failed

`+M.stack),M})}).then(function(M){return{result:M,id:T,name:S}})})});var u,d,h,l=n.__id__||rt();e=gt.unwrap(e);var m=n.__name__||n.name||i;return typeof m=="string"&&typeof m.indexOf=="function"&&m.indexOf("anonymous::")===0&&(m=m.replace("anonymous::",i+"::")),gt.isProxyWindow(e)?(mo(l,n,m,e,r),e.awaitWindow().then(function(P){mo(l,n,m,P,r)})):mo(l,n,m,e,r),ar("cross_domain_function",{id:l,name:m})}function na(e,r,n,i){var a,u=i.on,d=i.send;return function(h,l){l===void 0&&(l=_c);var m=JSON.stringify(h,function(P){var g=this[P];if(fo(this))return g;var w=Gi(g);if(!w)return g;var E=l[w]||Cc[w];return E?E(g,P):g});return m===void 0?"undefined":m}(n,((a={}).promise=function(h,l){return function(m,P,g,w,E){return ar("cross_domain_zalgo_promise",{then:ra(m,P,function(T,S){return g.then(T,S)},w,{on:E.on,send:E.send})})}(e,r,h,l,{on:u,send:d})},a.function=function(h,l){return ra(e,r,h,l,{on:u,send:d})},a.object=function(h){return ir(h)||gt.isProxyWindow(h)?ar("cross_domain_window",gt.serialize(h,{send:d})):h},a))}function oa(e,r,n,i){var a,u=i.send;return function(d,h){if(h===void 0&&(h=Ac),d!=="undefined")return JSON.parse(d,function(l,m){if(fo(this))return m;var P,g;if(fo(m)?(P=m.__type__,g=m.__val__):(P=Gi(m),g=m),!P)return g;var w=h[P]||Nc[P];return w?w(g,l):g})}(n,((a={}).cross_domain_zalgo_promise=function(d){return function(h,l,m){return new p(m.then)}(0,0,d)},a.cross_domain_function=function(d){return function(h,l,m,P){var g=m.id,w=m.name,E=P.send,T=function(O){O===void 0&&(O={});function W(){var L=arguments;return gt.toProxyWindow(h,{send:E}).awaitWindow().then(function(J){var M=ta(J,g);if(M&&M.val!==W)return M.val.apply({source:window,origin:z()},L);var V=[].slice.call(L);return O.fireAndForget?E(J,"postrobot_method",{id:g,name:w,args:V},{domain:l,fireAndForget:!0}):E(J,"postrobot_method",{id:g,name:w,args:V},{domain:l,fireAndForget:!1}).then(function(j){return j.data.result})}).catch(function(J){throw J})}return W.__name__=w,W.__origin__=l,W.__source__=h,W.__id__=g,W.origin=l,W},S=T();return S.fireAndForget=T({fireAndForget:!0}),S}(e,r,d,{send:u})},a.cross_domain_window=function(d){return gt.deserialize(d,{send:u})},a))}var $r={};$r.postrobot_post_message=function(e,r,n){n.indexOf("file:")===0&&(n="*"),e.postMessage(r,n)},$r.postrobot_bridge=function(e,r,n){if(!lo()&&!Zi())throw new Error("Bridge not needed for browser");if(C(e))throw new Error("Post message through bridge disabled between same domain windows");if(fn(window,e)!==!1)throw new Error("Can only use bridge to communicate between two different windows, not between frames");(function(i,a,u){var d=zr(window,i),h=zr(i,window);if(!d&&!h)throw new Error("Can only send messages to and from parent and popup windows");po(i).then(function(l){return l(i,a,u)})})(e,n,r)},$r.postrobot_global=function(e,r){if(!Pr(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!C(e))throw new Error("Post message through global disabled between different domain windows");if(fn(window,e)!==!1)throw new Error("Can only use global to communicate between two different windows, not between frames");var n=Ct(e);if(!n)throw new Error("Can not find postRobot global on foreign window");n.receiveMessage({source:window,origin:z(),data:r})};function go(e,r,n,i){var a=i.on,u=i.send;return p.try(function(){var d=tt().getOrSet(e,function(){return{}});return d.buffer=d.buffer||[],d.buffer.push(n),d.flush=d.flush||p.flush().then(function(){if(We(e))throw new Error("Window is closed");var h=na(e,r,((l={}).__post_robot_11_0_0__=d.buffer||[],l),{on:a,send:u}),l;delete d.buffer;for(var m=Object.keys($r),P=[],g=0;g<m.length;g++){var w=m[g];try{$r[w](e,h,r)}catch(E){P.push(E)}}if(P.length===m.length)throw new Error(`All post-robot messaging strategies failed:

`+P.map(function(E,T){return T+". "+Sr(E)}).join(`

`))}),d.flush.then(function(){delete d.flush})}).then(Se)}function ia(e){return ye("responseListeners").get(e)}function aa(e){ye("responseListeners").del(e)}function sa(e){return ye("erroredResponseListeners").has(e)}function ca(e){var r=e.name,n=e.win,i=e.domain,a=tt("requestListeners");if(n==="*"&&(n=null),i==="*"&&(i=null),!r)throw new Error("Name required to get request listener");for(var u=0,d=[n,Tn()];u<d.length;u++){var h=d[u];if(h){var l=a.get(h);if(l){var m=l[r];if(m){if(i&&typeof i=="string"){if(m[i])return m[i];if(m.__domain_regex__)for(var P=0,g=m.__domain_regex__;P<g.length;P++){var w=g[P],E=w.listener;if(vt(w.regex,i))return E}}if(m["*"])return m["*"]}}}}}function yo(e,r){var n=r.on,i=r.send,a=ye("receivedMessages");try{if(!window||window.closed||!e.source)return}catch{return}var u=e.source,d=e.origin,h=function(g,w,E,T){var S=T.on,O=T.send,W;try{W=oa(w,E,g,{on:S,send:O})}catch{return}if(W&&typeof W=="object"&&W!==null){var L=W.__post_robot_11_0_0__;if(Array.isArray(L))return L}}(e.data,u,d,{on:n,send:i});if(h){Vi(u);for(var l,m=function(){var g=h[P];if(a.has(g.id))return{v:void 0};if(a.set(g.id,!0),We(u)&&!g.fireAndForget)return{v:void 0};g.origin.indexOf("file:")===0&&(d="file://");try{g.type==="postrobot_message_request"?function(w,E,T,S){var O=S.on,W=S.send,L=ca({name:T.name,win:w,domain:E}),J=T.name==="postrobot_method"&&T.data&&typeof T.data.name=="string"?T.data.name+"()":T.name;function M(V,j,ee){return p.flush().then(function(){if(!T.fireAndForget&&!We(w))try{return go(w,E,{id:rt(),origin:z(window),type:"postrobot_message_response",hash:T.hash,name:T.name,ack:V,data:j,error:ee},{on:O,send:W})}catch(H){throw new Error("Send response message failed for "+J+" in "+z()+`

`+Sr(H))}})}p.all([p.flush().then(function(){if(!T.fireAndForget&&!We(w))try{return go(w,E,{id:rt(),origin:z(window),type:"postrobot_message_ack",hash:T.hash,name:T.name},{on:O,send:W})}catch(V){throw new Error("Send ack message failed for "+J+" in "+z()+`

`+Sr(V))}}),p.try(function(){if(!L)throw new Error("No handler found for post message: "+T.name+" from "+E+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);return L.handler({source:w,origin:E,data:T.data})}).then(function(V){return M("success",V)},function(V){return M("error",null,V)})]).then(Se).catch(function(V){if(L&&L.handleError)return L.handleError(V);throw V})}(u,d,g,{on:n,send:i}):g.type==="postrobot_message_response"?function(w,E,T){if(!sa(T.hash)){var S=ia(T.hash);if(!S)throw new Error("No handler found for post message response for message: "+T.name+" from "+E+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!vt(S.domain,E))throw new Error("Response origin "+E+" does not match domain "+(O=S.domain,Array.isArray(O)?"("+O.join(" | ")+")":A(O)?"RegExp("+O.toString()+")":O.toString()));var O;if(w!==S.win)throw new Error("Response source does not match registered window");aa(T.hash),T.ack==="error"?S.promise.reject(T.error):T.ack==="success"&&S.promise.resolve({source:w,origin:E,data:T.data})}}(u,d,g):g.type==="postrobot_message_ack"&&function(w,E,T){if(!sa(T.hash)){var S=ia(T.hash);if(!S)throw new Error("No handler found for post message ack for message: "+T.name+" from "+E+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!vt(S.domain,E))throw new Error("Ack origin "+E+" does not match domain "+S.domain.toString());if(w!==S.win)throw new Error("Ack source does not match registered window")}catch(O){S.promise.reject(O)}S.ack=!0}}(u,d,g)}catch(w){setTimeout(function(){throw w},0)}},P=0;P<h.length;P++)if(l=m())return l.v}}function Ut(e,r,n){if(!e)throw new Error("Expected name");if(typeof(r=r||{})=="function"&&(n=r,r={}),!n)throw new Error("Expected handler");var i=function a(u,d){var h=u.name,l=u.win,m=u.domain,P=tt("requestListeners");if(!h||typeof h!="string")throw new Error("Name required to add request listener");if(l&&l!=="*"&&gt.isProxyWindow(l)){var g=l.awaitWindow().then(function(le){return a({name:h,win:le,domain:m},d)});return{cancel:function(){g.then(function(le){return le.cancel()},Se)}}}var w=l;if(Array.isArray(w)){for(var E=[],T=0,S=w;T<S.length;T++)E.push(a({name:h,domain:m,win:S[T]},d));return{cancel:function(){for(var le=0;le<E.length;le++)E[le].cancel()}}}if(Array.isArray(m)){for(var O=[],W=0,L=m;W<L.length;W++)O.push(a({name:h,win:w,domain:L[W]},d));return{cancel:function(){for(var le=0;le<O.length;le++)O[le].cancel()}}}var J=ca({name:h,win:w,domain:m});w&&w!=="*"||(w=Tn());var M=(m=m||"*").toString();if(J)throw w&&m?new Error("Request listener already exists for "+h+" on domain "+m.toString()+" for "+(w===Tn()?"wildcard":"specified")+" window"):w?new Error("Request listener already exists for "+h+" for "+(w===Tn()?"wildcard":"specified")+" window"):m?new Error("Request listener already exists for "+h+" on domain "+m.toString()):new Error("Request listener already exists for "+h);var V=P.getOrSet(w,function(){return{}}),j=Br(V,h,function(){return{}}),ee,H;return no(m)?(ee=Br(j,"__domain_regex__",function(){return[]})).push(H={regex:m,listener:d}):j[M]=d,{cancel:function(){delete j[M],H&&(ee.splice(ee.indexOf(H,1)),ee.length||delete j.__domain_regex__),Object.keys(j).length||delete V[h],w&&!Object.keys(V).length&&P.del(w)}}}({name:e,win:r.window,domain:r.domain||"*"},{handler:n||r.handler,handleError:r.errorHandler||function(a){throw a}});return{cancel:function(){i.cancel()}}}var St=function e(r,n,i,a){var u=(a=a||{}).domain||"*",d=a.timeout||-1,h=a.timeout||5e3,l=a.fireAndForget||!1;return gt.toProxyWindow(r,{send:e}).awaitWindow().then(function(m){return p.try(function(){if(function(P,g,w){if(!P)throw new Error("Expected name");if(w&&typeof w!="string"&&!Array.isArray(w)&&!no(w))throw new TypeError("Can not send "+P+". Expected domain "+JSON.stringify(w)+" to be a string, array, or regex");if(We(g))throw new Error("Can not send "+P+". Target window is closed")}(n,m,u),function(P,g){var w=or(g);if(w)return w===P;if(g===P||ct(g)===g)return!1;for(var E=0,T=st(P);E<T.length;E++)if(T[E]===g)return!0;return!1}(window,m))return Hi(m,h)}).then(function(P){return function(g,w,E,T){var S=T.send;return p.try(function(){return typeof w=="string"?w:p.try(function(){return E||uo(g,{send:S}).then(function(O){return O.domain})}).then(function(O){if(!vt(w,w))throw new Error("Domain "+wn(w)+" does not match "+wn(w));return O})})}(m,u,(P===void 0?{}:P).domain,{send:e})}).then(function(P){var g=P,w=n==="postrobot_method"&&i&&typeof i.name=="string"?i.name+"()":n,E=new p,T=n+"_"+rt();if(!l){var S={name:n,win:m,domain:g,promise:E};(function(j,ee){ye("responseListeners").set(j,ee)})(T,S);var O=tt("requestPromises").getOrSet(m,function(){return[]});O.push(E),E.catch(function(){(function(j){ye("erroredResponseListeners").set(j,!0)})(T),aa(T)});var W=function(j){return tt("knownWindows").get(j,!1)}(m)?1e4:2e3,L=d,J=W,M=L,V=jr(function(){return We(m)?E.reject(new Error("Window closed for "+n+" before "+(S.ack?"response":"ack"))):S.cancelled?E.reject(new Error("Response listener was cancelled for "+n)):(J=Math.max(J-500,0),M!==-1&&(M=Math.max(M-500,0)),S.ack||J!==0?M===0?E.reject(new Error("No response for postMessage "+w+" in "+z()+" in "+L+"ms")):void 0:E.reject(new Error("No ack for postMessage "+w+" in "+z()+" in "+W+"ms")))},500);E.finally(function(){V.cancel(),O.splice(O.indexOf(E,1))}).catch(Se)}return go(m,g,{id:rt(),origin:z(window),type:"postrobot_message_request",hash:T,name:n,data:i,fireAndForget:l},{on:Ut,send:e}).then(function(){return l?E.resolve():E},function(j){throw new Error("Send request message failed for "+w+" in "+z()+`

`+Sr(j))})})})};function Hr(e){return gt.toProxyWindow(e,{send:St})}function ua(e){for(var r=0,n=tt("requestPromises").get(e,[]);r<n.length;r++)n[r].reject(new Error("Window "+(We(e)?"closed":"cleaned up")+" before response")).catch(Se)}var Kt;Kt={setupBridge:ki,openBridge:function(e,r){var n=ye("bridges"),i=ye("bridgeFrames");return r=r||zt(e),n.getOrSet(r,function(){return p.try(function(){if(z()===r)throw new Error("Can not open bridge on the same domain as current domain: "+r);var a=ho(r);if(Tr(window,a))throw new Error("Frame with name "+a+" already exists on page");var u=function(d,h){var l=document.createElement("iframe");return l.setAttribute("name",d),l.setAttribute("id",d),l.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),l.setAttribute("frameborder","0"),l.setAttribute("border","0"),l.setAttribute("scrolling","no"),l.setAttribute("allowTransparency","true"),l.setAttribute("tabindex","-1"),l.setAttribute("hidden","true"),l.setAttribute("title",""),l.setAttribute("role","presentation"),l.src=h,l}(a,e);return i.set(r,u),Wc.then(function(d){d.appendChild(u);var h=u.contentWindow;return new p(function(l,m){u.addEventListener("load",l),u.addEventListener("error",m)}).then(function(){return Hi(h,5e3,"Bridge "+e)}).then(function(){return h})})})})},linkWindow:Rn,linkUrl:function(e,r){Rn({win:e,domain:zt(r)})},isBridge:Zi,needsBridge:Yi,needsBridgeForBrowser:lo,hasBridge:function(e,r){return ye("bridges").has(r||zt(e))},needsBridgeForWin:Ji,needsBridgeForDomain:Ki,destroyBridges:function(){for(var e=ye("bridges"),r=ye("bridgeFrames"),n=0,i=r.keys();n<i.length;n++){var a=r.get(i[n]);a&&a.parentNode&&a.parentNode.removeChild(a)}r.reset(),e.reset()}};function Vr(e){if(!C(e))throw new Error("Can not get global for window on different domain");return e.__zoid_10_3_3__||(e.__zoid_10_3_3__={}),e.__zoid_10_3_3__}function da(e,r){try{return r(Vr(e))}catch{}}function Sn(e){return{get:function(){var r=this;return p.try(function(){if(r.source&&r.source!==window)throw new Error("Can not call get on proxy object from a remote window");return e})}}}function Mc(e){return Qn(JSON.stringify(e))}function Eo(e){var r=Vr(e);return r.references=r.references||{},r.references}function fa(e){var r=e.data,n=e.metaData,i=e.sender,a=e.receiver,u=e.passByReference,d=u!==void 0&&u,h=e.basic,l=h!==void 0&&h,m=Hr(a.win),P=l?JSON.stringify(r):na(m,a.domain,r,{on:Ut,send:St}),g=d?function(w){var E=rt();return Eo(window)[E]=w,{type:"uid",uid:E}}(P):{type:"raw",val:P};return{serializedData:Mc({sender:{domain:i.domain},metaData:n,reference:g}),cleanReference:function(){w=window,(E=g).type==="uid"&&delete Eo(w)[E.uid];var w,E}}}function la(e){var r=e.sender,n=e.basic,i=n!==void 0&&n,a=function(P){return JSON.parse(function(g){if(typeof atob=="function")return decodeURIComponent([].map.call(atob(g),function(w){return"%"+("00"+w.charCodeAt(0).toString(16)).slice(-2)}).join(""));if(typeof Buffer<"u")return Buffer.from(g,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(P))}(e.data),u=a.reference,d=a.metaData,h;h=typeof r.win=="function"?r.win({metaData:d}):r.win;var l;l=typeof r.domain=="function"?r.domain({metaData:d}):typeof r.domain=="string"?r.domain:a.sender.domain;var m=function(P,g){if(g.type==="raw")return g.val;if(g.type==="uid")return Eo(P)[g.uid];throw new Error("Unsupported ref type: "+g.type)}(h,u);return{data:i?JSON.parse(m):function(P,g,w){return oa(P,g,w,{on:Ut,send:St})}(h,l,m),metaData:d,sender:{win:h,domain:l},reference:u}}var be={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},On={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},Ce=B,Oe={RENDER:"zoid-render",RENDERED:"zoid-rendered",PRERENDER:"zoid-prerender",PRERENDERED:"zoid-prerendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function ha(e){return"__zoid__"+e.name+"__"+e.serializedPayload+"__"}function bo(e){if(!e)throw new Error("No window name");var r=e.split("__"),n=r[1],i=r[2],a=r[3];if(n!=="zoid")throw new Error("Window not rendered by zoid - got "+n);if(!i)throw new Error("Expected component name");if(!a)throw new Error("Expected serialized payload ref");return{name:i,serializedInitialPayload:a}}var Fc=Gt(function(e){var r=la({data:bo(e).serializedInitialPayload,sender:{win:function(n){return function(i){if(i.type==="opener")return yn("opener",Y(window));if(i.type==="parent"&&typeof i.distance=="number")return yn("parent",function(g,w){return w===void 0&&(w=1),function(E,T){T===void 0&&(T=1);for(var S=E,O=0;O<T;O++){if(!S)return;S=ve(S)}return S}(g,Rr(g)-w)}(window,i.distance));if(i.type==="global"&&i.uid&&typeof i.uid=="string"){var a=i.uid,u=or(window);if(!u)throw new Error("Can not find ancestor window");for(var d=0,h=ht(u);d<h.length;d++){var l=h[d];if(C(l)){var m=da(l,function(g){return g.windows&&g.windows[a]});if(m)return m}}}else if(i.type==="name"){var P=i.name;return yn("namedWindow",function(g,w){return Tr(g,w)||function E(T,S){var O=Tr(T,S);if(O)return O;for(var W=0,L=st(T);W<L.length;W++){var J=E(L[W],S);if(J)return J}}(ct(g)||g,w)}(yn("ancestor",or(window)),P))}throw new Error("Unable to find "+i.type+" parent component window")}(n.metaData.windowRef)}}});return{parent:r.sender,payload:r.data,reference:r.reference}});function pa(){return Fc(window.name)}function zc(e,r){if(r===void 0&&(r=window),e===ve(r))return{type:"parent",distance:Rr(e)};if(e===Y(r))return{type:"opener"};if(C(e)&&(i=e,i!==ct(i))){var n=oe(e).name;if(n)return{type:"name",name:n}}var i}function va(e,r,n,i,a){if(!e.hasOwnProperty(n))return i;var u=e[n];return typeof u.childDecorate=="function"?u.childDecorate({value:i,uid:a.uid,tag:a.tag,close:a.close,focus:a.focus,onError:a.onError,onProps:a.onProps,resize:a.resize,getParent:a.getParent,getParentDomain:a.getParentDomain,show:a.show,hide:a.hide,export:a.export,getSiblings:a.getSiblings}):i}function Uc(){return p.try(function(){window.focus()})}function wa(){return p.try(function(){window.close()})}var Lt=function(){return Se},sr=function(e){return vn(e.value)};function Po(e,r,n){for(var i=0,a=Object.keys(y({},e,r));i<a.length;i++){var u=a[i];n(u,r[u],e[u])}}function ma(e,r,n){var i={};return p.all(function(a,u,d){var h=[];return Po(a,u,function(l,m,P){var g=function(w,E,T){return p.resolve().then(function(){var S,O;if(T!=null&&E){var W=(S={},S.get=E.queryParam,S.post=E.bodyParam,S)[n],L=(O={},O.get=E.queryValue,O.post=E.bodyValue,O)[n];if(W)return p.hash({finalParam:p.try(function(){return typeof W=="function"?W({value:T}):typeof W=="string"?W:w}),finalValue:p.try(function(){return typeof L=="function"&&Jt(T)?L({value:T}):T})}).then(function(J){var M=J.finalParam,V=J.finalValue,j;if(typeof V=="boolean")j=V.toString();else if(typeof V=="string")j=V.toString();else if(typeof V=="object"&&V!==null){if(E.serialization===On.JSON)j=JSON.stringify(V);else if(E.serialization===On.BASE64)j=Qn(JSON.stringify(V));else if(E.serialization===On.DOTIFY||!E.serialization){j=function ce(Z,G,fe){G===void 0&&(G=""),fe===void 0&&(fe={}),G=G&&G+".";for(var te in Z)Z.hasOwnProperty(te)&&Z[te]!=null&&typeof Z[te]!="function"&&(Z[te]&&Array.isArray(Z[te])&&Z[te].length&&Z[te].every(function(_e){return typeof _e!="object"})?fe[""+G+te+"[]"]=Z[te].join(","):Z[te]&&typeof Z[te]=="object"?fe=ce(Z[te],""+G+te,fe):fe[""+G+te]=Z[te].toString());return fe}(V,w);for(var ee=0,H=Object.keys(j);ee<H.length;ee++){var le=H[ee];i[le]=j[le]}return}}else typeof V=="number"&&(j=V.toString());i[M]=j})}})}(l,m,P);h.push(g)}),h}(r,e)).then(function(){return i})}function ga(e){var r=e.uid,n=e.options,i=e.overrides,a=i===void 0?{}:i,u=e.parentWin,d=u===void 0?window:u,h=n.propsDef,l=n.containerTemplate,m=n.prerenderTemplate,P=n.tag,g=n.name,w=n.attributes,E=n.dimensions,T=n.autoResize,S=n.url,O=n.domain,W=n.exports,L=new p,J=[],M=gn(),V={},j={},ee={visible:!0},H=a.event?a.event:(le={},ce={},Z={on:function(x,I){var $=ce[x]=ce[x]||[];$.push(I);var q=!1;return{cancel:function(){q||(q=!0,$.splice($.indexOf(I),1))}}},once:function(x,I){var $=Z.on(x,function(){$.cancel(),I()});return $},trigger:function(x){for(var I=arguments.length,$=new Array(I>1?I-1:0),q=1;q<I;q++)$[q-1]=arguments[q];var ne=ce[x],X=[];if(ne)for(var Pe=function(){var Je=ne[Te];X.push(p.try(function(){return Je.apply(void 0,$)}))},Te=0;Te<ne.length;Te++)Pe();return p.all(X).then(Se)},triggerOnce:function(x){if(le[x])return p.resolve();le[x]=!0;for(var I=arguments.length,$=new Array(I>1?I-1:0),q=1;q<I;q++)$[q-1]=arguments[q];return Z.trigger.apply(Z,[x].concat($))},reset:function(){ce={}}}),le,ce,Z,G=a.props?a.props:{},fe,te,_e,_t,yt,Yt=!1,Zt=a.onError,jt=a.getProxyContainer,Xt=a.show,Qt=a.hide,cr=a.close,kt=a.renderContainer,Ot=a.getProxyWindow,ur=a.setProxyWin,er=a.openFrame,tr=a.openPrerenderFrame,dr=a.prerender,fr=a.open,ue=a.openPrerender,Et=a.watchForUnload,de=a.getInternalState,Ve=a.setInternalState,Me=function(){return typeof E=="function"?E({props:G}):E},Ge=function(){return p.try(function(){return a.resolveInitPromise?a.resolveInitPromise():L.resolve()})},Ie=function(x){return p.try(function(){return a.rejectInitPromise?a.rejectInitPromise(x):L.reject(x)})},nt=function(x){for(var I={},$=0,q=Object.keys(G);$<q.length;$++){var ne=q[$],X=h[ne];if(!X||X.sendToChild!==!1){var Pe=X&&X.trustedDomains&&X.trustedDomains.length>0?X.trustedDomains.reduce(function(Te,Je){return Te||vt(Je,x)},!1):vt(x,z(window));X&&X.sameDomain&&!Pe||X&&X.trustedDomains&&!Pe||(I[ne]=G[ne])}}return p.hash(I)},Be=function(){return p.try(function(){return de?de():ee})},qe=function(x){return p.try(function(){return Ve?Ve(x):ee=y({},ee,x)})},bt=function(){return Ot?Ot():p.try(function(){var x=G.window;if(x){var I=Hr(x);return M.register(function(){return x.close()}),I}return new gt({send:St})})},ut=function(x){return ur?ur(x):p.try(function(){fe=x})},xt=function(){return Xt?Xt():p.hash({setState:qe({visible:!0}),showElement:te?te.get().then(Oc):null}).then(Se)},Bt=function(){return Qt?Qt():p.hash({setState:qe({visible:!1}),showElement:te?te.get().then(Wi):null}).then(Se)},Dr=function(){return typeof S=="function"?S({props:G}):S},Ir=function(){return typeof w=="function"?w({props:G}):w},lr=function(){return zt(Dr())},dt=function(x,I){var $=I.windowName;return er?er(x,{windowName:$}):p.try(function(){if(x===Ce.IFRAME)return Sn(Ni({attributes:y({name:$,title:g},Ir().iframe)}))})},Gr=function(x){return tr?tr(x):p.try(function(){if(x===Ce.IFRAME)return Sn(Ni({attributes:y({name:"__zoid_prerender_frame__"+g+"_"+rt()+"__",title:"prerender__"+g},Ir().iframe)}))})},Jr=function(x,I,$){return ue?ue(x,I,$):p.try(function(){if(x===Ce.IFRAME){if(!$)throw new Error("Expected proxy frame to be passed");return $.get().then(function(q){return M.register(function(){return qr(q)}),ao(q).then(function(ne){return oe(ne)}).then(function(ne){return Hr(ne)})})}if(x===Ce.POPUP)return I;throw new Error("No render context available for "+x)})},Cr=function(){return p.try(function(){if(fe)return p.all([H.trigger(Oe.FOCUS),fe.focus()]).then(Se)})},xn=function(){var x=Vr(window);return x.windows=x.windows||{},x.windows[r]=window,M.register(function(){delete x.windows[r]}),r},Kr=function(x,I,$,q){if(I===z(window))return{type:"global",uid:xn()};if(x!==window)throw new Error("Can not construct cross-domain window reference for different target window");if(G.window){var ne=q.getWindow();if(!ne)throw new Error("Can not construct cross-domain window reference for lazy window prop");if(or(ne)!==window)throw new Error("Can not construct cross-domain window reference for window prop with different ancestor")}if($===Ce.POPUP)return{type:"opener"};if($===Ce.IFRAME)return{type:"parent",distance:Rr(window)};throw new Error("Can not construct window reference for child")},Dn=function(x,I){return p.try(function(){var $;_t=x,_e=I,($=fe)==null||$.isPopup().then(function(q){if((I==null?void 0:I.name)!==""&&q){var ne;(ne=fe)==null||ne.setName(I==null?void 0:I.name)}}).finally(function(){Ge(),M.register(function(){return I.close.fireAndForget().catch(Se)})})})},Yr=function(x){var I=x.width,$=x.height;return p.try(function(){H.trigger(Oe.RESIZE,{width:I,height:$})})},Zr=function(x){return p.try(function(){return H.trigger(Oe.DESTROY)}).catch(Se).then(function(){return M.all(x)}).then(function(){var I=x||new Error("Component destroyed");yt&&xr(yt)||I.message==="Window navigated away"?L.resolve():L.asyncReject(I)})},qt=Gt(function(x){return p.try(function(){return cr?We(cr.__source__)?void 0:cr():p.try(function(){return H.trigger(Oe.CLOSE)}).then(function(){return Zr(x||new Error("Component closed"))})})}),ba=function(x,I){var $=I.proxyWin,q=I.proxyFrame,ne=I.windowName;return fr?fr(x,{proxyWin:$,proxyFrame:q,windowName:ne}):p.try(function(){if(x===Ce.IFRAME){if(!q)throw new Error("Expected proxy frame to be passed");return q.get().then(function(Fe){return ao(Fe).then(function(Ee){return M.register(function(){return qr(Fe)}),M.register(function(){return ua(Ee)}),Ee})})}if(x===Ce.POPUP){var X=Me(),Pe=X.width,Te=Pe===void 0?"300px":Pe,Je=X.height,xe=Je===void 0?"150px":Je;Te=Li(Te,window.outerWidth),xe=Li(xe,window.outerWidth);var $e=function(Fe,Ee){var ze=(Ee=Ee||{}).closeOnUnload,De=ze===void 0?1:ze,ft=Ee.name,Ke=ft===void 0?"":ft,pe=Ee.width,Ye=Ee.height,ot=0,ke=0;pe&&(window.outerWidth?ke=Math.round((window.outerWidth-pe)/2)+window.screenX:window.screen.width&&(ke=Math.round((window.screen.width-pe)/2))),Ye&&(window.outerHeight?ot=Math.round((window.outerHeight-Ye)/2)+window.screenY:window.screen.height&&(ot=Math.round((window.screen.height-Ye)/2))),delete Ee.closeOnUnload,delete Ee.name,pe&&Ye&&(Ee=y({top:ot,left:ke,width:pe,height:Ye,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},Ee));var hr=Object.keys(Ee).map(function(Nt){if(Ee[Nt]!=null)return Nt+"="+wn(Ee[Nt])}).filter(Boolean).join(","),Pt;try{Pt=window.open("",Ke,hr)}catch(Nt){throw new io("Can not open popup window - "+(Nt.stack||Nt.message))}if(We(Pt))throw new io("Can not open popup window - blocked");return De&&window.addEventListener("unload",function(){return Pt.close()}),Pt}(0,y({name:ne,width:Te,height:xe},Ir().popup));return M.register(function(){return gi($e)}),M.register(function(){return ua($e)}),$e}throw new Error("No render context available for "+x)}).then(function(X){return $.setWindow(X,{send:St}),$.setName(ne).then(function(){return $})})},Pa=function(){return p.try(function(){var x=Ai(window,"unload",vn(function(){Zr(new Error("Window navigated away"))})),I=wi(d,Zr,3e3);if(M.register(I.cancel),M.register(x.cancel),Et)return Et()})},Ta=function(x){var I=!1;return x.isClosed().then(function($){return $?(I=!0,qt(new Error("Detected component window close"))):p.delay(200).then(function(){return x.isClosed()}).then(function(q){if(q)return I=!0,qt(new Error("Detected component window close"))})}).then(function(){return I})},Xr=function(x){return Zt?Zt(x):p.try(function(){if(J.indexOf(x)===-1)return J.push(x),L.asyncReject(x),H.trigger(Oe.ERROR,x)})},Ra=new p,Sa=function(x){return p.try(function(){Ra.resolve(x)})};Dn.onError=Xr;var Oa=function(x,I){return x({uid:r,container:I.container,context:I.context,doc:I.doc,frame:I.frame,prerenderFrame:I.prerenderFrame,focus:Cr,close:qt,state:V,props:G,tag:P,dimensions:Me(),event:H})},xa=function(x,I){var $=I.context;return dr?dr(x,{context:$}):p.try(function(){if(m){H.trigger(Oe.PRERENDER);var q=x.getWindow();if(q&&C(q)&&function(ze){try{if(!ze.location.href||ze.location.href==="about:blank")return!0}catch{}return!1}(q)){var ne=(q=oe(q)).document,X=Oa(m,{context:$,doc:ne});if(X){if(X.ownerDocument!==ne)throw new Error("Expected prerender template to have been created with document from child window");(function(ze,De){var ft=De.tagName.toLowerCase();if(ft!=="html")throw new Error("Expected element to be html, got "+ft);for(var Ke=ze.document.documentElement,pe=0,Ye=to(Ke.children);pe<Ye.length;pe++)Ke.removeChild(Ye[pe]);for(var ot=0,ke=to(De.children);ot<ke.length;ot++)Ke.appendChild(ke[ot])})(q,X);var Pe=T.width,Te=Pe!==void 0&&Pe,Je=T.height,xe=Je!==void 0&&Je,$e=T.element,Fe=$e===void 0?"body":$e;if((Fe=oo(Fe,ne))&&(Te||xe)){var Ee=Mi(Fe,function(ze){Yr({width:Te?ze.width:void 0,height:xe?ze.height:void 0})},{width:Te,height:xe,win:q});H.on(Oe.RENDERED,Ee.cancel)}H.trigger(Oe.PRERENDERED)}}}})},Da=function(x,I){var $=I.proxyFrame,q=I.proxyPrerenderFrame,ne=I.context,X=I.rerender;return kt?kt(x,{proxyFrame:$,proxyPrerenderFrame:q,context:ne,rerender:X}):p.hash({container:x.get(),frame:$?$.get():null,prerenderFrame:q?q.get():null,internalState:Be()}).then(function(Pe){var Te=Pe.container,Je=Pe.internalState.visible,xe=Oa(l,{context:ne,container:Te,frame:Pe.frame,prerenderFrame:Pe.prerenderFrame,doc:document});if(xe){Je||Wi(xe),Sc(Te,xe);var $e=function(Fe,Ee){Ee=vn(Ee);var ze=!1,De=[],ft,Ke,pe,Ye=function(){ze=!0;for(var Pt=0;Pt<De.length;Pt++)De[Pt].disconnect();ft&&ft.cancel(),pe&&pe.removeEventListener("unload",ot),Ke&&qr(Ke)},ot=function(){ze||(Ee(),Ye())};if(xr(Fe))return ot(),{cancel:Ye};if(window.MutationObserver)for(var ke=Fe.parentElement;ke;){var hr=new window.MutationObserver(function(){xr(Fe)&&ot()});hr.observe(ke,{childList:!0}),De.push(hr),ke=ke.parentElement}return(Ke=document.createElement("iframe")).setAttribute("name","__detect_close_"+rt()+"__"),Ke.style.display="none",ao(Ke).then(function(Pt){(pe=oe(Pt)).addEventListener("unload",ot)}),Fe.appendChild(Ke),ft=jr(function(){xr(Fe)&&ot()},1e3),{cancel:Ye}}(xe,function(){var Fe=new Error("Detected container element removed from DOM");return p.delay(1).then(function(){if(!xr(xe))return M.all(Fe),X().then(Ge,Ie);qt(Fe)})});return M.register(function(){return $e.cancel()}),M.register(function(){return qr(xe)}),te=Sn(xe)}})},Ia=function(){return{state:V,event:H,close:qt,focus:Cr,resize:Yr,onError:Xr,updateProps:Yc,show:xt,hide:Bt}},So=function(x){x===void 0&&(x={});var I=yt,$=Ia();Or(j,x),function(q,ne,X,Pe,Te){var Je=Pe.state,xe=Pe.close,$e=Pe.focus,Fe=Pe.event,Ee=Pe.onError;Po(X,q,function(ze,De,ft){var Ke=!1,pe=ft;Object.defineProperty(ne,ze,{configurable:!0,enumerable:!0,get:function(){return Ke?pe:(Ke=!0,function(){if(!De)return pe;var Ye=De.alias;if(Ye&&!Jt(ft)&&Jt(X[Ye])&&(pe=X[Ye]),De.value&&(pe=De.value({props:ne,state:Je,close:xe,focus:$e,event:Fe,onError:Ee,container:Te})),!De.default||Jt(pe)||Jt(X[ze])||(pe=De.default({props:ne,state:Je,close:xe,focus:$e,event:Fe,onError:Ee,container:Te})),Jt(pe)){if(De.type===be.ARRAY?!Array.isArray(pe):typeof pe!==De.type)throw new TypeError("Prop is not of type "+De.type+": "+ze)}else if(De.required!==!1&&!Jt(X[ze]))throw new Error('Expected prop "'+ze+'" to be defined');return Jt(pe)&&De.decorate&&(pe=De.decorate({value:pe,props:ne,state:Je,close:xe,focus:$e,event:Fe,onError:Ee,container:Te})),pe}())}})}),Po(ne,q,Se)}(h,G,j,$,I)},Yc=function(x){return So(x),L.then(function(){var I=_e,$=fe;if(I&&$&&_t)return nt(_t).then(function(q){return I.updateProps(q).catch(function(ne){return Ta($).then(function(X){if(!X)throw ne})})})})},Ca=function(x){return jt?jt(x):p.try(function(){return Ci(x)}).then(function(I){return so(I)&&(I=function $(q){var ne=function(Je){var xe=function($e){for(;$e.parentNode;)$e=$e.parentNode;if(so($e))return $e}(Je);if(xe&&xe.host)return xe.host}(q);if(!ne)throw new Error("Element is not in shadow dom");var X="shadow-slot-"+rt(),Pe=document.createElement("slot");Pe.setAttribute("name",X),q.appendChild(Pe);var Te=document.createElement("div");return Te.setAttribute("slot",X),ne.appendChild(Te),so(ne)?$(Te):Te}(I)),yt=I,Sn(I)})};return{init:function(){(function(){H.on(Oe.RENDER,function(){return G.onRender()}),H.on(Oe.PRERENDER,function(){return G.onPrerender()}),H.on(Oe.DISPLAY,function(){return G.onDisplay()}),H.on(Oe.RENDERED,function(){return G.onRendered()}),H.on(Oe.PRERENDERED,function(){return G.onPrerendered()}),H.on(Oe.CLOSE,function(){return G.onClose()}),H.on(Oe.DESTROY,function(){return G.onDestroy()}),H.on(Oe.RESIZE,function(){return G.onResize()}),H.on(Oe.FOCUS,function(){return G.onFocus()}),H.on(Oe.PROPS,function(x){return G.onProps(x)}),H.on(Oe.ERROR,function(x){return G&&G.onError?G.onError(x):Ie(x).then(function(){setTimeout(function(){throw x},1)})}),M.register(H.reset)})()},render:function(x){var I=x.target,$=x.container,q=x.context,ne=x.rerender;return p.try(function(){var X=lr(),Pe=O||lr();(function(K,Ze,Ue){if(K!==window){if(!fn(window,K))throw new Error("Can only renderTo an adjacent frame");var Xe=z();if(!vt(Ze,Xe)&&!C(K))throw new Error("Can not render remotely to "+Ze.toString()+" - can only render to "+Xe);if(Ue&&typeof Ue!="string")throw new Error("Container passed to renderTo must be a string selector, got "+typeof Ue+" }")}})(I,Pe,$);var Te=p.try(function(){if(I!==window)return function(K,Ze){for(var Ue={},Xe=0,pt=Object.keys(G);Xe<pt.length;Xe++){var Le=pt[Xe],Tt=h[Le];Tt&&Tt.allowDelegate&&(Ue[Le]=G[Le])}var et=St(Ze,"zoid_delegate_"+g,{uid:r,overrides:{props:Ue,event:H,close:qt,onError:Xr,getInternalState:Be,setInternalState:qe,resolveInitPromise:Ge,rejectInitPromise:Ie}}).then(function(Q){var k=Q.data.parent;return M.register(function(F){if(!We(Ze))return k.destroy(F)}),k.getDelegateOverrides()}).catch(function(Q){throw new Error(`Unable to delegate rendering. Possibly the component is not loaded in the target window.

`+Sr(Q))});return jt=function(){for(var Q=arguments.length,k=new Array(Q),F=0;F<Q;F++)k[F]=arguments[F];return et.then(function(re){return re.getProxyContainer.apply(re,k)})},kt=function(){for(var Q=arguments.length,k=new Array(Q),F=0;F<Q;F++)k[F]=arguments[F];return et.then(function(re){return re.renderContainer.apply(re,k)})},Xt=function(){for(var Q=arguments.length,k=new Array(Q),F=0;F<Q;F++)k[F]=arguments[F];return et.then(function(re){return re.show.apply(re,k)})},Qt=function(){for(var Q=arguments.length,k=new Array(Q),F=0;F<Q;F++)k[F]=arguments[F];return et.then(function(re){return re.hide.apply(re,k)})},Et=function(){for(var Q=arguments.length,k=new Array(Q),F=0;F<Q;F++)k[F]=arguments[F];return et.then(function(re){return re.watchForUnload.apply(re,k)})},K===Ce.IFRAME?(Ot=function(){for(var Q=arguments.length,k=new Array(Q),F=0;F<Q;F++)k[F]=arguments[F];return et.then(function(re){return re.getProxyWindow.apply(re,k)})},er=function(){for(var Q=arguments.length,k=new Array(Q),F=0;F<Q;F++)k[F]=arguments[F];return et.then(function(re){return re.openFrame.apply(re,k)})},tr=function(){for(var Q=arguments.length,k=new Array(Q),F=0;F<Q;F++)k[F]=arguments[F];return et.then(function(re){return re.openPrerenderFrame.apply(re,k)})},dr=function(){for(var Q=arguments.length,k=new Array(Q),F=0;F<Q;F++)k[F]=arguments[F];return et.then(function(re){return re.prerender.apply(re,k)})},fr=function(){for(var Q=arguments.length,k=new Array(Q),F=0;F<Q;F++)k[F]=arguments[F];return et.then(function(re){return re.open.apply(re,k)})},ue=function(){for(var Q=arguments.length,k=new Array(Q),F=0;F<Q;F++)k[F]=arguments[F];return et.then(function(re){return re.openPrerender.apply(re,k)})}):K===Ce.POPUP&&(ur=function(){for(var Q=arguments.length,k=new Array(Q),F=0;F<Q;F++)k[F]=arguments[F];return et.then(function(re){return re.setProxyWin.apply(re,k)})}),et}(q,I)}),Je=G.window,xe=Pa(),$e=ma(h,G,"post"),Fe=H.trigger(Oe.RENDER),Ee=Ca($),ze=bt(),De=Ee.then(function(){return So()}),ft=De.then(function(){return ma(h,G,"get").then(function(K){return function(Ze,Ue){var Xe=Ue.query||{},pt=Ue.hash||{},Le,Tt,et=Ze.split("#");Tt=et[1];var Q=(Le=et[0]).split("?");Le=Q[0];var k=Ii(Q[1],Xe),F=Ii(Tt,pt);return k&&(Le=Le+"?"+k),F&&(Le=Le+"#"+F),Le}(Kn(Dr()),{query:K})})}),Ke=ze.then(function(K){return function(Ue){var Xe=Ue===void 0?{}:Ue,pt=Xe.proxyWin,Le=Xe.initialChildDomain,Tt=Xe.childDomainMatch,et=Xe.target,Q=et===void 0?window:et,k=Xe.context;return function(F){var re=F===void 0?{}:F,Oo=re.proxyWin,ru=re.childDomainMatch,nu=re.context;return nt(re.initialChildDomain).then(function(ou){return{uid:r,context:nu,tag:P,childDomainMatch:ru,version:"10_3_3",props:ou,exports:(Aa=Oo,{init:function(iu){return Dn(this.origin,iu)},close:qt,checkClose:function(){return Ta(Aa)},resize:Yr,onError:Xr,show:xt,hide:Bt,export:Sa})};var Aa})}({proxyWin:pt,initialChildDomain:Le,childDomainMatch:Tt,context:k}).then(function(F){var re=fa({data:F,metaData:{windowRef:Kr(Q,Le,k,pt)},sender:{domain:z(window)},receiver:{win:pt,domain:Tt},passByReference:Le===z()}),Oo=re.serializedData;return M.register(re.cleanReference),Oo})}({proxyWin:(Ze={proxyWin:K,initialChildDomain:X,childDomainMatch:Pe,target:I,context:q}).proxyWin,initialChildDomain:Ze.initialChildDomain,childDomainMatch:Ze.childDomainMatch,target:Ze.target,context:Ze.context}).then(function(Ue){return ha({name:g,serializedPayload:Ue})});var Ze}),pe=Ke.then(function(K){return dt(q,{windowName:K})}),Ye=Gr(q),ot=p.hash({proxyContainer:Ee,proxyFrame:pe,proxyPrerenderFrame:Ye}).then(function(K){return Da(K.proxyContainer,{context:q,proxyFrame:K.proxyFrame,proxyPrerenderFrame:K.proxyPrerenderFrame,rerender:ne})}).then(function(K){return K}),ke=p.hash({windowName:Ke,proxyFrame:pe,proxyWin:ze}).then(function(K){var Ze=K.proxyWin;return Je?Ze:ba(q,{windowName:K.windowName,proxyWin:Ze,proxyFrame:K.proxyFrame})}),hr=p.hash({proxyWin:ke,proxyPrerenderFrame:Ye}).then(function(K){return Jr(q,K.proxyWin,K.proxyPrerenderFrame)}),Pt=ke.then(function(K){return fe=K,ut(K)}),Nt=p.hash({proxyPrerenderWin:hr,state:Pt}).then(function(K){return xa(K.proxyPrerenderWin,{context:q})}),_a=p.hash({proxyWin:ke,windowName:Ke}).then(function(K){if(Je)return K.proxyWin.setName(K.windowName)}),Zc=p.hash({body:$e}).then(function(K){return n.method?n.method:Object.keys(K.body).length?"post":"get"}),Na=p.hash({proxyWin:ke,windowUrl:ft,body:$e,method:Zc,windowName:_a,prerender:Nt}).then(function(K){return K.proxyWin.setLocation(K.windowUrl,{method:K.method,body:K.body})}),Xc=ke.then(function(K){(function Ze(Ue,Xe){var pt=!1;return M.register(function(){pt=!0}),p.delay(2e3).then(function(){return Ue.isClosed()}).then(function(Le){if(!pt){if(Xe===Ce.POPUP&&Le)return qt(new Error("Detected popup close"));var Tt=!!(yt&&xr(yt));return Xe===Ce.IFRAME&&Le&&(Tt||Yt)?qt(new Error("Detected iframe close")):Ze(Ue,Xe)}})})(K,q)}),Qc=p.hash({container:ot,prerender:Nt}).then(function(){return H.trigger(Oe.DISPLAY)}),kc=ke.then(function(K){return function(Ze,Ue,Xe){return p.try(function(){return Ze.awaitWindow()}).then(function(pt){if(Kt&&Kt.needsBridge({win:pt,domain:Ue})&&!Kt.hasBridge(Ue,Ue)){var Le=typeof n.bridgeUrl=="function"?n.bridgeUrl({props:G}):n.bridgeUrl;if(!Le)throw new Error("Bridge needed to render "+Xe);var Tt=zt(Le);return Kt.linkUrl(pt,Ue),Kt.openBridge(Kn(Le),Tt)}})}(K,X,q)}),eu=Na.then(function(){return p.try(function(){var K=G.timeout;if(K)return L.timeout(K,new Error("Loading component timed out after "+K+" milliseconds"))})}),tu=L.then(function(){return Yt=!0,H.trigger(Oe.RENDERED)});return p.hash({initPromise:L,buildUrlPromise:ft,onRenderPromise:Fe,getProxyContainerPromise:Ee,openFramePromise:pe,openPrerenderFramePromise:Ye,renderContainerPromise:ot,openPromise:ke,openPrerenderPromise:hr,setStatePromise:Pt,prerenderPromise:Nt,loadUrlPromise:Na,buildWindowNamePromise:Ke,setWindowNamePromise:_a,watchForClosePromise:Xc,onDisplayPromise:Qc,openBridgePromise:kc,runTimeoutPromise:eu,onRenderedPromise:tu,delegatePromise:Te,watchForUnloadPromise:xe,finalSetPropsPromise:De})}).catch(function(X){return p.all([Xr(X),Zr(X)]).then(function(){throw X},function(){throw X})}).then(Se)},destroy:Zr,getProps:function(){return G},setProps:So,export:Sa,getHelpers:Ia,getDelegateOverrides:function(){return p.try(function(){return{getProxyContainer:Ca,show:xt,hide:Bt,renderContainer:Da,getProxyWindow:bt,watchForUnload:Pa,openFrame:dt,openPrerenderFrame:Gr,prerender:xa,open:ba,openPrerender:Jr,setProxyWin:ut}})},getExports:function(){return W({getExports:function(){return Ra}})}}}var Lc={register:function(e,r,n,i){var a=i.React,u=i.ReactDOM;return function(d){R(h,d);function h(){return d.apply(this,arguments)||this}var l=h.prototype;return l.render=function(){return a.createElement("div",null)},l.componentDidMount=function(){var m=u.findDOMNode(this),P=n(Or({},this.props));P.render(m,Ce.IFRAME),this.setState({parent:P})},l.componentDidUpdate=function(){this.state&&this.state.parent&&this.state.parent.updateProps(Or({},this.props)).catch(Se)},h}(a.Component)}},jc={register:function(e,r,n,i){return i.component(e,{render:function(a){return a("div")},inheritAttrs:!1,mounted:function(){var a=this.$el;this.parent=n(y({},(u=this.$attrs,Object.keys(u).reduce(function(d,h){var l=u[h];return h==="style-object"||h==="styleObject"?(d.style=l,d.styleObject=l):h.includes("-")?d[eo(h)]=l:d[h]=l,d},{}))));var u;this.parent.render(a,Ce.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(y({},this.$attrs)).catch(Se)},deep:!0}}})}},Bc={register:function(e,r,n){return{template:"<div></div>",inheritAttrs:!1,mounted:function(){var i=this.$el;this.parent=n(y({},(a=this.$attrs,Object.keys(a).reduce(function(u,d){var h=a[d];return d==="style-object"||d==="styleObject"?(u.style=h,u.styleObject=h):d.includes("-")?u[eo(d)]=h:u[d]=h,u},{}))));var a;this.parent.render(i,Ce.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(y({},this.$attrs)).catch(Se)},deep:!0}}}}},qc={register:function(e,r,n,i){return i.module(e,[]).directive(eo(e),function(){for(var a={},u=0,d=Object.keys(r);u<d.length;u++)a[d[u]]="=";return a.props="=",{scope:a,restrict:"E",controller:["$scope","$element",function(h,l){function m(){if(h.$root.$$phase!=="$apply"&&h.$root.$$phase!=="$digest")try{h.$apply()}catch{}}var P=function(){return mn(h.props,function(w){return typeof w=="function"?function(){var E=w.apply(this,arguments);return m(),E}:w})},g=n(P());g.render(l[0],Ce.IFRAME),h.$watch(function(){g.updateProps(P()).catch(Se)})}]}})}},$c={register:function(e,r,n,i){var a=i.Component,u=i.NgModule,d=i.ElementRef,h=i.NgZone,l=i.Inject,m=function(){function g(E,T){this.elementRef=void 0,this.internalProps=void 0,this.parent=void 0,this.props=void 0,this.zone=void 0,this._props=void 0,this._props={},this.elementRef=E,this.zone=T}var w=g.prototype;return w.getProps=function(){var E=this;return mn(y({},this.internalProps,this.props),function(T){if(typeof T=="function"){var S=E.zone;return function(){var O=arguments,W=this;return S.run(function(){return T.apply(W,O)})}}return T})},w.ngOnInit=function(){var E=this.elementRef.nativeElement;this.parent=n(this.getProps()),this.parent.render(E,Ce.IFRAME)},w.ngDoCheck=function(){this.parent&&!function(E,T){var S={};for(var O in E)if(E.hasOwnProperty(O)&&(S[O]=!0,E[O]!==T[O]))return!1;for(var W in T)if(!S[W])return!1;return!0}(this._props,this.props)&&(this._props=y({},this.props),this.parent.updateProps(this.getProps()))},g}();m.annotations=void 0,m.parameters=void 0,m.parameters=[[new l(d)],[new l(h)]],m.annotations=[new a({selector:e,template:"<div></div>",inputs:["props"]})];var P=function(){};return P.annotations=void 0,P.annotations=[new u({declarations:[m],exports:[m]})],P}};function Hc(e){var r=e.uid,n=e.frame,i=e.prerenderFrame,a=e.doc,u=e.props,d=e.event,h=e.dimensions,l=h.width,m=h.height;if(n&&i){var P=a.createElement("div");P.setAttribute("id",r);var g=a.createElement("style");return u.cspNonce&&g.setAttribute("nonce",u.cspNonce),g.appendChild(a.createTextNode(`
            #`+r+` {
                display: inline-block;
                position: relative;
                width: `+l+`;
                height: `+m+`;
            }

            #`+r+` > iframe {
                display: inline-block;
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                transition: opacity .2s ease-in-out;
            }

            #`+r+` > iframe.zoid-invisible {
                opacity: 0;
            }

            #`+r+` > iframe.zoid-visible {
                opacity: 1;
        }
        `)),P.appendChild(n),P.appendChild(i),P.appendChild(g),i.classList.add("zoid-visible"),n.classList.add("zoid-invisible"),d.on(Oe.RENDERED,function(){i.classList.remove("zoid-visible"),i.classList.add("zoid-invisible"),n.classList.remove("zoid-invisible"),n.classList.add("zoid-visible"),setTimeout(function(){qr(i)},1)}),d.on(Oe.RESIZE,function(w){var E=w.width,T=w.height;typeof E=="number"&&(P.style.width=Ui(E)),typeof T=="number"&&(P.style.height=Ui(T))}),P}}function Vc(e){var r=e.doc,n=e.props,i=r.createElement("html"),a=r.createElement("body"),u=r.createElement("style"),d=r.createElement("div");return d.classList.add("spinner"),n.cspNonce&&u.setAttribute("nonce",n.cspNonce),i.appendChild(a),a.appendChild(d),a.appendChild(u),u.appendChild(r.createTextNode(`
            html, body {
                width: 100%;
                height: 100%;
            }

            .spinner {
                position: fixed;
                max-height: 60vmin;
                max-width: 60vmin;
                height: 40px;
                width: 40px;
                top: 50%;
                left: 50%;
                box-sizing: border-box;
                border: 3px solid rgba(0, 0, 0, .2);
                border-top-color: rgba(33, 128, 192, 0.8);
                border-radius: 100%;
                animation: rotation .7s infinite linear;
            }

            @keyframes rotation {
                from {
                    transform: translateX(-50%) translateY(-50%) rotate(0deg);
                }
                to {
                    transform: translateX(-50%) translateY(-50%) rotate(359deg);
                }
            }
        `)),i}var To=gn(),Ro=gn();function Gc(e){var r=function(T){var S=T.tag,O=T.url,W=T.domain,L=T.bridgeUrl,J=T.props,M=J===void 0?{}:J,V=T.dimensions,j=V===void 0?{}:V,ee=T.autoResize,H=ee===void 0?{}:ee,le=T.allowedParentDomains,ce=le===void 0?"*":le,Z=T.attributes,G=Z===void 0?{}:Z,fe=T.defaultContext,te=fe===void 0?Ce.IFRAME:fe,_e=T.containerTemplate,_t=_e===void 0?Hc:_e,yt=T.prerenderTemplate,Yt=yt===void 0?Vc:yt,Zt=T.validate,jt=T.eligible,Xt=jt===void 0?function(){return{eligible:!0}}:jt,Qt=T.logger,cr=Qt===void 0?{info:Se}:Qt,kt=T.exports,Ot=kt===void 0?Se:kt,ur=T.method,er=T.children,tr=er===void 0?function(){return{}}:er,dr=S.replace(/-/g,"_"),fr=y({},{window:{type:be.OBJECT,sendToChild:!1,required:!1,allowDelegate:!0,validate:function(ue){var Et=ue.value;if(!ir(Et)&&!gt.isProxyWindow(Et))throw new Error("Expected Window or ProxyWindow");if(ir(Et)){if(We(Et))throw new Error("Window is closed");if(!C(Et))throw new Error("Window is not same domain")}},decorate:function(ue){return Hr(ue.value)}},timeout:{type:be.NUMBER,required:!1,sendToChild:!1},cspNonce:{type:be.STRING,required:!1},onDisplay:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Lt,decorate:sr},onRendered:{type:be.FUNCTION,required:!1,sendToChild:!1,default:Lt,decorate:sr},onRender:{type:be.FUNCTION,required:!1,sendToChild:!1,default:Lt,decorate:sr},onPrerendered:{type:be.FUNCTION,required:!1,sendToChild:!1,default:Lt,decorate:sr},onPrerender:{type:be.FUNCTION,required:!1,sendToChild:!1,default:Lt,decorate:sr},onClose:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Lt,decorate:sr},onDestroy:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Lt,decorate:sr},onResize:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Lt},onFocus:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Lt},close:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.close}},focus:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.focus}},resize:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.resize}},uid:{type:be.STRING,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.uid}},tag:{type:be.STRING,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.tag}},getParent:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.getParent}},getParentDomain:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.getParentDomain}},show:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.show}},hide:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.hide}},export:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.export}},onError:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.onError}},onProps:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.onProps}},getSiblings:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.getSiblings}}},M);if(!_t)throw new Error("Container template required");return{name:dr,tag:S,url:O,domain:W,bridgeUrl:L,method:ur,propsDef:fr,dimensions:j,autoResize:H,allowedParentDomains:ce,attributes:G,defaultContext:te,containerTemplate:_t,prerenderTemplate:Yt,validate:Zt,logger:cr,eligible:Xt,children:tr,exports:typeof Ot=="function"?Ot:function(ue){for(var Et=ue.getExports,de={},Ve=function(){var Ie=Ge[Me],nt=Ot[Ie].type,Be=Et().then(function(qe){return qe[Ie]});de[Ie]=nt===be.FUNCTION?function(){for(var qe=arguments.length,bt=new Array(qe),ut=0;ut<qe;ut++)bt[ut]=arguments[ut];return Be.then(function(xt){return xt.apply(void 0,bt)})}:Be},Me=0,Ge=Object.keys(Ot);Me<Ge.length;Me++)Ve();return de}}}(e),n=r.name,i=r.tag,a=r.defaultContext,u=r.propsDef,d=r.eligible,h=r.children,l=Vr(window),m={},P=[],g=function(){if(function(S){try{return bo(window.name).name===S}catch{}return!1}(n)){var T=pa().payload;if(T.tag===i&&vt(T.childDomainMatch,z()))return!0}return!1},w=Gt(function(){if(g()){if(window.xprops)throw delete l.components[i],new Error("Can not register "+n+" as child - child already registered");var T=function(S){var O=S.tag,W=S.propsDef,L=S.autoResize,J=S.allowedParentDomains,M=[],V=pa(),j=V.parent,ee=V.payload,H=j.win,le=j.domain,ce,Z=new p,G=ee.version,fe=ee.uid,te=ee.exports,_e=ee.context,_t=ee.props;if(!function(de,Ve){if(!/_/.test(de)||!/_/.test("10_3_3"))throw new Error("Versions are in an invalid format ("+de+", 10_3_3)");return de.split("_")[0]==="10_3_3".split("_")[0]}(G))throw new Error("Parent window has zoid version "+G+", child window has version 10_3_3");var yt=te.show,Yt=te.hide,Zt=te.close,jt=te.onError,Xt=te.checkClose,Qt=te.export,cr=te.resize,kt=te.init,Ot=function(){return H},ur=function(){return le},er=function(de){return M.push(de),{cancel:function(){M.splice(M.indexOf(de),1)}}},tr=function(de){return cr.fireAndForget({width:de.width,height:de.height})},dr=function(de){return Z.resolve(de),Qt(de)},fr=function(de){var Ve=(de===void 0?{}:de).anyParent,Me=[],Ge=ce.parent;if(Ve===void 0&&(Ve=!Ge),!Ve&&!Ge)throw new Error("No parent found for "+O+" child");for(var Ie=0,nt=ht(window);Ie<nt.length;Ie++){var Be=nt[Ie];if(C(Be)){var qe=oe(Be).xprops;if(qe&&Ot()===qe.getParent()){var bt=qe.parent;if(Ve||!Ge||bt&&bt.uid===Ge.uid){var ut=da(Be,function(xt){return xt.exports});Me.push({props:qe,exports:ut})}}}}return Me},ue=function(de,Ve,Me){Me===void 0&&(Me=!1);var Ge=function(nt,Be,qe,bt,ut,xt){xt===void 0&&(xt=!1);for(var Bt={},Dr=0,Ir=Object.keys(qe);Dr<Ir.length;Dr++){var lr=Ir[Dr],dt=Be[lr],Gr=dt&&dt.trustedDomains&&dt.trustedDomains.length>0?dt.trustedDomains.reduce(function(Dn,Yr){return Dn||vt(Yr,z(window))},!1):bt===z(window)||C(nt);if((!dt||!dt.sameDomain||Gr)&&(!dt||!dt.trustedDomains||Gr)){var Jr=va(Be,0,lr,qe[lr],ut);Bt[lr]=Jr,dt&&dt.alias&&!Bt[dt.alias]&&(Bt[dt.alias]=Jr)}}if(!xt)for(var Cr=0,xn=Object.keys(Be);Cr<xn.length;Cr++){var Kr=xn[Cr];qe.hasOwnProperty(Kr)||(Bt[Kr]=va(Be,0,Kr,void 0,ut))}return Bt}(H,W,de,Ve,{tag:O,show:yt,hide:Yt,close:Zt,focus:Uc,onError:jt,resize:tr,getSiblings:fr,onProps:er,getParent:Ot,getParentDomain:ur,uid:fe,export:dr},Me);ce?Or(ce,Ge):ce=Ge;for(var Ie=0;Ie<M.length;Ie++)(0,M[Ie])(ce)},Et=function(de){return p.try(function(){return ue(de,le,!0)})};return{init:function(){return p.try(function(){var de="";return C(H)&&(de=function(Ve){var Me=Ve.componentName,Ge=Ve.parentComponentWindow,Ie=la({data:bo(window.name).serializedInitialPayload,sender:{win:Ge},basic:!0}),nt=Ie.sender;if(Ie.reference.type==="uid"||Ie.metaData.windowRef.type==="global"){var Be=ha({name:Me,serializedPayload:fa({data:Ie.data,metaData:{windowRef:zc(Ge)},sender:{domain:nt.domain},receiver:{win:window,domain:z()},basic:!0}).serializedData});return window.name=Be,Be}}({componentName:S.name,parentComponentWindow:H})||""),Vr(window).exports=S.exports({getExports:function(){return Z}}),function(Ve,Me){if(!vt(Ve,Me))throw new Error("Can not be rendered by domain: "+Me)}(J,le),Vi(H),function(){window.addEventListener("beforeunload",function(){Xt.fireAndForget()}),window.addEventListener("unload",function(){Xt.fireAndForget()}),wi(H,function(){wa()})}(),kt({name:de,updateProps:Et,close:wa})}).then(function(){return(de=L.width,Ve=de!==void 0&&de,Me=L.height,Ge=Me!==void 0&&Me,Ie=L.element,Ci(Ie===void 0?"body":Ie).catch(Se).then(function(nt){return{width:Ve,height:Ge,element:nt}})).then(function(nt){var Be=nt.width,qe=nt.height,bt=nt.element;bt&&(Be||qe)&&_e!==Ce.POPUP&&Mi(bt,function(ut){tr({width:Be?ut.width:void 0,height:qe?ut.height:void 0})},{width:Be,height:qe})});var de,Ve,Me,Ge,Ie}).catch(function(de){jt(de)})},getProps:function(){return ce||(ue(_t,le),ce)}}}(r);return T.init(),T}}),E=function T(S){var O,W="zoid-"+i+"-"+rt(),L=S||{},J=d({props:L}),M=J.eligible,V=J.reason,j=L.onDestroy;L.onDestroy=function(){if(O&&M&&P.splice(P.indexOf(O),1),j)return j.apply(void 0,arguments)};var ee=ga({uid:W,options:r});ee.init(),M?ee.setProps(L):L.onDestroy&&L.onDestroy(),To.register(function(ce){return ee.destroy(ce||new Error("zoid destroyed all components"))});var H=function(ce){var Z=(ce===void 0?{}:ce).decorate;return T((Z===void 0?Tc:Z)(L))},le=function(ce,Z,G){return p.try(function(){if(!M){var fe=new Error(V||n+" component is not eligible");return ee.destroy(fe).then(function(){throw fe})}if(!ir(ce))throw new Error("Must pass window to renderTo");return function(te,_e){return p.try(function(){if(te.window)return Hr(te.window).getType();if(_e){if(_e!==Ce.IFRAME&&_e!==Ce.POPUP)throw new Error("Unrecognized context: "+_e);return _e}return a})}(L,G)}).then(function(fe){if(Z=function(te,_e){if(_e){if(typeof _e!="string"&&!Yn(_e))throw new TypeError("Expected string or element selector to be passed");return _e}if(te===Ce.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(fe,Z),ce!==window&&typeof Z!="string")throw new Error("Must pass string element when rendering to another window");return ee.render({target:ce,container:Z,context:fe,rerender:function(){var te=H();return Or(O,te),te.renderTo(ce,Z,G)}})}).catch(function(fe){return ee.destroy(fe).then(function(){throw fe})})};return O=y({},ee.getExports(),ee.getHelpers(),function(){for(var ce=h(),Z={},G=function(){var _e=te[fe],_t=ce[_e];Z[_e]=function(yt){var Yt=ee.getProps(),Zt=y({},yt,{parent:{uid:W,props:Yt,export:ee.export}});return _t(Zt)}},fe=0,te=Object.keys(ce);fe<te.length;fe++)G();return Z}(),{isEligible:function(){return M},clone:H,render:function(ce,Z){return le(window,ce,Z)},renderTo:function(ce,Z,G){return le(ce,Z,G)}}),M&&P.push(O),O};if(w(),function(){var T=Ut("zoid_allow_delegate_"+n,function(){return!0}),S=Ut("zoid_delegate_"+n,function(O){var W=O.data;return{parent:ga({uid:W.uid,options:r,overrides:W.overrides,parentWin:O.source})}});Ro.register(T.cancel),Ro.register(S.cancel)}(),l.components=l.components||{},l.components[i])throw new Error("Can not register multiple components with the same tag: "+i);return l.components[i]=!0,{init:E,instances:P,driver:function(T,S){var O={react:Lc,angular:qc,vue:jc,vue3:Bc,angular2:$c};if(!O[T])throw new Error("Could not find driver for framework: "+T);return m[T]||(m[T]=O[T].register(i,u,E,S)),m[T]},isChild:g,canRenderTo:function(T){return St(T,"zoid_allow_delegate_"+n).then(function(S){return S.data}).catch(function(){return!1})},registerChild:w}}var Jc=function(e){(function(){Ct().initialized||(Ct().initialized=!0,u=(a={on:Ut,send:St}).on,d=a.send,(h=Ct()).receiveMessage=h.receiveMessage||function(l){return yo(l,{on:u,send:d})},function(l){var m=l.on,P=l.send;ye().getOrSet("postMessageListener",function(){return Ai(window,"message",function(g){(function(w,E){var T=E.on,S=E.send;p.try(function(){var O=w.source||w.sourceElement,W=w.origin||w.originalEvent&&w.originalEvent.origin,L=w.data;if(W==="null"&&(W="file://"),O){if(!W)throw new Error("Post message did not have origin domain");yo({source:O,origin:W,data:L},{on:T,send:S})}})})(g,{on:m,send:P})})})}({on:Ut,send:St}),ki({on:Ut,send:St,receiveMessage:yo}),function(l){var m=l.on,P=l.send;ye("builtinListeners").getOrSet("helloListener",function(){var g=m("postrobot_hello",{domain:"*"},function(E){return qi(E.source,{domain:E.origin}),{instanceID:Bi()}}),w=or();return w&&uo(w,{send:P}).catch(function(E){}),g})}({on:Ut,send:St}));var a,u,d,h})();var r=Gc(e),n=function(a){return r.init(a)};n.driver=function(a,u){return r.driver(a,u)},n.isChild=function(){return r.isChild()},n.canRenderTo=function(a){return r.canRenderTo(a)},n.instances=r.instances;var i=r.registerChild();return i&&(window.xprops=n.xprops=i.getProps()),n};function ya(e){Kt&&Kt.destroyBridges();var r=To.all(e);return To=gn(),r}var Ea=ya;function Kc(e){return Ea(),delete window.__zoid_10_3_3__,function(){(function(){for(var n=ye("responseListeners"),i=0,a=n.keys();i<a.length;i++){var u=a[i],d=n.get(u);d&&(d.cancelled=!0),n.del(u)}})(),(r=ye().get("postMessageListener"))&&r.cancel();var r;delete window.__post_robot_11_0_0__}(),Ro.all(e)}}])})})(fi);var li=fi.exports;const hi=li.EVENT,br={VISIBLE:"zoid-visible",INVISIBLE:"zoid-invisible"};function uc({uid:t,frame:o,prerenderFrame:s,doc:c,props:f,event:v,dimensions:R}){const{width:y,height:D}=R,{top:_=0,left:b=0}=f;if(!o||!s)return;const N=c.createElement("div");N.setAttribute("id",t);const U=c.createElement("style");return f.cspNonce&&U.setAttribute("nonce",f.cspNonce),U.appendChild(c.createTextNode(`
          #${t} {
              display: inline-block;
              position: absolute;
              width: ${y};
              height: ${D};
              z-index: 1049;
              border: none;
              top: ${_}px;
              left: ${b}px;
              overflow: hidden;
          }

          #${t} > iframe {
              display: inline-block;
              position: absolute;
              width: 100%;
              height: 100%;
              top: 0;
              left: 0;
              transition: opacity .2s ease-in-out;
              border: none;
              background-color: transparent;
              overflow: hidden;
          }

          #${t} > iframe.${br.INVISIBLE} {
              opacity: 0;
          }

          #${t} > iframe.${br.VISIBLE} {
              opacity: 1;
        }
      `)),N.appendChild(o),N.appendChild(s),N.appendChild(U),s.classList.add(br.INVISIBLE),o.classList.add(br.INVISIBLE),v.on(hi.RENDERED,()=>{setTimeout(()=>{o.classList.remove(br.INVISIBLE),o.classList.add(br.VISIBLE)},100),setTimeout(()=>{s.remove()},1)}),v.on(hi.RESIZE,({width:se,height:ae})=>{typeof se=="number"&&(N.style.width=`${se}px`),typeof ae=="number"&&(N.style.height=`${ae}px`)}),N}function dc(t){return li.create({dimensions:{width:"100%",height:"100%"},tag:`wta${t}`,url:({props:o})=>o.appConfig.sdkBaseUrl,props:{appConfig:{type:"object",required:!0},icons:{type:"array",required:!0}},containerTemplate:uc})}function fc(t){return dc(t.id)(t)}function lc(){var t=t||window;const o=new TextEncoder("utf-8"),s=new TextDecoder("utf-8");let c=new DataView(new ArrayBuffer(8));var f=[];class v{constructor(){this._callbackTimeouts=new Map,this._nextCallbackTimeoutID=1;const y=()=>new DataView(this._inst.exports.memory.buffer),D=p=>{c.setBigInt64(0,p,!0);const A=c.getFloat64(0,!0);if(A===0)return;if(!isNaN(A))return A;const B=0xffffffffn&p;return this._values[B]},_=p=>{let A=y().getBigUint64(p,!0);return D(A)},b=p=>{const A=0x7ff80000n;if(typeof p=="number")return isNaN(p)?A<<32n:p===0?A<<32n|1n:(c.setFloat64(0,p,!0),c.getBigInt64(0,!0));switch(p){case void 0:return 0n;case null:return A<<32n|2n;case!0:return A<<32n|3n;case!1:return A<<32n|4n}let B=this._ids.get(p);B===void 0&&(B=this._idPool.pop(),B===void 0&&(B=BigInt(this._values.length)),this._values[B]=p,this._goRefCounts[B]=0,this._ids.set(p,B)),this._goRefCounts[B]++;let ie=1n;switch(typeof p){case"string":ie=2n;break;case"symbol":ie=3n;break;case"function":ie=4n}return B|(A|ie)<<32n},N=(p,A)=>{let B=b(A);y().setBigUint64(p,B,!0)},U=(p,A,B)=>new Uint8Array(this._inst.exports.memory.buffer,p,A),se=(p,A,B)=>{const ie=new Array(A);for(let ge=0;ge<A;ge++)ie[ge]=_(p+8*ge);return ie},ae=(p,A)=>s.decode(new DataView(this._inst.exports.memory.buffer,p,A)),at=Date.now()-performance.now();this.importObject={wasi_snapshot_preview1:{fd_write:function(p,A,B,ie){let ge=0;if(p==1)for(let Re=0;Re<B;Re++){let Ne=A+8*Re,ve=y().getUint32(Ne+0,!0),Y=y().getUint32(Ne+4,!0);ge+=Y;for(let he=0;he<Y;he++){let Ae=y().getUint8(ve+he);if(Ae!=13)if(Ae==10){let z=s.decode(new Uint8Array(f));f=[],console.log(z)}else f.push(Ae)}}else console.error("invalid file descriptor:",p);return y().setUint32(ie,ge,!0),0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit:p=>{if(!t.process)throw"trying to exit with code "+p;process.exit(p)},random_get:(p,A)=>(crypto.getRandomValues(U(p,A)),0)},gojs:{"runtime.ticks":()=>at+performance.now(),"runtime.sleepTicks":p=>{setTimeout(this._inst.exports.go_scheduler,p)},"syscall/js.finalizeRef":p=>{const A=y().getUint32(D(p),!0);if(this._goRefCounts[A]--,this._goRefCounts[A]===0){const B=this._values[A];this._values[A]=null,this._ids.delete(B),this._idPool.push(A)}},"syscall/js.stringVal":(p,A)=>{const B=ae(p,A);return b(B)},"syscall/js.valueGet":(p,A,B)=>{let ie=ae(A,B),ge=D(p),Re=Reflect.get(ge,ie);return b(Re)},"syscall/js.valueSet":(p,A,B,ie)=>{const ge=D(p),Re=ae(A,B),Ne=D(ie);Reflect.set(ge,Re,Ne)},"syscall/js.valueDelete":(p,A,B)=>{const ie=D(p),ge=ae(A,B);Reflect.deleteProperty(ie,ge)},"syscall/js.valueIndex":(p,A)=>b(Reflect.get(D(p),A)),"syscall/js.valueSetIndex":(p,A,B)=>{Reflect.set(D(p),A,D(B))},"syscall/js.valueCall":(p,A,B,ie,ge,Re,Ne)=>{const ve=D(A),Y=ae(B,ie),he=se(ge,Re);try{const Ae=Reflect.get(ve,Y);N(p,Reflect.apply(Ae,ve,he)),y().setUint8(p+8,1)}catch(Ae){N(p,Ae),y().setUint8(p+8,0)}},"syscall/js.valueInvoke":(p,A,B,ie,ge)=>{try{const Re=D(A),Ne=se(B,ie);N(p,Reflect.apply(Re,void 0,Ne)),y().setUint8(p+8,1)}catch(Re){N(p,Re),y().setUint8(p+8,0)}},"syscall/js.valueNew":(p,A,B,ie,ge)=>{const Re=D(A),Ne=se(B,ie);try{N(p,Reflect.construct(Re,Ne)),y().setUint8(p+8,1)}catch(ve){N(p,ve),y().setUint8(p+8,0)}},"syscall/js.valueLength":p=>D(p).length,"syscall/js.valuePrepareString":(p,A)=>{const B=String(D(A)),ie=o.encode(B);N(p,ie),y().setInt32(p+8,ie.length,!0)},"syscall/js.valueLoadString":(p,A,B,ie)=>{const ge=D(p);U(A,B).set(ge)},"syscall/js.valueInstanceOf":(p,A)=>D(p)instanceof D(A),"syscall/js.copyBytesToGo":(p,A,B,ie,ge)=>{let Re=p,Ne=p+4;const ve=U(A,B),Y=D(ge);if(!(Y instanceof Uint8Array||Y instanceof Uint8ClampedArray))return void y().setUint8(Ne,0);const he=Y.subarray(0,ve.length);ve.set(he),y().setUint32(Re,he.length,!0),y().setUint8(Ne,1)},"syscall/js.copyBytesToJS":(p,A,B,ie,ge)=>{let Re=p,Ne=p+4;const ve=D(A),Y=U(B,ie);if(!(ve instanceof Uint8Array||ve instanceof Uint8ClampedArray))return void y().setUint8(Ne,0);const he=Y.subarray(0,ve.length);ve.set(he),y().setUint32(Re,he.length,!0),y().setUint8(Ne,1)}}},this.importObject.env=this.importObject.gojs}async run(y){for(this._inst=y,this._values=[NaN,0,null,!0,!1,t,this],this._goRefCounts=[],this._ids=new Map,this._idPool=[],this.exited=!1;;){const D=new Promise(_=>{this._resolveCallbackPromise=()=>{if(this.exited)throw new Error("bad callback: Go program has already exited");setTimeout(_,0)}});if(this._inst.exports._start(),this.exited)break;await D}}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(y){const D=this;return function(){const _={id:y,this:this,args:arguments};return D._pendingEvent=_,D._resume(),_.result}}}return new v}class hc{constructor(){Dt(this,"data");Dt(this,"mutex");this.mutex=new pi,this.data=""}async loadSource(o){await this.mutex.acquire();try{this.data&&(o.session=this.data);const s=JSON.stringify(o);for(let c=1;c<=3;c++)try{const{manifest:f,err:v,session:R}=await(await Fr.getInstance({})).loadSource(s);if(v)throw new Error(v);return this.data=R,f}catch(f){if(console.log(`Attempt ${c} failed:`,f,s),c===3)throw console.log("session:",this.data),f}}finally{this.mutex.release()}return null}async getEventTracking(){return await(await Fr.getInstance({})).getEventTracking(this.data)}async acquire(){return new Promise(o=>{this._locked?this._queue.push(o):(this._locked=!0,o())})}release(){if(this._queue.length>0){const o=this._queue.shift();o&&o()}else this._locked=!1}}class pi{constructor(){Dt(this,"_queue");Dt(this,"_locked");this._queue=[],this._locked=!1}async acquire(){return new Promise(o=>{this._locked?this._queue.push(o):(this._locked=!0,o())})}release(){if(this._queue.length>0){const o=this._queue.shift();o&&o()}else this._locked=!1}}const Ft=class Ft{constructor(o){Dt(this,"mutex");Dt(this,"instanceExpiration");Dt(this,"wasm");Dt(this,"uri");Dt(this,"go");var s;this.uri=o,o||(this.uri=(s=window==null?void 0:window.sigmaCSPMEnv)==null?void 0:s.WASM_URL),this.instanceExpiration=Date.now()+1e3,this.mutex=new pi}static async getInstance(o){if(!Ft.instance)Ft.instance=new Ft(o.uri),Ft.instance.initializeInstance(1e3);else if(!Ft.instance)throw new Error("Manager not initialized");return Ft.instance}async useInstance(o){await this.initializeInstance(1e3),await this.mutex.acquire();try{if(this.wasm)return await o()}finally{this.mutex.release()}}async initializeInstance(o,s){await this.mutex.acquire();try{if(this.isExpired()||s||!this.wasm){if(this.instanceExpiration=Date.now()+o,!this.wasm){const v=await fetch(this.uri);this.wasm=await v.arrayBuffer()}window.loadSource!==null&&(window.loadSource=null),window.getEventTracking=null,this.go&&(this.go=null);const c=lc();this.instanceExpiration=Date.now()+1e3;const f=await WebAssembly.instantiate(this.wasm,c.importObject);c.run(f.instance),this.go=c}}finally{this.mutex.release()}}async loadSource(o){return await this.useInstance(async()=>{try{return await window.loadSource(o)}catch(c){console.log("Error",c);try{return await this.initializeInstance(1e3,!0),await window.loadSource(o)}catch(f){console.log("Error",f)}throw c}})}async getEventTracking(o){const s=await this.useInstance(async()=>{try{return await window.getEventTracking(o)}catch(c){throw console.log("Error",c),c}});return{avails:JSON.parse(s.avails)}}isExpired(){return Date.now()>this.instanceExpiration}createSession(){return new hc}};Dt(Ft,"instance");let Fr=Ft;function pc(t,o,s){var R;const c=o==null?void 0:o.find(y=>(y==null?void 0:y.id)===(t==null?void 0:t.availId)),f=(R=c==null?void 0:c.ads)==null?void 0:R.filter(y=>(y==null?void 0:y.id)===(t==null?void 0:t.adsId)),v=f==null?void 0:f[t==null?void 0:t.position];return v&&(v.availId=c==null?void 0:c.id),s&&(s==null?void 0:s.id)==(v==null?void 0:v.id)&&s.availId===(v==null?void 0:v.availId)?s:{...v,impression:!1}}const vc=t=>{try{return atob(t)}catch(o){return console.error("Invalid base64 string:",o),null}};function wc(t){const s=new URL(t).hash,c=vc(s.substring(1));if(c)try{return{...JSON.parse(c)}}catch(f){console.error("Invalid JSON string:",f)}return null}function vi({adsUrl:t,sdk:o,loader:s}){return class extends s{constructor(f){super(f)}load(f,v,R){const y=R.onSuccess;R.onSuccess=async(D,_,b)=>{(b.type==="manifest"||b.type==="level"||b.type==="audioTrack")&&(D.data=await this.modifyManifest(D.url,D.data,b.type)),y(D,_,b)},super.load(f,v,R)}async modifyManifest(f,v,R){const y={proxyAds:{uri:t,timeout:2}};try{return await o.loadSource({config:y,manifest:v,masterUri:f})}catch(D){return console.error("[LOG] ~ error:",D),v}}}}function mc({video:t,adContainer:o,startSession:s,sdk:c,domain:f}){const v=ac(),R=Mt(!1),y=Mt(),D=Math.random().toString(36).slice(6);function _({icons:z}){const C=kr(f,"/build/dist/wta/index.html");return{id:D,appConfig:{sdkBaseUrl:Qr(C||"https://localhost:4222/wta/index.html",{id:D})},icons:z}}if(!!o){const z=fc(_({icons:[]}));z.render(o),z.hide(),o.style.display="none",Ms(()=>{var C;if(y.value){const oe=((C=y.value)==null?void 0:C.icons)||[];o.style.display="block",z.updateProps(_({icons:oe})),z.show()}else o.style.display="none",z.hide()})}const N=Mt([]),U=Mt(),se=Mt([]);async function ae(z){var oe;const C=(oe=y.value)==null?void 0:oe.trackingEvents.find(Qe=>Qe.eventType===z);C&&(v.trigger(C),await Promise.all(C.beaconUrls.map(Qe=>sc(bs(Qe,{retry:3,retryDelay:500})))))}const at=new Map;let p,A;function B(z,C,oe){z.addEventListener(C,oe),at.set(C,oe)}async function ie(z){const C=wc(z);if(C){const{avails:oe}=await c.getEventTracking();y.value=pc(C,oe,y.value),C.events.forEach(Qe=>{console.log("event:",y.value.impression),y.value.impression||(ae("impression"),y.value.impression=!0),ae(Qe)})}}function ge(){return R.value=!1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(z=>{B(t,z,()=>{const C=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;ae(C?"fullscreen":"exitFullscreen")})}),B(t,"pause",()=>ae("pause")),B(t,"play",()=>ae("resume")),B(t,"rewind",()=>ae("rewind")),B(t,"mute",()=>ae("mute")),B(t,"unmute",()=>ae("unmute")),async(z,C)=>{const{tagList:oe,_url:Qe}=C.frag;oe.flat().find(je=>je==="EXT-X-CUE-OUT-CONT"||je==="EXT-X-CUE-OUT"||je==="EXT-X-CUE-IN")&&ie(Qe)}}async function Re(){return c.getEventTracking().then(z=>{for(const C of(z==null?void 0:z.avails)||[])for(const oe of C.ads){const Qe=`${C.id}_${oe.id}_${oe.startTimeInSeconds}`;for(const st of oe.trackingEvents){const je=`${Qe}_${st.eventType}`;se.value.find(ht=>ht.key===je)||se.value.push({...st,key:je,ad:{...oe,key:Qe},tracked:!1})}}})}function Ne(){return async(z,C)=>{function oe(je){for(let ct=0;ct<je.length;ct++)if(je[ct]===0)return ct;return je.length}const{start:Qe,sn:st}=C.frag;for(let je=0;je<C.samples.length;je++){const ct=C.samples[je],ht=ct.data,nr=ct.pts;if(String.fromCharCode.apply(null,ht.slice(0,3))!=="ID3"||String.fromCharCode.apply(null,ht.slice(10,14))!=="TXXX")continue;const Pr=ht.slice(21,ht.length),Tr=oe(Pr),zr=Pr.slice(Tr+1,Pr.length),or=oe(zr),Ur=new TextDecoder("utf-8").decode(zr.slice(0,or)),Rr={sn:st,time:nr-Qe,value:No(Ur)};if(U.value&&st<U.value)return;N.value.push(Rr),Rr.value.event==="start"&&Re()}}}function ve(){return z=>{const C=z.track;C.kind==="metadata"&&(C.oncuechange=async()=>{for(var oe=C.activeCues,Qe=0;Qe<oe.length;Qe++){var st=oe[Qe];if(st.value&&st.value.uri){const je=st.value.uri;ie(je)}}})}}function Y(z,C){v.on(oe=>{(z==="*"||oe.eventType===z)&&C(oe)})}function he(){y.value=void 0,N.value=[],se.value=[],Lo(p),Lo(A),at.forEach((z,C)=>{t.removeEventListener(C,z)}),at.clear()}function Ae(){return{eventTracking:N,trackingDataEvent:se}}return{destroy:he,onEventTracking:Y,hlsHelper:{createHlsFragChanged:ge,createHlsFragParsingMetadata:Ne},videojsHelper:{createVideojsAddTrack:ve},getLog:Ae}}async function gc({video:t,adContainer:o,adsUrl:s,baseURL:c}){const f=c||"https://cdn.jsdelivr.net/gh/sigmaott/sigma-ssai-web-sdk@v1.1.2",R=(await Fr.getInstance({uri:kr(f,"/build/dist/sigma-cspm.wasm")||"https://localhost:4222/sigma-cspm.wasm"})).createSession();function y(){}const{onEventTracking:D,destroy:_,videojsHelper:b,hlsHelper:N,getLog:U}=mc({video:t,adContainer:o,trackingUrl:"",startSession:y,sdk:R,domain:f}),se=Mt(),ae=Mt();function at(Y){Y.config.loader=vi({adsUrl:s,sdk:R,loader:Hls.DefaultConfig.loader}),se.value=Y;const he=N.createHlsFragChanged(),Ae=N.createHlsFragParsingMetadata();Y.on("hlsFragChanged",he),Y.on("hlsFragParsingMetadata",Ae),Y.on(Hls.Events.ERROR,(z,C)=>{console.error("HLS Error:",z,C),C.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",C.details):C.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",C.details):console.error("Other Error:",C.details)}),ae.value=()=>{Y.off("hlsFragChanged",he),Y.off("hlsFragParsingMetadata",Ae)}}function p(Y){Y.hls.config.loader=vi({adsUrl:s,sdk:R,loader:SigmaManager.DefaultConfig.loader}),se.value=Y.hls;const he=N.createHlsFragChanged(),Ae=N.createHlsFragParsingMetadata();Y.hls.on("hlsFragChanged",he),Y.hls.on("hlsFragParsingMetadata",Ae),Y.on(SigmaManager.Events.ERROR,(z,C)=>{console.error("HLS Error:",z,C),C.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",C.details):C.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",C.details):console.error("Other Error:",C.details)}),ae.value=()=>{Y.hls.destroy()}}const A=Mt(),B=Mt(),ge={instance:R,config:{proxyAds:{uri:s,timeout:2}}};function Re(Y){A.value=Y;const he=b.createVideojsAddTrack();Y.textTracks().on("addtrack",he),B.value=()=>{Y.textTracks().off("addtrack",he)}}function Ne(Y,he){Y.getNetworkingEngine().registerRequestFilter((Ae,z)=>{}),Y.getNetworkingEngine().registerResponseFilter(async(Ae,z)=>{if(Ae===0){const C=new TextDecoder().decode(z.data),oe=await R.loadSource({config:{proxyAds:{uri:s,timeout:2e3}},masterUri:he,manifest:C});z.data=new TextEncoder().encode(oe)}})}function ve(){var Y,he;_(),(Y=ae.value)==null||Y.call(ae),(he=B.value)==null||he.call(B),se.value=null,A.value=null,ae.value=null,B.value=null}return{onEventTracking:D,destroy:ve,sigmaPlayer:{attachVideojs:Re,attachHls:at,attachSigmaDrm:p,getLog:U,attachShaka:Ne},sdk:R,cspm:ge}}window.videojs&&(window.videojs.VERSION==="7.10.2"?(function(t){const o=t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist;t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist=async function(s){if(this.vhs_.options_.cspm)try{const f=await(await fetch(this.src)).text();await this.vhs_.options_.cspm.instance.loadSource({config:this.vhs_.options_.cspm.config,manifest:f,masterUri:this.src})}catch(c){console.error("Error loading source:",c)}o.apply(this,[s])}}(videojs),function(t){const o=t.Vhs.PlaylistLoader.prototype.haveMetadata;t.Vhs.PlaylistLoader.prototype.haveMetadata=async function({playlistString:s,playlistObject:c,url:f,id:v}){const R=this.vhs_.options_.cspm.config;try{s&&this.vhs_.options_.cspm&&(s=await this.vhs_.options_.cspm.instance.loadSource({config:R,manifest:s,masterUri:this.master.playlists[v].resolvedUri})),o.apply(this,[{playlistString:s,playlistObject:c,url:f,id:v}])}catch(y){console.error("Error loading source:",y)}}}(videojs),function(t){const o=(s,c,f)=>s&&f&&f.responseURL&&c!==f.responseURL?f.responseURL:c;t.Vhs.PlaylistLoader.prototype.media=function(s,c){if(!s)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof s=="string"){if(!this.master.playlists[s])throw new Error("Unknown playlist URI: "+s);s=this.master.playlists[s]}if(window.clearTimeout(this.finalRenditionTimeout),c){const R=s.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,s,!1),R);return}const f=this.state,v=!this.media_||s.id!==this.media_.id;if(this.master.playlists[s.id].endList||s.endList&&s.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=s,v&&(this.trigger("mediachanging"),f==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(v){if(this.state="SWITCHING_MEDIA",this.request){if(s.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:s.resolvedUri,withCredentials:this.withCredentials},(R,y)=>{if(this.request){if(s.resolvedUri=o(this.handleManifestRedirects,s.resolvedUri,y),R)return this.playlistRequestError(this.request,s,f);this.haveMetadata({playlistString:y.responseText,url:s.uri,id:s.id}).then(()=>{f==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")})}})}}}(videojs)):(function(t){const o=t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist;t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist=async function(s){if(s.manifestString&&this.vhs_.options_.cspm)try{await this.vhs_.options_.cspm.instance.loadSource({config:this.vhs_.options_.cspm.config,manifest:s.manifestString,masterUri:this.src})}catch(c){console.error("Error loading source:",c)}o.apply(this,[s])}}(videojs),function(t){const o=t.Vhs.PlaylistLoader.prototype.parseManifest_;t.Vhs.PlaylistLoader.prototype.parseManifest_=function({url:s,manifestString:c}){const f=o.apply(this,[{url:s,manifestString:c}]);return f.playlists&&f.playlists.length&&(f.manifestString=c),f}}(videojs),function(t){const o=t.Vhs.PlaylistLoader.prototype.haveMetadata;t.Vhs.PlaylistLoader.prototype.haveMetadata=async function({playlistString:s,playlistObject:c,url:f,id:v}){try{if(s&&this.vhs_.options_.cspm){const R=this.vhs_.options_.cspm.config;s=await this.vhs_.options_.cspm.instance.loadSource({config:R,manifest:s,masterUri:this.main.playlists[v].resolvedUri})}o.apply(this,[{playlistString:s,playlistObject:c,url:f,id:v}])}catch(R){throw console.error("Error loading source:",R),R}}}(videojs),function(t){const o=(c,f)=>{const v=c.segments||[],R=v[v.length-1],y=R&&R.parts&&R.parts[R.parts.length-1],D=y&&y.duration||R&&R.duration;return D?D*1e3:(c.partTargetDuration||c.targetDuration||10)*500},s=(c,f)=>f&&f.responseURL&&c!==f.responseURL?f.responseURL:c;t.Vhs.PlaylistLoader.prototype.media=function(c,f){if(!c)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error(`Cannot switch media playlist from ${this.state}`);if(typeof c=="string"){if(!this.main.playlists[c])throw new Error(`Unknown playlist URI: ${c}`);c=this.main.playlists[c]}if(window.clearTimeout(this.finalRenditionTimeout),f){const _=(c.partTargetDuration||c.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,c,!1),_);return}const v=this.state,R=!this.media_||c.id!==this.media_.id,y=this.main.playlists[c.id];if(y&&y.endList||c.endList&&c.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=c,R&&(this.trigger("mediachanging"),v==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(o(c)),!R)return;if(this.state="SWITCHING_MEDIA",this.request){if(c.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=c;const D={playlistInfo:{type:"media",uri:c.uri}};this.trigger({type:"playlistrequeststart",metadata:D}),this.request=this.vhs_.xhr({uri:c.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(_,b)=>{if(this.request){if(c.lastRequest=Date.now(),c.resolvedUri=s(c.resolvedUri,b),_)return this.playlistRequestError(this.request,c,v);this.haveMetadata({playlistString:b.responseText,url:c.uri,id:c.id}).then(()=>{this.trigger({type:"playlistrequestcomplete",metadata:D}),v==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")})}})}}(videojs)));function yc(t){const o="https://dai.sigma.video/api/proxy-ads/ads/",s=Nn(t),c=`${s.protocol}//${s.host}${s.pathname}`;if(!s.search)return{playerUrl:t,adsUrl:null};const f=ka(t),v=f["sigma.dai.adsEndpoint"];if(!v)return{playerUrl:t,adsUrl:null};const R={},y={};for(const[_,b]of Object.entries(f))_.startsWith("sigma.dai")?_!=="sigma.dai.adsEndpoint"&&(R[_.replace("sigma.dai.","")]=b):y[_]=b;return{playerUrl:Qr(c,y),adsUrl:Qr(kr(o,v),R)}}return It.createSigmaDai=gc,It.processURL=yc,Object.defineProperty(It,Symbol.toStringTag,{value:"Module"}),It}({});
