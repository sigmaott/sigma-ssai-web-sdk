var SigmaDaiSdk=function(Rt){"use strict";var cu=Object.defineProperty;var uu=(Rt,Mt,mr)=>Mt in Rt?cu(Rt,Mt,{enumerable:!0,configurable:!0,writable:!0,value:mr}):Rt[Mt]=mr;var Ct=(Rt,Mt,mr)=>uu(Rt,typeof Mt!="symbol"?Mt+"":Mt,mr);const Mt=/#/g,mr=/&/g,za=/\//g,Ua=/=/g,In=/\+/g,La=/%5e/gi,ja=/%60/gi,Ba=/%7c/gi,qa=/%20/gi;function Ha(t){return encodeURI(""+t).replace(Ba,"|")}function Dn(t){return Ha(typeof t=="string"?t:JSON.stringify(t)).replace(In,"%2B").replace(qa,"+").replace(Mt,"%23").replace(mr,"%26").replace(ja,"`").replace(La,"^").replace(za,"%2F")}function Cn(t){return Dn(t).replace(Ua,"%3D")}function xo(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function $a(t){return xo(t.replace(In," "))}function Va(t){return xo(t.replace(In," "))}function Io(t=""){const o={};t[0]==="?"&&(t=t.slice(1));for(const s of t.split("&")){const d=s.match(/([^=]+)=?(.*)/)||[];if(d.length<2)continue;const f=$a(d[1]);if(f==="__proto__"||f==="constructor")continue;const m=Va(d[2]||"");o[f]===void 0?o[f]=m:Array.isArray(o[f])?o[f].push(m):o[f]=[o[f],m]}return o}function Ga(t,o){return(typeof o=="number"||typeof o=="boolean")&&(o=String(o)),o?Array.isArray(o)?o.map(s=>`${Cn(t)}=${Dn(s)}`).join("&"):`${Cn(t)}=${Dn(o)}`:Cn(t)}function Ja(t){return Object.keys(t).filter(o=>t[o]!==void 0).map(o=>Ga(o,t[o])).filter(Boolean).join("&")}const Ka=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Ya=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Za=/^([/\\]\s*){2,}[^/\\]/,Xa=/^\.?\//;function Do(t,o={}){return typeof o=="boolean"&&(o={acceptRelative:o}),o.strict?Ka.test(t):Ya.test(t)||(o.acceptRelative?Za.test(t):!1)}function Qa(t="",o){return t.endsWith("/")}function ka(t="",o){return(Qa(t)?t.slice(0,-1):t)||"/"}function es(t="",o){return t.endsWith("/")?t:t+"/"}function ts(t,o){if(ns(o)||Do(t))return t;const s=ka(o);return t.startsWith(s)?t:kr(s,t)}function Qr(t,o){const s=_n(t),d={...Io(s.search),...o};return s.search=Ja(d),is(s)}function rs(t){return Io(_n(t).search)}function ns(t){return!t||t==="/"}function os(t){return t&&t!=="/"}function kr(t,...o){let s=t||"";for(const d of o.filter(f=>os(f)))if(s){const f=d.replace(Xa,"");s=es(s)+f}else s=d;return s}const Co=Symbol.for("ufo:protocolRelative");function _n(t="",o){const s=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(s){const[,C,N=""]=s;return{protocol:C.toLowerCase(),pathname:N,href:C+N,auth:"",host:"",search:"",hash:""}}if(!Do(t,{acceptRelative:!0}))return _o(t);const[,d="",f,m=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,E="",p=""]=m.match(/([^#/?]*)(.*)?/)||[];d==="file:"&&(p=p.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:O,search:D,hash:b}=_o(p);return{protocol:d.toLowerCase(),auth:f?f.slice(0,Math.max(0,f.length-1)):"",host:E,pathname:O,search:D,hash:b,[Co]:!d}}function _o(t=""){const[o="",s="",d=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:o,search:s,hash:d}}function is(t){const o=t.pathname||"",s=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",d=t.hash||"",f=t.auth?t.auth+"@":"",m=t.host||"";return(t.protocol||t[Co]?(t.protocol||"")+"//":"")+f+m+o+s+d}const as=t=>(o,s)=>(t.set(o,s),s),No=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,Ao=536870912,Wo=Ao*2,ss=(t,o)=>s=>{const d=o.get(s);let f=d===void 0?s.size:d<Wo?d+1:0;if(!s.has(f))return t(s,f);if(s.size<Ao){for(;s.has(f);)f=Math.floor(Math.random()*Wo);return t(s,f)}if(s.size>No)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;s.has(f);)f=Math.floor(Math.random()*No);return t(s,f)},Mo=new WeakMap,cs=as(Mo),en=ss(cs,Mo),us=t=>t.method!==void 0&&t.method==="call",ds=t=>typeof t.id=="number"&&typeof t.result=="boolean",fs=((t,o)=>{let s=null;return()=>{if(s!==null)return s;const d=new Blob([o],{type:"application/javascript; charset=utf-8"}),f=URL.createObjectURL(d);return s=t(f),setTimeout(()=>URL.revokeObjectURL(f)),s}})(t=>{const o=new Map([[0,()=>{}]]),s=new Map([[0,()=>{}]]),d=new Map,f=new Worker(t);return f.addEventListener("message",({data:D})=>{if(us(D)){const{params:{timerId:b,timerType:C}}=D;if(C==="interval"){const N=o.get(b);if(typeof N===void 0)throw new Error("The timer is in an undefined state.");if(typeof N=="number"){const ae=d.get(N);if(ae===void 0||ae.timerId!==b||ae.timerType!==C)throw new Error("The timer is in an undefined state.")}else typeof N=="function"&&N()}else if(C==="timeout"){const N=s.get(b);if(typeof N===void 0)throw new Error("The timer is in an undefined state.");if(typeof N=="number"){const ae=d.get(N);if(ae===void 0||ae.timerId!==b||ae.timerType!==C)throw new Error("The timer is in an undefined state.")}else typeof N=="function"&&(N(),s.delete(b))}}else if(ds(D)){const{id:b}=D,C=d.get(b);if(C===void 0)throw new Error("The timer is in an undefined state.");const{timerId:N,timerType:ae}=C;d.delete(b),ae==="interval"?o.delete(N):s.delete(N)}else{const{error:{message:b}}=D;throw new Error(b)}}),{clearInterval:D=>{if(typeof o.get(D)=="function"){const b=en(d);d.set(b,{timerId:D,timerType:"interval"}),o.set(D,b),f.postMessage({id:b,method:"clear",params:{timerId:D,timerType:"interval"}})}},clearTimeout:D=>{if(typeof s.get(D)=="function"){const b=en(d);d.set(b,{timerId:D,timerType:"timeout"}),s.set(D,b),f.postMessage({id:b,method:"clear",params:{timerId:D,timerType:"timeout"}})}},setInterval:(D,b=0,...C)=>{const N=en(o);return o.set(N,()=>{D(...C),typeof o.get(N)=="function"&&f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:N,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:N,timerType:"interval"}}),N},setTimeout:(D,b=0,...C)=>{const N=en(s);return s.set(N,()=>D(...C)),f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:N,timerType:"timeout"}}),N}}},`(()=>{"use strict";const e=new Map,t=new Map,r=t=>{const r=e.get(t);return void 0!==r&&(clearTimeout(r),e.delete(t),!0)},s=e=>{const r=t.get(e);return void 0!==r&&(clearTimeout(r),t.delete(e),!0)},o=(e,t)=>{const r=performance.now(),s=e+t-r-performance.timeOrigin;return{expected:r+s,remainingDelay:s}},i=(e,t,r,s)=>{const o=r-performance.now();o>0?e.set(t,setTimeout(i,o,e,t,r,s)):(e.delete(t),postMessage({id:null,method:"call",params:{timerId:t,timerType:s}}))};addEventListener("message",(n=>{let{data:a}=n;try{if("clear"===a.method){const{id:e,params:{timerId:t,timerType:o}}=a;if("interval"===o)postMessage({id:e,result:r(t)});else{if("timeout"!==o)throw new Error('The given type "'.concat(o,'" is not supported'));postMessage({id:e,result:s(t)})}}else{if("set"!==a.method)throw new Error('The given method "'.concat(a.method,'" is not supported'));{const{params:{delay:r,now:s,timerId:n,timerType:m}}=a;if("interval"===m)((t,r,s)=>{const{expected:n,remainingDelay:a}=o(t,s);e.set(r,setTimeout(i,a,e,r,n,"interval"))})(r,n,s);else{if("timeout"!==m)throw new Error('The given type "'.concat(m,'" is not supported'));((e,r,s)=>{const{expected:n,remainingDelay:a}=o(e,s);t.set(r,setTimeout(i,a,t,r,n,"timeout"))})(r,n,s)}}}}catch(e){postMessage({error:{message:e.message},id:a.id,result:null})}}))})();`),Fo=t=>fs().clearTimeout(t);/**
* @vue/shared v3.5.1
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ls(t,o){const s=new Set(t.split(","));return d=>s.has(d)}const zo=Object.assign,hs=Object.prototype.hasOwnProperty,Nn=(t,o)=>hs.call(t,o),gr=Array.isArray,_r=t=>Uo(t)==="[object Map]",ps=t=>typeof t=="string",Nr=t=>typeof t=="symbol",tn=t=>t!==null&&typeof t=="object",vs=Object.prototype.toString,Uo=t=>vs.call(t),Lo=t=>Uo(t).slice(8,-1),An=t=>ps(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ws=(t=>{const o=Object.create(null);return s=>o[s]||(o[s]=t(s))})(t=>t.charAt(0).toUpperCase()+t.slice(1)),yr=(t,o)=>!Object.is(t,o);var Ge={};function Er(t,...o){console.warn(`[Vue warn] ${t}`,...o)}let we;const Wn=new WeakSet;class jo{constructor(o){this.fn=o,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Wn.has(this)&&(Wn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=Ar,Ar=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Vo(this),qo(this);const o=we,s=Ot;we=this,Ot=!0;try{return this.fn()}finally{Ge.NODE_ENV!=="production"&&we!==this&&Er("Active effect was not restored correctly - this is likely a Vue internal bug."),Ho(this),we=o,Ot=s,this.flags&=-3}}stop(){if(this.flags&1){for(let o=this.deps;o;o=o.nextDep)Un(o);this.deps=this.depsTail=void 0,Vo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Wn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){zn(this)&&this.run()}get dirty(){return zn(this)}}let Bo=0,Ar;function Mn(){Bo++}function Fn(){if(--Bo>0)return;let t;for(;Ar;){let o=Ar;for(Ar=void 0;o;){const s=o.nextEffect;if(o.nextEffect=void 0,o.flags&=-9,o.flags&1)try{o.trigger()}catch(d){t||(t=d)}o=s}}if(t)throw t}function qo(t){for(let o=t.deps;o;o=o.nextDep)o.version=-1,o.prevActiveLink=o.dep.activeLink,o.dep.activeLink=o}function Ho(t){let o,s=t.depsTail;for(let d=s;d;d=d.prevDep)d.version===-1?(d===s&&(s=d.prevDep),Un(d),gs(d)):o=d,d.dep.activeLink=d.prevActiveLink,d.prevActiveLink=void 0;t.deps=o,t.depsTail=s}function zn(t){for(let o=t.deps;o;o=o.nextDep)if(o.dep.version!==o.version||o.dep.computed&&ms(o.dep.computed)===!1||o.dep.version!==o.version)return!0;return!!t._dirty}function ms(t){if(t.flags&2)return!1;if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===rn))return;t.globalVersion=rn;const o=t.dep;if(t.flags|=2,o.version>0&&!t.isSSR&&!zn(t)){t.flags&=-3;return}const s=we,d=Ot;we=t,Ot=!0;try{qo(t);const f=t.fn();(o.version===0||yr(f,t._value))&&(t._value=f,o.version++)}catch(f){throw o.version++,f}finally{we=s,Ot=d,Ho(t),t.flags&=-3}}function Un(t){const{dep:o,prevSub:s,nextSub:d}=t;if(s&&(s.nextSub=d,t.prevSub=void 0),d&&(d.prevSub=s,t.nextSub=void 0),o.subs===t&&(o.subs=s),!o.subs&&o.computed){o.computed.flags&=-5;for(let f=o.computed.deps;f;f=f.nextDep)Un(f)}}function gs(t){const{prevDep:o,nextDep:s}=t;o&&(o.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=o,t.nextDep=void 0)}function ys(t,o){t.effect instanceof jo&&(t=t.effect.fn);const s=new jo(t);try{s.run()}catch(f){throw s.stop(),f}const d=s.run.bind(s);return d.effect=s,d}let Ot=!0;const $o=[];function Es(){$o.push(Ot),Ot=!1}function bs(){const t=$o.pop();Ot=t===void 0?!0:t}function Vo(t){const{cleanup:o}=t;if(t.cleanup=void 0,o){const s=we;we=void 0;try{o()}finally{we=s}}}let rn=0;class Go{constructor(o){this.computed=o,this.version=0,this.activeLink=void 0,this.subs=void 0,Ge.NODE_ENV!=="production"&&(this.subsHead=void 0)}track(o){if(!we||!Ot)return;let s=this.activeLink;if(s===void 0||s.sub!==we)s=this.activeLink={dep:this,sub:we,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},we.deps?(s.prevDep=we.depsTail,we.depsTail.nextDep=s,we.depsTail=s):we.deps=we.depsTail=s,we.flags&4&&Jo(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const d=s.nextDep;d.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=d),s.prevDep=we.depsTail,s.nextDep=void 0,we.depsTail.nextDep=s,we.depsTail=s,we.deps===s&&(we.deps=d)}return Ge.NODE_ENV!=="production"&&we.onTrack&&we.onTrack(zo({effect:we},o)),s}trigger(o){this.version++,rn++,this.notify(o)}notify(o){Mn();try{if(Ge.NODE_ENV!=="production")for(let s=this.subsHead;s;s=s.nextSub)Ge.NODE_ENV!=="production"&&s.sub.onTrigger&&!(s.sub.flags&8)&&s.sub.onTrigger(zo({effect:s.sub},o));for(let s=this.subs;s;s=s.prevSub)s.sub.notify()}finally{Fn()}}}function Jo(t){const o=t.dep.computed;if(o&&!t.dep.subs){o.flags|=20;for(let d=o.deps;d;d=d.nextDep)Jo(d)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),Ge.NODE_ENV!=="production"&&t.dep.subsHead===void 0&&(t.dep.subsHead=t),t.dep.subs=t}const Ln=new WeakMap,ar=Symbol(Ge.NODE_ENV!=="production"?"Object iterate":""),jn=Symbol(Ge.NODE_ENV!=="production"?"Map keys iterate":""),Wr=Symbol(Ge.NODE_ENV!=="production"?"Array iterate":"");function pt(t,o,s){if(Ot&&we){let d=Ln.get(t);d||Ln.set(t,d=new Map);let f=d.get(s);f||d.set(s,f=new Go),Ge.NODE_ENV!=="production"?f.track({target:t,type:o,key:s}):f.track()}}function Vt(t,o,s,d,f,m){const E=Ln.get(t);if(!E){rn++;return}let p=[];if(o==="clear")p=[...E.values()];else{const O=gr(t),D=O&&An(s);if(O&&s==="length"){const b=Number(d);E.forEach((C,N)=>{(N==="length"||N===Wr||!Nr(N)&&N>=b)&&p.push(C)})}else{const b=C=>C&&p.push(C);switch(s!==void 0&&b(E.get(s)),D&&b(E.get(Wr)),o){case"add":O?D&&b(E.get("length")):(b(E.get(ar)),_r(t)&&b(E.get(jn)));break;case"delete":O||(b(E.get(ar)),_r(t)&&b(E.get(jn)));break;case"set":_r(t)&&b(E.get(ar));break}}}Mn();for(const O of p)Ge.NODE_ENV!=="production"?O.trigger({target:t,type:o,key:s,newValue:d,oldValue:f,oldTarget:m}):O.trigger();Fn()}function br(t){const o=me(t);return o===t?o:(pt(o,"iterate",Wr),Jt(t)?o:o.map(dt))}function Bn(t){return pt(t=me(t),"iterate",Wr),t}const Ps={__proto__:null,[Symbol.iterator](){return qn(this,Symbol.iterator,dt)},concat(...t){return br(this).concat(...t.map(o=>gr(o)?br(o):o))},entries(){return qn(this,"entries",t=>(t[1]=dt(t[1]),t))},every(t,o){return Ft(this,"every",t,o,void 0,arguments)},filter(t,o){return Ft(this,"filter",t,o,s=>s.map(dt),arguments)},find(t,o){return Ft(this,"find",t,o,dt,arguments)},findIndex(t,o){return Ft(this,"findIndex",t,o,void 0,arguments)},findLast(t,o){return Ft(this,"findLast",t,o,dt,arguments)},findLastIndex(t,o){return Ft(this,"findLastIndex",t,o,void 0,arguments)},forEach(t,o){return Ft(this,"forEach",t,o,void 0,arguments)},includes(...t){return Hn(this,"includes",t)},indexOf(...t){return Hn(this,"indexOf",t)},join(t){return br(this).join(t)},lastIndexOf(...t){return Hn(this,"lastIndexOf",t)},map(t,o){return Ft(this,"map",t,o,void 0,arguments)},pop(){return Mr(this,"pop")},push(...t){return Mr(this,"push",t)},reduce(t,...o){return Ko(this,"reduce",t,o)},reduceRight(t,...o){return Ko(this,"reduceRight",t,o)},shift(){return Mr(this,"shift")},some(t,o){return Ft(this,"some",t,o,void 0,arguments)},splice(...t){return Mr(this,"splice",t)},toReversed(){return br(this).toReversed()},toSorted(t){return br(this).toSorted(t)},toSpliced(...t){return br(this).toSpliced(...t)},unshift(...t){return Mr(this,"unshift",t)},values(){return qn(this,"values",dt)}};function qn(t,o,s){const d=Bn(t),f=d[o]();return d!==t&&!Jt(t)&&(f._next=f.next,f.next=()=>{const m=f._next();return m.value&&(m.value=s(m.value)),m}),f}const Ts=Array.prototype;function Ft(t,o,s,d,f,m){const E=Bn(t),p=E!==t&&!Jt(t),O=E[o];if(O!==Ts[o]){const C=O.apply(t,m);return p?dt(C):C}let D=s;E!==t&&(p?D=function(C,N){return s.call(this,dt(C),N,t)}:s.length>2&&(D=function(C,N){return s.call(this,C,N,t)}));const b=O.call(E,D,d);return p&&f?f(b):b}function Ko(t,o,s,d){const f=Bn(t);let m=s;return f!==t&&(Jt(t)?s.length>3&&(m=function(E,p,O){return s.call(this,E,p,O,t)}):m=function(E,p,O){return s.call(this,E,dt(p),O,t)}),f[o](m,...d)}function Hn(t,o,s){const d=me(t);pt(d,"iterate",Wr);const f=d[o](...s);return(f===-1||f===!1)&&Bs(s[0])?(s[0]=me(s[0]),d[o](...s)):f}function Mr(t,o,s=[]){Es(),Mn();const d=me(t)[o].apply(t,s);return Fn(),bs(),d}const Ss=ls("__proto__,__v_isRef,__isVue"),Yo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Nr));function Rs(t){Nr(t)||(t=String(t));const o=me(this);return pt(o,"has",t),o.hasOwnProperty(t)}class Zo{constructor(o=!1,s=!1){this._isReadonly=o,this._isShallow=s}get(o,s,d){const f=this._isReadonly,m=this._isShallow;if(s==="__v_isReactive")return!f;if(s==="__v_isReadonly")return f;if(s==="__v_isShallow")return m;if(s==="__v_raw")return d===(f?m?Us:oi:m?zs:ni).get(o)||Object.getPrototypeOf(o)===Object.getPrototypeOf(d)?o:void 0;const E=gr(o);if(!f){let O;if(E&&(O=Ps[s]))return O;if(s==="hasOwnProperty")return Rs}const p=Reflect.get(o,s,Tr(o)?o:d);return(Nr(s)?Yo.has(s):Ss(s))||(f||pt(o,"get",s),m)?p:Tr(p)?E&&An(s)?p:p.value:tn(p)?f?ai(p):ii(p):p}}class Os extends Zo{constructor(o=!1){super(!1,o)}set(o,s,d,f){let m=o[s];if(!this._isShallow){const O=Pr(m);if(!Jt(d)&&!Pr(d)&&(m=me(m),d=me(d)),!gr(o)&&Tr(m)&&!Tr(d))return O?!1:(m.value=d,!0)}const E=gr(o)&&An(s)?Number(s)<o.length:Nn(o,s),p=Reflect.set(o,s,d,Tr(o)?o:f);return o===me(f)&&(E?yr(d,m)&&Vt(o,"set",s,d,m):Vt(o,"add",s,d)),p}deleteProperty(o,s){const d=Nn(o,s),f=o[s],m=Reflect.deleteProperty(o,s);return m&&d&&Vt(o,"delete",s,void 0,f),m}has(o,s){const d=Reflect.has(o,s);return(!Nr(s)||!Yo.has(s))&&pt(o,"has",s),d}ownKeys(o){return pt(o,"iterate",gr(o)?"length":ar),Reflect.ownKeys(o)}}class xs extends Zo{constructor(o=!1){super(!0,o)}set(o,s){return Ge.NODE_ENV!=="production"&&Er(`Set operation on key "${String(s)}" failed: target is readonly.`,o),!0}deleteProperty(o,s){return Ge.NODE_ENV!=="production"&&Er(`Delete operation on key "${String(s)}" failed: target is readonly.`,o),!0}}const Is=new Os,Ds=new xs,$n=t=>t,nn=t=>Reflect.getPrototypeOf(t);function on(t,o,s=!1,d=!1){t=t.__v_raw;const f=me(t),m=me(o);s||(yr(o,m)&&pt(f,"get",o),pt(f,"get",m));const{has:E}=nn(f),p=d?$n:s?Vn:dt;if(E.call(f,o))return p(t.get(o));if(E.call(f,m))return p(t.get(m));t!==f&&t.get(o)}function an(t,o=!1){const s=this.__v_raw,d=me(s),f=me(t);return o||(yr(t,f)&&pt(d,"has",t),pt(d,"has",f)),t===f?s.has(t):s.has(t)||s.has(f)}function sn(t,o=!1){return t=t.__v_raw,!o&&pt(me(t),"iterate",ar),Reflect.get(t,"size",t)}function Xo(t,o=!1){!o&&!Jt(t)&&!Pr(t)&&(t=me(t));const s=me(this);return nn(s).has.call(s,t)||(s.add(t),Vt(s,"add",t,t)),this}function Qo(t,o,s=!1){!s&&!Jt(o)&&!Pr(o)&&(o=me(o));const d=me(this),{has:f,get:m}=nn(d);let E=f.call(d,t);E?Ge.NODE_ENV!=="production"&&ri(d,f,t):(t=me(t),E=f.call(d,t));const p=m.call(d,t);return d.set(t,o),E?yr(o,p)&&Vt(d,"set",t,o,p):Vt(d,"add",t,o),this}function ko(t){const o=me(this),{has:s,get:d}=nn(o);let f=s.call(o,t);f?Ge.NODE_ENV!=="production"&&ri(o,s,t):(t=me(t),f=s.call(o,t));const m=d?d.call(o,t):void 0,E=o.delete(t);return f&&Vt(o,"delete",t,void 0,m),E}function ei(){const t=me(this),o=t.size!==0,s=Ge.NODE_ENV!=="production"?_r(t)?new Map(t):new Set(t):void 0,d=t.clear();return o&&Vt(t,"clear",void 0,void 0,s),d}function cn(t,o){return function(d,f){const m=this,E=m.__v_raw,p=me(E),O=o?$n:t?Vn:dt;return!t&&pt(p,"iterate",ar),E.forEach((D,b)=>d.call(f,O(D),O(b),m))}}function un(t,o,s){return function(...d){const f=this.__v_raw,m=me(f),E=_r(m),p=t==="entries"||t===Symbol.iterator&&E,O=t==="keys"&&E,D=f[t](...d),b=s?$n:o?Vn:dt;return!o&&pt(m,"iterate",O?jn:ar),{next(){const{value:C,done:N}=D.next();return N?{value:C,done:N}:{value:p?[b(C[0]),b(C[1])]:b(C),done:N}},[Symbol.iterator](){return this}}}}function Gt(t){return function(...o){if(Ge.NODE_ENV!=="production"){const s=o[0]?`on key "${o[0]}" `:"";Er(`${ws(t)} operation ${s}failed: target is readonly.`,me(this))}return t==="delete"?!1:t==="clear"?void 0:this}}function Cs(){const t={get(m){return on(this,m)},get size(){return sn(this)},has:an,add:Xo,set:Qo,delete:ko,clear:ei,forEach:cn(!1,!1)},o={get(m){return on(this,m,!1,!0)},get size(){return sn(this)},has:an,add(m){return Xo.call(this,m,!0)},set(m,E){return Qo.call(this,m,E,!0)},delete:ko,clear:ei,forEach:cn(!1,!0)},s={get(m){return on(this,m,!0)},get size(){return sn(this,!0)},has(m){return an.call(this,m,!0)},add:Gt("add"),set:Gt("set"),delete:Gt("delete"),clear:Gt("clear"),forEach:cn(!0,!1)},d={get(m){return on(this,m,!0,!0)},get size(){return sn(this,!0)},has(m){return an.call(this,m,!0)},add:Gt("add"),set:Gt("set"),delete:Gt("delete"),clear:Gt("clear"),forEach:cn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(m=>{t[m]=un(m,!1,!1),s[m]=un(m,!0,!1),o[m]=un(m,!1,!0),d[m]=un(m,!0,!0)}),[t,s,o,d]}const[_s,Ns,As,Ws]=Cs();function ti(t,o){const s=o?t?Ws:As:t?Ns:_s;return(d,f,m)=>f==="__v_isReactive"?!t:f==="__v_isReadonly"?t:f==="__v_raw"?d:Reflect.get(Nn(s,f)&&f in d?s:d,f,m)}const Ms={get:ti(!1,!1)},Fs={get:ti(!0,!1)};function ri(t,o,s){const d=me(s);if(d!==s&&o.call(t,d)){const f=Lo(t);Er(`Reactive ${f} contains both the raw and reactive versions of the same object${f==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const ni=new WeakMap,zs=new WeakMap,oi=new WeakMap,Us=new WeakMap;function Ls(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function js(t){return t.__v_skip||!Object.isExtensible(t)?0:Ls(Lo(t))}function ii(t){return Pr(t)?t:si(t,!1,Is,Ms,ni)}function ai(t){return si(t,!0,Ds,Fs,oi)}function si(t,o,s,d,f){if(!tn(t))return Ge.NODE_ENV!=="production"&&Er(`value cannot be made ${o?"readonly":"reactive"}: ${String(t)}`),t;if(t.__v_raw&&!(o&&t.__v_isReactive))return t;const m=f.get(t);if(m)return m;const E=js(t);if(E===0)return t;const p=new Proxy(t,E===2?d:s);return f.set(t,p),p}function Pr(t){return!!(t&&t.__v_isReadonly)}function Jt(t){return!!(t&&t.__v_isShallow)}function Bs(t){return t?!!t.__v_raw:!1}function me(t){const o=t&&t.__v_raw;return o?me(o):t}const dt=t=>tn(t)?ii(t):t,Vn=t=>tn(t)?ai(t):t;function Tr(t){return t?t.__v_isRef===!0:!1}function zt(t){return qs(t,!1)}function qs(t,o){return Tr(t)?t:new Hs(t,o)}class Hs{constructor(o,s){this.dep=new Go,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?o:me(o),this._value=s?o:dt(o),this.__v_isShallow=s}get value(){return Ge.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track(),this._value}set value(o){const s=this._rawValue,d=this.__v_isShallow||Jt(o)||Pr(o);o=d?o:me(o),yr(o,s)&&(this._rawValue=o,this._value=d?o:dt(o),Ge.NODE_ENV!=="production"?this.dep.trigger({target:this,type:"set",key:"value",newValue:o,oldValue:s}):this.dep.trigger())}}const $s=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Vs=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Gs=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Js(t,o){if(t==="__proto__"||t==="constructor"&&o&&typeof o=="object"&&"prototype"in o){Ks(t);return}return o}function Ks(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function ci(t,o={}){if(typeof t!="string")return t;const s=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return s.slice(1,-1);if(s.length<=9){const d=s.toLowerCase();if(d==="true")return!0;if(d==="false")return!1;if(d==="undefined")return;if(d==="null")return null;if(d==="nan")return Number.NaN;if(d==="infinity")return Number.POSITIVE_INFINITY;if(d==="-infinity")return Number.NEGATIVE_INFINITY}if(!Gs.test(t)){if(o.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if($s.test(t)||Vs.test(t)){if(o.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Js)}return JSON.parse(t)}catch(d){if(o.strict)throw d;return t}}function Ys(){const t=new Set,o=f=>{t.delete(f)};return{on:f=>(t.add(f),{off:()=>o(f)}),off:o,trigger:(...f)=>Promise.all(Array.from(t).map(m=>m(...f)))}}async function Zs(t){try{return{data:await t,error:null}}catch(o){return{data:null,error:o||{message:"Unknown error"}}}}var Xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ui={exports:{}};(function(t,o){(function(s,d){t.exports=d()})(typeof self<"u"?self:Xs,function(){return function(s){var d={};function f(m){if(d[m])return d[m].exports;var E=d[m]={i:m,l:!1,exports:{}};return s[m].call(E.exports,E,E.exports,f),E.l=!0,E.exports}return f.m=s,f.c=d,f.d=function(m,E,p){f.o(m,E)||Object.defineProperty(m,E,{enumerable:!0,get:p})},f.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},f.t=function(m,E){if(1&E&&(m=f(m)),8&E||4&E&&typeof m=="object"&&m&&m.__esModule)return m;var p=Object.create(null);if(f.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:m}),2&E&&typeof m!="string")for(var O in m)f.d(p,O,(function(D){return m[D]}).bind(null,O));return p},f.n=function(m){var E=m&&m.__esModule?function(){return m.default}:function(){return m};return f.d(E,"a",E),E},f.o=function(m,E){return{}.hasOwnProperty.call(m,E)},f.p="",f(f.s=0)}([function(s,d,f){f.r(d),f.d(d,"PopupOpenError",function(){return io}),f.d(d,"create",function(){return Yc}),f.d(d,"destroy",function(){return Zc}),f.d(d,"destroyComponents",function(){return Pa}),f.d(d,"destroyAll",function(){return Ta}),f.d(d,"PROP_TYPE",function(){return be}),f.d(d,"PROP_SERIALIZATION",function(){return Rn}),f.d(d,"CONTEXT",function(){return We}),f.d(d,"EVENT",function(){return De});function m(e,r){return(m=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(e,r)}function E(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,m(e,r)}function p(){return(p=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function O(e){try{if(!e)return!1;if(typeof Promise<"u"&&e instanceof Promise)return!0;if(typeof window<"u"&&typeof window.Window=="function"&&e instanceof window.Window||typeof window<"u"&&typeof window.constructor=="function"&&e instanceof window.constructor)return!1;var r={}.toString;if(r){var n=r.call(e);if(n==="[object Window]"||n==="[object global]"||n==="[object DOMWindow]")return!1}if(typeof e.then=="function")return!0}catch{return!1}return!1}var D=[],b=[],C=0,N;function ae(){if(!C&&N){var e=N;N=null,e.resolve()}}function se(){C+=1}function Je(){C-=1,ae()}var v=function(){function e(n){var i=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var a,c,u=!1,h=!1,l=!1;se();try{n(function(g){l?i.resolve(g):(u=!0,a=g)},function(g){l?i.reject(g):(h=!0,c=g)})}catch(g){Je(),this.reject(g);return}Je(),l=!0,u?this.resolve(a):h&&this.reject(c)}}var r=e.prototype;return r.resolve=function(n){if(this.resolved||this.rejected)return this;if(O(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},r.reject=function(n){var i=this;if(this.resolved||this.rejected)return this;if(O(n))throw new Error("Can not reject promise with another promise");if(!n){var a=n&&typeof n.toString=="function"?n.toString():{}.toString.call(n);n=new Error("Expected reject to be called with Error, got "+a)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){i.errorHandled||function(c,u){if(D.indexOf(c)===-1){D.push(c),setTimeout(function(){throw c},1);for(var h=0;h<b.length;h++)b[h](c,u)}}(n,i)},1),this.dispatch(),this},r.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},r.dispatch=function(){var n=this.resolved,i=this.rejected,a=this.handlers;if(!this.dispatching&&(n||i)){this.dispatching=!0,se();for(var c=function(P,S){return P.then(function(R){S.resolve(R)},function(R){S.reject(R)})},u=0;u<a.length;u++){var h=a[u],l=h.onSuccess,g=h.onError,T=h.promise,y=void 0;if(n)try{y=l?l(this.value):this.value}catch(P){T.reject(P);continue}else if(i){if(!g){T.reject(this.error);continue}try{y=g(this.error)}catch(P){T.reject(P);continue}}if(y instanceof e&&(y.resolved||y.rejected)){var w=y;w.resolved?T.resolve(w.value):T.reject(w.error),w.errorHandled=!0}else O(y)?y instanceof e&&(y.resolved||y.rejected)?y.resolved?T.resolve(y.value):T.reject(y.error):c(y,T):T.resolve(y)}a.length=0,this.dispatching=!1,Je()}},r.then=function(n,i){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.then expected a function for success handler");if(i&&typeof i!="function"&&!i.call)throw new Error("Promise.then expected a function for error handler");var a=new e;return this.handlers.push({promise:a,onSuccess:n,onError:i}),this.errorHandled=!0,this.dispatch(),a},r.catch=function(n){return this.then(void 0,n)},r.finally=function(n){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(i){return e.try(n).then(function(){return i})},function(i){return e.try(n).then(function(){throw i})})},r.timeout=function(n,i){var a=this;if(this.resolved||this.rejected)return this;var c=setTimeout(function(){a.resolved||a.rejected||a.reject(i||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(u){return clearTimeout(c),u})},r.toPromise=function(){if(typeof Promise>"u")throw new TypeError("Could not find Promise");return Promise.resolve(this)},r.lazy=function(){return this.errorHandled=!0,this},e.resolve=function(n){return n instanceof e?n:O(n)?new e(function(i,a){return n.then(i,a)}):new e().resolve(n)},e.reject=function(n){return new e().reject(n)},e.asyncReject=function(n){return new e().asyncReject(n)},e.all=function(n){var i=new e,a=n.length,c=[].slice();if(!a)return i.resolve(c),i;for(var u=function(g,T,y){return T.then(function(w){c[g]=w,(a-=1)==0&&i.resolve(c)},function(w){y.reject(w)})},h=0;h<n.length;h++){var l=n[h];if(l instanceof e){if(l.resolved){c[h]=l.value,a-=1;continue}}else if(!O(l)){c[h]=l,a-=1;continue}u(h,e.resolve(l),i)}return a===0&&i.resolve(c),i},e.hash=function(n){var i={},a=[],c=function(h){if(n.hasOwnProperty(h)){var l=n[h];O(l)?a.push(l.then(function(g){i[h]=g})):i[h]=l}};for(var u in n)c(u);return e.all(a).then(function(){return i})},e.map=function(n,i){return e.all(n.map(i))},e.onPossiblyUnhandledException=function(n){return function(i){return b.push(i),{cancel:function(){b.splice(b.indexOf(i),1)}}}(n)},e.try=function(n,i,a){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.try expected a function");var c;se();try{c=n.apply(i,a||[])}catch(u){return Je(),e.reject(u)}return Je(),e.resolve(c)},e.delay=function(n){return new e(function(i){setTimeout(i,n)})},e.isPromise=function(n){return!!(n&&n instanceof e)||O(n)},e.flush=function(){return function(n){var i=N=N||new n;return ae(),i}(e)},e}();function A(e){return{}.toString.call(e)==="[object RegExp]"}var q={IFRAME:"iframe",POPUP:"popup"},Y=`Call was rejected by callee.\r
`;function Ee(e){return e===void 0&&(e=window),e.location.protocol}function Oe(e){if(e===void 0&&(e=window),e.mockDomain){var r=e.mockDomain.split("//")[0];if(r)return r}return Ee(e)}function Fe(e){return e===void 0&&(e=window),Oe(e)==="about:"}function ve(e){if(e===void 0&&(e=window),e)try{if(e.parent&&e.parent!==e)return e.parent}catch{}}function Ae(e){if(e===void 0&&(e=window),e&&!ve(e))try{return e.opener}catch{}}function Z(e){try{return!0}catch{}return!1}function Pe(e){e===void 0&&(e=window);var r=e.location;if(!r)throw new Error("Can not read window location");var n=Ee(e);if(!n)throw new Error("Can not read window protocol");if(n==="file:")return"file://";if(n==="about:"){var i=ve(e);return i&&Z()?Pe(i):"about://"}var a=r.host;if(!a)throw new Error("Can not read window host");return n+"//"+a}function ie(e){e===void 0&&(e=window);var r=Pe(e);return r&&e.mockDomain&&e.mockDomain.indexOf("mock:")===0?e.mockDomain:r}function U(e){if(!function(r){try{if(r===window)return!0}catch{}try{var n=Object.getOwnPropertyDescriptor(r,"location");if(n&&n.enumerable===!1)return!1}catch{}try{if(Fe(r)&&Z())return!0}catch{}try{if(function(i){return i===void 0&&(i=window),Oe(i)==="mock:"}(r)&&Z())return!0}catch{}try{if(Pe(r)===Pe(window))return!0}catch{}return!1}(e))return!1;try{if(e===window||Fe(e)&&Z()||ie(window)===ie(e))return!0}catch{}return!1}function z(e){if(!U(e))throw new Error("Expected window to be same domain");return e}function de(e,r){if(!e||!r)return!1;var n=ve(r);return n?n===e:function(i){var a=[];try{for(;i.parent!==i;)a.push(i.parent),i=i.parent}catch{}return a}(r).indexOf(e)!==-1}function Te(e){var r=[],n;try{n=e.frames}catch{n=e}var i;try{i=n.length}catch{}if(i===0)return r;if(i){for(var a=0;a<i;a++){var c=void 0;try{c=n[a]}catch{continue}r.push(c)}return r}for(var u=0;u<100;u++){var h=void 0;try{h=n[u]}catch{return r}if(!h)return r;r.push(h)}return r}function ot(e){for(var r=[],n=0,i=Te(e);n<i.length;n++){var a=i[n];r.push(a);for(var c=0,u=ot(a);c<u.length;c++)r.push(u[c])}return r}function xe(e){e===void 0&&(e=window);try{if(e.top)return e.top}catch{}if(ve(e)===e)return e;try{if(de(window,e)&&window.top)return window.top}catch{}try{if(de(e,window)&&window.top)return window.top}catch{}for(var r=0,n=ot(e);r<n.length;r++){var i=n[r];try{if(i.top)return i.top}catch{}if(ve(i)===i)return i}}function Ke(e){var r=xe(e);if(!r)throw new Error("Can not determine top window");var n=[].concat(ot(r),[r]);return n.indexOf(e)===-1&&(n=[].concat(n,[e],ot(e))),n}var at=[],_t=[];function ze(e,r){r===void 0&&(r=!0);try{if(e===window)return!1}catch{return!0}try{if(!e)return!0}catch{return!0}try{if(e.closed)return!0}catch(a){return!a||a.message!==Y}if(r&&U(e))try{if(e.mockclosed)return!0}catch{}try{if(!e.parent||!e.top)return!0}catch{}var n=function(a,c){for(var u=0;u<a.length;u++)try{if(a[u]===c)return u}catch{}return-1}(at,e);if(n!==-1){var i=_t[n];if(i&&function(a){if(!a.contentWindow||!a.parentNode)return!0;var c=a.ownerDocument;if(c&&c.documentElement&&!c.documentElement.contains(a)){for(var u=a;u.parentNode&&u.parentNode!==u;)u=u.parentNode;if(!u.host||!c.documentElement.contains(u.host))return!0}return!1}(i))return!0}return!1}function Jn(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent}function Kt(e,r){for(var n=Te(e),i=0;i<n.length;i++){var a=n[i];try{if(U(a)&&a.name===r&&n.indexOf(a)!==-1)return a}catch{}}try{if(n.indexOf(e.frames[r])!==-1)return e.frames[r]}catch{}try{if(n.indexOf(e[r])!==-1)return e[r]}catch{}}function dn(e,r){return e===Ae(r)}function Yt(e){return e===void 0&&(e=window),Ae(e=e||window)||ve(e)||void 0}function zr(e,r){for(var n=0;n<e.length;n++)for(var i=e[n],a=0;a<r.length;a++)if(i===r[a])return!0;return!1}function Ur(e){e===void 0&&(e=window);for(var r=0,n=e;n;)(n=ve(n))&&(r+=1);return r}function sr(e,r){var n=xe(e)||e,i=xe(r)||r;try{if(n&&i)return n===i}catch{}var a=Ke(e),c=Ke(r);if(zr(a,c))return!0;var u=Ae(n),h=Ae(i);return u&&zr(Ke(u),c)||h&&zr(Ke(h),a),!1}function wt(e,r){if(typeof e=="string"){if(typeof r=="string")return e==="*"||r===e;if(A(r)||Array.isArray(r))return!1}return A(e)?A(r)?e.toString()===r.toString():!Array.isArray(r)&&!!r.match(e):!!Array.isArray(e)&&(Array.isArray(r)?JSON.stringify(e)===JSON.stringify(r):!A(r)&&e.some(function(n){return wt(n,r)}))}function Lt(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):ie()}function yi(e,r,n,i){n===void 0&&(n=1e3),i===void 0&&(i=1/0);var a;return function c(){if(ze(e))return a&&clearTimeout(a),r();i<=0?clearTimeout(a):(i-=n,a=setTimeout(c,n))}(),{cancel:function(){a&&clearTimeout(a)}}}function cr(e){try{if(e===window)return!0}catch(r){if(r&&r.message===Y)return!0}try{if({}.toString.call(e)==="[object Window]")return!0}catch(r){if(r&&r.message===Y)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(r){if(r&&r.message===Y)return!0}try{if(e&&e.self===e)return!0}catch(r){if(r&&r.message===Y)return!0}try{if(e&&e.parent===e)return!0}catch(r){if(r&&r.message===Y)return!0}try{if(e&&e.top===e)return!0}catch(r){if(r&&r.message===Y)return!0}try{if(e&&e.__cross_domain_utils_window_check__==="__unlikely_value__")return!1}catch{return!0}try{if("postMessage"in e&&"self"in e&&"location"in e)return!0}catch{}return!1}function Kn(e){if(r=Lt(e),r.indexOf("mock:")!==0)return e;var r;throw new Error("Mock urls not supported out of test mode")}function Ei(e){if(U(e))return z(e).frameElement;for(var r=0,n=document.querySelectorAll("iframe");r<n.length;r++){var i=n[r];if(i&&i.contentWindow&&i.contentWindow===e)return i}}function bi(e){if(function(n){return n===void 0&&(n=window),!!ve(n)}(e)){var r=Ei(e);if(r&&r.parentElement){r.parentElement.removeChild(r);return}}try{e.close()}catch{}}function fn(e,r){for(var n=0;n<e.length;n++)try{if(e[n]===r)return n}catch{}return-1}var ln=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if(typeof WeakMap>"u"||Object.freeze===void 0)return!1;try{var n=new WeakMap,i={};return Object.freeze(i),n.set(i,"__testvalue__"),n.get(i)==="__testvalue__"}catch{return!1}}())try{this.weakmap=new WeakMap}catch{}this.keys=[],this.values=[]}var r=e.prototype;return r._cleanupClosedWindows=function(){for(var n=this.weakmap,i=this.keys,a=0;a<i.length;a++){var c=i[a];if(cr(c)&&ze(c)){if(n)try{n.delete(c)}catch{}i.splice(a,1),this.values.splice(a,1),a-=1}}},r.isSafeToReadWrite=function(n){return!cr(n)},r.set=function(n,i){if(!n)throw new Error("WeakMap expected key");var a=this.weakmap;if(a)try{a.set(n,i)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var c=this.name,u=n[c];u&&u[0]===n?u[1]=i:Object.defineProperty(n,c,{value:[n,i],writable:!0});return}catch{}this._cleanupClosedWindows();var h=this.keys,l=this.values,g=fn(h,n);g===-1?(h.push(n),l.push(i)):l[g]=i},r.get=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{if(i.has(n))return i.get(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return a&&a[0]===n?a[1]:void 0}catch{}this._cleanupClosedWindows();var c=fn(this.keys,n);if(c!==-1)return this.values[c]},r.delete=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{i.delete(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];a&&a[0]===n&&(a[0]=a[1]=void 0)}catch{}this._cleanupClosedWindows();var c=this.keys,u=fn(c,n);u!==-1&&(c.splice(u,1),this.values.splice(u,1))},r.has=function(n){if(!n)throw new Error("WeakMap expected key");var i=this.weakmap;if(i)try{if(i.has(n))return!0}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return!(!a||a[0]!==n)}catch{}return this._cleanupClosedWindows(),fn(this.keys,n)!==-1},r.getOrSet=function(n,i){if(this.has(n))return this.get(n);var a=i();return this.set(n,a),a},e}();function Pi(e){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function Pc(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ti(e,r,n){return(Ti=Pc()?Reflect.construct:function(i,a,c){var u=[null];u.push.apply(u,a);var h=new(Function.bind.apply(i,u));return c&&m(h,c.prototype),h}).apply(null,arguments)}function Si(e){var r=typeof Map=="function"?new Map:void 0;return(Si=function(n){if(n===null||(i=n,Function.toString.call(i).indexOf("[native code]")===-1))return n;var i;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(n))return r.get(n);r.set(n,a)}function a(){return Ti(n,arguments,Pi(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),m(a,n)})(e)}function Yn(e){var r=!1;try{(e instanceof window.Element||e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object")&&(r=!0)}catch{}return r}function Zn(e){return e.name||e.__name__||e.displayName||"anonymous"}function Xn(e,r){try{delete e.name,e.name=r}catch{}return e.__name__=e.displayName=r,e}function Qn(e){if(typeof btoa=="function")return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(r,n){return String.fromCharCode(parseInt(n,16))})).replace(/[=]/g,"");if(typeof Buffer<"u")return Buffer.from(e,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}function st(){var e="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+Qn(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var hn;function kn(e){try{return JSON.stringify([].slice.call(e),function(r,n){return typeof n=="function"?"memoize["+function(i){if(hn=hn||new ln,i==null||typeof i!="object"&&typeof i!="function")throw new Error("Invalid object");var a=hn.get(i);return a||(a=typeof i+":"+st(),hn.set(i,a)),a}(n)+"]":Yn(n)?{}:n})}catch{throw new Error("Arguments not serializable -- can not be used to memoize")}}function Tc(){return{}}var Lr=0,Ri=0;function Zt(e,r){r===void 0&&(r={});var n=r.thisNamespace,i=n!==void 0&&n,a=r.time,c,u,h=Lr;Lr+=1;var l=function(){for(var g=arguments.length,T=new Array(g),y=0;y<g;y++)T[y]=arguments[y];h<Ri&&(c=null,u=null,h=Lr,Lr+=1);var w;w=i?(u=u||new ln).getOrSet(this,Tc):c=c||{};var P;try{P=kn(T)}catch{return e.apply(this,arguments)}var S=w[P];if(S&&a&&Date.now()-S.time<a&&(delete w[P],S=null),S)return S.value;var R=Date.now(),x=e.apply(this,arguments);return w[P]={time:R,value:x},x};return l.reset=function(){c=null,u=null},Xn(l,(r.name||Zn(e))+"::memoized")}Zt.clear=function(){Ri=Lr};function Sc(e){var r={};function n(){for(var i=arguments,a=this,c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];var l=kn(u);return r.hasOwnProperty(l)||(r[l]=v.try(function(){return e.apply(a,i)}).finally(function(){delete r[l]})),r[l]}return n.reset=function(){r={}},Xn(n,Zn(e)+"::promiseMemoized")}function Ie(){}function pn(e){var r=!1;return Xn(function(){if(!r)return r=!0,e.apply(this,arguments)},Zn(e)+"::once")}function Rr(e,r){if(r===void 0&&(r=1),r>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+{}.toString.call(e)+">";if(typeof e=="string")return e;if(e instanceof Error){var n=e&&e.stack,i=e&&e.message;if(n&&i)return n.indexOf(i)!==-1?n:i+`
`+n;if(n)return n;if(i)return i}return e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}catch(a){return"Error while stringifying error: "+Rr(a,r+1)}}function vn(e){return typeof e=="string"?e:e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}function Or(e,r){if(!r)return e;if(Object.assign)return Object.assign(e,r);for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}Zt(function(e){if(Object.values)return Object.values(e);var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(e[n]);return r});function Rc(e){return e}function jr(e,r){var n;return function i(){n=setTimeout(function(){e(),i()},r)}(),{cancel:function(){clearTimeout(n)}}}function eo(e){return e.replace(/-([a-z])/g,function(r){return r[1].toUpperCase()})}function Oi(e,r,n){if(Array.isArray(e)){if(typeof r!="number")throw new TypeError("Array key must be number")}else if(typeof e=="object"&&e!==null&&typeof r!="string")throw new TypeError("Object key must be string");Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){delete e[r];var i=n();return e[r]=i,i},set:function(i){delete e[r],e[r]=i}})}function to(e){return[].slice.call(e)}function xi(e){return typeof(r=e)=="object"&&r!==null&&{}.toString.call(e)==="[object Object]";var r}function ro(e){if(!xi(e))return!1;var r=e.constructor;if(typeof r!="function")return!1;var n=r.prototype;return!!xi(n)&&!!n.hasOwnProperty("isPrototypeOf")}function wn(e,r,n){if(n===void 0&&(n=""),Array.isArray(e)){for(var i=e.length,a=[],c=function(T){Oi(a,T,function(){var y=n?n+"."+T:""+T,w=r(e[T],T,y);return(ro(w)||Array.isArray(w))&&(w=wn(w,r,y)),w})},u=0;u<i;u++)c(u);return a}if(ro(e)){var h={},l=function(T){if(!e.hasOwnProperty(T))return 1;Oi(h,T,function(){var y=n?n+"."+T:""+T,w=r(e[T],T,y);return(ro(w)||Array.isArray(w))&&(w=wn(w,r,y)),w})};for(var g in e)l(g);return h}throw new Error("Pass an object or array")}function Xt(e){return e!=null}function no(e){return{}.toString.call(e)==="[object RegExp]"}function Br(e,r,n){if(e.hasOwnProperty(r))return e[r];var i=n();return e[r]=i,i}function mn(e){var r=[],n=!1,i,a={set:function(c,u){return n||(e[c]=u,a.register(function(){delete e[c]})),u},register:function(c){var u=pn(function(){return c(i)});return n?c(i):r.push(u),{cancel:function(){var h=r.indexOf(u);h!==-1&&r.splice(h,1)}}},all:function(c){i=c;var u=[];for(n=!0;r.length;){var h=r.shift();u.push(h())}return v.all(u).then(Ie)}};return a}function gn(e,r){if(r==null)throw new Error("Expected "+e+" to be present");return r}var Oc=function(e){E(r,e);function r(n){var i;return(i=e.call(this,n)||this).name=i.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(i),i.constructor):i.stack=new Error(n).stack,i}return r}(Si(Error));function Ii(){var e=document.body;if(!e)throw new Error("Body element not found");return e}function yn(){return!!document.body&&document.readyState==="complete"}function Di(){return!!document.body&&document.readyState==="interactive"}function Ci(e){return encodeURIComponent(e)}Zt(function(){return new v(function(e){if(yn()||Di())return e();var r=setInterval(function(){if(yn()||Di())return clearInterval(r),e()},10)})});function _i(e){return function(r,n,i){i===void 0&&(i=[]);var a=r.__inline_memoize_cache__=r.__inline_memoize_cache__||{},c=kn(i);return a.hasOwnProperty(c)?a[c]:a[c]=(function(){var u={};if(!e||e.indexOf("=")===-1)return u;for(var h=0,l=e.split("&");h<l.length;h++){var g=l[h];(g=g.split("="))[0]&&g[1]&&(u[decodeURIComponent(g[0])]=decodeURIComponent(g[1]))}return u}).apply(void 0,i)}(_i,0,[e])}function Ni(e,r){return r===void 0&&(r={}),r&&Object.keys(r).length?function(n){return n===void 0&&(n={}),Object.keys(n).filter(function(i){return typeof n[i]=="string"||typeof n[i]=="boolean"}).map(function(i){var a=n[i];if(typeof a!="string"&&typeof a!="boolean")throw new TypeError("Invalid type for query");return Ci(i)+"="+Ci(a.toString())}).join("&")}(p({},_i(e),r)):e}function xc(e,r){e.appendChild(r)}function oo(e,r){return r===void 0&&(r=document),Yn(e)?e:typeof e=="string"?r.querySelector(e):void 0}function Ai(e){return new v(function(r,n){var i=vn(e),a=oo(e);if(a)return r(a);if(yn())return n(new Error("Document is ready and element "+i+" does not exist"));var c=setInterval(function(){if(a=oo(e))r(a),clearInterval(c);else if(yn())return clearInterval(c),n(new Error("Document is ready and element "+i+" does not exist"))},10)})}var io=function(e){E(r,e);function r(){return e.apply(this,arguments)||this}return r}(Oc),En;function Wi(e){if((En=En||new ln).has(e)){var r=En.get(e);if(r)return r}var n=new v(function(i,a){e.addEventListener("load",function(){(function(c){if(function(){for(var u=0;u<at.length;u++){var h=!1;try{h=at[u].closed}catch{}h&&(_t.splice(u,1),at.splice(u,1))}}(),c&&c.contentWindow)try{at.push(c.contentWindow),_t.push(c)}catch{}})(e),i(e)}),e.addEventListener("error",function(c){e.contentWindow?i(e):a(c)})});return En.set(e,n),n}function ao(e){return Wi(e).then(function(r){if(!r.contentWindow)throw new Error("Could not find window in iframe");return r.contentWindow})}function Mi(e,r){e===void 0&&(e={});var n=e.style||{},i=function(c,u,h){c===void 0&&(c="div"),u===void 0&&(u={}),c=c.toLowerCase();var l=document.createElement(c);if(u.style&&Or(l.style,u.style),u.class&&(l.className=u.class.join(" ")),u.id&&l.setAttribute("id",u.id),u.attributes)for(var g=0,T=Object.keys(u.attributes);g<T.length;g++){var y=T[g];l.setAttribute(y,u.attributes[y])}if(u.styleSheet&&function(w,P,S){S===void 0&&(S=window.document),w.styleSheet?w.styleSheet.cssText=P:w.appendChild(S.createTextNode(P))}(l,u.styleSheet),u.html){if(c==="iframe")throw new Error("Iframe html can not be written unless container provided and iframe in DOM");l.innerHTML=u.html}return l}("iframe",{attributes:p({allowTransparency:"true"},e.attributes||{}),style:p({backgroundColor:"transparent",border:"none"},n),html:e.html,class:e.class}),a=window.navigator.userAgent.match(/MSIE|Edge/i);return i.hasAttribute("id")||i.setAttribute("id",st()),Wi(i),(e.url||a)&&i.setAttribute("src",e.url||"about:blank"),i}function Fi(e,r,n){return e.addEventListener(r,n),{cancel:function(){e.removeEventListener(r,n)}}}function Ic(e){e.style.setProperty("display","")}function zi(e){e.style.setProperty("display","none","important")}function qr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function xr(e){return!(e&&e.parentNode&&e.ownerDocument&&e.ownerDocument.documentElement&&e.ownerDocument.documentElement.contains(e))}function Ui(e,r,n){var i=n===void 0?{}:n,a=i.width,c=a===void 0||a,u=i.height,h=u===void 0||u,l=i.interval,g=l===void 0?100:l,T=i.win,y=T===void 0?window:T,w=e.offsetWidth,P=e.offsetHeight,S=!1;r({width:w,height:P});var R=function(){if(!S&&function(M){return!!(M.offsetWidth||M.offsetHeight||M.getClientRects().length)}(e)){var L=e.offsetWidth,J=e.offsetHeight;(c&&L!==w||h&&J!==P)&&r({width:L,height:J}),w=L,P=J}},x,W;return y.addEventListener("resize",R),y.ResizeObserver!==void 0?((x=new y.ResizeObserver(R)).observe(e),W=jr(R,10*g)):y.MutationObserver!==void 0?((x=new y.MutationObserver(R)).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),W=jr(R,10*g)):W=jr(R,g),{cancel:function(){S=!0,x.disconnect(),window.removeEventListener("resize",R),W.cancel()}}}function so(e){for(;e.parentNode;)e=e.parentNode;return e.toString()==="[object ShadowRoot]"}var bn=typeof document<"u"?document.currentScript:null,Dc=Zt(function(){if(bn||(bn=function(){try{var e=function(){try{throw new Error("_")}catch(u){return u.stack||""}}(),r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(e),n=r&&r[1];if(!n)return;for(var i=0,a=[].slice.call(document.getElementsByTagName("script")).reverse();i<a.length;i++){var c=a[i];if(c.src&&c.src===n)return c}}catch{}}()))return bn;throw new Error("Can not determine current script")}),Cc=st();Zt(function(){var e;try{e=Dc()}catch{return Cc}var r=e.getAttribute("data-uid");if(r&&typeof r=="string"||(r=e.getAttribute("data-uid-auto"))&&typeof r=="string")return r;if(e.src){var n=function(i){for(var a="",c=0;c<i.length;c++){var u=i[c].charCodeAt(0)*c;i[c+1]&&(u+=i[c+1].charCodeAt(0)*(c-1)),a+=String.fromCharCode(97+Math.abs(u)%26)}return a}(JSON.stringify({src:e.src,dataset:e.dataset}));r="uid_"+n.slice(n.length-30)}else r=st();return e.setAttribute("data-uid-auto",r),r});function Li(e){return typeof e=="string"&&/^[0-9]+%$/.test(e)}function co(e){if(typeof e=="number")return e;var r=e.match(/^([0-9]+)(px|%)$/);if(!r)throw new Error("Could not match css value from "+e);return parseInt(r[1],10)}function ji(e){return co(e)+"px"}function Bi(e){return typeof e=="number"?ji(e):Li(e)?e:ji(e)}function qi(e,r){if(typeof e=="number")return e;if(Li(e))return parseInt(r*co(e)/100,10);if(typeof(n=e)=="string"&&/^[0-9]+px$/.test(n))return co(e);var n;throw new Error("Can not normalize dimension: "+e)}function Nt(e){e===void 0&&(e=window);var r="__post_robot_11_0_0__";return e!==window?e[r]:e[r]=e[r]||{}}var Hi=function(){return{}};function ge(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Hi),Br(Nt(),e,function(){var n=r();return{has:function(i){return n.hasOwnProperty(i)},get:function(i,a){return n.hasOwnProperty(i)?n[i]:a},set:function(i,a){return n[i]=a,a},del:function(i){delete n[i]},getOrSet:function(i,a){return Br(n,i,a)},reset:function(){n=r()},keys:function(){return Object.keys(n)}}})}var _c=function(){};function Pn(){var e=Nt();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new _c,e.WINDOW_WILDCARD}function it(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Hi),ge("windowStore").getOrSet(e,function(){var n=new ln,i=function(a){return n.getOrSet(a,r)};return{has:function(a){return i(a).hasOwnProperty(e)},get:function(a,c){var u=i(a);return u.hasOwnProperty(e)?u[e]:c},set:function(a,c){return i(a)[e]=c,c},del:function(a){delete i(a)[e]},getOrSet:function(a,c){return Br(i(a),e,c)}}})}function $i(){return ge("instance").getOrSet("instanceID",st)}function Vi(e,r){var n=r.domain,i=it("helloPromises"),a=i.get(e);a&&a.resolve({domain:n});var c=v.resolve({domain:n});return i.set(e,c),c}function uo(e,r){return(0,r.send)(e,"postrobot_hello",{instanceID:$i()},{domain:"*",timeout:-1}).then(function(n){var i=n.origin,a=n.data.instanceID;return Vi(e,{domain:i}),{win:e,domain:i,instanceID:a}})}function Gi(e,r){var n=r.send;return it("windowInstanceIDPromises").getOrSet(e,function(){return uo(e,{send:n}).then(function(i){return i.instanceID})})}function Ji(e,r,n){r===void 0&&(r=5e3),n===void 0&&(n="Window");var i=function(a){return it("helloPromises").getOrSet(a,function(){return new v})}(e);return r!==-1&&(i=i.timeout(r,new Error(n+" did not load after "+r+"ms"))),i}function Ki(e){it("knownWindows").set(e,!0)}function fo(e){return typeof e=="object"&&e!==null&&typeof e.__type__=="string"}function Yi(e){return e===void 0?"undefined":e===null?"null":Array.isArray(e)?"array":typeof e=="function"?"function":typeof e=="object"?e instanceof Error?"error":typeof e.then=="function"?"promise":{}.toString.call(e)==="[object RegExp]"?"regex":{}.toString.call(e)==="[object Date]"?"date":"object":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":void 0}function ur(e,r){return{__type__:e,__val__:r}}var mt,Nc=((mt={}).function=function(){},mt.error=function(e){return ur("error",{message:e.message,stack:e.stack,code:e.code,data:e.data})},mt.promise=function(){},mt.regex=function(e){return ur("regex",e.source)},mt.date=function(e){return ur("date",e.toJSON())},mt.array=function(e){return e},mt.object=function(e){return e},mt.string=function(e){return e},mt.number=function(e){return e},mt.boolean=function(e){return e},mt.null=function(e){return e},mt[void 0]=function(e){return ur("undefined",e)},mt),Ac={},gt,Wc=((gt={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},gt.error=function(e){var r=e.stack,n=e.code,i=e.data,a=new Error(e.message);return a.code=n,i&&(a.data=i),a.stack=r+`

`+a.stack,a},gt.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},gt.regex=function(e){return new RegExp(e)},gt.date=function(e){return new Date(e)},gt.array=function(e){return e},gt.object=function(e){return e},gt.string=function(e){return e},gt.number=function(e){return e},gt.boolean=function(e){return e},gt.null=function(e){return e},gt[void 0]=function(){},gt),Mc={};function lo(){return!!Jn(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function Zi(e){return!sr(window,e)}function Xi(e,r){if(e){if(ie()!==Lt(e))return!0}else if(r&&!U(r))return!0;return!1}function Qi(e){var r=e.win,n=e.domain;return!(!lo()||n&&!Xi(n,r)||r&&!Zi(r))}function ho(e){return"__postrobot_bridge___"+(e=e||Lt(e)).replace(/[^a-zA-Z0-9]+/g,"_")}function ki(){return!!(window.name&&window.name===ho(ie()))}var Fc=new v(function(e){if(window.document&&window.document.body)return e(window.document.body);var r=setInterval(function(){if(window.document&&window.document.body)return clearInterval(r),e(window.document.body)},10)});function ea(e){it("remoteWindowPromises").getOrSet(e,function(){return new v})}function po(e){var r=it("remoteWindowPromises").get(e);if(!r)throw new Error("Remote window promise not found");return r}function ta(e,r,n){po(e).resolve(function(i,a,c){if(i!==e)throw new Error("Remote window does not match window");if(!wt(a,r))throw new Error("Remote domain "+a+" does not match domain "+r);n.fireAndForget(c)})}function vo(e,r){po(e).reject(r).catch(Ie)}function Tn(e){for(var r=e.win,n=e.name,i=e.domain,a=ge("popupWindowsByName"),c=it("popupWindowsByWin"),u=0,h=a.keys();u<h.length;u++){var l=h[u],g=a.get(l);g&&!ze(g.win)||a.del(l)}if(ze(r))return{win:r,name:n,domain:i};var T=c.getOrSet(r,function(){return n?a.getOrSet(n,function(){return{win:r,name:n}}):{win:r}});if(T.win&&T.win!==r)throw new Error("Different window already linked for window: "+(n||"undefined"));return n&&(T.name=n,a.set(n,T)),i&&(T.domain=i,ea(r)),c.set(r,T),T}function ra(e){var r=e.on,n=e.send,i=e.receiveMessage;a=window.open,window.open=function(c,u,h,l){var g=a.call(this,Kn(c),u,h,l);return g&&(Tn({win:g,name:u,domain:c?Lt(c):null}),g)};var a;(function(c){var u=c.on,h=c.send,l=c.receiveMessage,g=ge("popupWindowsByName");u("postrobot_open_tunnel",function(T){var y=T.source,w=T.origin,P=T.data,S=ge("bridges").get(w);if(!S)throw new Error("Can not find bridge promise for domain "+w);return S.then(function(R){if(y!==R)throw new Error("Message source does not matched registered bridge for domain "+w);if(!P.name)throw new Error("Register window expected to be passed window name");if(!P.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!g.has(P.name))throw new Error("Window with name "+P.name+" does not exist, or was not opened by this window");var x=function(){return g.get(P.name)};if(!x().domain)throw new Error("We do not have a registered domain for window "+P.name);if(x().domain!==w)throw new Error("Message origin "+w+" does not matched registered window origin "+(x().domain||"unknown"));return ta(x().win,w,P.sendMessage),{sendMessage:function(W){if(window&&!window.closed&&x()){var L=x().domain;if(L)try{l({data:W,origin:L,source:x().win},{on:u,send:h})}catch(J){v.reject(J)}}}}})})})({on:r,send:n,receiveMessage:i}),function(c){var u=c.send;Nt(window).openTunnelToParent=function(h){var l=h.name,g=h.source,T=h.canary,y=h.sendMessage,w=ge("tunnelWindows"),P=ve(window);if(!P)throw new Error("No parent window found to open tunnel to");var S=function(R){var x=R.name,W=R.source,L=R.canary,J=R.sendMessage;(function(){for(var V=ge("tunnelWindows"),j=0,te=V.keys();j<te.length;j++){var $=te[j];ze(V[$].source)&&V.del($)}})();var M=st();return ge("tunnelWindows").set(M,{name:x,source:W,canary:L,sendMessage:J}),M}({name:l,source:g,canary:T,sendMessage:y});return u(P,"postrobot_open_tunnel",{name:l,sendMessage:function(){var R=w.get(S);if(R&&R.source&&!ze(R.source)){try{R.canary()}catch{return}R.sendMessage.apply(this,arguments)}}},{domain:"*"})}}({send:n}),function(c){var u=c.on,h=c.send,l=c.receiveMessage;v.try(function(){var g=Ae(window);if(g&&Qi({win:g})){return ea(g),(T=g,it("remoteBridgeAwaiters").getOrSet(T,function(){return v.try(function(){var y=Kt(T,ho(ie()));if(y)return U(y)&&Nt(z(y))?y:new v(function(w){var P,S;P=setInterval(function(){if(y&&U(y)&&Nt(z(y)))return clearInterval(P),clearTimeout(S),w(y)},100),S=setTimeout(function(){return clearInterval(P),w()},2e3)})})})).then(function(y){return y?window.name?Nt(z(y)).openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(w){try{}catch{return}if(window&&!window.closed)try{l({data:w,origin:this.origin,source:this.source},{on:u,send:h})}catch(P){v.reject(P)}}}).then(function(w){var P=w.source,S=w.origin,R=w.data;if(P!==g)throw new Error("Source does not match opener");ta(P,S,R.sendMessage)}).catch(function(w){throw vo(g,w),w}):vo(g,new Error("Can not register with opener: window does not have a name")):vo(g,new Error("Can not register with opener: no bridge found in opener"))});var T}})}({on:r,send:n,receiveMessage:i})}function wo(){for(var e=ge("idToProxyWindow"),r=0,n=e.keys();r<n.length;r++){var i=n[r];e.get(i).shouldClean()&&e.del(i)}}function na(e,r){var n=r.send,i=r.id,a=i===void 0?st():i,c=e.then(function(l){if(U(l))return z(l).name}),u=e.then(function(l){if(ze(l))throw new Error("Window is closed, can not determine type");return Ae(l)?q.POPUP:q.IFRAME});c.catch(Ie),u.catch(Ie);var h=function(){return e.then(function(l){if(!ze(l))return U(l)?z(l).name:c})};return{id:a,getType:function(){return u},getInstanceID:Sc(function(){return e.then(function(l){return Gi(l,{send:n})})}),close:function(){return e.then(bi)},getName:h,focus:function(){return e.then(function(l){l.focus()})},isClosed:function(){return e.then(function(l){return ze(l)})},setLocation:function(l,g){return g===void 0&&(g={}),e.then(function(T){var y=window.location.protocol+"//"+window.location.host,w=g.method,P=w===void 0?"get":w,S=g.body;if(l.indexOf("/")===0)l=""+y+l;else if(!l.match(/^https?:\/\//)&&l.indexOf(y)!==0)throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(l));if(P==="post")return h().then(function(R){if(!R)throw new Error("Can not post to window without target name");(function(x){var W=x.url,L=x.target,J=x.body,M=x.method,V=M===void 0?"post":M,j=document.createElement("form");if(j.setAttribute("target",L),j.setAttribute("method",V),j.setAttribute("action",W),j.style.display="none",J)for(var te=0,$=Object.keys(J);te<$.length;te++){var he,ce=$[te],X=document.createElement("input");X.setAttribute("name",ce),X.setAttribute("value",(he=J[ce])==null?void 0:he.toString()),j.appendChild(X)}Ii().appendChild(j),j.submit(),Ii().removeChild(j)})({url:l,target:R,method:P,body:S})});if(P!=="get")throw new Error("Unsupported method: "+P);if(U(T))try{if(T.location&&typeof T.location.replace=="function"){T.location.replace(l);return}}catch{}T.location=l})},setName:function(l){return e.then(function(g){Tn({win:g,name:l});var T=U(g),y=Ei(g);if(!T)throw new Error("Can not set name for cross-domain window: "+l);z(g).name=l,y&&y.setAttribute("name",l),c=v.resolve(l)})}}}var yt=function(){function e(n){var i=n.send,a=n.win,c=n.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new v,this.serializedWindow=c||na(this.actualWindowPromise,{send:i}),ge("idToProxyWindow").set(this.getID(),this),a&&this.setWindow(a,{send:i})}var r=e.prototype;return r.getID=function(){return this.serializedWindow.id},r.getType=function(){return this.serializedWindow.getType()},r.isPopup=function(){return this.getType().then(function(n){return n===q.POPUP})},r.setLocation=function(n,i){var a=this;return this.serializedWindow.setLocation(n,i).then(function(){return a})},r.getName=function(){return this.serializedWindow.getName()},r.setName=function(n){var i=this;return this.serializedWindow.setName(n).then(function(){return i})},r.close=function(){var n=this;return this.serializedWindow.close().then(function(){return n})},r.focus=function(){var n=this,i=this.isPopup(),a=this.getName(),c=v.hash({isPopup:i,name:a}).then(function(h){var l=h.name;h.isPopup&&l&&window.open("",l,"noopener")}),u=this.serializedWindow.focus();return v.all([c,u]).then(function(){return n})},r.isClosed=function(){return this.serializedWindow.isClosed()},r.getWindow=function(){return this.actualWindow},r.setWindow=function(n,i){var a=i.send;this.actualWindow=n,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=na(this.actualWindowPromise,{send:a,id:this.getID()}),it("winToProxyWindow").set(n,this)},r.awaitWindow=function(){return this.actualWindowPromise},r.matchWindow=function(n,i){var a=this,c=i.send;return v.try(function(){return a.actualWindow?n===a.actualWindow:v.hash({proxyInstanceID:a.getInstanceID(),knownWindowInstanceID:Gi(n,{send:c})}).then(function(u){var h=u.proxyInstanceID===u.knownWindowInstanceID;return h&&a.setWindow(n,{send:c}),h})})},r.unwrap=function(){return this.actualWindow||this},r.getInstanceID=function(){return this.serializedWindow.getInstanceID()},r.shouldClean=function(){return!!(this.actualWindow&&ze(this.actualWindow))},r.serialize=function(){return this.serializedWindow},e.unwrap=function(n){return e.isProxyWindow(n)?n.unwrap():n},e.serialize=function(n,i){var a=i.send;return wo(),e.toProxyWindow(n,{send:a}).serialize()},e.deserialize=function(n,i){var a=i.send;return wo(),ge("idToProxyWindow").get(n.id)||new e({serializedWindow:n,send:a})},e.isProxyWindow=function(n){return!!(n&&!cr(n)&&n.isProxyWindow)},e.toProxyWindow=function(n,i){var a=i.send;if(wo(),e.isProxyWindow(n))return n;var c=n;return it("winToProxyWindow").get(c)||new e({win:c,send:a})},e}();function mo(e,r,n,i,a){var c=it("methodStore"),u=ge("proxyWindowMethods");yt.isProxyWindow(i)?u.set(e,{val:r,name:n,domain:a,source:i}):(u.del(e),c.getOrSet(i,function(){return{}})[e]={domain:a,name:n,val:r,source:i})}function oa(e,r){var n=it("methodStore"),i=ge("proxyWindowMethods");return n.getOrSet(e,function(){return{}})[r]||i.get(r)}function ia(e,r,n,i,a){u=(c={on:a.on,send:a.send}).on,h=c.send,ge("builtinListeners").getOrSet("functionCalls",function(){return u("postrobot_method",{domain:"*"},function(T){var y=T.source,w=T.origin,P=T.data,S=P.id,R=P.name,x=oa(y,S);if(!x)throw new Error("Could not find method '"+R+"' with id: "+P.id+" in "+ie(window));var W=x.source,L=x.domain,J=x.val;return v.try(function(){if(!wt(L,w))throw new Error("Method '"+P.name+"' domain "+JSON.stringify(no(x.domain)?x.domain.source:x.domain)+" does not match origin "+w+" in "+ie(window));if(yt.isProxyWindow(W))return W.matchWindow(y,{send:h}).then(function(M){if(!M)throw new Error("Method call '"+P.name+"' failed - proxy window does not match source in "+ie(window))})}).then(function(){return J.apply({source:y,origin:w},P.args)},function(M){return v.try(function(){if(J.onError)return J.onError(M)}).then(function(){throw M.stack&&(M.stack="Remote call to "+R+"("+function(V){return V===void 0&&(V=[]),to(V).map(function(j){return typeof j=="string"?"'"+j+"'":j===void 0?"undefined":j===null?"null":typeof j=="boolean"?j.toString():Array.isArray(j)?"[ ... ]":typeof j=="object"?"{ ... }":typeof j=="function"?"() => { ... }":"<"+typeof j+">"}).join(", ")}(P.args)+`) failed

`+M.stack),M})}).then(function(M){return{result:M,id:S,name:R}})})});var c,u,h,l=n.__id__||st();e=yt.unwrap(e);var g=n.__name__||n.name||i;return typeof g=="string"&&typeof g.indexOf=="function"&&g.indexOf("anonymous::")===0&&(g=g.replace("anonymous::",i+"::")),yt.isProxyWindow(e)?(mo(l,n,g,e,r),e.awaitWindow().then(function(T){mo(l,n,g,T,r)})):mo(l,n,g,e,r),ur("cross_domain_function",{id:l,name:g})}function aa(e,r,n,i){var a,c=i.on,u=i.send;return function(h,l){l===void 0&&(l=Ac);var g=JSON.stringify(h,function(T){var y=this[T];if(fo(this))return y;var w=Yi(y);if(!w)return y;var P=l[w]||Nc[w];return P?P(y,T):y});return g===void 0?"undefined":g}(n,((a={}).promise=function(h,l){return function(g,T,y,w,P){return ur("cross_domain_zalgo_promise",{then:ia(g,T,function(S,R){return y.then(S,R)},w,{on:P.on,send:P.send})})}(e,r,h,l,{on:c,send:u})},a.function=function(h,l){return ia(e,r,h,l,{on:c,send:u})},a.object=function(h){return cr(h)||yt.isProxyWindow(h)?ur("cross_domain_window",yt.serialize(h,{send:u})):h},a))}function sa(e,r,n,i){var a,c=i.send;return function(u,h){if(h===void 0&&(h=Mc),u!=="undefined")return JSON.parse(u,function(l,g){if(fo(this))return g;var T,y;if(fo(g)?(T=g.__type__,y=g.__val__):(T=Yi(g),y=g),!T)return y;var w=h[T]||Wc[T];return w?w(y,l):y})}(n,((a={}).cross_domain_zalgo_promise=function(u){return function(h,l,g){return new v(g.then)}(0,0,u)},a.cross_domain_function=function(u){return function(h,l,g,T){var y=g.id,w=g.name,P=T.send,S=function(x){x===void 0&&(x={});function W(){var L=arguments;return yt.toProxyWindow(h,{send:P}).awaitWindow().then(function(J){var M=oa(J,y);if(M&&M.val!==W)return M.val.apply({source:window,origin:ie()},L);var V=[].slice.call(L);return x.fireAndForget?P(J,"postrobot_method",{id:y,name:w,args:V},{domain:l,fireAndForget:!0}):P(J,"postrobot_method",{id:y,name:w,args:V},{domain:l,fireAndForget:!1}).then(function(j){return j.data.result})}).catch(function(J){throw J})}return W.__name__=w,W.__origin__=l,W.__source__=h,W.__id__=y,W.origin=l,W},R=S();return R.fireAndForget=S({fireAndForget:!0}),R}(e,r,u,{send:c})},a.cross_domain_window=function(u){return yt.deserialize(u,{send:c})},a))}var Hr={};Hr.postrobot_post_message=function(e,r,n){n.indexOf("file:")===0&&(n="*"),e.postMessage(r,n)},Hr.postrobot_bridge=function(e,r,n){if(!lo()&&!ki())throw new Error("Bridge not needed for browser");if(U(e))throw new Error("Post message through bridge disabled between same domain windows");if(sr(window,e)!==!1)throw new Error("Can only use bridge to communicate between two different windows, not between frames");(function(i,a,c){var u=dn(window,i),h=dn(i,window);if(!u&&!h)throw new Error("Can only send messages to and from parent and popup windows");po(i).then(function(l){return l(i,a,c)})})(e,n,r)},Hr.postrobot_global=function(e,r){if(!Jn(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!U(e))throw new Error("Post message through global disabled between different domain windows");if(sr(window,e)!==!1)throw new Error("Can only use global to communicate between two different windows, not between frames");var n=Nt(e);if(!n)throw new Error("Can not find postRobot global on foreign window");n.receiveMessage({source:window,origin:ie(),data:r})};function go(e,r,n,i){var a=i.on,c=i.send;return v.try(function(){var u=it().getOrSet(e,function(){return{}});return u.buffer=u.buffer||[],u.buffer.push(n),u.flush=u.flush||v.flush().then(function(){if(ze(e))throw new Error("Window is closed");var h=aa(e,r,((l={}).__post_robot_11_0_0__=u.buffer||[],l),{on:a,send:c}),l;delete u.buffer;for(var g=Object.keys(Hr),T=[],y=0;y<g.length;y++){var w=g[y];try{Hr[w](e,h,r)}catch(P){T.push(P)}}if(T.length===g.length)throw new Error(`All post-robot messaging strategies failed:

`+T.map(function(P,S){return S+". "+Rr(P)}).join(`

`))}),u.flush.then(function(){delete u.flush})}).then(Ie)}function ca(e){return ge("responseListeners").get(e)}function ua(e){ge("responseListeners").del(e)}function da(e){return ge("erroredResponseListeners").has(e)}function fa(e){var r=e.name,n=e.win,i=e.domain,a=it("requestListeners");if(n==="*"&&(n=null),i==="*"&&(i=null),!r)throw new Error("Name required to get request listener");for(var c=0,u=[n,Pn()];c<u.length;c++){var h=u[c];if(h){var l=a.get(h);if(l){var g=l[r];if(g){if(i&&typeof i=="string"){if(g[i])return g[i];if(g.__domain_regex__)for(var T=0,y=g.__domain_regex__;T<y.length;T++){var w=y[T],P=w.listener;if(wt(w.regex,i))return P}}if(g["*"])return g["*"]}}}}}function yo(e,r){var n=r.on,i=r.send,a=ge("receivedMessages");try{if(!window||window.closed||!e.source)return}catch{return}var c=e.source,u=e.origin,h=function(y,w,P,S){var R=S.on,x=S.send,W;try{W=sa(w,P,y,{on:R,send:x})}catch{return}if(W&&typeof W=="object"&&W!==null){var L=W.__post_robot_11_0_0__;if(Array.isArray(L))return L}}(e.data,c,u,{on:n,send:i});if(h){Ki(c);for(var l,g=function(){var y=h[T];if(a.has(y.id))return{v:void 0};if(a.set(y.id,!0),ze(c)&&!y.fireAndForget)return{v:void 0};y.origin.indexOf("file:")===0&&(u="file://");try{y.type==="postrobot_message_request"?function(w,P,S,R){var x=R.on,W=R.send,L=fa({name:S.name,win:w,domain:P}),J=S.name==="postrobot_method"&&S.data&&typeof S.data.name=="string"?S.data.name+"()":S.name;function M(V,j,te){return v.flush().then(function(){if(!S.fireAndForget&&!ze(w))try{return go(w,P,{id:st(),origin:ie(window),type:"postrobot_message_response",hash:S.hash,name:S.name,ack:V,data:j,error:te},{on:x,send:W})}catch($){throw new Error("Send response message failed for "+J+" in "+ie()+`

`+Rr($))}})}v.all([v.flush().then(function(){if(!S.fireAndForget&&!ze(w))try{return go(w,P,{id:st(),origin:ie(window),type:"postrobot_message_ack",hash:S.hash,name:S.name},{on:x,send:W})}catch(V){throw new Error("Send ack message failed for "+J+" in "+ie()+`

`+Rr(V))}}),v.try(function(){if(!L)throw new Error("No handler found for post message: "+S.name+" from "+P+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);return L.handler({source:w,origin:P,data:S.data})}).then(function(V){return M("success",V)},function(V){return M("error",null,V)})]).then(Ie).catch(function(V){if(L&&L.handleError)return L.handleError(V);throw V})}(c,u,y,{on:n,send:i}):y.type==="postrobot_message_response"?function(w,P,S){if(!da(S.hash)){var R=ca(S.hash);if(!R)throw new Error("No handler found for post message response for message: "+S.name+" from "+P+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!wt(R.domain,P))throw new Error("Response origin "+P+" does not match domain "+(x=R.domain,Array.isArray(x)?"("+x.join(" | ")+")":A(x)?"RegExp("+x.toString()+")":x.toString()));var x;if(w!==R.win)throw new Error("Response source does not match registered window");ua(S.hash),S.ack==="error"?R.promise.reject(S.error):S.ack==="success"&&R.promise.resolve({source:w,origin:P,data:S.data})}}(c,u,y):y.type==="postrobot_message_ack"&&function(w,P,S){if(!da(S.hash)){var R=ca(S.hash);if(!R)throw new Error("No handler found for post message ack for message: "+S.name+" from "+P+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!wt(R.domain,P))throw new Error("Ack origin "+P+" does not match domain "+R.domain.toString());if(w!==R.win)throw new Error("Ack source does not match registered window")}catch(x){R.promise.reject(x)}R.ack=!0}}(c,u,y)}catch(w){setTimeout(function(){throw w},0)}},T=0;T<h.length;T++)if(l=g())return l.v}}function jt(e,r,n){if(!e)throw new Error("Expected name");if(typeof(r=r||{})=="function"&&(n=r,r={}),!n)throw new Error("Expected handler");var i=function a(c,u){var h=c.name,l=c.win,g=c.domain,T=it("requestListeners");if(!h||typeof h!="string")throw new Error("Name required to add request listener");if(l&&l!=="*"&&yt.isProxyWindow(l)){var y=l.awaitWindow().then(function(he){return a({name:h,win:he,domain:g},u)});return{cancel:function(){y.then(function(he){return he.cancel()},Ie)}}}var w=l;if(Array.isArray(w)){for(var P=[],S=0,R=w;S<R.length;S++)P.push(a({name:h,domain:g,win:R[S]},u));return{cancel:function(){for(var he=0;he<P.length;he++)P[he].cancel()}}}if(Array.isArray(g)){for(var x=[],W=0,L=g;W<L.length;W++)x.push(a({name:h,win:w,domain:L[W]},u));return{cancel:function(){for(var he=0;he<x.length;he++)x[he].cancel()}}}var J=fa({name:h,win:w,domain:g});w&&w!=="*"||(w=Pn());var M=(g=g||"*").toString();if(J)throw w&&g?new Error("Request listener already exists for "+h+" on domain "+g.toString()+" for "+(w===Pn()?"wildcard":"specified")+" window"):w?new Error("Request listener already exists for "+h+" for "+(w===Pn()?"wildcard":"specified")+" window"):g?new Error("Request listener already exists for "+h+" on domain "+g.toString()):new Error("Request listener already exists for "+h);var V=T.getOrSet(w,function(){return{}}),j=Br(V,h,function(){return{}}),te,$;return no(g)?(te=Br(j,"__domain_regex__",function(){return[]})).push($={regex:g,listener:u}):j[M]=u,{cancel:function(){delete j[M],$&&(te.splice(te.indexOf($,1)),te.length||delete j.__domain_regex__),Object.keys(j).length||delete V[h],w&&!Object.keys(V).length&&T.del(w)}}}({name:e,win:r.window,domain:r.domain||"*"},{handler:n||r.handler,handleError:r.errorHandler||function(a){throw a}});return{cancel:function(){i.cancel()}}}var xt=function e(r,n,i,a){var c=(a=a||{}).domain||"*",u=a.timeout||-1,h=a.timeout||5e3,l=a.fireAndForget||!1;return yt.toProxyWindow(r,{send:e}).awaitWindow().then(function(g){return v.try(function(){if(function(T,y,w){if(!T)throw new Error("Expected name");if(w&&typeof w!="string"&&!Array.isArray(w)&&!no(w))throw new TypeError("Can not send "+T+". Expected domain "+JSON.stringify(w)+" to be a string, array, or regex");if(ze(y))throw new Error("Can not send "+T+". Target window is closed")}(n,g,c),function(T,y){var w=Yt(y);if(w)return w===T;if(y===T||xe(y)===y)return!1;for(var P=0,S=Te(T);P<S.length;P++)if(S[P]===y)return!0;return!1}(window,g))return Ji(g,h)}).then(function(T){return function(y,w,P,S){var R=S.send;return v.try(function(){return typeof w=="string"?w:v.try(function(){return P||uo(y,{send:R}).then(function(x){return x.domain})}).then(function(x){if(!wt(w,w))throw new Error("Domain "+vn(w)+" does not match "+vn(w));return x})})}(g,c,(T===void 0?{}:T).domain,{send:e})}).then(function(T){var y=T,w=n==="postrobot_method"&&i&&typeof i.name=="string"?i.name+"()":n,P=new v,S=n+"_"+st();if(!l){var R={name:n,win:g,domain:y,promise:P};(function(j,te){ge("responseListeners").set(j,te)})(S,R);var x=it("requestPromises").getOrSet(g,function(){return[]});x.push(P),P.catch(function(){(function(j){ge("erroredResponseListeners").set(j,!0)})(S),ua(S)});var W=function(j){return it("knownWindows").get(j,!1)}(g)?1e4:2e3,L=u,J=W,M=L,V=jr(function(){return ze(g)?P.reject(new Error("Window closed for "+n+" before "+(R.ack?"response":"ack"))):R.cancelled?P.reject(new Error("Response listener was cancelled for "+n)):(J=Math.max(J-500,0),M!==-1&&(M=Math.max(M-500,0)),R.ack||J!==0?M===0?P.reject(new Error("No response for postMessage "+w+" in "+ie()+" in "+L+"ms")):void 0:P.reject(new Error("No ack for postMessage "+w+" in "+ie()+" in "+W+"ms")))},500);P.finally(function(){V.cancel(),x.splice(x.indexOf(P,1))}).catch(Ie)}return go(g,y,{id:st(),origin:ie(window),type:"postrobot_message_request",hash:S,name:n,data:i,fireAndForget:l},{on:jt,send:e}).then(function(){return l?P.resolve():P},function(j){throw new Error("Send request message failed for "+w+" in "+ie()+`

`+Rr(j))})})})};function $r(e){return yt.toProxyWindow(e,{send:xt})}function la(e){for(var r=0,n=it("requestPromises").get(e,[]);r<n.length;r++)n[r].reject(new Error("Window "+(ze(e)?"closed":"cleaned up")+" before response")).catch(Ie)}var Qt;Qt={setupBridge:ra,openBridge:function(e,r){var n=ge("bridges"),i=ge("bridgeFrames");return r=r||Lt(e),n.getOrSet(r,function(){return v.try(function(){if(ie()===r)throw new Error("Can not open bridge on the same domain as current domain: "+r);var a=ho(r);if(Kt(window,a))throw new Error("Frame with name "+a+" already exists on page");var c=function(u,h){var l=document.createElement("iframe");return l.setAttribute("name",u),l.setAttribute("id",u),l.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),l.setAttribute("frameborder","0"),l.setAttribute("border","0"),l.setAttribute("scrolling","no"),l.setAttribute("allowTransparency","true"),l.setAttribute("tabindex","-1"),l.setAttribute("hidden","true"),l.setAttribute("title",""),l.setAttribute("role","presentation"),l.src=h,l}(a,e);return i.set(r,c),Fc.then(function(u){u.appendChild(c);var h=c.contentWindow;return new v(function(l,g){c.addEventListener("load",l),c.addEventListener("error",g)}).then(function(){return Ji(h,5e3,"Bridge "+e)}).then(function(){return h})})})})},linkWindow:Tn,linkUrl:function(e,r){Tn({win:e,domain:Lt(r)})},isBridge:ki,needsBridge:Qi,needsBridgeForBrowser:lo,hasBridge:function(e,r){return ge("bridges").has(r||Lt(e))},needsBridgeForWin:Zi,needsBridgeForDomain:Xi,destroyBridges:function(){for(var e=ge("bridges"),r=ge("bridgeFrames"),n=0,i=r.keys();n<i.length;n++){var a=r.get(i[n]);a&&a.parentNode&&a.parentNode.removeChild(a)}r.reset(),e.reset()}};function Vr(e){if(!U(e))throw new Error("Can not get global for window on different domain");return e.__zoid_10_3_3__||(e.__zoid_10_3_3__={}),e.__zoid_10_3_3__}function ha(e,r){try{return r(Vr(e))}catch{}}function Sn(e){return{get:function(){var r=this;return v.try(function(){if(r.source&&r.source!==window)throw new Error("Can not call get on proxy object from a remote window");return e})}}}function zc(e){return Qn(JSON.stringify(e))}function Eo(e){var r=Vr(e);return r.references=r.references||{},r.references}function pa(e){var r=e.data,n=e.metaData,i=e.sender,a=e.receiver,c=e.passByReference,u=c!==void 0&&c,h=e.basic,l=h!==void 0&&h,g=$r(a.win),T=l?JSON.stringify(r):aa(g,a.domain,r,{on:jt,send:xt}),y=u?function(w){var P=st();return Eo(window)[P]=w,{type:"uid",uid:P}}(T):{type:"raw",val:T};return{serializedData:zc({sender:{domain:i.domain},metaData:n,reference:y}),cleanReference:function(){w=window,(P=y).type==="uid"&&delete Eo(w)[P.uid];var w,P}}}function va(e){var r=e.sender,n=e.basic,i=n!==void 0&&n,a=function(T){return JSON.parse(function(y){if(typeof atob=="function")return decodeURIComponent([].map.call(atob(y),function(w){return"%"+("00"+w.charCodeAt(0).toString(16)).slice(-2)}).join(""));if(typeof Buffer<"u")return Buffer.from(y,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(T))}(e.data),c=a.reference,u=a.metaData,h;h=typeof r.win=="function"?r.win({metaData:u}):r.win;var l;l=typeof r.domain=="function"?r.domain({metaData:u}):typeof r.domain=="string"?r.domain:a.sender.domain;var g=function(T,y){if(y.type==="raw")return y.val;if(y.type==="uid")return Eo(T)[y.uid];throw new Error("Unsupported ref type: "+y.type)}(h,c);return{data:i?JSON.parse(g):function(T,y,w){return sa(T,y,w,{on:jt,send:xt})}(h,l,g),metaData:u,sender:{win:h,domain:l},reference:c}}var be={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},Rn={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},We=q,De={RENDER:"zoid-render",RENDERED:"zoid-rendered",PRERENDER:"zoid-prerender",PRERENDERED:"zoid-prerendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function wa(e){return"__zoid__"+e.name+"__"+e.serializedPayload+"__"}function bo(e){if(!e)throw new Error("No window name");var r=e.split("__"),n=r[1],i=r[2],a=r[3];if(n!=="zoid")throw new Error("Window not rendered by zoid - got "+n);if(!i)throw new Error("Expected component name");if(!a)throw new Error("Expected serialized payload ref");return{name:i,serializedInitialPayload:a}}var Uc=Zt(function(e){var r=va({data:bo(e).serializedInitialPayload,sender:{win:function(n){return function(i){if(i.type==="opener")return gn("opener",Ae(window));if(i.type==="parent"&&typeof i.distance=="number")return gn("parent",function(y,w){return w===void 0&&(w=1),function(P,S){S===void 0&&(S=1);for(var R=P,x=0;x<S;x++){if(!R)return;R=ve(R)}return R}(y,Ur(y)-w)}(window,i.distance));if(i.type==="global"&&i.uid&&typeof i.uid=="string"){var a=i.uid,c=Yt(window);if(!c)throw new Error("Can not find ancestor window");for(var u=0,h=Ke(c);u<h.length;u++){var l=h[u];if(U(l)){var g=ha(l,function(y){return y.windows&&y.windows[a]});if(g)return g}}}else if(i.type==="name"){var T=i.name;return gn("namedWindow",function(y,w){return Kt(y,w)||function P(S,R){var x=Kt(S,R);if(x)return x;for(var W=0,L=Te(S);W<L.length;W++){var J=P(L[W],R);if(J)return J}}(xe(y)||y,w)}(gn("ancestor",Yt(window)),T))}throw new Error("Unable to find "+i.type+" parent component window")}(n.metaData.windowRef)}}});return{parent:r.sender,payload:r.data,reference:r.reference}});function ma(){return Uc(window.name)}function Lc(e,r){if(r===void 0&&(r=window),e===ve(r))return{type:"parent",distance:Ur(e)};if(e===Ae(r))return{type:"opener"};if(U(e)&&(i=e,i!==xe(i))){var n=z(e).name;if(n)return{type:"name",name:n}}var i}function ga(e,r,n,i,a){if(!e.hasOwnProperty(n))return i;var c=e[n];return typeof c.childDecorate=="function"?c.childDecorate({value:i,uid:a.uid,tag:a.tag,close:a.close,focus:a.focus,onError:a.onError,onProps:a.onProps,resize:a.resize,getParent:a.getParent,getParentDomain:a.getParentDomain,show:a.show,hide:a.hide,export:a.export,getSiblings:a.getSiblings}):i}function jc(){return v.try(function(){window.focus()})}function ya(){return v.try(function(){window.close()})}var Bt=function(){return Ie},dr=function(e){return pn(e.value)};function Po(e,r,n){for(var i=0,a=Object.keys(p({},e,r));i<a.length;i++){var c=a[i];n(c,r[c],e[c])}}function Ea(e,r,n){var i={};return v.all(function(a,c,u){var h=[];return Po(a,c,function(l,g,T){var y=function(w,P,S){return v.resolve().then(function(){var R,x;if(S!=null&&P){var W=(R={},R.get=P.queryParam,R.post=P.bodyParam,R)[n],L=(x={},x.get=P.queryValue,x.post=P.bodyValue,x)[n];if(W)return v.hash({finalParam:v.try(function(){return typeof W=="function"?W({value:S}):typeof W=="string"?W:w}),finalValue:v.try(function(){return typeof L=="function"&&Xt(S)?L({value:S}):S})}).then(function(J){var M=J.finalParam,V=J.finalValue,j;if(typeof V=="boolean")j=V.toString();else if(typeof V=="string")j=V.toString();else if(typeof V=="object"&&V!==null){if(P.serialization===Rn.JSON)j=JSON.stringify(V);else if(P.serialization===Rn.BASE64)j=Qn(JSON.stringify(V));else if(P.serialization===Rn.DOTIFY||!P.serialization){j=function ce(X,G,le){G===void 0&&(G=""),le===void 0&&(le={}),G=G&&G+".";for(var re in X)X.hasOwnProperty(re)&&X[re]!=null&&typeof X[re]!="function"&&(X[re]&&Array.isArray(X[re])&&X[re].length&&X[re].every(function(Me){return typeof Me!="object"})?le[""+G+re+"[]"]=X[re].join(","):X[re]&&typeof X[re]=="object"?le=ce(X[re],""+G+re,le):le[""+G+re]=X[re].toString());return le}(V,w);for(var te=0,$=Object.keys(j);te<$.length;te++){var he=$[te];i[he]=j[he]}return}}else typeof V=="number"&&(j=V.toString());i[M]=j})}})}(l,g,T);h.push(y)}),h}(r,e)).then(function(){return i})}function ba(e){var r=e.uid,n=e.options,i=e.overrides,a=i===void 0?{}:i,c=e.parentWin,u=c===void 0?window:c,h=n.propsDef,l=n.containerTemplate,g=n.prerenderTemplate,T=n.tag,y=n.name,w=n.attributes,P=n.dimensions,S=n.autoResize,R=n.url,x=n.domain,W=n.exports,L=new v,J=[],M=mn(),V={},j={},te={visible:!0},$=a.event?a.event:(he={},ce={},X={on:function(I,_){var H=ce[I]=ce[I]||[];H.push(_);var B=!1;return{cancel:function(){B||(B=!0,H.splice(H.indexOf(_),1))}}},once:function(I,_){var H=X.on(I,function(){H.cancel(),_()});return H},trigger:function(I){for(var _=arguments.length,H=new Array(_>1?_-1:0),B=1;B<_;B++)H[B-1]=arguments[B];var oe=ce[I],Q=[];if(oe)for(var Se=function(){var Xe=oe[Re];Q.push(v.try(function(){return Xe.apply(void 0,H)}))},Re=0;Re<oe.length;Re++)Se();return v.all(Q).then(Ie)},triggerOnce:function(I){if(he[I])return v.resolve();he[I]=!0;for(var _=arguments.length,H=new Array(_>1?_-1:0),B=1;B<_;B++)H[B-1]=arguments[B];return X.trigger.apply(X,[I].concat(H))},reset:function(){ce={}}}),he,ce,X,G=a.props?a.props:{},le,re,Me,At,Et,kt=!1,er=a.onError,qt=a.getProxyContainer,tr=a.show,rr=a.hide,fr=a.close,nr=a.renderContainer,It=a.getProxyWindow,lr=a.setProxyWin,or=a.openFrame,ir=a.openPrerenderFrame,hr=a.prerender,pr=a.open,ue=a.openPrerender,bt=a.watchForUnload,fe=a.getInternalState,Ye=a.setInternalState,Ue=function(){return typeof P=="function"?P({props:G}):P},Ze=function(){return v.try(function(){return a.resolveInitPromise?a.resolveInitPromise():L.resolve()})},Ne=function(I){return v.try(function(){return a.rejectInitPromise?a.rejectInitPromise(I):L.reject(I)})},ct=function(I){for(var _={},H=0,B=Object.keys(G);H<B.length;H++){var oe=B[H],Q=h[oe];if(!Q||Q.sendToChild!==!1){var Se=Q&&Q.trustedDomains&&Q.trustedDomains.length>0?Q.trustedDomains.reduce(function(Re,Xe){return Re||wt(Xe,I)},!1):wt(I,ie(window));Q&&Q.sameDomain&&!Se||Q&&Q.trustedDomains&&!Se||(_[oe]=G[oe])}}return v.hash(_)},He=function(){return v.try(function(){return fe?fe():te})},$e=function(I){return v.try(function(){return Ye?Ye(I):te=p({},te,I)})},Pt=function(){return It?It():v.try(function(){var I=G.window;if(I){var _=$r(I);return M.register(function(){return I.close()}),_}return new yt({send:xt})})},ft=function(I){return lr?lr(I):v.try(function(){le=I})},Dt=function(){return tr?tr():v.hash({setState:$e({visible:!0}),showElement:re?re.get().then(Ic):null}).then(Ie)},Ht=function(){return rr?rr():v.hash({setState:$e({visible:!1}),showElement:re?re.get().then(zi):null}).then(Ie)},Ir=function(){return typeof R=="function"?R({props:G}):R},Dr=function(){return typeof w=="function"?w({props:G}):w},vr=function(){return Lt(Ir())},lt=function(I,_){var H=_.windowName;return or?or(I,{windowName:H}):v.try(function(){if(I===We.IFRAME)return Sn(Mi({attributes:p({name:H,title:y},Dr().iframe)}))})},Gr=function(I){return ir?ir(I):v.try(function(){if(I===We.IFRAME)return Sn(Mi({attributes:p({name:"__zoid_prerender_frame__"+y+"_"+st()+"__",title:"prerender__"+y},Dr().iframe)}))})},Jr=function(I,_,H){return ue?ue(I,_,H):v.try(function(){if(I===We.IFRAME){if(!H)throw new Error("Expected proxy frame to be passed");return H.get().then(function(B){return M.register(function(){return qr(B)}),ao(B).then(function(oe){return z(oe)}).then(function(oe){return $r(oe)})})}if(I===We.POPUP)return _;throw new Error("No render context available for "+I)})},Cr=function(){return v.try(function(){if(le)return v.all([$.trigger(De.FOCUS),le.focus()]).then(Ie)})},On=function(){var I=Vr(window);return I.windows=I.windows||{},I.windows[r]=window,M.register(function(){delete I.windows[r]}),r},Kr=function(I,_,H,B){if(_===ie(window))return{type:"global",uid:On()};if(I!==window)throw new Error("Can not construct cross-domain window reference for different target window");if(G.window){var oe=B.getWindow();if(!oe)throw new Error("Can not construct cross-domain window reference for lazy window prop");if(Yt(oe)!==window)throw new Error("Can not construct cross-domain window reference for window prop with different ancestor")}if(H===We.POPUP)return{type:"opener"};if(H===We.IFRAME)return{type:"parent",distance:Ur(window)};throw new Error("Can not construct window reference for child")},xn=function(I,_){return v.try(function(){var H;At=I,Me=_,(H=le)==null||H.isPopup().then(function(B){if((_==null?void 0:_.name)!==""&&B){var oe;(oe=le)==null||oe.setName(_==null?void 0:_.name)}}).finally(function(){Ze(),M.register(function(){return _.close.fireAndForget().catch(Ie)})})})},Yr=function(I){var _=I.width,H=I.height;return v.try(function(){$.trigger(De.RESIZE,{width:_,height:H})})},Zr=function(I){return v.try(function(){return $.trigger(De.DESTROY)}).catch(Ie).then(function(){return M.all(I)}).then(function(){var _=I||new Error("Component destroyed");Et&&xr(Et)||_.message==="Window navigated away"?L.resolve():L.asyncReject(_)})},$t=Zt(function(I){return v.try(function(){return fr?ze(fr.__source__)?void 0:fr():v.try(function(){return $.trigger(De.CLOSE)}).then(function(){return Zr(I||new Error("Component closed"))})})}),Sa=function(I,_){var H=_.proxyWin,B=_.proxyFrame,oe=_.windowName;return pr?pr(I,{proxyWin:H,proxyFrame:B,windowName:oe}):v.try(function(){if(I===We.IFRAME){if(!B)throw new Error("Expected proxy frame to be passed");return B.get().then(function(Le){return ao(Le).then(function(ye){return M.register(function(){return qr(Le)}),M.register(function(){return la(ye)}),ye})})}if(I===We.POPUP){var Q=Ue(),Se=Q.width,Re=Se===void 0?"300px":Se,Xe=Q.height,Ce=Xe===void 0?"150px":Xe;Re=qi(Re,window.outerWidth),Ce=qi(Ce,window.outerWidth);var Ve=function(Le,ye){var je=(ye=ye||{}).closeOnUnload,_e=je===void 0?1:je,ht=ye.name,Qe=ht===void 0?"":ht,pe=ye.width,ke=ye.height,ut=0,rt=0;pe&&(window.outerWidth?rt=Math.round((window.outerWidth-pe)/2)+window.screenX:window.screen.width&&(rt=Math.round((window.screen.width-pe)/2))),ke&&(window.outerHeight?ut=Math.round((window.outerHeight-ke)/2)+window.screenY:window.screen.height&&(ut=Math.round((window.screen.height-ke)/2))),delete ye.closeOnUnload,delete ye.name,pe&&ke&&(ye=p({top:ut,left:rt,width:pe,height:ke,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},ye));var wr=Object.keys(ye).map(function(Wt){if(ye[Wt]!=null)return Wt+"="+vn(ye[Wt])}).filter(Boolean).join(","),Tt;try{Tt=window.open("",Qe,wr)}catch(Wt){throw new io("Can not open popup window - "+(Wt.stack||Wt.message))}if(ze(Tt))throw new io("Can not open popup window - blocked");return _e&&window.addEventListener("unload",function(){return Tt.close()}),Tt}(0,p({name:oe,width:Re,height:Ce},Dr().popup));return M.register(function(){return bi(Ve)}),M.register(function(){return la(Ve)}),Ve}throw new Error("No render context available for "+I)}).then(function(Q){return H.setWindow(Q,{send:xt}),H.setName(oe).then(function(){return H})})},Ra=function(){return v.try(function(){var I=Fi(window,"unload",pn(function(){Zr(new Error("Window navigated away"))})),_=yi(u,Zr,3e3);if(M.register(_.cancel),M.register(I.cancel),bt)return bt()})},Oa=function(I){var _=!1;return I.isClosed().then(function(H){return H?(_=!0,$t(new Error("Detected component window close"))):v.delay(200).then(function(){return I.isClosed()}).then(function(B){if(B)return _=!0,$t(new Error("Detected component window close"))})}).then(function(){return _})},Xr=function(I){return er?er(I):v.try(function(){if(J.indexOf(I)===-1)return J.push(I),L.asyncReject(I),$.trigger(De.ERROR,I)})},xa=new v,Ia=function(I){return v.try(function(){xa.resolve(I)})};xn.onError=Xr;var Da=function(I,_){return I({uid:r,container:_.container,context:_.context,doc:_.doc,frame:_.frame,prerenderFrame:_.prerenderFrame,focus:Cr,close:$t,state:V,props:G,tag:T,dimensions:Ue(),event:$})},Ca=function(I,_){var H=_.context;return hr?hr(I,{context:H}):v.try(function(){if(g){$.trigger(De.PRERENDER);var B=I.getWindow();if(B&&U(B)&&function(je){try{if(!je.location.href||je.location.href==="about:blank")return!0}catch{}return!1}(B)){var oe=(B=z(B)).document,Q=Da(g,{context:H,doc:oe});if(Q){if(Q.ownerDocument!==oe)throw new Error("Expected prerender template to have been created with document from child window");(function(je,_e){var ht=_e.tagName.toLowerCase();if(ht!=="html")throw new Error("Expected element to be html, got "+ht);for(var Qe=je.document.documentElement,pe=0,ke=to(Qe.children);pe<ke.length;pe++)Qe.removeChild(ke[pe]);for(var ut=0,rt=to(_e.children);ut<rt.length;ut++)Qe.appendChild(rt[ut])})(B,Q);var Se=S.width,Re=Se!==void 0&&Se,Xe=S.height,Ce=Xe!==void 0&&Xe,Ve=S.element,Le=Ve===void 0?"body":Ve;if((Le=oo(Le,oe))&&(Re||Ce)){var ye=Ui(Le,function(je){Yr({width:Re?je.width:void 0,height:Ce?je.height:void 0})},{width:Re,height:Ce,win:B});$.on(De.RENDERED,ye.cancel)}$.trigger(De.PRERENDERED)}}}})},_a=function(I,_){var H=_.proxyFrame,B=_.proxyPrerenderFrame,oe=_.context,Q=_.rerender;return nr?nr(I,{proxyFrame:H,proxyPrerenderFrame:B,context:oe,rerender:Q}):v.hash({container:I.get(),frame:H?H.get():null,prerenderFrame:B?B.get():null,internalState:He()}).then(function(Se){var Re=Se.container,Xe=Se.internalState.visible,Ce=Da(l,{context:oe,container:Re,frame:Se.frame,prerenderFrame:Se.prerenderFrame,doc:document});if(Ce){Xe||zi(Ce),xc(Re,Ce);var Ve=function(Le,ye){ye=pn(ye);var je=!1,_e=[],ht,Qe,pe,ke=function(){je=!0;for(var Tt=0;Tt<_e.length;Tt++)_e[Tt].disconnect();ht&&ht.cancel(),pe&&pe.removeEventListener("unload",ut),Qe&&qr(Qe)},ut=function(){je||(ye(),ke())};if(xr(Le))return ut(),{cancel:ke};if(window.MutationObserver)for(var rt=Le.parentElement;rt;){var wr=new window.MutationObserver(function(){xr(Le)&&ut()});wr.observe(rt,{childList:!0}),_e.push(wr),rt=rt.parentElement}return(Qe=document.createElement("iframe")).setAttribute("name","__detect_close_"+st()+"__"),Qe.style.display="none",ao(Qe).then(function(Tt){(pe=z(Tt)).addEventListener("unload",ut)}),Le.appendChild(Qe),ht=jr(function(){xr(Le)&&ut()},1e3),{cancel:ke}}(Ce,function(){var Le=new Error("Detected container element removed from DOM");return v.delay(1).then(function(){if(!xr(Ce))return M.all(Le),Q().then(Ze,Ne);$t(Le)})});return M.register(function(){return Ve.cancel()}),M.register(function(){return qr(Ce)}),re=Sn(Ce)}})},Na=function(){return{state:V,event:$,close:$t,focus:Cr,resize:Yr,onError:Xr,updateProps:Xc,show:Dt,hide:Ht}},Ro=function(I){I===void 0&&(I={});var _=Et,H=Na();Or(j,I),function(B,oe,Q,Se,Re){var Xe=Se.state,Ce=Se.close,Ve=Se.focus,Le=Se.event,ye=Se.onError;Po(Q,B,function(je,_e,ht){var Qe=!1,pe=ht;Object.defineProperty(oe,je,{configurable:!0,enumerable:!0,get:function(){return Qe?pe:(Qe=!0,function(){if(!_e)return pe;var ke=_e.alias;if(ke&&!Xt(ht)&&Xt(Q[ke])&&(pe=Q[ke]),_e.value&&(pe=_e.value({props:oe,state:Xe,close:Ce,focus:Ve,event:Le,onError:ye,container:Re})),!_e.default||Xt(pe)||Xt(Q[je])||(pe=_e.default({props:oe,state:Xe,close:Ce,focus:Ve,event:Le,onError:ye,container:Re})),Xt(pe)){if(_e.type===be.ARRAY?!Array.isArray(pe):typeof pe!==_e.type)throw new TypeError("Prop is not of type "+_e.type+": "+je)}else if(_e.required!==!1&&!Xt(Q[je]))throw new Error('Expected prop "'+je+'" to be defined');return Xt(pe)&&_e.decorate&&(pe=_e.decorate({value:pe,props:oe,state:Xe,close:Ce,focus:Ve,event:Le,onError:ye,container:Re})),pe}())}})}),Po(oe,B,Ie)}(h,G,j,H,_)},Xc=function(I){return Ro(I),L.then(function(){var _=Me,H=le;if(_&&H&&At)return ct(At).then(function(B){return _.updateProps(B).catch(function(oe){return Oa(H).then(function(Q){if(!Q)throw oe})})})})},Aa=function(I){return qt?qt(I):v.try(function(){return Ai(I)}).then(function(_){return so(_)&&(_=function H(B){var oe=function(Xe){var Ce=function(Ve){for(;Ve.parentNode;)Ve=Ve.parentNode;if(so(Ve))return Ve}(Xe);if(Ce&&Ce.host)return Ce.host}(B);if(!oe)throw new Error("Element is not in shadow dom");var Q="shadow-slot-"+st(),Se=document.createElement("slot");Se.setAttribute("name",Q),B.appendChild(Se);var Re=document.createElement("div");return Re.setAttribute("slot",Q),oe.appendChild(Re),so(oe)?H(Re):Re}(_)),Et=_,Sn(_)})};return{init:function(){(function(){$.on(De.RENDER,function(){return G.onRender()}),$.on(De.PRERENDER,function(){return G.onPrerender()}),$.on(De.DISPLAY,function(){return G.onDisplay()}),$.on(De.RENDERED,function(){return G.onRendered()}),$.on(De.PRERENDERED,function(){return G.onPrerendered()}),$.on(De.CLOSE,function(){return G.onClose()}),$.on(De.DESTROY,function(){return G.onDestroy()}),$.on(De.RESIZE,function(){return G.onResize()}),$.on(De.FOCUS,function(){return G.onFocus()}),$.on(De.PROPS,function(I){return G.onProps(I)}),$.on(De.ERROR,function(I){return G&&G.onError?G.onError(I):Ne(I).then(function(){setTimeout(function(){throw I},1)})}),M.register($.reset)})()},render:function(I){var _=I.target,H=I.container,B=I.context,oe=I.rerender;return v.try(function(){var Q=vr(),Se=x||vr();(function(K,et,Be){if(K!==window){if(!sr(window,K))throw new Error("Can only renderTo an adjacent frame");var tt=ie();if(!wt(et,tt)&&!U(K))throw new Error("Can not render remotely to "+et.toString()+" - can only render to "+tt);if(Be&&typeof Be!="string")throw new Error("Container passed to renderTo must be a string selector, got "+typeof Be+" }")}})(_,Se,H);var Re=v.try(function(){if(_!==window)return function(K,et){for(var Be={},tt=0,vt=Object.keys(G);tt<vt.length;tt++){var qe=vt[tt],St=h[qe];St&&St.allowDelegate&&(Be[qe]=G[qe])}var nt=xt(et,"zoid_delegate_"+y,{uid:r,overrides:{props:Be,event:$,close:$t,onError:Xr,getInternalState:He,setInternalState:$e,resolveInitPromise:Ze,rejectInitPromise:Ne}}).then(function(k){var ee=k.data.parent;return M.register(function(F){if(!ze(et))return ee.destroy(F)}),ee.getDelegateOverrides()}).catch(function(k){throw new Error(`Unable to delegate rendering. Possibly the component is not loaded in the target window.

`+Rr(k))});return qt=function(){for(var k=arguments.length,ee=new Array(k),F=0;F<k;F++)ee[F]=arguments[F];return nt.then(function(ne){return ne.getProxyContainer.apply(ne,ee)})},nr=function(){for(var k=arguments.length,ee=new Array(k),F=0;F<k;F++)ee[F]=arguments[F];return nt.then(function(ne){return ne.renderContainer.apply(ne,ee)})},tr=function(){for(var k=arguments.length,ee=new Array(k),F=0;F<k;F++)ee[F]=arguments[F];return nt.then(function(ne){return ne.show.apply(ne,ee)})},rr=function(){for(var k=arguments.length,ee=new Array(k),F=0;F<k;F++)ee[F]=arguments[F];return nt.then(function(ne){return ne.hide.apply(ne,ee)})},bt=function(){for(var k=arguments.length,ee=new Array(k),F=0;F<k;F++)ee[F]=arguments[F];return nt.then(function(ne){return ne.watchForUnload.apply(ne,ee)})},K===We.IFRAME?(It=function(){for(var k=arguments.length,ee=new Array(k),F=0;F<k;F++)ee[F]=arguments[F];return nt.then(function(ne){return ne.getProxyWindow.apply(ne,ee)})},or=function(){for(var k=arguments.length,ee=new Array(k),F=0;F<k;F++)ee[F]=arguments[F];return nt.then(function(ne){return ne.openFrame.apply(ne,ee)})},ir=function(){for(var k=arguments.length,ee=new Array(k),F=0;F<k;F++)ee[F]=arguments[F];return nt.then(function(ne){return ne.openPrerenderFrame.apply(ne,ee)})},hr=function(){for(var k=arguments.length,ee=new Array(k),F=0;F<k;F++)ee[F]=arguments[F];return nt.then(function(ne){return ne.prerender.apply(ne,ee)})},pr=function(){for(var k=arguments.length,ee=new Array(k),F=0;F<k;F++)ee[F]=arguments[F];return nt.then(function(ne){return ne.open.apply(ne,ee)})},ue=function(){for(var k=arguments.length,ee=new Array(k),F=0;F<k;F++)ee[F]=arguments[F];return nt.then(function(ne){return ne.openPrerender.apply(ne,ee)})}):K===We.POPUP&&(lr=function(){for(var k=arguments.length,ee=new Array(k),F=0;F<k;F++)ee[F]=arguments[F];return nt.then(function(ne){return ne.setProxyWin.apply(ne,ee)})}),nt}(B,_)}),Xe=G.window,Ce=Ra(),Ve=Ea(h,G,"post"),Le=$.trigger(De.RENDER),ye=Aa(H),je=Pt(),_e=ye.then(function(){return Ro()}),ht=_e.then(function(){return Ea(h,G,"get").then(function(K){return function(et,Be){var tt=Be.query||{},vt=Be.hash||{},qe,St,nt=et.split("#");St=nt[1];var k=(qe=nt[0]).split("?");qe=k[0];var ee=Ni(k[1],tt),F=Ni(St,vt);return ee&&(qe=qe+"?"+ee),F&&(qe=qe+"#"+F),qe}(Kn(Ir()),{query:K})})}),Qe=je.then(function(K){return function(Be){var tt=Be===void 0?{}:Be,vt=tt.proxyWin,qe=tt.initialChildDomain,St=tt.childDomainMatch,nt=tt.target,k=nt===void 0?window:nt,ee=tt.context;return function(F){var ne=F===void 0?{}:F,Oo=ne.proxyWin,ou=ne.childDomainMatch,iu=ne.context;return ct(ne.initialChildDomain).then(function(au){return{uid:r,context:iu,tag:T,childDomainMatch:ou,version:"10_3_3",props:au,exports:(Fa=Oo,{init:function(su){return xn(this.origin,su)},close:$t,checkClose:function(){return Oa(Fa)},resize:Yr,onError:Xr,show:Dt,hide:Ht,export:Ia})};var Fa})}({proxyWin:vt,initialChildDomain:qe,childDomainMatch:St,context:ee}).then(function(F){var ne=pa({data:F,metaData:{windowRef:Kr(k,qe,ee,vt)},sender:{domain:ie(window)},receiver:{win:vt,domain:St},passByReference:qe===ie()}),Oo=ne.serializedData;return M.register(ne.cleanReference),Oo})}({proxyWin:(et={proxyWin:K,initialChildDomain:Q,childDomainMatch:Se,target:_,context:B}).proxyWin,initialChildDomain:et.initialChildDomain,childDomainMatch:et.childDomainMatch,target:et.target,context:et.context}).then(function(Be){return wa({name:y,serializedPayload:Be})});var et}),pe=Qe.then(function(K){return lt(B,{windowName:K})}),ke=Gr(B),ut=v.hash({proxyContainer:ye,proxyFrame:pe,proxyPrerenderFrame:ke}).then(function(K){return _a(K.proxyContainer,{context:B,proxyFrame:K.proxyFrame,proxyPrerenderFrame:K.proxyPrerenderFrame,rerender:oe})}).then(function(K){return K}),rt=v.hash({windowName:Qe,proxyFrame:pe,proxyWin:je}).then(function(K){var et=K.proxyWin;return Xe?et:Sa(B,{windowName:K.windowName,proxyWin:et,proxyFrame:K.proxyFrame})}),wr=v.hash({proxyWin:rt,proxyPrerenderFrame:ke}).then(function(K){return Jr(B,K.proxyWin,K.proxyPrerenderFrame)}),Tt=rt.then(function(K){return le=K,ft(K)}),Wt=v.hash({proxyPrerenderWin:wr,state:Tt}).then(function(K){return Ca(K.proxyPrerenderWin,{context:B})}),Wa=v.hash({proxyWin:rt,windowName:Qe}).then(function(K){if(Xe)return K.proxyWin.setName(K.windowName)}),Qc=v.hash({body:Ve}).then(function(K){return n.method?n.method:Object.keys(K.body).length?"post":"get"}),Ma=v.hash({proxyWin:rt,windowUrl:ht,body:Ve,method:Qc,windowName:Wa,prerender:Wt}).then(function(K){return K.proxyWin.setLocation(K.windowUrl,{method:K.method,body:K.body})}),kc=rt.then(function(K){(function et(Be,tt){var vt=!1;return M.register(function(){vt=!0}),v.delay(2e3).then(function(){return Be.isClosed()}).then(function(qe){if(!vt){if(tt===We.POPUP&&qe)return $t(new Error("Detected popup close"));var St=!!(Et&&xr(Et));return tt===We.IFRAME&&qe&&(St||kt)?$t(new Error("Detected iframe close")):et(Be,tt)}})})(K,B)}),eu=v.hash({container:ut,prerender:Wt}).then(function(){return $.trigger(De.DISPLAY)}),tu=rt.then(function(K){return function(et,Be,tt){return v.try(function(){return et.awaitWindow()}).then(function(vt){if(Qt&&Qt.needsBridge({win:vt,domain:Be})&&!Qt.hasBridge(Be,Be)){var qe=typeof n.bridgeUrl=="function"?n.bridgeUrl({props:G}):n.bridgeUrl;if(!qe)throw new Error("Bridge needed to render "+tt);var St=Lt(qe);return Qt.linkUrl(vt,Be),Qt.openBridge(Kn(qe),St)}})}(K,Q,B)}),ru=Ma.then(function(){return v.try(function(){var K=G.timeout;if(K)return L.timeout(K,new Error("Loading component timed out after "+K+" milliseconds"))})}),nu=L.then(function(){return kt=!0,$.trigger(De.RENDERED)});return v.hash({initPromise:L,buildUrlPromise:ht,onRenderPromise:Le,getProxyContainerPromise:ye,openFramePromise:pe,openPrerenderFramePromise:ke,renderContainerPromise:ut,openPromise:rt,openPrerenderPromise:wr,setStatePromise:Tt,prerenderPromise:Wt,loadUrlPromise:Ma,buildWindowNamePromise:Qe,setWindowNamePromise:Wa,watchForClosePromise:kc,onDisplayPromise:eu,openBridgePromise:tu,runTimeoutPromise:ru,onRenderedPromise:nu,delegatePromise:Re,watchForUnloadPromise:Ce,finalSetPropsPromise:_e})}).catch(function(Q){return v.all([Xr(Q),Zr(Q)]).then(function(){throw Q},function(){throw Q})}).then(Ie)},destroy:Zr,getProps:function(){return G},setProps:Ro,export:Ia,getHelpers:Na,getDelegateOverrides:function(){return v.try(function(){return{getProxyContainer:Aa,show:Dt,hide:Ht,renderContainer:_a,getProxyWindow:Pt,watchForUnload:Ra,openFrame:lt,openPrerenderFrame:Gr,prerender:Ca,open:Sa,openPrerender:Jr,setProxyWin:ft}})},getExports:function(){return W({getExports:function(){return xa}})}}}var Bc={register:function(e,r,n,i){var a=i.React,c=i.ReactDOM;return function(u){E(h,u);function h(){return u.apply(this,arguments)||this}var l=h.prototype;return l.render=function(){return a.createElement("div",null)},l.componentDidMount=function(){var g=c.findDOMNode(this),T=n(Or({},this.props));T.render(g,We.IFRAME),this.setState({parent:T})},l.componentDidUpdate=function(){this.state&&this.state.parent&&this.state.parent.updateProps(Or({},this.props)).catch(Ie)},h}(a.Component)}},qc={register:function(e,r,n,i){return i.component(e,{render:function(a){return a("div")},inheritAttrs:!1,mounted:function(){var a=this.$el;this.parent=n(p({},(c=this.$attrs,Object.keys(c).reduce(function(u,h){var l=c[h];return h==="style-object"||h==="styleObject"?(u.style=l,u.styleObject=l):h.includes("-")?u[eo(h)]=l:u[h]=l,u},{}))));var c;this.parent.render(a,We.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(p({},this.$attrs)).catch(Ie)},deep:!0}}})}},Hc={register:function(e,r,n){return{template:"<div></div>",inheritAttrs:!1,mounted:function(){var i=this.$el;this.parent=n(p({},(a=this.$attrs,Object.keys(a).reduce(function(c,u){var h=a[u];return u==="style-object"||u==="styleObject"?(c.style=h,c.styleObject=h):u.includes("-")?c[eo(u)]=h:c[u]=h,c},{}))));var a;this.parent.render(i,We.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(p({},this.$attrs)).catch(Ie)},deep:!0}}}}},$c={register:function(e,r,n,i){return i.module(e,[]).directive(eo(e),function(){for(var a={},c=0,u=Object.keys(r);c<u.length;c++)a[u[c]]="=";return a.props="=",{scope:a,restrict:"E",controller:["$scope","$element",function(h,l){function g(){if(h.$root.$$phase!=="$apply"&&h.$root.$$phase!=="$digest")try{h.$apply()}catch{}}var T=function(){return wn(h.props,function(w){return typeof w=="function"?function(){var P=w.apply(this,arguments);return g(),P}:w})},y=n(T());y.render(l[0],We.IFRAME),h.$watch(function(){y.updateProps(T()).catch(Ie)})}]}})}},Vc={register:function(e,r,n,i){var a=i.Component,c=i.NgModule,u=i.ElementRef,h=i.NgZone,l=i.Inject,g=function(){function y(P,S){this.elementRef=void 0,this.internalProps=void 0,this.parent=void 0,this.props=void 0,this.zone=void 0,this._props=void 0,this._props={},this.elementRef=P,this.zone=S}var w=y.prototype;return w.getProps=function(){var P=this;return wn(p({},this.internalProps,this.props),function(S){if(typeof S=="function"){var R=P.zone;return function(){var x=arguments,W=this;return R.run(function(){return S.apply(W,x)})}}return S})},w.ngOnInit=function(){var P=this.elementRef.nativeElement;this.parent=n(this.getProps()),this.parent.render(P,We.IFRAME)},w.ngDoCheck=function(){this.parent&&!function(P,S){var R={};for(var x in P)if(P.hasOwnProperty(x)&&(R[x]=!0,P[x]!==S[x]))return!1;for(var W in S)if(!R[W])return!1;return!0}(this._props,this.props)&&(this._props=p({},this.props),this.parent.updateProps(this.getProps()))},y}();g.annotations=void 0,g.parameters=void 0,g.parameters=[[new l(u)],[new l(h)]],g.annotations=[new a({selector:e,template:"<div></div>",inputs:["props"]})];var T=function(){};return T.annotations=void 0,T.annotations=[new c({declarations:[g],exports:[g]})],T}};function Gc(e){var r=e.uid,n=e.frame,i=e.prerenderFrame,a=e.doc,c=e.props,u=e.event,h=e.dimensions,l=h.width,g=h.height;if(n&&i){var T=a.createElement("div");T.setAttribute("id",r);var y=a.createElement("style");return c.cspNonce&&y.setAttribute("nonce",c.cspNonce),y.appendChild(a.createTextNode(`
            #`+r+` {
                display: inline-block;
                position: relative;
                width: `+l+`;
                height: `+g+`;
            }

            #`+r+` > iframe {
                display: inline-block;
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                transition: opacity .2s ease-in-out;
            }

            #`+r+` > iframe.zoid-invisible {
                opacity: 0;
            }

            #`+r+` > iframe.zoid-visible {
                opacity: 1;
        }
        `)),T.appendChild(n),T.appendChild(i),T.appendChild(y),i.classList.add("zoid-visible"),n.classList.add("zoid-invisible"),u.on(De.RENDERED,function(){i.classList.remove("zoid-visible"),i.classList.add("zoid-invisible"),n.classList.remove("zoid-invisible"),n.classList.add("zoid-visible"),setTimeout(function(){qr(i)},1)}),u.on(De.RESIZE,function(w){var P=w.width,S=w.height;typeof P=="number"&&(T.style.width=Bi(P)),typeof S=="number"&&(T.style.height=Bi(S))}),T}}function Jc(e){var r=e.doc,n=e.props,i=r.createElement("html"),a=r.createElement("body"),c=r.createElement("style"),u=r.createElement("div");return u.classList.add("spinner"),n.cspNonce&&c.setAttribute("nonce",n.cspNonce),i.appendChild(a),a.appendChild(u),a.appendChild(c),c.appendChild(r.createTextNode(`
            html, body {
                width: 100%;
                height: 100%;
            }

            .spinner {
                position: fixed;
                max-height: 60vmin;
                max-width: 60vmin;
                height: 40px;
                width: 40px;
                top: 50%;
                left: 50%;
                box-sizing: border-box;
                border: 3px solid rgba(0, 0, 0, .2);
                border-top-color: rgba(33, 128, 192, 0.8);
                border-radius: 100%;
                animation: rotation .7s infinite linear;
            }

            @keyframes rotation {
                from {
                    transform: translateX(-50%) translateY(-50%) rotate(0deg);
                }
                to {
                    transform: translateX(-50%) translateY(-50%) rotate(359deg);
                }
            }
        `)),i}var To=mn(),So=mn();function Kc(e){var r=function(S){var R=S.tag,x=S.url,W=S.domain,L=S.bridgeUrl,J=S.props,M=J===void 0?{}:J,V=S.dimensions,j=V===void 0?{}:V,te=S.autoResize,$=te===void 0?{}:te,he=S.allowedParentDomains,ce=he===void 0?"*":he,X=S.attributes,G=X===void 0?{}:X,le=S.defaultContext,re=le===void 0?We.IFRAME:le,Me=S.containerTemplate,At=Me===void 0?Gc:Me,Et=S.prerenderTemplate,kt=Et===void 0?Jc:Et,er=S.validate,qt=S.eligible,tr=qt===void 0?function(){return{eligible:!0}}:qt,rr=S.logger,fr=rr===void 0?{info:Ie}:rr,nr=S.exports,It=nr===void 0?Ie:nr,lr=S.method,or=S.children,ir=or===void 0?function(){return{}}:or,hr=R.replace(/-/g,"_"),pr=p({},{window:{type:be.OBJECT,sendToChild:!1,required:!1,allowDelegate:!0,validate:function(ue){var bt=ue.value;if(!cr(bt)&&!yt.isProxyWindow(bt))throw new Error("Expected Window or ProxyWindow");if(cr(bt)){if(ze(bt))throw new Error("Window is closed");if(!U(bt))throw new Error("Window is not same domain")}},decorate:function(ue){return $r(ue.value)}},timeout:{type:be.NUMBER,required:!1,sendToChild:!1},cspNonce:{type:be.STRING,required:!1},onDisplay:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Bt,decorate:dr},onRendered:{type:be.FUNCTION,required:!1,sendToChild:!1,default:Bt,decorate:dr},onRender:{type:be.FUNCTION,required:!1,sendToChild:!1,default:Bt,decorate:dr},onPrerendered:{type:be.FUNCTION,required:!1,sendToChild:!1,default:Bt,decorate:dr},onPrerender:{type:be.FUNCTION,required:!1,sendToChild:!1,default:Bt,decorate:dr},onClose:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Bt,decorate:dr},onDestroy:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Bt,decorate:dr},onResize:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Bt},onFocus:{type:be.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Bt},close:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.close}},focus:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.focus}},resize:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.resize}},uid:{type:be.STRING,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.uid}},tag:{type:be.STRING,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.tag}},getParent:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.getParent}},getParentDomain:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.getParentDomain}},show:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.show}},hide:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.hide}},export:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.export}},onError:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.onError}},onProps:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.onProps}},getSiblings:{type:be.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ue){return ue.getSiblings}}},M);if(!At)throw new Error("Container template required");return{name:hr,tag:R,url:x,domain:W,bridgeUrl:L,method:lr,propsDef:pr,dimensions:j,autoResize:$,allowedParentDomains:ce,attributes:G,defaultContext:re,containerTemplate:At,prerenderTemplate:kt,validate:er,logger:fr,eligible:tr,children:ir,exports:typeof It=="function"?It:function(ue){for(var bt=ue.getExports,fe={},Ye=function(){var Ne=Ze[Ue],ct=It[Ne].type,He=bt().then(function($e){return $e[Ne]});fe[Ne]=ct===be.FUNCTION?function(){for(var $e=arguments.length,Pt=new Array($e),ft=0;ft<$e;ft++)Pt[ft]=arguments[ft];return He.then(function(Dt){return Dt.apply(void 0,Pt)})}:He},Ue=0,Ze=Object.keys(It);Ue<Ze.length;Ue++)Ye();return fe}}}(e),n=r.name,i=r.tag,a=r.defaultContext,c=r.propsDef,u=r.eligible,h=r.children,l=Vr(window),g={},T=[],y=function(){if(function(R){try{return bo(window.name).name===R}catch{}return!1}(n)){var S=ma().payload;if(S.tag===i&&wt(S.childDomainMatch,ie()))return!0}return!1},w=Zt(function(){if(y()){if(window.xprops)throw delete l.components[i],new Error("Can not register "+n+" as child - child already registered");var S=function(R){var x=R.tag,W=R.propsDef,L=R.autoResize,J=R.allowedParentDomains,M=[],V=ma(),j=V.parent,te=V.payload,$=j.win,he=j.domain,ce,X=new v,G=te.version,le=te.uid,re=te.exports,Me=te.context,At=te.props;if(!function(fe,Ye){if(!/_/.test(fe)||!/_/.test("10_3_3"))throw new Error("Versions are in an invalid format ("+fe+", 10_3_3)");return fe.split("_")[0]==="10_3_3".split("_")[0]}(G))throw new Error("Parent window has zoid version "+G+", child window has version 10_3_3");var Et=re.show,kt=re.hide,er=re.close,qt=re.onError,tr=re.checkClose,rr=re.export,fr=re.resize,nr=re.init,It=function(){return $},lr=function(){return he},or=function(fe){return M.push(fe),{cancel:function(){M.splice(M.indexOf(fe),1)}}},ir=function(fe){return fr.fireAndForget({width:fe.width,height:fe.height})},hr=function(fe){return X.resolve(fe),rr(fe)},pr=function(fe){var Ye=(fe===void 0?{}:fe).anyParent,Ue=[],Ze=ce.parent;if(Ye===void 0&&(Ye=!Ze),!Ye&&!Ze)throw new Error("No parent found for "+x+" child");for(var Ne=0,ct=Ke(window);Ne<ct.length;Ne++){var He=ct[Ne];if(U(He)){var $e=z(He).xprops;if($e&&It()===$e.getParent()){var Pt=$e.parent;if(Ye||!Ze||Pt&&Pt.uid===Ze.uid){var ft=ha(He,function(Dt){return Dt.exports});Ue.push({props:$e,exports:ft})}}}}return Ue},ue=function(fe,Ye,Ue){Ue===void 0&&(Ue=!1);var Ze=function(ct,He,$e,Pt,ft,Dt){Dt===void 0&&(Dt=!1);for(var Ht={},Ir=0,Dr=Object.keys($e);Ir<Dr.length;Ir++){var vr=Dr[Ir],lt=He[vr],Gr=lt&&lt.trustedDomains&&lt.trustedDomains.length>0?lt.trustedDomains.reduce(function(xn,Yr){return xn||wt(Yr,ie(window))},!1):Pt===ie(window)||U(ct);if((!lt||!lt.sameDomain||Gr)&&(!lt||!lt.trustedDomains||Gr)){var Jr=ga(He,0,vr,$e[vr],ft);Ht[vr]=Jr,lt&&lt.alias&&!Ht[lt.alias]&&(Ht[lt.alias]=Jr)}}if(!Dt)for(var Cr=0,On=Object.keys(He);Cr<On.length;Cr++){var Kr=On[Cr];$e.hasOwnProperty(Kr)||(Ht[Kr]=ga(He,0,Kr,void 0,ft))}return Ht}($,W,fe,Ye,{tag:x,show:Et,hide:kt,close:er,focus:jc,onError:qt,resize:ir,getSiblings:pr,onProps:or,getParent:It,getParentDomain:lr,uid:le,export:hr},Ue);ce?Or(ce,Ze):ce=Ze;for(var Ne=0;Ne<M.length;Ne++)(0,M[Ne])(ce)},bt=function(fe){return v.try(function(){return ue(fe,he,!0)})};return{init:function(){return v.try(function(){var fe="";return U($)&&(fe=function(Ye){var Ue=Ye.componentName,Ze=Ye.parentComponentWindow,Ne=va({data:bo(window.name).serializedInitialPayload,sender:{win:Ze},basic:!0}),ct=Ne.sender;if(Ne.reference.type==="uid"||Ne.metaData.windowRef.type==="global"){var He=wa({name:Ue,serializedPayload:pa({data:Ne.data,metaData:{windowRef:Lc(Ze)},sender:{domain:ct.domain},receiver:{win:window,domain:ie()},basic:!0}).serializedData});return window.name=He,He}}({componentName:R.name,parentComponentWindow:$})||""),Vr(window).exports=R.exports({getExports:function(){return X}}),function(Ye,Ue){if(!wt(Ye,Ue))throw new Error("Can not be rendered by domain: "+Ue)}(J,he),Ki($),function(){window.addEventListener("beforeunload",function(){tr.fireAndForget()}),window.addEventListener("unload",function(){tr.fireAndForget()}),yi($,function(){ya()})}(),nr({name:fe,updateProps:bt,close:ya})}).then(function(){return(fe=L.width,Ye=fe!==void 0&&fe,Ue=L.height,Ze=Ue!==void 0&&Ue,Ne=L.element,Ai(Ne===void 0?"body":Ne).catch(Ie).then(function(ct){return{width:Ye,height:Ze,element:ct}})).then(function(ct){var He=ct.width,$e=ct.height,Pt=ct.element;Pt&&(He||$e)&&Me!==We.POPUP&&Ui(Pt,function(ft){ir({width:He?ft.width:void 0,height:$e?ft.height:void 0})},{width:He,height:$e})});var fe,Ye,Ue,Ze,Ne}).catch(function(fe){qt(fe)})},getProps:function(){return ce||(ue(At,he),ce)}}}(r);return S.init(),S}}),P=function S(R){var x,W="zoid-"+i+"-"+st(),L=R||{},J=u({props:L}),M=J.eligible,V=J.reason,j=L.onDestroy;L.onDestroy=function(){if(x&&M&&T.splice(T.indexOf(x),1),j)return j.apply(void 0,arguments)};var te=ba({uid:W,options:r});te.init(),M?te.setProps(L):L.onDestroy&&L.onDestroy(),To.register(function(ce){return te.destroy(ce||new Error("zoid destroyed all components"))});var $=function(ce){var X=(ce===void 0?{}:ce).decorate;return S((X===void 0?Rc:X)(L))},he=function(ce,X,G){return v.try(function(){if(!M){var le=new Error(V||n+" component is not eligible");return te.destroy(le).then(function(){throw le})}if(!cr(ce))throw new Error("Must pass window to renderTo");return function(re,Me){return v.try(function(){if(re.window)return $r(re.window).getType();if(Me){if(Me!==We.IFRAME&&Me!==We.POPUP)throw new Error("Unrecognized context: "+Me);return Me}return a})}(L,G)}).then(function(le){if(X=function(re,Me){if(Me){if(typeof Me!="string"&&!Yn(Me))throw new TypeError("Expected string or element selector to be passed");return Me}if(re===We.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(le,X),ce!==window&&typeof X!="string")throw new Error("Must pass string element when rendering to another window");return te.render({target:ce,container:X,context:le,rerender:function(){var re=$();return Or(x,re),re.renderTo(ce,X,G)}})}).catch(function(le){return te.destroy(le).then(function(){throw le})})};return x=p({},te.getExports(),te.getHelpers(),function(){for(var ce=h(),X={},G=function(){var Me=re[le],At=ce[Me];X[Me]=function(Et){var kt=te.getProps(),er=p({},Et,{parent:{uid:W,props:kt,export:te.export}});return At(er)}},le=0,re=Object.keys(ce);le<re.length;le++)G();return X}(),{isEligible:function(){return M},clone:$,render:function(ce,X){return he(window,ce,X)},renderTo:function(ce,X,G){return he(ce,X,G)}}),M&&T.push(x),x};if(w(),function(){var S=jt("zoid_allow_delegate_"+n,function(){return!0}),R=jt("zoid_delegate_"+n,function(x){var W=x.data;return{parent:ba({uid:W.uid,options:r,overrides:W.overrides,parentWin:x.source})}});So.register(S.cancel),So.register(R.cancel)}(),l.components=l.components||{},l.components[i])throw new Error("Can not register multiple components with the same tag: "+i);return l.components[i]=!0,{init:P,instances:T,driver:function(S,R){var x={react:Bc,angular:$c,vue:qc,vue3:Hc,angular2:Vc};if(!x[S])throw new Error("Could not find driver for framework: "+S);return g[S]||(g[S]=x[S].register(i,c,P,R)),g[S]},isChild:y,canRenderTo:function(S){return xt(S,"zoid_allow_delegate_"+n).then(function(R){return R.data}).catch(function(){return!1})},registerChild:w}}var Yc=function(e){(function(){Nt().initialized||(Nt().initialized=!0,c=(a={on:jt,send:xt}).on,u=a.send,(h=Nt()).receiveMessage=h.receiveMessage||function(l){return yo(l,{on:c,send:u})},function(l){var g=l.on,T=l.send;ge().getOrSet("postMessageListener",function(){return Fi(window,"message",function(y){(function(w,P){var S=P.on,R=P.send;v.try(function(){var x=w.source||w.sourceElement,W=w.origin||w.originalEvent&&w.originalEvent.origin,L=w.data;if(W==="null"&&(W="file://"),x){if(!W)throw new Error("Post message did not have origin domain");yo({source:x,origin:W,data:L},{on:S,send:R})}})})(y,{on:g,send:T})})})}({on:jt,send:xt}),ra({on:jt,send:xt,receiveMessage:yo}),function(l){var g=l.on,T=l.send;ge("builtinListeners").getOrSet("helloListener",function(){var y=g("postrobot_hello",{domain:"*"},function(P){return Vi(P.source,{domain:P.origin}),{instanceID:$i()}}),w=Yt();return w&&uo(w,{send:T}).catch(function(P){}),y})}({on:jt,send:xt}));var a,c,u,h})();var r=Kc(e),n=function(a){return r.init(a)};n.driver=function(a,c){return r.driver(a,c)},n.isChild=function(){return r.isChild()},n.canRenderTo=function(a){return r.canRenderTo(a)},n.instances=r.instances;var i=r.registerChild();return i&&(window.xprops=n.xprops=i.getProps()),n};function Pa(e){Qt&&Qt.destroyBridges();var r=To.all(e);return To=mn(),r}var Ta=Pa;function Zc(e){return Ta(),delete window.__zoid_10_3_3__,function(){(function(){for(var n=ge("responseListeners"),i=0,a=n.keys();i<a.length;i++){var c=a[i],u=n.get(c);u&&(u.cancelled=!0),n.del(c)}})(),(r=ge().get("postMessageListener"))&&r.cancel();var r;delete window.__post_robot_11_0_0__}(),So.all(e)}}])})})(ui);var di=ui.exports;const fi=di.EVENT,Sr={VISIBLE:"zoid-visible",INVISIBLE:"zoid-invisible"};function Qs({uid:t,frame:o,prerenderFrame:s,doc:d,props:f,event:m,dimensions:E}){const{width:p,height:O}=E,{top:D=0,left:b=0}=f;if(!o||!s)return;const C=d.createElement("div");C.setAttribute("id",t);const N=d.createElement("style");return f.cspNonce&&N.setAttribute("nonce",f.cspNonce),N.appendChild(d.createTextNode(`
          #${t} {
              display: inline-block;
              position: absolute;
              width: ${p};
              height: ${O};
              z-index: 1049;
              border: none;
              top: ${D}px;
              left: ${b}px;
              overflow: hidden;
          }

          #${t} > iframe {
              display: inline-block;
              position: absolute;
              width: 100%;
              height: 100%;
              top: 0;
              left: 0;
              transition: opacity .2s ease-in-out;
              border: none;
              background-color: transparent;
              overflow: hidden;
          }

          #${t} > iframe.${Sr.INVISIBLE} {
              opacity: 0;
          }

          #${t} > iframe.${Sr.VISIBLE} {
              opacity: 1;
        }
      `)),C.appendChild(o),C.appendChild(s),C.appendChild(N),s.classList.add(Sr.INVISIBLE),o.classList.add(Sr.INVISIBLE),m.on(fi.RENDERED,()=>{setTimeout(()=>{o.classList.remove(Sr.INVISIBLE),o.classList.add(Sr.VISIBLE)},100),setTimeout(()=>{s.remove()},1)}),m.on(fi.RESIZE,({width:ae,height:se})=>{typeof ae=="number"&&(C.style.width=`${ae}px`),typeof se=="number"&&(C.style.height=`${se}px`)}),C}function ks(t){return di.create({dimensions:{width:"100%",height:"100%"},tag:`wta${t}`,url:({props:o})=>o.appConfig.sdkBaseUrl,props:{appConfig:{type:"object",required:!0},icons:{type:"array",required:!0}},containerTemplate:Qs})}function ec(t){return ks(t.id)(t)}class tc extends Error{constructor(o,s){super(o,s),this.name="FetchError",s!=null&&s.cause&&!this.cause&&(this.cause=s.cause)}}function rc(t){var O,D,b,C,N;const o=((O=t.error)==null?void 0:O.message)||((D=t.error)==null?void 0:D.toString())||"",s=((b=t.request)==null?void 0:b.method)||((C=t.options)==null?void 0:C.method)||"GET",d=((N=t.request)==null?void 0:N.url)||String(t.request)||"/",f=`[${s}] ${JSON.stringify(d)}`,m=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",E=`${f}: ${m}${o?` ${o}`:""}`,p=new tc(E,t.error?{cause:t.error}:void 0);for(const ae of["request","options","response"])Object.defineProperty(p,ae,{get(){return t[ae]}});for(const[ae,se]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(p,ae,{get(){return t.response&&t.response[se]}});return p}const nc=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function li(t="GET"){return nc.has(t.toUpperCase())}function oc(t){if(t===void 0)return!1;const o=typeof t;return o==="string"||o==="number"||o==="boolean"||o===null?!0:o!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const ic=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ac=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function sc(t=""){if(!t)return"json";const o=t.split(";").shift()||"";return ac.test(o)?"json":ic.has(o)||o.startsWith("text/")?"text":"blob"}function cc(t,o,s=globalThis.Headers){const d={...o,...t};if(o!=null&&o.params&&(t!=null&&t.params)&&(d.params={...o==null?void 0:o.params,...t==null?void 0:t.params}),o!=null&&o.query&&(t!=null&&t.query)&&(d.query={...o==null?void 0:o.query,...t==null?void 0:t.query}),o!=null&&o.headers&&(t!=null&&t.headers)){d.headers=new s((o==null?void 0:o.headers)||{});for(const[f,m]of new s((t==null?void 0:t.headers)||{}))d.headers.set(f,m)}return d}const uc=new Set([408,409,425,429,500,502,503,504]),dc=new Set([101,204,205,304]);function hi(t={}){const{fetch:o=globalThis.fetch,Headers:s=globalThis.Headers,AbortController:d=globalThis.AbortController}=t;async function f(p){const O=p.error&&p.error.name==="AbortError"&&!p.options.timeout||!1;if(p.options.retry!==!1&&!O){let b;typeof p.options.retry=="number"?b=p.options.retry:b=li(p.options.method)?0:1;const C=p.response&&p.response.status||500;if(b>0&&(Array.isArray(p.options.retryStatusCodes)?p.options.retryStatusCodes.includes(C):uc.has(C))){const N=p.options.retryDelay||0;return N>0&&await new Promise(ae=>setTimeout(ae,N)),m(p.request,{...p.options,retry:b-1})}}const D=rc(p);throw Error.captureStackTrace&&Error.captureStackTrace(D,m),D}const m=async function(O,D={}){var ae;const b={request:O,options:cc(D,t.defaults,s),response:void 0,error:void 0};b.options.method=(ae=b.options.method)==null?void 0:ae.toUpperCase(),b.options.onRequest&&await b.options.onRequest(b),typeof b.request=="string"&&(b.options.baseURL&&(b.request=ts(b.request,b.options.baseURL)),(b.options.query||b.options.params)&&(b.request=Qr(b.request,{...b.options.params,...b.options.query}))),b.options.body&&li(b.options.method)&&(oc(b.options.body)?(b.options.body=typeof b.options.body=="string"?b.options.body:JSON.stringify(b.options.body),b.options.headers=new s(b.options.headers||{}),b.options.headers.has("content-type")||b.options.headers.set("content-type","application/json"),b.options.headers.has("accept")||b.options.headers.set("accept","application/json")):("pipeTo"in b.options.body&&typeof b.options.body.pipeTo=="function"||typeof b.options.body.pipe=="function")&&("duplex"in b.options||(b.options.duplex="half")));let C;if(!b.options.signal&&b.options.timeout){const se=new d;C=setTimeout(()=>se.abort(),b.options.timeout),b.options.signal=se.signal}try{b.response=await o(b.request,b.options)}catch(se){return b.error=se,b.options.onRequestError&&await b.options.onRequestError(b),await f(b)}finally{C&&clearTimeout(C)}if(b.response.body&&!dc.has(b.response.status)&&b.options.method!=="HEAD"){const se=(b.options.parseResponse?"json":b.options.responseType)||sc(b.response.headers.get("content-type")||"");switch(se){case"json":{const Je=await b.response.text(),v=b.options.parseResponse||ci;b.response._data=v(Je);break}case"stream":{b.response._data=b.response.body;break}default:b.response._data=await b.response[se]()}}return b.options.onResponse&&await b.options.onResponse(b),!b.options.ignoreResponseError&&b.response.status>=400&&b.response.status<600?(b.options.onResponseError&&await b.options.onResponseError(b),await f(b)):b.response},E=async function(O,D){return(await m(O,D))._data};return E.raw=m,E.native=(...p)=>o(...p),E.create=(p={})=>hi({...t,defaults:{...t.defaults,...p}}),E}const Gn=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),fc=Gn.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),lc=Gn.Headers,hc=Gn.AbortController,pc=hi({fetch:fc,Headers:lc,AbortController:hc}).create({credentials:"omit",onResponseError({response:t,error:o}){console.log("[LOG] ~ error:",o)},onRequest:({options:t,request:o})=>{const s=t.token;s&&(t.headers=t.headers||{},t.headers.Authorization=`${s}`)},onResponse({response:t,options:o}){}});function vc(){var t=t||window;const o=new TextEncoder("utf-8"),s=new TextDecoder("utf-8");let d=new DataView(new ArrayBuffer(8));var f=[];class m{constructor(){this._callbackTimeouts=new Map,this._nextCallbackTimeoutID=1;const p=()=>new DataView(this._inst.exports.memory.buffer),O=v=>{d.setBigInt64(0,v,!0);const A=d.getFloat64(0,!0);if(A===0)return;if(!isNaN(A))return A;const q=0xffffffffn&v;return this._values[q]},D=v=>{let A=p().getBigUint64(v,!0);return O(A)},b=v=>{const A=0x7ff80000n;if(typeof v=="number")return isNaN(v)?A<<32n:v===0?A<<32n|1n:(d.setFloat64(0,v,!0),d.getBigInt64(0,!0));switch(v){case void 0:return 0n;case null:return A<<32n|2n;case!0:return A<<32n|3n;case!1:return A<<32n|4n}let q=this._ids.get(v);q===void 0&&(q=this._idPool.pop(),q===void 0&&(q=BigInt(this._values.length)),this._values[q]=v,this._goRefCounts[q]=0,this._ids.set(v,q)),this._goRefCounts[q]++;let Y=1n;switch(typeof v){case"string":Y=2n;break;case"symbol":Y=3n;break;case"function":Y=4n}return q|(A|Y)<<32n},C=(v,A)=>{let q=b(A);p().setBigUint64(v,q,!0)},N=(v,A,q)=>new Uint8Array(this._inst.exports.memory.buffer,v,A),ae=(v,A,q)=>{const Y=new Array(A);for(let Ee=0;Ee<A;Ee++)Y[Ee]=D(v+8*Ee);return Y},se=(v,A)=>s.decode(new DataView(this._inst.exports.memory.buffer,v,A)),Je=Date.now()-performance.now();this.importObject={wasi_snapshot_preview1:{fd_write:function(v,A,q,Y){let Ee=0;if(v==1)for(let Oe=0;Oe<q;Oe++){let Fe=A+8*Oe,ve=p().getUint32(Fe+0,!0),Ae=p().getUint32(Fe+4,!0);Ee+=Ae;for(let Z=0;Z<Ae;Z++){let Pe=p().getUint8(ve+Z);if(Pe!=13)if(Pe==10){let ie=s.decode(new Uint8Array(f));f=[],console.log(ie)}else f.push(Pe)}}else console.error("invalid file descriptor:",v);return p().setUint32(Y,Ee,!0),0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit:v=>{if(!t.process)throw"trying to exit with code "+v;process.exit(v)},random_get:(v,A)=>(crypto.getRandomValues(N(v,A)),0)},gojs:{"runtime.ticks":()=>Je+performance.now(),"runtime.sleepTicks":v=>{setTimeout(this._inst.exports.go_scheduler,v)},"syscall/js.finalizeRef":v=>{const A=p().getUint32(O(v),!0);if(this._goRefCounts[A]--,this._goRefCounts[A]===0){const q=this._values[A];this._values[A]=null,this._ids.delete(q),this._idPool.push(A)}},"syscall/js.stringVal":(v,A)=>{const q=se(v,A);return b(q)},"syscall/js.valueGet":(v,A,q)=>{let Y=se(A,q),Ee=O(v),Oe=Reflect.get(Ee,Y);return b(Oe)},"syscall/js.valueSet":(v,A,q,Y)=>{const Ee=O(v),Oe=se(A,q),Fe=O(Y);Reflect.set(Ee,Oe,Fe)},"syscall/js.valueDelete":(v,A,q)=>{const Y=O(v),Ee=se(A,q);Reflect.deleteProperty(Y,Ee)},"syscall/js.valueIndex":(v,A)=>b(Reflect.get(O(v),A)),"syscall/js.valueSetIndex":(v,A,q)=>{Reflect.set(O(v),A,O(q))},"syscall/js.valueCall":(v,A,q,Y,Ee,Oe,Fe)=>{const ve=O(A),Ae=se(q,Y),Z=ae(Ee,Oe);try{const Pe=Reflect.get(ve,Ae);C(v,Reflect.apply(Pe,ve,Z)),p().setUint8(v+8,1)}catch(Pe){C(v,Pe),p().setUint8(v+8,0)}},"syscall/js.valueInvoke":(v,A,q,Y,Ee)=>{try{const Oe=O(A),Fe=ae(q,Y);C(v,Reflect.apply(Oe,void 0,Fe)),p().setUint8(v+8,1)}catch(Oe){C(v,Oe),p().setUint8(v+8,0)}},"syscall/js.valueNew":(v,A,q,Y,Ee)=>{const Oe=O(A),Fe=ae(q,Y);try{C(v,Reflect.construct(Oe,Fe)),p().setUint8(v+8,1)}catch(ve){C(v,ve),p().setUint8(v+8,0)}},"syscall/js.valueLength":v=>O(v).length,"syscall/js.valuePrepareString":(v,A)=>{const q=String(O(A)),Y=o.encode(q);C(v,Y),p().setInt32(v+8,Y.length,!0)},"syscall/js.valueLoadString":(v,A,q,Y)=>{const Ee=O(v);N(A,q).set(Ee)},"syscall/js.valueInstanceOf":(v,A)=>O(v)instanceof O(A),"syscall/js.copyBytesToGo":(v,A,q,Y,Ee)=>{let Oe=v,Fe=v+4;const ve=N(A,q),Ae=O(Ee);if(!(Ae instanceof Uint8Array||Ae instanceof Uint8ClampedArray))return void p().setUint8(Fe,0);const Z=Ae.subarray(0,ve.length);ve.set(Z),p().setUint32(Oe,Z.length,!0),p().setUint8(Fe,1)},"syscall/js.copyBytesToJS":(v,A,q,Y,Ee)=>{let Oe=v,Fe=v+4;const ve=O(A),Ae=N(q,Y);if(!(ve instanceof Uint8Array||ve instanceof Uint8ClampedArray))return void p().setUint8(Fe,0);const Z=Ae.subarray(0,ve.length);ve.set(Z),p().setUint32(Oe,Z.length,!0),p().setUint8(Fe,1)}}},this.importObject.env=this.importObject.gojs}async run(p){for(this._inst=p,this._values=[NaN,0,null,!0,!1,t,this],this._goRefCounts=[],this._ids=new Map,this._idPool=[],this.exited=!1;;){const O=new Promise(D=>{this._resolveCallbackPromise=()=>{if(this.exited)throw new Error("bad callback: Go program has already exited");setTimeout(D,0)}});if(this._inst.exports._start(),this.exited)break;await O}}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(p){const O=this;return function(){const D={id:p,this:this,args:arguments};return O._pendingEvent=D,O._resume(),D.result}}}return new m}class wc{constructor(){Ct(this,"data");Ct(this,"mutex");this.mutex=new pi,this.data=""}async loadSource(o){await this.mutex.acquire();try{this.data&&(o.session=this.data);const s=JSON.stringify(o);for(let d=1;d<=3;d++)try{const f=await Fr.getInstance({}),{manifest:m,err:E,session:p}=await f.loadSource(s);if(E)throw new Error(E);return this.data=p,m}catch(f){if(console.log(`Attempt ${d} failed:`,f,s),d===3)throw console.log("session:",this.data),f}}finally{this.mutex.release()}return null}async getEventTracking(){return await(await Fr.getInstance({})).getEventTracking(this.data)}async acquire(){return new Promise(o=>{this._locked?this._queue.push(o):(this._locked=!0,o())})}release(){if(this._queue.length>0){const o=this._queue.shift();o&&o()}else this._locked=!1}}class pi{constructor(){Ct(this,"_queue");Ct(this,"_locked");this._queue=[],this._locked=!1}async acquire(){return new Promise(o=>{this._locked?this._queue.push(o):(this._locked=!0,o())})}release(){if(this._queue.length>0){const o=this._queue.shift();o&&o()}else this._locked=!1}}const Ut=class Ut{constructor(o){Ct(this,"mutex");Ct(this,"instanceExpiration");Ct(this,"wasm");Ct(this,"uri");Ct(this,"go");var s;this.uri=o,o||(this.uri=(s=window==null?void 0:window.sigmaCSPMEnv)==null?void 0:s.WASM_URL),this.instanceExpiration=Date.now()+1e3,this.mutex=new pi}static async getInstance(o){if(!Ut.instance)Ut.instance=new Ut(o.uri),Ut.instance.initializeInstance(1e3);else if(!Ut.instance)throw new Error("Manager not initialized");return Ut.instance}async useInstance(o){await this.initializeInstance(1e3),await this.mutex.acquire();try{if(this.wasm)return await o()}finally{this.mutex.release()}}async initializeInstance(o,s){await this.mutex.acquire();try{if(this.isExpired()||s||!this.wasm){if(this.instanceExpiration=Date.now()+o,!this.wasm){const m=await fetch(this.uri);this.wasm=await m.arrayBuffer()}window.loadSource!==null&&(window.loadSource=null),window.getEventTracking=null,this.go&&(this.go=null);const d=vc();this.instanceExpiration=Date.now()+1e3;const f=await WebAssembly.instantiate(this.wasm,d.importObject);d.run(f.instance),this.go=d}}finally{this.mutex.release()}}async loadSource(o){return await this.useInstance(async()=>{try{return await window.loadSource(o)}catch(d){return{err:d}}})}async getEventTracking(o){const s=await this.useInstance(async()=>{try{return await window.getEventTracking(o)}catch(d){throw console.log("Error",d),d}});return{avails:JSON.parse(s.avails)}}isExpired(){return Date.now()>this.instanceExpiration}createSession(){return new wc}};Ct(Ut,"instance");let Fr=Ut;function vi(t,o,s){var E;const d=o==null?void 0:o.find(p=>(p==null?void 0:p.id)==(t==null?void 0:t.availId)),m=((E=d==null?void 0:d.ads)==null?void 0:E.filter(p=>(p==null?void 0:p.id)==(t==null?void 0:t.adsId))).find(p=>p.position===(t==null?void 0:t.position));return m&&(m.availId=d==null?void 0:d.id),s&&(s==null?void 0:s.id)==(m==null?void 0:m.id)&&s.availId==(m==null?void 0:m.availId)?s:m?{...m,impression:!1}:null}const mc=t=>{try{return atob(t)}catch(o){return console.error("Invalid base64 string:",o),null}};function gc(t){const s=new URL(t).hash,d=mc(s.substring(1));if(d)try{return{...JSON.parse(d)}}catch(f){console.error("Invalid JSON string:",f)}return null}function wi({adsUrl:t,sdk:o,loader:s}){return class extends s{constructor(f){super(f)}load(f,m,E){const p=E.onSuccess;E.onSuccess=async(O,D,b)=>{(b.type==="manifest"||b.type==="level"||b.type==="audioTrack")&&(O.data=await this.modifyManifest(O.url,O.data,b.type)),p(O,D,b)},super.load(f,m,E)}async modifyManifest(f,m,E){const p={proxyAds:{uri:t,timeout:2}};try{return await o.loadSource({config:p,manifest:m,masterUri:f})}catch(O){return console.error("[LOG] ~ error:",O),m}}}}function yc({video:t,adContainer:o,startSession:s,sdk:d,domain:f}){const m=Ys(),E=zt(!1),p=zt(),O=Math.random().toString(36).slice(6);function D({icons:U}){const z=kr(f,"/build/dist/wta/index.html");return{id:O,appConfig:{sdkBaseUrl:Qr(z||"https://localhost:4222/wta/index.html",{id:O})},icons:U}}if(!!o){const U=ec(D({icons:[]}));U.render(o),U.hide(),o.style.display="none",ys(()=>{var z;if(p.value){const de=((z=p.value)==null?void 0:z.icons)||[];o.style.display="block",U.updateProps(D({icons:de})),U.show()}else o.style.display="none",U.hide()})}const C=zt([]),N=zt(),ae=zt([]);async function se(U){var z;try{const de=(z=p.value)==null?void 0:z.trackingEvents.find(Te=>Te.eventType===U);if(!de)return;m.trigger(de),de.beaconUrls.map(Te=>Zs(pc(Te,{retry:3,retryDelay:500})))}catch(de){console.error("[ERROR] ~ error:",de)}}const Je=new Map;let v,A;function q(U,z,de){U.addEventListener(z,de),Je.set(z,de)}async function Y(U){const z=gc(U);if(z){const{avails:de}=await d.getEventTracking();p.value=vi(z,de,p.value),z.events.forEach(Te=>{p.value&&(p.value.impression||(se("impression"),p.value.impression=!0),se(Te),Te==="complete"&&(p.value=void 0))})}}function Ee(){return E.value=!1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(U=>{q(t,U,()=>{const z=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;se(z?"fullscreen":"exitFullscreen")})}),q(t,"pause",()=>se("pause")),q(t,"play",()=>se("resume")),q(t,"rewind",()=>se("rewind")),q(t,"mute",()=>se("mute")),q(t,"unmute",()=>se("unmute")),async(U,z)=>{const{tagList:de,_url:Te}=z.frag;de.flat().find(xe=>xe==="EXT-X-CUE-OUT-CONT"||xe==="EXT-X-CUE-OUT"||xe==="EXT-X-CUE-IN")&&Y(Te)}}async function Oe(){return d.getEventTracking().then(U=>{for(const z of(U==null?void 0:U.avails)||[])for(const de of z.ads){const Te=`${z.id}_${de.id}_${de.startTimeInSeconds}`;for(const ot of de.trackingEvents){const xe=`${Te}_${ot.eventType}`;ae.value.find(at=>at.key===xe)||ae.value.push({...ot,key:xe,ad:{...de,key:Te},tracked:!1})}}})}function Fe(){return async(U,z)=>{function de(xe){for(let Ke=0;Ke<xe.length;Ke++)if(xe[Ke]===0)return Ke;return xe.length}const{start:Te,sn:ot}=z.frag;for(let xe=0;xe<z.samples.length;xe++){const Ke=z.samples[xe],at=Ke.data,_t=Ke.pts;if(String.fromCharCode.apply(null,at.slice(0,3))!=="ID3"||String.fromCharCode.apply(null,at.slice(10,14))!=="TXXX")continue;const Kt=at.slice(21,at.length),dn=de(Kt),Yt=Kt.slice(dn+1,Kt.length),zr=de(Yt),Ur=new TextDecoder("utf-8").decode(Yt.slice(0,zr)),sr={sn:ot,time:_t-Te,value:ci(Ur)};if(N.value&&ot<N.value)return;C.value.push(sr),sr.value.event==="start"&&Oe()}}}function ve(){return U=>{const z=U.track;z.kind==="metadata"&&(z.oncuechange=async()=>{const de=z.activeCues;for(let Te=0;Te<de.length;Te++){const ot=de[Te];if(ot.value&&ot.value.uri){const xe=ot.value.uri;Y(xe)}}})}}function Ae(){return async U=>{var de,Te;const z=(de=U==null?void 0:U.detail)==null?void 0:de.value;if(((Te=U==null?void 0:U.detail)==null?void 0:Te.schemeIdUri)==="urn:sigma:dai:2018")try{const xe=(at=>{try{return atob(at)}catch(_t){return console.error("Invalid base64 string:",_t),null}})(z),Ke=JSON.parse(xe);if(Ke.event=U.detail.id,Ke){const{avails:at}=await d.getEventTracking();p.value=vi(Ke,at,p.value);const _t=Ke.event;p.value&&(p.value.impression||(se("impression"),p.value.impression=!0),se(_t),_t==="complete"&&(p.value=void 0))}}catch(ot){console.error("Error decoding base64:",ot)}}}function Z(U,z){m.on(de=>{(U==="*"||de.eventType===U)&&z(de)})}function Pe(){p.value=void 0,C.value=[],ae.value=[],Fo(v),Fo(A),Je.forEach((U,z)=>{t.removeEventListener(z,U)}),Je.clear()}function ie(){return{eventTracking:C,trackingDataEvent:ae}}return{destroy:Pe,onEventTracking:Z,hlsHelper:{createHlsFragChanged:Ee,createHlsFragParsingMetadata:Fe},videojsHelper:{createVideojsAddTrack:ve},shakaPlayerHelper:{createShakaPlayerHandlerEvent:Ae},getLog:ie}}async function Ec({video:t,adContainer:o,adsUrl:s,baseURL:d}){const f=d||"https://cdn.jsdelivr.net/gh/sigmaott/sigma-ssai-web-sdk@v1.3.0",E=(await Fr.getInstance({uri:kr(f,"/build/dist/sigma-cspm.wasm")||"https://localhost:4222/sigma-cspm.wasm"})).createSession();function p(){}const{onEventTracking:O,destroy:D,videojsHelper:b,hlsHelper:C,shakaPlayerHelper:N,getLog:ae}=yc({video:t,adContainer:o,trackingUrl:"",startSession:p,sdk:E,domain:f}),se=zt(),Je=zt();function v(Z){Z.config.loader=wi({adsUrl:s,sdk:E,loader:Hls.DefaultConfig.loader}),se.value=Z;const Pe=C.createHlsFragChanged(),ie=C.createHlsFragParsingMetadata();Z.on("hlsFragChanged",Pe),Z.on("hlsFragParsingMetadata",ie),Z.on(Hls.Events.ERROR,(U,z)=>{console.error("HLS Error:",U,z),z.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",z.details):z.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",z.details):console.error("Other Error:",z.details)}),Je.value=()=>{Z.off("hlsFragChanged",Pe),Z.off("hlsFragParsingMetadata",ie)}}function A(Z){Z.hls.config.loader=wi({adsUrl:s,sdk:E,loader:SigmaManager.DefaultConfig.loader}),se.value=Z.hls;const Pe=C.createHlsFragChanged(),ie=C.createHlsFragParsingMetadata();Z.hls.on("hlsFragChanged",Pe),Z.hls.on("hlsFragParsingMetadata",ie),Z.on(SigmaManager.Events.ERROR,(U,z)=>{console.error("HLS Error:",U,z),z.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",z.details):z.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",z.details):console.error("Other Error:",z.details)}),Je.value=()=>{Z.hls.destroy()}}const q=zt(),Y=zt(),Oe={instance:E,config:{proxyAds:{uri:s,timeout:2}}};function Fe(Z){q.value=Z;const Pe=b.createVideojsAddTrack();Z.textTracks().on("addtrack",Pe),Y.value=()=>{Z.textTracks().off("addtrack",Pe)}}function ve(Z,Pe){const ie=N.createShakaPlayerHandlerEvent();Z.addEventListener("timelineregionenter",ie),Z.getNetworkingEngine().registerRequestFilter((U,z)=>{}),Z.getNetworkingEngine().registerResponseFilter(async(U,z)=>{if(U===0){const de=new TextDecoder().decode(z.data),Te=await E.loadSource({config:{proxyAds:{uri:s,timeout:2e3}},masterUri:Pe,manifest:de});z.data=new TextEncoder().encode(Te)}})}function Ae(){var Z,Pe;D(),(Z=Je.value)==null||Z.call(Je),(Pe=Y.value)==null||Pe.call(Y),se.value=null,q.value=null,Je.value=null,Y.value=null}return{onEventTracking:O,destroy:Ae,sigmaPlayer:{attachVideojs:Fe,attachHls:v,attachSigmaDrm:A,getLog:ae,attachShaka:ve},sdk:E,cspm:Oe}}const mi=window==null?void 0:window.videojs;function gi(t){if((t==null?void 0:t.VERSION)==="7.10.2"){let o=t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist;t!=null&&t.originalSetupInitialPlaylist?o=t.originalSetupInitialPlaylist:t.originalSetupInitialPlaylist=o,t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist=async function(f){var m;if((m=this.vhs_.options_)!=null&&m.cspm)try{const p=await(await fetch(this.src)).text();await this.vhs_.options_.cspm.instance.loadSource({config:this.vhs_.options_.cspm.config,manifest:p,masterUri:this.src})}catch(E){console.error("Error loading source:",E)}o.apply(this,[f])};let s=t.Vhs.PlaylistLoader.prototype.haveMetadata;t!=null&&t.originalHaveMetadata?s=t.originalHaveMetadata:t.originalHaveMetadata=s,t.Vhs.PlaylistLoader.prototype.haveMetadata=async function({playlistString:f,playlistObject:m,url:E,id:p}){var D,b;const O=(D=this.vhs_.options_.cspm)==null?void 0:D.config;try{f&&((b=this.vhs_.options_)!=null&&b.cspm)&&(f=await this.vhs_.options_.cspm.instance.loadSource({config:O,manifest:f,masterUri:this.master.playlists[p].resolvedUri})),s.apply(this,[{playlistString:f,playlistObject:m,url:E,id:p}])}catch(C){console.error("Error loading source:",C)}};const d=(f,m,E)=>f&&E&&E.responseURL&&m!==E.responseURL?E.responseURL:m;t.Vhs.PlaylistLoader.prototype.media=function(f,m){if(!f)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error(`Cannot switch media playlist from ${this.state}`);if(typeof f=="string"){if(!this.master.playlists[f])throw new Error(`Unknown playlist URI: ${f}`);f=this.master.playlists[f]}if(window.clearTimeout(this.finalRenditionTimeout),m){const O=f.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,f,!1),O);return}const E=this.state,p=!this.media_||f.id!==this.media_.id;if(this.master.playlists[f.id].endList||f.endList&&f.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=f,p&&(this.trigger("mediachanging"),E==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(p){if(this.state="SWITCHING_MEDIA",this.request){if(f.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:f.resolvedUri,withCredentials:this.withCredentials},(O,D)=>{if(this.request){if(f.resolvedUri=d(this.handleManifestRedirects,f.resolvedUri,D),O)return this.playlistRequestError(this.request,f,E);this.haveMetadata({playlistString:D.responseText,url:f.uri,id:f.id}).then(()=>{E==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")})}})}}}else{let o=t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist;t!=null&&t.originalSetupInitialPlaylist?o=t.originalSetupInitialPlaylist:t.originalSetupInitialPlaylist=o,t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist=async function(E){if(E.manifestString&&this.vhs_.options_.cspm)try{await this.vhs_.options_.cspm.instance.loadSource({config:this.vhs_.options_.cspm.config,manifest:E.manifestString,masterUri:this.src})}catch(p){console.error("Error loading source:",p)}o.apply(this,[E])};let s=t.Vhs.PlaylistLoader.prototype.parseManifest_;t!=null&&t.originalParseManifest?s=t.originalParseManifest:t.originalParseManifest=s,t.Vhs.PlaylistLoader.prototype.parseManifest_=function({url:E,manifestString:p}){const O=s.apply(this,[{url:E,manifestString:p}]);return O.playlists&&O.playlists.length&&(O.manifestString=p),O};let d=t.Vhs.PlaylistLoader.prototype.haveMetadata;t.Vhs.PlaylistLoader.prototype.haveMetadata=async function({playlistString:E,playlistObject:p,url:O,id:D}){try{if(E&&this.vhs_.options_.cspm){const b=this.vhs_.options_.cspm.config;E=await this.vhs_.options_.cspm.instance.loadSource({config:b,manifest:E,masterUri:this.main.playlists[D].resolvedUri})}d.apply(this,[{playlistString:E,playlistObject:p,url:O,id:D}])}catch(b){throw console.error("Error loading source:",b),b}},t!=null&&t.originalHaveMetadata?d=t.originalHaveMetadata:t.originalHaveMetadata=d;const f=(E,p)=>{const O=E.segments||[],D=O[O.length-1],b=D&&D.parts&&D.parts[D.parts.length-1],C=b&&b.duration||D&&D.duration;return C?C*1e3:(E.partTargetDuration||E.targetDuration||10)*500},m=(E,p)=>p&&p.responseURL&&E!==p.responseURL?p.responseURL:E;t.Vhs.PlaylistLoader.prototype.media=function(E,p){if(!E)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error(`Cannot switch media playlist from ${this.state}`);if(typeof E=="string"){if(!this.main.playlists[E])throw new Error(`Unknown playlist URI: ${E}`);E=this.main.playlists[E]}if(window.clearTimeout(this.finalRenditionTimeout),p){const N=(E.partTargetDuration||E.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,E,!1),N);return}const O=this.state,D=!this.media_||E.id!==this.media_.id,b=this.main.playlists[E.id];if(b&&b.endList||E.endList&&E.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=E,D&&(this.trigger("mediachanging"),O==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(f(E)),!D)return;if(this.state="SWITCHING_MEDIA",this.request){if(E.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=E;const C={playlistInfo:{type:"media",uri:E.uri}};this.trigger({type:"playlistrequeststart",metadata:C}),this.request=this.vhs_.xhr({uri:E.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(N,ae)=>{if(this.request){if(E.lastRequest=Date.now(),E.resolvedUri=m(E.resolvedUri,ae),N)return this.playlistRequestError(this.request,E,O);this.haveMetadata({playlistString:ae.responseText,url:E.uri,id:E.id}).then(()=>{this.trigger({type:"playlistrequestcomplete",metadata:C}),O==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")})}})}}return t}mi&&gi(mi);function bc(t){const o="https://dai.sigma.video/api/proxy-ads/ads/",s=_n(t),d=`${s.protocol}//${s.host}${s.pathname}`;if(!s.search)return{playerUrl:t,adsUrl:null};const f=rs(t),m=f["sigma.dai.adsEndpoint"];if(!m)return{playerUrl:t,adsUrl:null};const E={},p={};for(const[D,b]of Object.entries(f))D.startsWith("sigma.dai")?D!=="sigma.dai.adsEndpoint"&&(E[D.replace("sigma.dai.","")]=b):p[D]=b;return{playerUrl:Qr(d,p),adsUrl:Qr(kr(o,m),E)}}return Rt.createSigmaDai=Ec,Rt.processURL=bc,Rt.videojsForCSPM=gi,Object.defineProperty(Rt,Symbol.toStringTag,{value:"Module"}),Rt}({});
