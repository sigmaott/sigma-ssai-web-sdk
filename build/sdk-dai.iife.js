var SigmaDaiSdk=function(Yr){"use strict";const _a=/#/g,Ma=/&/g,Fa=/\//g,za=/=/g,Sn=/\+/g,La=/%5e/gi,ja=/%60/gi,Ua=/%7c/gi,Ba=/%20/gi;function $a(t){return encodeURI(""+t).replace(Ua,"|")}function xn(t){return $a(typeof t=="string"?t:JSON.stringify(t)).replace(Sn,"%2B").replace(Ba,"+").replace(_a,"%23").replace(Ma,"%26").replace(ja,"`").replace(La,"^").replace(Fa,"%2F")}function Dn(t){return xn(t).replace(za,"%3D")}function xo(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function qa(t){return xo(t.replace(Sn," "))}function Ha(t){return xo(t.replace(Sn," "))}function Do(t=""){const i={};t[0]==="?"&&(t=t.slice(1));for(const s of t.split("&")){const c=s.match(/([^=]+)=?(.*)/)||[];if(c.length<2)continue;const f=qa(c[1]);if(f==="__proto__"||f==="constructor")continue;const m=Ha(c[2]||"");i[f]===void 0?i[f]=m:Array.isArray(i[f])?i[f].push(m):i[f]=[i[f],m]}return i}function Va(t,i){return(typeof i=="number"||typeof i=="boolean")&&(i=String(i)),i?Array.isArray(i)?i.map(s=>`${Dn(t)}=${xn(s)}`).join("&"):`${Dn(t)}=${xn(i)}`:Dn(t)}function Ga(t){return Object.keys(t).filter(i=>t[i]!==void 0).map(i=>Va(i,t[i])).filter(Boolean).join("&")}const Ja=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Ka=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Ya=/^([/\\]\s*){2,}[^/\\]/,Za=/^\.?\//;function No(t,i={}){return typeof i=="boolean"&&(i={acceptRelative:i}),i.strict?Ja.test(t):Ka.test(t)||(i.acceptRelative?Ya.test(t):!1)}function Qa(t="",i){return t.endsWith("/")}function Xa(t="",i){return(Qa(t)?t.slice(0,-1):t)||"/"}function ka(t="",i){return t.endsWith("/")?t:t+"/"}function es(t,i){if(rs(i)||No(t))return t;const s=Xa(i);return t.startsWith(s)?t:Dr(s,t)}function Zr(t,i){const s=Nn(t),c={...Do(s.search),...i};return s.search=Ga(c),os(s)}function ts(t){return Do(Nn(t).search)}function rs(t){return!t||t==="/"}function ns(t){return t&&t!=="/"}function Dr(t,...i){let s=t||"";for(const c of i.filter(f=>ns(f)))if(s){const f=c.replace(Za,"");s=ka(s)+f}else s=c;return s}const Co=Symbol.for("ufo:protocolRelative");function Nn(t="",i){const s=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(s){const[,M,F=""]=s;return{protocol:M.toLowerCase(),pathname:F,href:M+F,auth:"",host:"",search:"",hash:""}}if(!No(t,{acceptRelative:!0}))return Io(t);const[,c="",f,m=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,T="",P=""]=m.match(/([^#/?]*)(.*)?/)||[];c==="file:"&&(P=P.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:C,search:_,hash:b}=Io(P);return{protocol:c.toLowerCase(),auth:f?f.slice(0,Math.max(0,f.length-1)):"",host:T,pathname:C,search:_,hash:b,[Co]:!c}}function Io(t=""){const[i="",s="",c=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:i,search:s,hash:c}}function os(t){const i=t.pathname||"",s=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",c=t.hash||"",f=t.auth?t.auth+"@":"",m=t.host||"";return(t.protocol||t[Co]?(t.protocol||"")+"//":"")+f+m+i+s+c}const is=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,as=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ss=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function us(t,i){if(t==="__proto__"||t==="constructor"&&i&&typeof i=="object"&&"prototype"in i){cs(t);return}return i}function cs(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Cn(t,i={}){if(typeof t!="string")return t;const s=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return s.slice(1,-1);if(s.length<=9){const c=s.toLowerCase();if(c==="true")return!0;if(c==="false")return!1;if(c==="undefined")return;if(c==="null")return null;if(c==="nan")return Number.NaN;if(c==="infinity")return Number.POSITIVE_INFINITY;if(c==="-infinity")return Number.NEGATIVE_INFINITY}if(!ss.test(t)){if(i.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(is.test(t)||as.test(t)){if(i.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,us)}return JSON.parse(t)}catch(c){if(i.strict)throw c;return t}}class ds extends Error{constructor(i,s){super(i,s),this.name="FetchError",s!=null&&s.cause&&!this.cause&&(this.cause=s.cause)}}function fs(t){var C,_,b,M,F;const i=((C=t.error)==null?void 0:C.message)||((_=t.error)==null?void 0:_.toString())||"",s=((b=t.request)==null?void 0:b.method)||((M=t.options)==null?void 0:M.method)||"GET",c=((F=t.request)==null?void 0:F.url)||String(t.request)||"/",f=`[${s}] ${JSON.stringify(c)}`,m=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",T=`${f}: ${m}${i?` ${i}`:""}`,P=new ds(T,t.error?{cause:t.error}:void 0);for(const re of["request","options","response"])Object.defineProperty(P,re,{get(){return t[re]}});for(const[re,ae]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(P,re,{get(){return t.response&&t.response[ae]}});return P}const ls=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Ao(t="GET"){return ls.has(t.toUpperCase())}function hs(t){if(t===void 0)return!1;const i=typeof t;return i==="string"||i==="number"||i==="boolean"||i===null?!0:i!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const ps=new Set(["image/svg","application/xml","application/xhtml","application/html"]),vs=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function ws(t=""){if(!t)return"json";const i=t.split(";").shift()||"";return vs.test(i)?"json":ps.has(i)||i.startsWith("text/")?"text":"blob"}function ms(t,i,s=globalThis.Headers){const c={...i,...t};if(i!=null&&i.params&&(t!=null&&t.params)&&(c.params={...i==null?void 0:i.params,...t==null?void 0:t.params}),i!=null&&i.query&&(t!=null&&t.query)&&(c.query={...i==null?void 0:i.query,...t==null?void 0:t.query}),i!=null&&i.headers&&(t!=null&&t.headers)){c.headers=new s((i==null?void 0:i.headers)||{});for(const[f,m]of new s((t==null?void 0:t.headers)||{}))c.headers.set(f,m)}return c}const gs=new Set([408,409,425,429,500,502,503,504]),ys=new Set([101,204,205,304]);function Wo(t={}){const{fetch:i=globalThis.fetch,Headers:s=globalThis.Headers,AbortController:c=globalThis.AbortController}=t;async function f(P){const C=P.error&&P.error.name==="AbortError"&&!P.options.timeout||!1;if(P.options.retry!==!1&&!C){let b;typeof P.options.retry=="number"?b=P.options.retry:b=Ao(P.options.method)?0:1;const M=P.response&&P.response.status||500;if(b>0&&(Array.isArray(P.options.retryStatusCodes)?P.options.retryStatusCodes.includes(M):gs.has(M))){const F=P.options.retryDelay||0;return F>0&&await new Promise(re=>setTimeout(re,F)),m(P.request,{...P.options,retry:b-1})}}const _=fs(P);throw Error.captureStackTrace&&Error.captureStackTrace(_,m),_}const m=async function(C,_={}){var re;const b={request:C,options:ms(_,t.defaults,s),response:void 0,error:void 0};b.options.method=(re=b.options.method)==null?void 0:re.toUpperCase(),b.options.onRequest&&await b.options.onRequest(b),typeof b.request=="string"&&(b.options.baseURL&&(b.request=es(b.request,b.options.baseURL)),(b.options.query||b.options.params)&&(b.request=Zr(b.request,{...b.options.params,...b.options.query}))),b.options.body&&Ao(b.options.method)&&(hs(b.options.body)?(b.options.body=typeof b.options.body=="string"?b.options.body:JSON.stringify(b.options.body),b.options.headers=new s(b.options.headers||{}),b.options.headers.has("content-type")||b.options.headers.set("content-type","application/json"),b.options.headers.has("accept")||b.options.headers.set("accept","application/json")):("pipeTo"in b.options.body&&typeof b.options.body.pipeTo=="function"||typeof b.options.body.pipe=="function")&&("duplex"in b.options||(b.options.duplex="half")));let M;if(!b.options.signal&&b.options.timeout){const ae=new c;M=setTimeout(()=>ae.abort(),b.options.timeout),b.options.signal=ae.signal}try{b.response=await i(b.request,b.options)}catch(ae){return b.error=ae,b.options.onRequestError&&await b.options.onRequestError(b),await f(b)}finally{M&&clearTimeout(M)}if(b.response.body&&!ys.has(b.response.status)&&b.options.method!=="HEAD"){const ae=(b.options.parseResponse?"json":b.options.responseType)||ws(b.response.headers.get("content-type")||"");switch(ae){case"json":{const ut=await b.response.text(),O=b.options.parseResponse||Cn;b.response._data=O(ut);break}case"stream":{b.response._data=b.response.body;break}default:b.response._data=await b.response[ae]()}}return b.options.onResponse&&await b.options.onResponse(b),!b.options.ignoreResponseError&&b.response.status>=400&&b.response.status<600?(b.options.onResponseError&&await b.options.onResponseError(b),await f(b)):b.response},T=async function(C,_){return(await m(C,_))._data};return T.raw=m,T.native=(...P)=>i(...P),T.create=(P={})=>Wo({...t,defaults:{...t.defaults,...P}}),T}const In=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),Es=In.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),bs=In.Headers,Ps=In.AbortController,Ts=Wo({fetch:Es,Headers:bs,AbortController:Ps}).create({credentials:"omit",onResponseError({response:t,error:i}){console.log("[LOG] ~ error:",i)},onRequest:({options:t,request:i})=>{const s=t.token;s&&(t.headers=t.headers||{},t.headers.Authorization=`${s}`)},onResponse({response:t,options:i}){}}),Rs=t=>(i,s)=>(t.set(i,s),s),_o=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,Mo=536870912,Fo=Mo*2,Os=(t,i)=>s=>{const c=i.get(s);let f=c===void 0?s.size:c<Fo?c+1:0;if(!s.has(f))return t(s,f);if(s.size<Mo){for(;s.has(f);)f=Math.floor(Math.random()*Fo);return t(s,f)}if(s.size>_o)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;s.has(f);)f=Math.floor(Math.random()*_o);return t(s,f)},zo=new WeakMap,Ss=Rs(zo),Qr=Os(Ss,zo),xs=t=>t.method!==void 0&&t.method==="call",Ds=t=>typeof t.id=="number"&&typeof t.result=="boolean",Lo=((t,i)=>{let s=null;return()=>{if(s!==null)return s;const c=new Blob([i],{type:"application/javascript; charset=utf-8"}),f=URL.createObjectURL(c);return s=t(f),setTimeout(()=>URL.revokeObjectURL(f)),s}})(t=>{const i=new Map([[0,()=>{}]]),s=new Map([[0,()=>{}]]),c=new Map,f=new Worker(t);return f.addEventListener("message",({data:_})=>{if(xs(_)){const{params:{timerId:b,timerType:M}}=_;if(M==="interval"){const F=i.get(b);if(typeof F===void 0)throw new Error("The timer is in an undefined state.");if(typeof F=="number"){const re=c.get(F);if(re===void 0||re.timerId!==b||re.timerType!==M)throw new Error("The timer is in an undefined state.")}else typeof F=="function"&&F()}else if(M==="timeout"){const F=s.get(b);if(typeof F===void 0)throw new Error("The timer is in an undefined state.");if(typeof F=="number"){const re=c.get(F);if(re===void 0||re.timerId!==b||re.timerType!==M)throw new Error("The timer is in an undefined state.")}else typeof F=="function"&&(F(),s.delete(b))}}else if(Ds(_)){const{id:b}=_,M=c.get(b);if(M===void 0)throw new Error("The timer is in an undefined state.");const{timerId:F,timerType:re}=M;c.delete(b),re==="interval"?i.delete(F):s.delete(F)}else{const{error:{message:b}}=_;throw new Error(b)}}),{clearInterval:_=>{if(typeof i.get(_)=="function"){const b=Qr(c);c.set(b,{timerId:_,timerType:"interval"}),i.set(_,b),f.postMessage({id:b,method:"clear",params:{timerId:_,timerType:"interval"}})}},clearTimeout:_=>{if(typeof s.get(_)=="function"){const b=Qr(c);c.set(b,{timerId:_,timerType:"timeout"}),s.set(_,b),f.postMessage({id:b,method:"clear",params:{timerId:_,timerType:"timeout"}})}},setInterval:(_,b=0,...M)=>{const F=Qr(i);return i.set(F,()=>{_(...M),typeof i.get(F)=="function"&&f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:F,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:F,timerType:"interval"}}),F},setTimeout:(_,b=0,...M)=>{const F=Qr(s);return s.set(F,()=>_(...M)),f.postMessage({id:null,method:"set",params:{delay:b,now:performance.timeOrigin+performance.now(),timerId:F,timerType:"timeout"}}),F}}},`(()=>{"use strict";const e=new Map,t=new Map,r=t=>{const r=e.get(t);return void 0!==r&&(clearTimeout(r),e.delete(t),!0)},s=e=>{const r=t.get(e);return void 0!==r&&(clearTimeout(r),t.delete(e),!0)},o=(e,t)=>{const r=performance.now(),s=e+t-r-performance.timeOrigin;return{expected:r+s,remainingDelay:s}},i=(e,t,r,s)=>{const o=r-performance.now();o>0?e.set(t,setTimeout(i,o,e,t,r,s)):(e.delete(t),postMessage({id:null,method:"call",params:{timerId:t,timerType:s}}))};addEventListener("message",(n=>{let{data:a}=n;try{if("clear"===a.method){const{id:e,params:{timerId:t,timerType:o}}=a;if("interval"===o)postMessage({id:e,result:r(t)});else{if("timeout"!==o)throw new Error('The given type "'.concat(o,'" is not supported'));postMessage({id:e,result:s(t)})}}else{if("set"!==a.method)throw new Error('The given method "'.concat(a.method,'" is not supported'));{const{params:{delay:r,now:s,timerId:n,timerType:m}}=a;if("interval"===m)((t,r,s)=>{const{expected:n,remainingDelay:a}=o(t,s);e.set(r,setTimeout(i,a,e,r,n,"interval"))})(r,n,s);else{if("timeout"!==m)throw new Error('The given type "'.concat(m,'" is not supported'));((e,r,s)=>{const{expected:n,remainingDelay:a}=o(e,s);t.set(r,setTimeout(i,a,t,r,n,"timeout"))})(r,n,s)}}}}catch(e){postMessage({error:{message:e.message},id:a.id,result:null})}}))})();`),An=t=>Lo().clearTimeout(t),Wn=(...t)=>Lo().setTimeout(...t);/**
* @vue/shared v3.5.1
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ns(t,i){const s=new Set(t.split(","));return c=>s.has(c)}const jo=Object.assign,Cs=Object.prototype.hasOwnProperty,_n=(t,i)=>Cs.call(t,i),ur=Array.isArray,Nr=t=>Uo(t)==="[object Map]",Is=t=>typeof t=="string",Cr=t=>typeof t=="symbol",Xr=t=>t!==null&&typeof t=="object",As=Object.prototype.toString,Uo=t=>As.call(t),Bo=t=>Uo(t).slice(8,-1),Mn=t=>Is(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ws=(t=>{const i=Object.create(null);return s=>i[s]||(i[s]=t(s))})(t=>t.charAt(0).toUpperCase()+t.slice(1)),cr=(t,i)=>!Object.is(t,i);var ze={};function dr(t,...i){console.warn(`[Vue warn] ${t}`,...i)}let fe;const Fn=new WeakSet;class $o{constructor(i){this.fn=i,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Fn.has(this)&&(Fn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=Ir,Ir=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ko(this),Ho(this);const i=fe,s=yt;fe=this,yt=!0;try{return this.fn()}finally{ze.NODE_ENV!=="production"&&fe!==this&&dr("Active effect was not restored correctly - this is likely a Vue internal bug."),Vo(this),fe=i,yt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let i=this.deps;i;i=i.nextDep)Un(i);this.deps=this.depsTail=void 0,Ko(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Fn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){jn(this)&&this.run()}get dirty(){return jn(this)}}let qo=0,Ir;function zn(){qo++}function Ln(){if(--qo>0)return;let t;for(;Ir;){let i=Ir;for(Ir=void 0;i;){const s=i.nextEffect;if(i.nextEffect=void 0,i.flags&=-9,i.flags&1)try{i.trigger()}catch(c){t||(t=c)}i=s}}if(t)throw t}function Ho(t){for(let i=t.deps;i;i=i.nextDep)i.version=-1,i.prevActiveLink=i.dep.activeLink,i.dep.activeLink=i}function Vo(t){let i,s=t.depsTail;for(let c=s;c;c=c.prevDep)c.version===-1?(c===s&&(s=c.prevDep),Un(c),Ms(c)):i=c,c.dep.activeLink=c.prevActiveLink,c.prevActiveLink=void 0;t.deps=i,t.depsTail=s}function jn(t){for(let i=t.deps;i;i=i.nextDep)if(i.dep.version!==i.version||i.dep.computed&&_s(i.dep.computed)===!1||i.dep.version!==i.version)return!0;return!!t._dirty}function _s(t){if(t.flags&2)return!1;if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===kr))return;t.globalVersion=kr;const i=t.dep;if(t.flags|=2,i.version>0&&!t.isSSR&&!jn(t)){t.flags&=-3;return}const s=fe,c=yt;fe=t,yt=!0;try{Ho(t);const f=t.fn();(i.version===0||cr(f,t._value))&&(t._value=f,i.version++)}catch(f){throw i.version++,f}finally{fe=s,yt=c,Vo(t),t.flags&=-3}}function Un(t){const{dep:i,prevSub:s,nextSub:c}=t;if(s&&(s.nextSub=c,t.prevSub=void 0),c&&(c.prevSub=s,t.nextSub=void 0),i.subs===t&&(i.subs=s),!i.subs&&i.computed){i.computed.flags&=-5;for(let f=i.computed.deps;f;f=f.nextDep)Un(f)}}function Ms(t){const{prevDep:i,nextDep:s}=t;i&&(i.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=i,t.nextDep=void 0)}function Fs(t,i){t.effect instanceof $o&&(t=t.effect.fn);const s=new $o(t);try{s.run()}catch(f){throw s.stop(),f}const c=s.run.bind(s);return c.effect=s,c}let yt=!0;const Jo=[];function zs(){Jo.push(yt),yt=!1}function Ls(){const t=Jo.pop();yt=t===void 0?!0:t}function Ko(t){const{cleanup:i}=t;if(t.cleanup=void 0,i){const s=fe;fe=void 0;try{i()}finally{fe=s}}}let kr=0;class Yo{constructor(i){this.computed=i,this.version=0,this.activeLink=void 0,this.subs=void 0,ze.NODE_ENV!=="production"&&(this.subsHead=void 0)}track(i){if(!fe||!yt)return;let s=this.activeLink;if(s===void 0||s.sub!==fe)s=this.activeLink={dep:this,sub:fe,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},fe.deps?(s.prevDep=fe.depsTail,fe.depsTail.nextDep=s,fe.depsTail=s):fe.deps=fe.depsTail=s,fe.flags&4&&Zo(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const c=s.nextDep;c.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=c),s.prevDep=fe.depsTail,s.nextDep=void 0,fe.depsTail.nextDep=s,fe.depsTail=s,fe.deps===s&&(fe.deps=c)}return ze.NODE_ENV!=="production"&&fe.onTrack&&fe.onTrack(jo({effect:fe},i)),s}trigger(i){this.version++,kr++,this.notify(i)}notify(i){zn();try{if(ze.NODE_ENV!=="production")for(let s=this.subsHead;s;s=s.nextSub)ze.NODE_ENV!=="production"&&s.sub.onTrigger&&!(s.sub.flags&8)&&s.sub.onTrigger(jo({effect:s.sub},i));for(let s=this.subs;s;s=s.prevSub)s.sub.notify()}finally{Ln()}}}function Zo(t){const i=t.dep.computed;if(i&&!t.dep.subs){i.flags|=20;for(let c=i.deps;c;c=c.nextDep)Zo(c)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),ze.NODE_ENV!=="production"&&t.dep.subsHead===void 0&&(t.dep.subsHead=t),t.dep.subs=t}const Bn=new WeakMap,Qt=Symbol(ze.NODE_ENV!=="production"?"Object iterate":""),$n=Symbol(ze.NODE_ENV!=="production"?"Map keys iterate":""),Ar=Symbol(ze.NODE_ENV!=="production"?"Array iterate":"");function at(t,i,s){if(yt&&fe){let c=Bn.get(t);c||Bn.set(t,c=new Map);let f=c.get(s);f||c.set(s,f=new Yo),ze.NODE_ENV!=="production"?f.track({target:t,type:i,key:s}):f.track()}}function zt(t,i,s,c,f,m){const T=Bn.get(t);if(!T){kr++;return}let P=[];if(i==="clear")P=[...T.values()];else{const C=ur(t),_=C&&Mn(s);if(C&&s==="length"){const b=Number(c);T.forEach((M,F)=>{(F==="length"||F===Ar||!Cr(F)&&F>=b)&&P.push(M)})}else{const b=M=>M&&P.push(M);switch(s!==void 0&&b(T.get(s)),_&&b(T.get(Ar)),i){case"add":C?_&&b(T.get("length")):(b(T.get(Qt)),Nr(t)&&b(T.get($n)));break;case"delete":C||(b(T.get(Qt)),Nr(t)&&b(T.get($n)));break;case"set":Nr(t)&&b(T.get(Qt));break}}}zn();for(const C of P)ze.NODE_ENV!=="production"?C.trigger({target:t,type:i,key:s,newValue:c,oldValue:f,oldTarget:m}):C.trigger();Ln()}function fr(t){const i=le(t);return i===t?i:(at(i,"iterate",Ar),jt(t)?i:i.map(rt))}function qn(t){return at(t=le(t),"iterate",Ar),t}const js={__proto__:null,[Symbol.iterator](){return Hn(this,Symbol.iterator,rt)},concat(...t){return fr(this).concat(...t.map(i=>ur(i)?fr(i):i))},entries(){return Hn(this,"entries",t=>(t[1]=rt(t[1]),t))},every(t,i){return Nt(this,"every",t,i,void 0,arguments)},filter(t,i){return Nt(this,"filter",t,i,s=>s.map(rt),arguments)},find(t,i){return Nt(this,"find",t,i,rt,arguments)},findIndex(t,i){return Nt(this,"findIndex",t,i,void 0,arguments)},findLast(t,i){return Nt(this,"findLast",t,i,rt,arguments)},findLastIndex(t,i){return Nt(this,"findLastIndex",t,i,void 0,arguments)},forEach(t,i){return Nt(this,"forEach",t,i,void 0,arguments)},includes(...t){return Vn(this,"includes",t)},indexOf(...t){return Vn(this,"indexOf",t)},join(t){return fr(this).join(t)},lastIndexOf(...t){return Vn(this,"lastIndexOf",t)},map(t,i){return Nt(this,"map",t,i,void 0,arguments)},pop(){return Wr(this,"pop")},push(...t){return Wr(this,"push",t)},reduce(t,...i){return Qo(this,"reduce",t,i)},reduceRight(t,...i){return Qo(this,"reduceRight",t,i)},shift(){return Wr(this,"shift")},some(t,i){return Nt(this,"some",t,i,void 0,arguments)},splice(...t){return Wr(this,"splice",t)},toReversed(){return fr(this).toReversed()},toSorted(t){return fr(this).toSorted(t)},toSpliced(...t){return fr(this).toSpliced(...t)},unshift(...t){return Wr(this,"unshift",t)},values(){return Hn(this,"values",rt)}};function Hn(t,i,s){const c=qn(t),f=c[i]();return c!==t&&!jt(t)&&(f._next=f.next,f.next=()=>{const m=f._next();return m.value&&(m.value=s(m.value)),m}),f}const Us=Array.prototype;function Nt(t,i,s,c,f,m){const T=qn(t),P=T!==t&&!jt(t),C=T[i];if(C!==Us[i]){const M=C.apply(t,m);return P?rt(M):M}let _=s;T!==t&&(P?_=function(M,F){return s.call(this,rt(M),F,t)}:s.length>2&&(_=function(M,F){return s.call(this,M,F,t)}));const b=C.call(T,_,c);return P&&f?f(b):b}function Qo(t,i,s,c){const f=qn(t);let m=s;return f!==t&&(jt(t)?s.length>3&&(m=function(T,P,C){return s.call(this,T,P,C,t)}):m=function(T,P,C){return s.call(this,T,rt(P),C,t)}),f[i](m,...c)}function Vn(t,i,s){const c=le(t);at(c,"iterate",Ar);const f=c[i](...s);return(f===-1||f===!1)&&ou(s[0])?(s[0]=le(s[0]),c[i](...s)):f}function Wr(t,i,s=[]){zs(),zn();const c=le(t)[i].apply(t,s);return Ln(),Ls(),c}const Bs=Ns("__proto__,__v_isRef,__isVue"),Xo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Cr));function $s(t){Cr(t)||(t=String(t));const i=le(this);return at(i,"has",t),i.hasOwnProperty(t)}class ko{constructor(i=!1,s=!1){this._isReadonly=i,this._isShallow=s}get(i,s,c){const f=this._isReadonly,m=this._isShallow;if(s==="__v_isReactive")return!f;if(s==="__v_isReadonly")return f;if(s==="__v_isShallow")return m;if(s==="__v_raw")return c===(f?m?tu:si:m?eu:ai).get(i)||Object.getPrototypeOf(i)===Object.getPrototypeOf(c)?i:void 0;const T=ur(i);if(!f){let C;if(T&&(C=js[s]))return C;if(s==="hasOwnProperty")return $s}const P=Reflect.get(i,s,hr(i)?i:c);return(Cr(s)?Xo.has(s):Bs(s))||(f||at(i,"get",s),m)?P:hr(P)?T&&Mn(s)?P:P.value:Xr(P)?f?ci(P):ui(P):P}}class qs extends ko{constructor(i=!1){super(!1,i)}set(i,s,c,f){let m=i[s];if(!this._isShallow){const C=lr(m);if(!jt(c)&&!lr(c)&&(m=le(m),c=le(c)),!ur(i)&&hr(m)&&!hr(c))return C?!1:(m.value=c,!0)}const T=ur(i)&&Mn(s)?Number(s)<i.length:_n(i,s),P=Reflect.set(i,s,c,hr(i)?i:f);return i===le(f)&&(T?cr(c,m)&&zt(i,"set",s,c,m):zt(i,"add",s,c)),P}deleteProperty(i,s){const c=_n(i,s),f=i[s],m=Reflect.deleteProperty(i,s);return m&&c&&zt(i,"delete",s,void 0,f),m}has(i,s){const c=Reflect.has(i,s);return(!Cr(s)||!Xo.has(s))&&at(i,"has",s),c}ownKeys(i){return at(i,"iterate",ur(i)?"length":Qt),Reflect.ownKeys(i)}}class Hs extends ko{constructor(i=!1){super(!0,i)}set(i,s){return ze.NODE_ENV!=="production"&&dr(`Set operation on key "${String(s)}" failed: target is readonly.`,i),!0}deleteProperty(i,s){return ze.NODE_ENV!=="production"&&dr(`Delete operation on key "${String(s)}" failed: target is readonly.`,i),!0}}const Vs=new qs,Gs=new Hs,Gn=t=>t,en=t=>Reflect.getPrototypeOf(t);function tn(t,i,s=!1,c=!1){t=t.__v_raw;const f=le(t),m=le(i);s||(cr(i,m)&&at(f,"get",i),at(f,"get",m));const{has:T}=en(f),P=c?Gn:s?Jn:rt;if(T.call(f,i))return P(t.get(i));if(T.call(f,m))return P(t.get(m));t!==f&&t.get(i)}function rn(t,i=!1){const s=this.__v_raw,c=le(s),f=le(t);return i||(cr(t,f)&&at(c,"has",t),at(c,"has",f)),t===f?s.has(t):s.has(t)||s.has(f)}function nn(t,i=!1){return t=t.__v_raw,!i&&at(le(t),"iterate",Qt),Reflect.get(t,"size",t)}function ei(t,i=!1){!i&&!jt(t)&&!lr(t)&&(t=le(t));const s=le(this);return en(s).has.call(s,t)||(s.add(t),zt(s,"add",t,t)),this}function ti(t,i,s=!1){!s&&!jt(i)&&!lr(i)&&(i=le(i));const c=le(this),{has:f,get:m}=en(c);let T=f.call(c,t);T?ze.NODE_ENV!=="production"&&ii(c,f,t):(t=le(t),T=f.call(c,t));const P=m.call(c,t);return c.set(t,i),T?cr(i,P)&&zt(c,"set",t,i,P):zt(c,"add",t,i),this}function ri(t){const i=le(this),{has:s,get:c}=en(i);let f=s.call(i,t);f?ze.NODE_ENV!=="production"&&ii(i,s,t):(t=le(t),f=s.call(i,t));const m=c?c.call(i,t):void 0,T=i.delete(t);return f&&zt(i,"delete",t,void 0,m),T}function ni(){const t=le(this),i=t.size!==0,s=ze.NODE_ENV!=="production"?Nr(t)?new Map(t):new Set(t):void 0,c=t.clear();return i&&zt(t,"clear",void 0,void 0,s),c}function on(t,i){return function(c,f){const m=this,T=m.__v_raw,P=le(T),C=i?Gn:t?Jn:rt;return!t&&at(P,"iterate",Qt),T.forEach((_,b)=>c.call(f,C(_),C(b),m))}}function an(t,i,s){return function(...c){const f=this.__v_raw,m=le(f),T=Nr(m),P=t==="entries"||t===Symbol.iterator&&T,C=t==="keys"&&T,_=f[t](...c),b=s?Gn:i?Jn:rt;return!i&&at(m,"iterate",C?$n:Qt),{next(){const{value:M,done:F}=_.next();return F?{value:M,done:F}:{value:P?[b(M[0]),b(M[1])]:b(M),done:F}},[Symbol.iterator](){return this}}}}function Lt(t){return function(...i){if(ze.NODE_ENV!=="production"){const s=i[0]?`on key "${i[0]}" `:"";dr(`${Ws(t)} operation ${s}failed: target is readonly.`,le(this))}return t==="delete"?!1:t==="clear"?void 0:this}}function Js(){const t={get(m){return tn(this,m)},get size(){return nn(this)},has:rn,add:ei,set:ti,delete:ri,clear:ni,forEach:on(!1,!1)},i={get(m){return tn(this,m,!1,!0)},get size(){return nn(this)},has:rn,add(m){return ei.call(this,m,!0)},set(m,T){return ti.call(this,m,T,!0)},delete:ri,clear:ni,forEach:on(!1,!0)},s={get(m){return tn(this,m,!0)},get size(){return nn(this,!0)},has(m){return rn.call(this,m,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:on(!0,!1)},c={get(m){return tn(this,m,!0,!0)},get size(){return nn(this,!0)},has(m){return rn.call(this,m,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:on(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(m=>{t[m]=an(m,!1,!1),s[m]=an(m,!0,!1),i[m]=an(m,!1,!0),c[m]=an(m,!0,!0)}),[t,s,i,c]}const[Ks,Ys,Zs,Qs]=Js();function oi(t,i){const s=i?t?Qs:Zs:t?Ys:Ks;return(c,f,m)=>f==="__v_isReactive"?!t:f==="__v_isReadonly"?t:f==="__v_raw"?c:Reflect.get(_n(s,f)&&f in c?s:c,f,m)}const Xs={get:oi(!1,!1)},ks={get:oi(!0,!1)};function ii(t,i,s){const c=le(s);if(c!==s&&i.call(t,c)){const f=Bo(t);dr(`Reactive ${f} contains both the raw and reactive versions of the same object${f==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const ai=new WeakMap,eu=new WeakMap,si=new WeakMap,tu=new WeakMap;function ru(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nu(t){return t.__v_skip||!Object.isExtensible(t)?0:ru(Bo(t))}function ui(t){return lr(t)?t:di(t,!1,Vs,Xs,ai)}function ci(t){return di(t,!0,Gs,ks,si)}function di(t,i,s,c,f){if(!Xr(t))return ze.NODE_ENV!=="production"&&dr(`value cannot be made ${i?"readonly":"reactive"}: ${String(t)}`),t;if(t.__v_raw&&!(i&&t.__v_isReactive))return t;const m=f.get(t);if(m)return m;const T=nu(t);if(T===0)return t;const P=new Proxy(t,T===2?c:s);return f.set(t,P),P}function lr(t){return!!(t&&t.__v_isReadonly)}function jt(t){return!!(t&&t.__v_isShallow)}function ou(t){return t?!!t.__v_raw:!1}function le(t){const i=t&&t.__v_raw;return i?le(i):t}const rt=t=>Xr(t)?ui(t):t,Jn=t=>Xr(t)?ci(t):t;function hr(t){return t?t.__v_isRef===!0:!1}function Ct(t){return iu(t,!1)}function iu(t,i){return hr(t)?t:new au(t,i)}class au{constructor(i,s){this.dep=new Yo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?i:le(i),this._value=s?i:rt(i),this.__v_isShallow=s}get value(){return ze.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track(),this._value}set value(i){const s=this._rawValue,c=this.__v_isShallow||jt(i)||lr(i);i=c?i:le(i),cr(i,s)&&(this._rawValue=i,this._value=c?i:rt(i),ze.NODE_ENV!=="production"?this.dep.trigger({target:this,type:"set",key:"value",newValue:i,oldValue:s}):this.dep.trigger())}}function su(){const t=new Set,i=f=>{t.delete(f)};return{on:f=>(t.add(f),{off:()=>i(f)}),off:i,trigger:(...f)=>Promise.all(Array.from(t).map(m=>m(...f)))}}async function uu(t){try{return{data:await t,error:null}}catch(i){return{data:null,error:i||{message:"Unknown error"}}}}var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fi={exports:{}};(function(t,i){(function(s,c){t.exports=c()})(typeof self<"u"?self:cu,function(){return function(s){var c={};function f(m){if(c[m])return c[m].exports;var T=c[m]={i:m,l:!1,exports:{}};return s[m].call(T.exports,T,T.exports,f),T.l=!0,T.exports}return f.m=s,f.c=c,f.d=function(m,T,P){f.o(m,T)||Object.defineProperty(m,T,{enumerable:!0,get:P})},f.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},f.t=function(m,T){if(1&T&&(m=f(m)),8&T||4&T&&typeof m=="object"&&m&&m.__esModule)return m;var P=Object.create(null);if(f.r(P),Object.defineProperty(P,"default",{enumerable:!0,value:m}),2&T&&typeof m!="string")for(var C in m)f.d(P,C,(function(_){return m[_]}).bind(null,C));return P},f.n=function(m){var T=m&&m.__esModule?function(){return m.default}:function(){return m};return f.d(T,"a",T),T},f.o=function(m,T){return{}.hasOwnProperty.call(m,T)},f.p="",f(f.s=0)}([function(s,c,f){f.r(c),f.d(c,"PopupOpenError",function(){return io}),f.d(c,"create",function(){return Vu}),f.d(c,"destroy",function(){return Gu}),f.d(c,"destroyComponents",function(){return ya}),f.d(c,"destroyAll",function(){return Ea}),f.d(c,"PROP_TYPE",function(){return ve}),f.d(c,"PROP_SERIALIZATION",function(){return Tn}),f.d(c,"CONTEXT",function(){return Oe}),f.d(c,"EVENT",function(){return Ee});function m(e,r){return(m=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n})(e,r)}function T(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,m(e,r)}function P(){return(P=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function C(e){try{if(!e)return!1;if(typeof Promise<"u"&&e instanceof Promise)return!0;if(typeof window<"u"&&typeof window.Window=="function"&&e instanceof window.Window||typeof window<"u"&&typeof window.constructor=="function"&&e instanceof window.constructor)return!1;var r={}.toString;if(r){var n=r.call(e);if(n==="[object Window]"||n==="[object global]"||n==="[object DOMWindow]")return!1}if(typeof e.then=="function")return!0}catch{return!1}return!1}var _=[],b=[],M=0,F;function re(){if(!M&&F){var e=F;F=null,e.resolve()}}function ae(){M+=1}function ut(){M-=1,re()}var O=function(){function e(n){var o=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var a,u,d=!1,h=!1,l=!1;ae();try{n(function(v){l?o.resolve(v):(d=!0,a=v)},function(v){l?o.reject(v):(h=!0,u=v)})}catch(v){ut(),this.reject(v);return}ut(),l=!0,d?this.resolve(a):h&&this.reject(u)}}var r=e.prototype;return r.resolve=function(n){if(this.resolved||this.rejected)return this;if(C(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},r.reject=function(n){var o=this;if(this.resolved||this.rejected)return this;if(C(n))throw new Error("Can not reject promise with another promise");if(!n){var a=n&&typeof n.toString=="function"?n.toString():{}.toString.call(n);n=new Error("Expected reject to be called with Error, got "+a)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){o.errorHandled||function(u,d){if(_.indexOf(u)===-1){_.push(u),setTimeout(function(){throw u},1);for(var h=0;h<b.length;h++)b[h](u,d)}}(n,o)},1),this.dispatch(),this},r.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},r.dispatch=function(){var n=this.resolved,o=this.rejected,a=this.handlers;if(!this.dispatching&&(n||o)){this.dispatching=!0,ae();for(var u=function(g,E){return g.then(function(R){E.resolve(R)},function(R){E.reject(R)})},d=0;d<a.length;d++){var h=a[d],l=h.onSuccess,v=h.onError,y=h.promise,w=void 0;if(n)try{w=l?l(this.value):this.value}catch(g){y.reject(g);continue}else if(o){if(!v){y.reject(this.error);continue}try{w=v(this.error)}catch(g){y.reject(g);continue}}if(w instanceof e&&(w.resolved||w.rejected)){var p=w;p.resolved?y.resolve(p.value):y.reject(p.error),p.errorHandled=!0}else C(w)?w instanceof e&&(w.resolved||w.rejected)?w.resolved?y.resolve(w.value):y.reject(w.error):u(w,y):y.resolve(w)}a.length=0,this.dispatching=!1,ut()}},r.then=function(n,o){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.then expected a function for success handler");if(o&&typeof o!="function"&&!o.call)throw new Error("Promise.then expected a function for error handler");var a=new e;return this.handlers.push({promise:a,onSuccess:n,onError:o}),this.errorHandled=!0,this.dispatch(),a},r.catch=function(n){return this.then(void 0,n)},r.finally=function(n){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(o){return e.try(n).then(function(){return o})},function(o){return e.try(n).then(function(){throw o})})},r.timeout=function(n,o){var a=this;if(this.resolved||this.rejected)return this;var u=setTimeout(function(){a.resolved||a.rejected||a.reject(o||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(d){return clearTimeout(u),d})},r.toPromise=function(){if(typeof Promise>"u")throw new TypeError("Could not find Promise");return Promise.resolve(this)},r.lazy=function(){return this.errorHandled=!0,this},e.resolve=function(n){return n instanceof e?n:C(n)?new e(function(o,a){return n.then(o,a)}):new e().resolve(n)},e.reject=function(n){return new e().reject(n)},e.asyncReject=function(n){return new e().asyncReject(n)},e.all=function(n){var o=new e,a=n.length,u=[].slice();if(!a)return o.resolve(u),o;for(var d=function(v,y,w){return y.then(function(p){u[v]=p,(a-=1)==0&&o.resolve(u)},function(p){w.reject(p)})},h=0;h<n.length;h++){var l=n[h];if(l instanceof e){if(l.resolved){u[h]=l.value,a-=1;continue}}else if(!C(l)){u[h]=l,a-=1;continue}d(h,e.resolve(l),o)}return a===0&&o.resolve(u),o},e.hash=function(n){var o={},a=[],u=function(h){if(n.hasOwnProperty(h)){var l=n[h];C(l)?a.push(l.then(function(v){o[h]=v})):o[h]=l}};for(var d in n)u(d);return e.all(a).then(function(){return o})},e.map=function(n,o){return e.all(n.map(o))},e.onPossiblyUnhandledException=function(n){return function(o){return b.push(o),{cancel:function(){b.splice(b.indexOf(o),1)}}}(n)},e.try=function(n,o,a){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.try expected a function");var u;ae();try{u=n.apply(o,a||[])}catch(d){return ut(),e.reject(d)}return ut(),e.resolve(u)},e.delay=function(n){return new e(function(o){setTimeout(o,n)})},e.isPromise=function(n){return!!(n&&n instanceof e)||C(n)},e.flush=function(){return function(n){var o=F=F||new n;return re(),o}(e)},e}();function mt(e){return{}.toString.call(e)==="[object RegExp]"}var Ze={IFRAME:"iframe",POPUP:"popup"},Et=`Call was rejected by callee.\r
`;function mr(e){return e===void 0&&(e=window),e.location.protocol}function Ut(e){if(e===void 0&&(e=window),e.mockDomain){var r=e.mockDomain.split("//")[0];if(r)return r}return mr(e)}function gr(e){return e===void 0&&(e=window),Ut(e)==="about:"}function ie(e){if(e===void 0&&(e=window),e)try{if(e.parent&&e.parent!==e)return e.parent}catch{}}function We(e){if(e===void 0&&(e=window),e&&!ie(e))try{return e.opener}catch{}}function bt(e){try{return!0}catch{}return!1}function Ot(e){e===void 0&&(e=window);var r=e.location;if(!r)throw new Error("Can not read window location");var n=mr(e);if(!n)throw new Error("Can not read window protocol");if(n==="file:")return"file://";if(n==="about:"){var o=ie(e);return o&&bt()?Ot(o):"about://"}var a=r.host;if(!a)throw new Error("Can not read window host");return n+"//"+a}function D(e){e===void 0&&(e=window);var r=Ot(e);return r&&e.mockDomain&&e.mockDomain.indexOf("mock:")===0?e.mockDomain:r}function j(e){if(!function(r){try{if(r===window)return!0}catch{}try{var n=Object.getOwnPropertyDescriptor(r,"location");if(n&&n.enumerable===!1)return!1}catch{}try{if(gr(r)&&bt())return!0}catch{}try{if(function(o){return o===void 0&&(o=window),Ut(o)==="mock:"}(r)&&bt())return!0}catch{}try{if(Ot(r)===Ot(window))return!0}catch{}return!1}(e))return!1;try{if(e===window||gr(e)&&bt()||D(window)===D(e))return!0}catch{}return!1}function J(e){if(!j(e))throw new Error("Expected window to be same domain");return e}function we(e,r){if(!e||!r)return!1;var n=ie(r);return n?n===e:function(o){var a=[];try{for(;o.parent!==o;)a.push(o.parent),o=o.parent}catch{}return a}(r).indexOf(e)!==-1}function et(e){var r=[],n;try{n=e.frames}catch{n=e}var o;try{o=n.length}catch{}if(o===0)return r;if(o){for(var a=0;a<o;a++){var u=void 0;try{u=n[a]}catch{continue}r.push(u)}return r}for(var d=0;d<100;d++){var h=void 0;try{h=n[d]}catch{return r}if(!h)return r;r.push(h)}return r}function Je(e){for(var r=[],n=0,o=et(e);n<o.length;n++){var a=o[n];r.push(a);for(var u=0,d=Je(a);u<d.length;u++)r.push(d[u])}return r}function Ke(e){e===void 0&&(e=window);try{if(e.top)return e.top}catch{}if(ie(e)===e)return e;try{if(we(window,e)&&window.top)return window.top}catch{}try{if(we(e,window)&&window.top)return window.top}catch{}for(var r=0,n=Je(e);r<n.length;r++){var o=n[r];try{if(o.top)return o.top}catch{}if(ie(o)===o)return o}}function Re(e){var r=Ke(e);if(!r)throw new Error("Can not determine top window");var n=[].concat(Je(r),[r]);return n.indexOf(e)===-1&&(n=[].concat(n,[e],Je(e))),n}var Qe=[],sn=[];function xe(e,r){r===void 0&&(r=!0);try{if(e===window)return!1}catch{return!0}try{if(!e)return!0}catch{return!0}try{if(e.closed)return!0}catch(a){return!a||a.message!==Et}if(r&&j(e))try{if(e.mockclosed)return!0}catch{}try{if(!e.parent||!e.top)return!0}catch{}var n=function(a,u){for(var d=0;d<a.length;d++)try{if(a[d]===u)return d}catch{}return-1}(Qe,e);if(n!==-1){var o=sn[n];if(o&&function(a){if(!a.contentWindow||!a.parentNode)return!0;var u=a.ownerDocument;if(u&&u.documentElement&&!u.documentElement.contains(a)){for(var d=a;d.parentNode&&d.parentNode!==d;)d=d.parentNode;if(!d.host||!u.documentElement.contains(d.host))return!0}return!1}(o))return!0}return!1}function yr(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent}function Er(e,r){for(var n=et(e),o=0;o<n.length;o++){var a=n[o];try{if(j(a)&&a.name===r&&n.indexOf(a)!==-1)return a}catch{}}try{if(n.indexOf(e.frames[r])!==-1)return e.frames[r]}catch{}try{if(n.indexOf(e[r])!==-1)return e[r]}catch{}}function _r(e,r){return e===We(r)}function Xt(e){return e===void 0&&(e=window),We(e=e||window)||ie(e)||void 0}function Mr(e,r){for(var n=0;n<e.length;n++)for(var o=e[n],a=0;a<r.length;a++)if(o===r[a])return!0;return!1}function br(e){e===void 0&&(e=window);for(var r=0,n=e;n;)(n=ie(n))&&(r+=1);return r}function un(e,r){var n=Ke(e)||e,o=Ke(r)||r;try{if(n&&o)return n===o}catch{}var a=Re(e),u=Re(r);if(Mr(a,u))return!0;var d=We(n),h=We(o);return d&&Mr(Re(d),u)||h&&Mr(Re(h),a),!1}function ct(e,r){if(typeof e=="string"){if(typeof r=="string")return e==="*"||r===e;if(mt(r)||Array.isArray(r))return!1}return mt(e)?mt(r)?e.toString()===r.toString():!Array.isArray(r)&&!!r.match(e):!!Array.isArray(e)&&(Array.isArray(r)?JSON.stringify(e)===JSON.stringify(r):!mt(r)&&e.some(function(n){return ct(n,r)}))}function It(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):D()}function wi(e,r,n,o){n===void 0&&(n=1e3),o===void 0&&(o=1/0);var a;return function u(){if(xe(e))return a&&clearTimeout(a),r();o<=0?clearTimeout(a):(o-=n,a=setTimeout(u,n))}(),{cancel:function(){a&&clearTimeout(a)}}}function kt(e){try{if(e===window)return!0}catch(r){if(r&&r.message===Et)return!0}try{if({}.toString.call(e)==="[object Window]")return!0}catch(r){if(r&&r.message===Et)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(r){if(r&&r.message===Et)return!0}try{if(e&&e.self===e)return!0}catch(r){if(r&&r.message===Et)return!0}try{if(e&&e.parent===e)return!0}catch(r){if(r&&r.message===Et)return!0}try{if(e&&e.top===e)return!0}catch(r){if(r&&r.message===Et)return!0}try{if(e&&e.__cross_domain_utils_window_check__==="__unlikely_value__")return!1}catch{return!0}try{if("postMessage"in e&&"self"in e&&"location"in e)return!0}catch{}return!1}function Kn(e){if(r=It(e),r.indexOf("mock:")!==0)return e;var r;throw new Error("Mock urls not supported out of test mode")}function mi(e){if(j(e))return J(e).frameElement;for(var r=0,n=document.querySelectorAll("iframe");r<n.length;r++){var o=n[r];if(o&&o.contentWindow&&o.contentWindow===e)return o}}function gi(e){if(function(n){return n===void 0&&(n=window),!!ie(n)}(e)){var r=mi(e);if(r&&r.parentElement){r.parentElement.removeChild(r);return}}try{e.close()}catch{}}function cn(e,r){for(var n=0;n<e.length;n++)try{if(e[n]===r)return n}catch{}return-1}var dn=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if(typeof WeakMap>"u"||Object.freeze===void 0)return!1;try{var n=new WeakMap,o={};return Object.freeze(o),n.set(o,"__testvalue__"),n.get(o)==="__testvalue__"}catch{return!1}}())try{this.weakmap=new WeakMap}catch{}this.keys=[],this.values=[]}var r=e.prototype;return r._cleanupClosedWindows=function(){for(var n=this.weakmap,o=this.keys,a=0;a<o.length;a++){var u=o[a];if(kt(u)&&xe(u)){if(n)try{n.delete(u)}catch{}o.splice(a,1),this.values.splice(a,1),a-=1}}},r.isSafeToReadWrite=function(n){return!kt(n)},r.set=function(n,o){if(!n)throw new Error("WeakMap expected key");var a=this.weakmap;if(a)try{a.set(n,o)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var u=this.name,d=n[u];d&&d[0]===n?d[1]=o:Object.defineProperty(n,u,{value:[n,o],writable:!0});return}catch{}this._cleanupClosedWindows();var h=this.keys,l=this.values,v=cn(h,n);v===-1?(h.push(n),l.push(o)):l[v]=o},r.get=function(n){if(!n)throw new Error("WeakMap expected key");var o=this.weakmap;if(o)try{if(o.has(n))return o.get(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return a&&a[0]===n?a[1]:void 0}catch{}this._cleanupClosedWindows();var u=cn(this.keys,n);if(u!==-1)return this.values[u]},r.delete=function(n){if(!n)throw new Error("WeakMap expected key");var o=this.weakmap;if(o)try{o.delete(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];a&&a[0]===n&&(a[0]=a[1]=void 0)}catch{}this._cleanupClosedWindows();var u=this.keys,d=cn(u,n);d!==-1&&(u.splice(d,1),this.values.splice(d,1))},r.has=function(n){if(!n)throw new Error("WeakMap expected key");var o=this.weakmap;if(o)try{if(o.has(n))return!0}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return!(!a||a[0]!==n)}catch{}return this._cleanupClosedWindows(),cn(this.keys,n)!==-1},r.getOrSet=function(n,o){if(this.has(n))return this.get(n);var a=o();return this.set(n,a),a},e}();function yi(e){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function gu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ei(e,r,n){return(Ei=gu()?Reflect.construct:function(o,a,u){var d=[null];d.push.apply(d,a);var h=new(Function.bind.apply(o,d));return u&&m(h,u.prototype),h}).apply(null,arguments)}function bi(e){var r=typeof Map=="function"?new Map:void 0;return(bi=function(n){if(n===null||(o=n,Function.toString.call(o).indexOf("[native code]")===-1))return n;var o;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(n))return r.get(n);r.set(n,a)}function a(){return Ei(n,arguments,yi(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),m(a,n)})(e)}function Yn(e){var r=!1;try{(e instanceof window.Element||e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object")&&(r=!0)}catch{}return r}function Zn(e){return e.name||e.__name__||e.displayName||"anonymous"}function Qn(e,r){try{delete e.name,e.name=r}catch{}return e.__name__=e.displayName=r,e}function Xn(e){if(typeof btoa=="function")return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(r,n){return String.fromCharCode(parseInt(n,16))})).replace(/[=]/g,"");if(typeof Buffer<"u")return Buffer.from(e,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}function Xe(){var e="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+Xn(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var fn;function kn(e){try{return JSON.stringify([].slice.call(e),function(r,n){return typeof n=="function"?"memoize["+function(o){if(fn=fn||new dn,o==null||typeof o!="object"&&typeof o!="function")throw new Error("Invalid object");var a=fn.get(o);return a||(a=typeof o+":"+Xe(),fn.set(o,a)),a}(n)+"]":Yn(n)?{}:n})}catch{throw new Error("Arguments not serializable -- can not be used to memoize")}}function yu(){return{}}var Fr=0,Pi=0;function Bt(e,r){r===void 0&&(r={});var n=r.thisNamespace,o=n!==void 0&&n,a=r.time,u,d,h=Fr;Fr+=1;var l=function(){for(var v=arguments.length,y=new Array(v),w=0;w<v;w++)y[w]=arguments[w];h<Pi&&(u=null,d=null,h=Fr,Fr+=1);var p;p=o?(d=d||new dn).getOrSet(this,yu):u=u||{};var g;try{g=kn(y)}catch{return e.apply(this,arguments)}var E=p[g];if(E&&a&&Date.now()-E.time<a&&(delete p[g],E=null),E)return E.value;var R=Date.now(),S=e.apply(this,arguments);return p[g]={time:R,value:S},S};return l.reset=function(){u=null,d=null},Qn(l,(r.name||Zn(e))+"::memoized")}Bt.clear=function(){Pi=Fr};function Eu(e){var r={};function n(){for(var o=arguments,a=this,u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];var l=kn(d);return r.hasOwnProperty(l)||(r[l]=O.try(function(){return e.apply(a,o)}).finally(function(){delete r[l]})),r[l]}return n.reset=function(){r={}},Qn(n,Zn(e)+"::promiseMemoized")}function ye(){}function ln(e){var r=!1;return Qn(function(){if(!r)return r=!0,e.apply(this,arguments)},Zn(e)+"::once")}function Pr(e,r){if(r===void 0&&(r=1),r>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+{}.toString.call(e)+">";if(typeof e=="string")return e;if(e instanceof Error){var n=e&&e.stack,o=e&&e.message;if(n&&o)return n.indexOf(o)!==-1?n:o+`
`+n;if(n)return n;if(o)return o}return e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}catch(a){return"Error while stringifying error: "+Pr(a,r+1)}}function hn(e){return typeof e=="string"?e:e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}function Tr(e,r){if(!r)return e;if(Object.assign)return Object.assign(e,r);for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}Bt(function(e){if(Object.values)return Object.values(e);var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(e[n]);return r});function bu(e){return e}function zr(e,r){var n;return function o(){n=setTimeout(function(){e(),o()},r)}(),{cancel:function(){clearTimeout(n)}}}function eo(e){return e.replace(/-([a-z])/g,function(r){return r[1].toUpperCase()})}function Ti(e,r,n){if(Array.isArray(e)){if(typeof r!="number")throw new TypeError("Array key must be number")}else if(typeof e=="object"&&e!==null&&typeof r!="string")throw new TypeError("Object key must be string");Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){delete e[r];var o=n();return e[r]=o,o},set:function(o){delete e[r],e[r]=o}})}function to(e){return[].slice.call(e)}function Ri(e){return typeof(r=e)=="object"&&r!==null&&{}.toString.call(e)==="[object Object]";var r}function ro(e){if(!Ri(e))return!1;var r=e.constructor;if(typeof r!="function")return!1;var n=r.prototype;return!!Ri(n)&&!!n.hasOwnProperty("isPrototypeOf")}function pn(e,r,n){if(n===void 0&&(n=""),Array.isArray(e)){for(var o=e.length,a=[],u=function(y){Ti(a,y,function(){var w=n?n+"."+y:""+y,p=r(e[y],y,w);return(ro(p)||Array.isArray(p))&&(p=pn(p,r,w)),p})},d=0;d<o;d++)u(d);return a}if(ro(e)){var h={},l=function(y){if(!e.hasOwnProperty(y))return 1;Ti(h,y,function(){var w=n?n+"."+y:""+y,p=r(e[y],y,w);return(ro(p)||Array.isArray(p))&&(p=pn(p,r,w)),p})};for(var v in e)l(v);return h}throw new Error("Pass an object or array")}function $t(e){return e!=null}function no(e){return{}.toString.call(e)==="[object RegExp]"}function Lr(e,r,n){if(e.hasOwnProperty(r))return e[r];var o=n();return e[r]=o,o}function vn(e){var r=[],n=!1,o,a={set:function(u,d){return n||(e[u]=d,a.register(function(){delete e[u]})),d},register:function(u){var d=ln(function(){return u(o)});return n?u(o):r.push(d),{cancel:function(){var h=r.indexOf(d);h!==-1&&r.splice(h,1)}}},all:function(u){o=u;var d=[];for(n=!0;r.length;){var h=r.shift();d.push(h())}return O.all(d).then(ye)}};return a}function wn(e,r){if(r==null)throw new Error("Expected "+e+" to be present");return r}var Pu=function(e){T(r,e);function r(n){var o;return(o=e.call(this,n)||this).name=o.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(o),o.constructor):o.stack=new Error(n).stack,o}return r}(bi(Error));function Oi(){var e=document.body;if(!e)throw new Error("Body element not found");return e}function mn(){return!!document.body&&document.readyState==="complete"}function Si(){return!!document.body&&document.readyState==="interactive"}function xi(e){return encodeURIComponent(e)}Bt(function(){return new O(function(e){if(mn()||Si())return e();var r=setInterval(function(){if(mn()||Si())return clearInterval(r),e()},10)})});function Di(e){return function(r,n,o){o===void 0&&(o=[]);var a=r.__inline_memoize_cache__=r.__inline_memoize_cache__||{},u=kn(o);return a.hasOwnProperty(u)?a[u]:a[u]=(function(){var d={};if(!e||e.indexOf("=")===-1)return d;for(var h=0,l=e.split("&");h<l.length;h++){var v=l[h];(v=v.split("="))[0]&&v[1]&&(d[decodeURIComponent(v[0])]=decodeURIComponent(v[1]))}return d}).apply(void 0,o)}(Di,0,[e])}function Ni(e,r){return r===void 0&&(r={}),r&&Object.keys(r).length?function(n){return n===void 0&&(n={}),Object.keys(n).filter(function(o){return typeof n[o]=="string"||typeof n[o]=="boolean"}).map(function(o){var a=n[o];if(typeof a!="string"&&typeof a!="boolean")throw new TypeError("Invalid type for query");return xi(o)+"="+xi(a.toString())}).join("&")}(P({},Di(e),r)):e}function Tu(e,r){e.appendChild(r)}function oo(e,r){return r===void 0&&(r=document),Yn(e)?e:typeof e=="string"?r.querySelector(e):void 0}function Ci(e){return new O(function(r,n){var o=hn(e),a=oo(e);if(a)return r(a);if(mn())return n(new Error("Document is ready and element "+o+" does not exist"));var u=setInterval(function(){if(a=oo(e))r(a),clearInterval(u);else if(mn())return clearInterval(u),n(new Error("Document is ready and element "+o+" does not exist"))},10)})}var io=function(e){T(r,e);function r(){return e.apply(this,arguments)||this}return r}(Pu),gn;function Ii(e){if((gn=gn||new dn).has(e)){var r=gn.get(e);if(r)return r}var n=new O(function(o,a){e.addEventListener("load",function(){(function(u){if(function(){for(var d=0;d<Qe.length;d++){var h=!1;try{h=Qe[d].closed}catch{}h&&(sn.splice(d,1),Qe.splice(d,1))}}(),u&&u.contentWindow)try{Qe.push(u.contentWindow),sn.push(u)}catch{}})(e),o(e)}),e.addEventListener("error",function(u){e.contentWindow?o(e):a(u)})});return gn.set(e,n),n}function ao(e){return Ii(e).then(function(r){if(!r.contentWindow)throw new Error("Could not find window in iframe");return r.contentWindow})}function Ai(e,r){e===void 0&&(e={});var n=e.style||{},o=function(u,d,h){u===void 0&&(u="div"),d===void 0&&(d={}),u=u.toLowerCase();var l=document.createElement(u);if(d.style&&Tr(l.style,d.style),d.class&&(l.className=d.class.join(" ")),d.id&&l.setAttribute("id",d.id),d.attributes)for(var v=0,y=Object.keys(d.attributes);v<y.length;v++){var w=y[v];l.setAttribute(w,d.attributes[w])}if(d.styleSheet&&function(p,g,E){E===void 0&&(E=window.document),p.styleSheet?p.styleSheet.cssText=g:p.appendChild(E.createTextNode(g))}(l,d.styleSheet),d.html){if(u==="iframe")throw new Error("Iframe html can not be written unless container provided and iframe in DOM");l.innerHTML=d.html}return l}("iframe",{attributes:P({allowTransparency:"true"},e.attributes||{}),style:P({backgroundColor:"transparent",border:"none"},n),html:e.html,class:e.class}),a=window.navigator.userAgent.match(/MSIE|Edge/i);return o.hasAttribute("id")||o.setAttribute("id",Xe()),Ii(o),(e.url||a)&&o.setAttribute("src",e.url||"about:blank"),o}function Wi(e,r,n){return e.addEventListener(r,n),{cancel:function(){e.removeEventListener(r,n)}}}function Ru(e){e.style.setProperty("display","")}function _i(e){e.style.setProperty("display","none","important")}function jr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Rr(e){return!(e&&e.parentNode&&e.ownerDocument&&e.ownerDocument.documentElement&&e.ownerDocument.documentElement.contains(e))}function Mi(e,r,n){var o=n===void 0?{}:n,a=o.width,u=a===void 0||a,d=o.height,h=d===void 0||d,l=o.interval,v=l===void 0?100:l,y=o.win,w=y===void 0?window:y,p=e.offsetWidth,g=e.offsetHeight,E=!1;r({width:p,height:g});var R=function(){if(!E&&function(A){return!!(A.offsetWidth||A.offsetHeight||A.getClientRects().length)}(e)){var z=e.offsetWidth,V=e.offsetHeight;(u&&z!==p||h&&V!==g)&&r({width:z,height:V}),p=z,g=V}},S,I;return w.addEventListener("resize",R),w.ResizeObserver!==void 0?((S=new w.ResizeObserver(R)).observe(e),I=zr(R,10*v)):w.MutationObserver!==void 0?((S=new w.MutationObserver(R)).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),I=zr(R,10*v)):I=zr(R,v),{cancel:function(){E=!0,S.disconnect(),window.removeEventListener("resize",R),I.cancel()}}}function so(e){for(;e.parentNode;)e=e.parentNode;return e.toString()==="[object ShadowRoot]"}var yn=typeof document<"u"?document.currentScript:null,Ou=Bt(function(){if(yn||(yn=function(){try{var e=function(){try{throw new Error("_")}catch(d){return d.stack||""}}(),r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(e),n=r&&r[1];if(!n)return;for(var o=0,a=[].slice.call(document.getElementsByTagName("script")).reverse();o<a.length;o++){var u=a[o];if(u.src&&u.src===n)return u}}catch{}}()))return yn;throw new Error("Can not determine current script")}),Su=Xe();Bt(function(){var e;try{e=Ou()}catch{return Su}var r=e.getAttribute("data-uid");if(r&&typeof r=="string"||(r=e.getAttribute("data-uid-auto"))&&typeof r=="string")return r;if(e.src){var n=function(o){for(var a="",u=0;u<o.length;u++){var d=o[u].charCodeAt(0)*u;o[u+1]&&(d+=o[u+1].charCodeAt(0)*(u-1)),a+=String.fromCharCode(97+Math.abs(d)%26)}return a}(JSON.stringify({src:e.src,dataset:e.dataset}));r="uid_"+n.slice(n.length-30)}else r=Xe();return e.setAttribute("data-uid-auto",r),r});function Fi(e){return typeof e=="string"&&/^[0-9]+%$/.test(e)}function uo(e){if(typeof e=="number")return e;var r=e.match(/^([0-9]+)(px|%)$/);if(!r)throw new Error("Could not match css value from "+e);return parseInt(r[1],10)}function zi(e){return uo(e)+"px"}function Li(e){return typeof e=="number"?zi(e):Fi(e)?e:zi(e)}function ji(e,r){if(typeof e=="number")return e;if(Fi(e))return parseInt(r*uo(e)/100,10);if(typeof(n=e)=="string"&&/^[0-9]+px$/.test(n))return uo(e);var n;throw new Error("Can not normalize dimension: "+e)}function St(e){e===void 0&&(e=window);var r="__post_robot_11_0_0__";return e!==window?e[r]:e[r]=e[r]||{}}var Ui=function(){return{}};function he(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Ui),Lr(St(),e,function(){var n=r();return{has:function(o){return n.hasOwnProperty(o)},get:function(o,a){return n.hasOwnProperty(o)?n[o]:a},set:function(o,a){return n[o]=a,a},del:function(o){delete n[o]},getOrSet:function(o,a){return Lr(n,o,a)},reset:function(){n=r()},keys:function(){return Object.keys(n)}}})}var xu=function(){};function En(){var e=St();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new xu,e.WINDOW_WILDCARD}function Ye(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Ui),he("windowStore").getOrSet(e,function(){var n=new dn,o=function(a){return n.getOrSet(a,r)};return{has:function(a){return o(a).hasOwnProperty(e)},get:function(a,u){var d=o(a);return d.hasOwnProperty(e)?d[e]:u},set:function(a,u){return o(a)[e]=u,u},del:function(a){delete o(a)[e]},getOrSet:function(a,u){return Lr(o(a),e,u)}}})}function Bi(){return he("instance").getOrSet("instanceID",Xe)}function $i(e,r){var n=r.domain,o=Ye("helloPromises"),a=o.get(e);a&&a.resolve({domain:n});var u=O.resolve({domain:n});return o.set(e,u),u}function co(e,r){return(0,r.send)(e,"postrobot_hello",{instanceID:Bi()},{domain:"*",timeout:-1}).then(function(n){var o=n.origin,a=n.data.instanceID;return $i(e,{domain:o}),{win:e,domain:o,instanceID:a}})}function qi(e,r){var n=r.send;return Ye("windowInstanceIDPromises").getOrSet(e,function(){return co(e,{send:n}).then(function(o){return o.instanceID})})}function Hi(e,r,n){r===void 0&&(r=5e3),n===void 0&&(n="Window");var o=function(a){return Ye("helloPromises").getOrSet(a,function(){return new O})}(e);return r!==-1&&(o=o.timeout(r,new Error(n+" did not load after "+r+"ms"))),o}function Vi(e){Ye("knownWindows").set(e,!0)}function fo(e){return typeof e=="object"&&e!==null&&typeof e.__type__=="string"}function Gi(e){return e===void 0?"undefined":e===null?"null":Array.isArray(e)?"array":typeof e=="function"?"function":typeof e=="object"?e instanceof Error?"error":typeof e.then=="function"?"promise":{}.toString.call(e)==="[object RegExp]"?"regex":{}.toString.call(e)==="[object Date]"?"date":"object":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":void 0}function er(e,r){return{__type__:e,__val__:r}}var dt,Du=((dt={}).function=function(){},dt.error=function(e){return er("error",{message:e.message,stack:e.stack,code:e.code,data:e.data})},dt.promise=function(){},dt.regex=function(e){return er("regex",e.source)},dt.date=function(e){return er("date",e.toJSON())},dt.array=function(e){return e},dt.object=function(e){return e},dt.string=function(e){return e},dt.number=function(e){return e},dt.boolean=function(e){return e},dt.null=function(e){return e},dt[void 0]=function(e){return er("undefined",e)},dt),Nu={},ft,Cu=((ft={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},ft.error=function(e){var r=e.stack,n=e.code,o=e.data,a=new Error(e.message);return a.code=n,o&&(a.data=o),a.stack=r+`

`+a.stack,a},ft.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},ft.regex=function(e){return new RegExp(e)},ft.date=function(e){return new Date(e)},ft.array=function(e){return e},ft.object=function(e){return e},ft.string=function(e){return e},ft.number=function(e){return e},ft.boolean=function(e){return e},ft.null=function(e){return e},ft[void 0]=function(){},ft),Iu={};function lo(){return!!yr(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function Ji(e){return!un(window,e)}function Ki(e,r){if(e){if(D()!==It(e))return!0}else if(r&&!j(r))return!0;return!1}function Yi(e){var r=e.win,n=e.domain;return!(!lo()||n&&!Ki(n,r)||r&&!Ji(r))}function ho(e){return"__postrobot_bridge___"+(e=e||It(e)).replace(/[^a-zA-Z0-9]+/g,"_")}function Zi(){return!!(window.name&&window.name===ho(D()))}var Au=new O(function(e){if(window.document&&window.document.body)return e(window.document.body);var r=setInterval(function(){if(window.document&&window.document.body)return clearInterval(r),e(window.document.body)},10)});function Qi(e){Ye("remoteWindowPromises").getOrSet(e,function(){return new O})}function po(e){var r=Ye("remoteWindowPromises").get(e);if(!r)throw new Error("Remote window promise not found");return r}function Xi(e,r,n){po(e).resolve(function(o,a,u){if(o!==e)throw new Error("Remote window does not match window");if(!ct(a,r))throw new Error("Remote domain "+a+" does not match domain "+r);n.fireAndForget(u)})}function vo(e,r){po(e).reject(r).catch(ye)}function bn(e){for(var r=e.win,n=e.name,o=e.domain,a=he("popupWindowsByName"),u=Ye("popupWindowsByWin"),d=0,h=a.keys();d<h.length;d++){var l=h[d],v=a.get(l);v&&!xe(v.win)||a.del(l)}if(xe(r))return{win:r,name:n,domain:o};var y=u.getOrSet(r,function(){return n?a.getOrSet(n,function(){return{win:r,name:n}}):{win:r}});if(y.win&&y.win!==r)throw new Error("Different window already linked for window: "+(n||"undefined"));return n&&(y.name=n,a.set(n,y)),o&&(y.domain=o,Qi(r)),u.set(r,y),y}function ki(e){var r=e.on,n=e.send,o=e.receiveMessage;a=window.open,window.open=function(u,d,h,l){var v=a.call(this,Kn(u),d,h,l);return v&&(bn({win:v,name:d,domain:u?It(u):null}),v)};var a;(function(u){var d=u.on,h=u.send,l=u.receiveMessage,v=he("popupWindowsByName");d("postrobot_open_tunnel",function(y){var w=y.source,p=y.origin,g=y.data,E=he("bridges").get(p);if(!E)throw new Error("Can not find bridge promise for domain "+p);return E.then(function(R){if(w!==R)throw new Error("Message source does not matched registered bridge for domain "+p);if(!g.name)throw new Error("Register window expected to be passed window name");if(!g.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!v.has(g.name))throw new Error("Window with name "+g.name+" does not exist, or was not opened by this window");var S=function(){return v.get(g.name)};if(!S().domain)throw new Error("We do not have a registered domain for window "+g.name);if(S().domain!==p)throw new Error("Message origin "+p+" does not matched registered window origin "+(S().domain||"unknown"));return Xi(S().win,p,g.sendMessage),{sendMessage:function(I){if(window&&!window.closed&&S()){var z=S().domain;if(z)try{l({data:I,origin:z,source:S().win},{on:d,send:h})}catch(V){O.reject(V)}}}}})})})({on:r,send:n,receiveMessage:o}),function(u){var d=u.send;St(window).openTunnelToParent=function(h){var l=h.name,v=h.source,y=h.canary,w=h.sendMessage,p=he("tunnelWindows"),g=ie(window);if(!g)throw new Error("No parent window found to open tunnel to");var E=function(R){var S=R.name,I=R.source,z=R.canary,V=R.sendMessage;(function(){for(var q=he("tunnelWindows"),L=0,X=q.keys();L<X.length;L++){var $=X[L];xe(q[$].source)&&q.del($)}})();var A=Xe();return he("tunnelWindows").set(A,{name:S,source:I,canary:z,sendMessage:V}),A}({name:l,source:v,canary:y,sendMessage:w});return d(g,"postrobot_open_tunnel",{name:l,sendMessage:function(){var R=p.get(E);if(R&&R.source&&!xe(R.source)){try{R.canary()}catch{return}R.sendMessage.apply(this,arguments)}}},{domain:"*"})}}({send:n}),function(u){var d=u.on,h=u.send,l=u.receiveMessage;O.try(function(){var v=We(window);if(v&&Yi({win:v})){return Qi(v),(y=v,Ye("remoteBridgeAwaiters").getOrSet(y,function(){return O.try(function(){var w=Er(y,ho(D()));if(w)return j(w)&&St(J(w))?w:new O(function(p){var g,E;g=setInterval(function(){if(w&&j(w)&&St(J(w)))return clearInterval(g),clearTimeout(E),p(w)},100),E=setTimeout(function(){return clearInterval(g),p()},2e3)})})})).then(function(w){return w?window.name?St(J(w)).openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(p){try{}catch{return}if(window&&!window.closed)try{l({data:p,origin:this.origin,source:this.source},{on:d,send:h})}catch(g){O.reject(g)}}}).then(function(p){var g=p.source,E=p.origin,R=p.data;if(g!==v)throw new Error("Source does not match opener");Xi(g,E,R.sendMessage)}).catch(function(p){throw vo(v,p),p}):vo(v,new Error("Can not register with opener: window does not have a name")):vo(v,new Error("Can not register with opener: no bridge found in opener"))});var y}})}({on:r,send:n,receiveMessage:o})}function wo(){for(var e=he("idToProxyWindow"),r=0,n=e.keys();r<n.length;r++){var o=n[r];e.get(o).shouldClean()&&e.del(o)}}function ea(e,r){var n=r.send,o=r.id,a=o===void 0?Xe():o,u=e.then(function(l){if(j(l))return J(l).name}),d=e.then(function(l){if(xe(l))throw new Error("Window is closed, can not determine type");return We(l)?Ze.POPUP:Ze.IFRAME});u.catch(ye),d.catch(ye);var h=function(){return e.then(function(l){if(!xe(l))return j(l)?J(l).name:u})};return{id:a,getType:function(){return d},getInstanceID:Eu(function(){return e.then(function(l){return qi(l,{send:n})})}),close:function(){return e.then(gi)},getName:h,focus:function(){return e.then(function(l){l.focus()})},isClosed:function(){return e.then(function(l){return xe(l)})},setLocation:function(l,v){return v===void 0&&(v={}),e.then(function(y){var w=window.location.protocol+"//"+window.location.host,p=v.method,g=p===void 0?"get":p,E=v.body;if(l.indexOf("/")===0)l=""+w+l;else if(!l.match(/^https?:\/\//)&&l.indexOf(w)!==0)throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(l));if(g==="post")return h().then(function(R){if(!R)throw new Error("Can not post to window without target name");(function(S){var I=S.url,z=S.target,V=S.body,A=S.method,q=A===void 0?"post":A,L=document.createElement("form");if(L.setAttribute("target",z),L.setAttribute("method",q),L.setAttribute("action",I),L.style.display="none",V)for(var X=0,$=Object.keys(V);X<$.length;X++){var ce,ne=$[X],K=document.createElement("input");K.setAttribute("name",ne),K.setAttribute("value",(ce=V[ne])==null?void 0:ce.toString()),L.appendChild(K)}Oi().appendChild(L),L.submit(),Oi().removeChild(L)})({url:l,target:R,method:g,body:E})});if(g!=="get")throw new Error("Unsupported method: "+g);if(j(y))try{if(y.location&&typeof y.location.replace=="function"){y.location.replace(l);return}}catch{}y.location=l})},setName:function(l){return e.then(function(v){bn({win:v,name:l});var y=j(v),w=mi(v);if(!y)throw new Error("Can not set name for cross-domain window: "+l);J(v).name=l,w&&w.setAttribute("name",l),u=O.resolve(l)})}}}var lt=function(){function e(n){var o=n.send,a=n.win,u=n.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new O,this.serializedWindow=u||ea(this.actualWindowPromise,{send:o}),he("idToProxyWindow").set(this.getID(),this),a&&this.setWindow(a,{send:o})}var r=e.prototype;return r.getID=function(){return this.serializedWindow.id},r.getType=function(){return this.serializedWindow.getType()},r.isPopup=function(){return this.getType().then(function(n){return n===Ze.POPUP})},r.setLocation=function(n,o){var a=this;return this.serializedWindow.setLocation(n,o).then(function(){return a})},r.getName=function(){return this.serializedWindow.getName()},r.setName=function(n){var o=this;return this.serializedWindow.setName(n).then(function(){return o})},r.close=function(){var n=this;return this.serializedWindow.close().then(function(){return n})},r.focus=function(){var n=this,o=this.isPopup(),a=this.getName(),u=O.hash({isPopup:o,name:a}).then(function(h){var l=h.name;h.isPopup&&l&&window.open("",l,"noopener")}),d=this.serializedWindow.focus();return O.all([u,d]).then(function(){return n})},r.isClosed=function(){return this.serializedWindow.isClosed()},r.getWindow=function(){return this.actualWindow},r.setWindow=function(n,o){var a=o.send;this.actualWindow=n,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=ea(this.actualWindowPromise,{send:a,id:this.getID()}),Ye("winToProxyWindow").set(n,this)},r.awaitWindow=function(){return this.actualWindowPromise},r.matchWindow=function(n,o){var a=this,u=o.send;return O.try(function(){return a.actualWindow?n===a.actualWindow:O.hash({proxyInstanceID:a.getInstanceID(),knownWindowInstanceID:qi(n,{send:u})}).then(function(d){var h=d.proxyInstanceID===d.knownWindowInstanceID;return h&&a.setWindow(n,{send:u}),h})})},r.unwrap=function(){return this.actualWindow||this},r.getInstanceID=function(){return this.serializedWindow.getInstanceID()},r.shouldClean=function(){return!!(this.actualWindow&&xe(this.actualWindow))},r.serialize=function(){return this.serializedWindow},e.unwrap=function(n){return e.isProxyWindow(n)?n.unwrap():n},e.serialize=function(n,o){var a=o.send;return wo(),e.toProxyWindow(n,{send:a}).serialize()},e.deserialize=function(n,o){var a=o.send;return wo(),he("idToProxyWindow").get(n.id)||new e({serializedWindow:n,send:a})},e.isProxyWindow=function(n){return!!(n&&!kt(n)&&n.isProxyWindow)},e.toProxyWindow=function(n,o){var a=o.send;if(wo(),e.isProxyWindow(n))return n;var u=n;return Ye("winToProxyWindow").get(u)||new e({win:u,send:a})},e}();function mo(e,r,n,o,a){var u=Ye("methodStore"),d=he("proxyWindowMethods");lt.isProxyWindow(o)?d.set(e,{val:r,name:n,domain:a,source:o}):(d.del(e),u.getOrSet(o,function(){return{}})[e]={domain:a,name:n,val:r,source:o})}function ta(e,r){var n=Ye("methodStore"),o=he("proxyWindowMethods");return n.getOrSet(e,function(){return{}})[r]||o.get(r)}function ra(e,r,n,o,a){d=(u={on:a.on,send:a.send}).on,h=u.send,he("builtinListeners").getOrSet("functionCalls",function(){return d("postrobot_method",{domain:"*"},function(y){var w=y.source,p=y.origin,g=y.data,E=g.id,R=g.name,S=ta(w,E);if(!S)throw new Error("Could not find method '"+R+"' with id: "+g.id+" in "+D(window));var I=S.source,z=S.domain,V=S.val;return O.try(function(){if(!ct(z,p))throw new Error("Method '"+g.name+"' domain "+JSON.stringify(no(S.domain)?S.domain.source:S.domain)+" does not match origin "+p+" in "+D(window));if(lt.isProxyWindow(I))return I.matchWindow(w,{send:h}).then(function(A){if(!A)throw new Error("Method call '"+g.name+"' failed - proxy window does not match source in "+D(window))})}).then(function(){return V.apply({source:w,origin:p},g.args)},function(A){return O.try(function(){if(V.onError)return V.onError(A)}).then(function(){throw A.stack&&(A.stack="Remote call to "+R+"("+function(q){return q===void 0&&(q=[]),to(q).map(function(L){return typeof L=="string"?"'"+L+"'":L===void 0?"undefined":L===null?"null":typeof L=="boolean"?L.toString():Array.isArray(L)?"[ ... ]":typeof L=="object"?"{ ... }":typeof L=="function"?"() => { ... }":"<"+typeof L+">"}).join(", ")}(g.args)+`) failed

`+A.stack),A})}).then(function(A){return{result:A,id:E,name:R}})})});var u,d,h,l=n.__id__||Xe();e=lt.unwrap(e);var v=n.__name__||n.name||o;return typeof v=="string"&&typeof v.indexOf=="function"&&v.indexOf("anonymous::")===0&&(v=v.replace("anonymous::",o+"::")),lt.isProxyWindow(e)?(mo(l,n,v,e,r),e.awaitWindow().then(function(y){mo(l,n,v,y,r)})):mo(l,n,v,e,r),er("cross_domain_function",{id:l,name:v})}function na(e,r,n,o){var a,u=o.on,d=o.send;return function(h,l){l===void 0&&(l=Nu);var v=JSON.stringify(h,function(y){var w=this[y];if(fo(this))return w;var p=Gi(w);if(!p)return w;var g=l[p]||Du[p];return g?g(w,y):w});return v===void 0?"undefined":v}(n,((a={}).promise=function(h,l){return function(v,y,w,p,g){return er("cross_domain_zalgo_promise",{then:ra(v,y,function(E,R){return w.then(E,R)},p,{on:g.on,send:g.send})})}(e,r,h,l,{on:u,send:d})},a.function=function(h,l){return ra(e,r,h,l,{on:u,send:d})},a.object=function(h){return kt(h)||lt.isProxyWindow(h)?er("cross_domain_window",lt.serialize(h,{send:d})):h},a))}function oa(e,r,n,o){var a,u=o.send;return function(d,h){if(h===void 0&&(h=Iu),d!=="undefined")return JSON.parse(d,function(l,v){if(fo(this))return v;var y,w;if(fo(v)?(y=v.__type__,w=v.__val__):(y=Gi(v),w=v),!y)return w;var p=h[y]||Cu[y];return p?p(w,l):w})}(n,((a={}).cross_domain_zalgo_promise=function(d){return function(h,l,v){return new O(v.then)}(0,0,d)},a.cross_domain_function=function(d){return function(h,l,v,y){var w=v.id,p=v.name,g=y.send,E=function(S){S===void 0&&(S={});function I(){var z=arguments;return lt.toProxyWindow(h,{send:g}).awaitWindow().then(function(V){var A=ta(V,w);if(A&&A.val!==I)return A.val.apply({source:window,origin:D()},z);var q=[].slice.call(z);return S.fireAndForget?g(V,"postrobot_method",{id:w,name:p,args:q},{domain:l,fireAndForget:!0}):g(V,"postrobot_method",{id:w,name:p,args:q},{domain:l,fireAndForget:!1}).then(function(L){return L.data.result})}).catch(function(V){throw V})}return I.__name__=p,I.__origin__=l,I.__source__=h,I.__id__=w,I.origin=l,I},R=E();return R.fireAndForget=E({fireAndForget:!0}),R}(e,r,d,{send:u})},a.cross_domain_window=function(d){return lt.deserialize(d,{send:u})},a))}var Ur={};Ur.postrobot_post_message=function(e,r,n){n.indexOf("file:")===0&&(n="*"),e.postMessage(r,n)},Ur.postrobot_bridge=function(e,r,n){if(!lo()&&!Zi())throw new Error("Bridge not needed for browser");if(j(e))throw new Error("Post message through bridge disabled between same domain windows");if(un(window,e)!==!1)throw new Error("Can only use bridge to communicate between two different windows, not between frames");(function(o,a,u){var d=_r(window,o),h=_r(o,window);if(!d&&!h)throw new Error("Can only send messages to and from parent and popup windows");po(o).then(function(l){return l(o,a,u)})})(e,n,r)},Ur.postrobot_global=function(e,r){if(!yr(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!j(e))throw new Error("Post message through global disabled between different domain windows");if(un(window,e)!==!1)throw new Error("Can only use global to communicate between two different windows, not between frames");var n=St(e);if(!n)throw new Error("Can not find postRobot global on foreign window");n.receiveMessage({source:window,origin:D(),data:r})};function go(e,r,n,o){var a=o.on,u=o.send;return O.try(function(){var d=Ye().getOrSet(e,function(){return{}});return d.buffer=d.buffer||[],d.buffer.push(n),d.flush=d.flush||O.flush().then(function(){if(xe(e))throw new Error("Window is closed");var h=na(e,r,((l={}).__post_robot_11_0_0__=d.buffer||[],l),{on:a,send:u}),l;delete d.buffer;for(var v=Object.keys(Ur),y=[],w=0;w<v.length;w++){var p=v[w];try{Ur[p](e,h,r)}catch(g){y.push(g)}}if(y.length===v.length)throw new Error(`All post-robot messaging strategies failed:

`+y.map(function(g,E){return E+". "+Pr(g)}).join(`

`))}),d.flush.then(function(){delete d.flush})}).then(ye)}function ia(e){return he("responseListeners").get(e)}function aa(e){he("responseListeners").del(e)}function sa(e){return he("erroredResponseListeners").has(e)}function ua(e){var r=e.name,n=e.win,o=e.domain,a=Ye("requestListeners");if(n==="*"&&(n=null),o==="*"&&(o=null),!r)throw new Error("Name required to get request listener");for(var u=0,d=[n,En()];u<d.length;u++){var h=d[u];if(h){var l=a.get(h);if(l){var v=l[r];if(v){if(o&&typeof o=="string"){if(v[o])return v[o];if(v.__domain_regex__)for(var y=0,w=v.__domain_regex__;y<w.length;y++){var p=w[y],g=p.listener;if(ct(p.regex,o))return g}}if(v["*"])return v["*"]}}}}}function yo(e,r){var n=r.on,o=r.send,a=he("receivedMessages");try{if(!window||window.closed||!e.source)return}catch{return}var u=e.source,d=e.origin,h=function(w,p,g,E){var R=E.on,S=E.send,I;try{I=oa(p,g,w,{on:R,send:S})}catch{return}if(I&&typeof I=="object"&&I!==null){var z=I.__post_robot_11_0_0__;if(Array.isArray(z))return z}}(e.data,u,d,{on:n,send:o});if(h){Vi(u);for(var l,v=function(){var w=h[y];if(a.has(w.id))return{v:void 0};if(a.set(w.id,!0),xe(u)&&!w.fireAndForget)return{v:void 0};w.origin.indexOf("file:")===0&&(d="file://");try{w.type==="postrobot_message_request"?function(p,g,E,R){var S=R.on,I=R.send,z=ua({name:E.name,win:p,domain:g}),V=E.name==="postrobot_method"&&E.data&&typeof E.data.name=="string"?E.data.name+"()":E.name;function A(q,L,X){return O.flush().then(function(){if(!E.fireAndForget&&!xe(p))try{return go(p,g,{id:Xe(),origin:D(window),type:"postrobot_message_response",hash:E.hash,name:E.name,ack:q,data:L,error:X},{on:S,send:I})}catch($){throw new Error("Send response message failed for "+V+" in "+D()+`

`+Pr($))}})}O.all([O.flush().then(function(){if(!E.fireAndForget&&!xe(p))try{return go(p,g,{id:Xe(),origin:D(window),type:"postrobot_message_ack",hash:E.hash,name:E.name},{on:S,send:I})}catch(q){throw new Error("Send ack message failed for "+V+" in "+D()+`

`+Pr(q))}}),O.try(function(){if(!z)throw new Error("No handler found for post message: "+E.name+" from "+g+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);return z.handler({source:p,origin:g,data:E.data})}).then(function(q){return A("success",q)},function(q){return A("error",null,q)})]).then(ye).catch(function(q){if(z&&z.handleError)return z.handleError(q);throw q})}(u,d,w,{on:n,send:o}):w.type==="postrobot_message_response"?function(p,g,E){if(!sa(E.hash)){var R=ia(E.hash);if(!R)throw new Error("No handler found for post message response for message: "+E.name+" from "+g+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!ct(R.domain,g))throw new Error("Response origin "+g+" does not match domain "+(S=R.domain,Array.isArray(S)?"("+S.join(" | ")+")":mt(S)?"RegExp("+S.toString()+")":S.toString()));var S;if(p!==R.win)throw new Error("Response source does not match registered window");aa(E.hash),E.ack==="error"?R.promise.reject(E.error):E.ack==="success"&&R.promise.resolve({source:p,origin:g,data:E.data})}}(u,d,w):w.type==="postrobot_message_ack"&&function(p,g,E){if(!sa(E.hash)){var R=ia(E.hash);if(!R)throw new Error("No handler found for post message ack for message: "+E.name+" from "+g+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!ct(R.domain,g))throw new Error("Ack origin "+g+" does not match domain "+R.domain.toString());if(p!==R.win)throw new Error("Ack source does not match registered window")}catch(S){R.promise.reject(S)}R.ack=!0}}(u,d,w)}catch(p){setTimeout(function(){throw p},0)}},y=0;y<h.length;y++)if(l=v())return l.v}}function At(e,r,n){if(!e)throw new Error("Expected name");if(typeof(r=r||{})=="function"&&(n=r,r={}),!n)throw new Error("Expected handler");var o=function a(u,d){var h=u.name,l=u.win,v=u.domain,y=Ye("requestListeners");if(!h||typeof h!="string")throw new Error("Name required to add request listener");if(l&&l!=="*"&&lt.isProxyWindow(l)){var w=l.awaitWindow().then(function(ce){return a({name:h,win:ce,domain:v},d)});return{cancel:function(){w.then(function(ce){return ce.cancel()},ye)}}}var p=l;if(Array.isArray(p)){for(var g=[],E=0,R=p;E<R.length;E++)g.push(a({name:h,domain:v,win:R[E]},d));return{cancel:function(){for(var ce=0;ce<g.length;ce++)g[ce].cancel()}}}if(Array.isArray(v)){for(var S=[],I=0,z=v;I<z.length;I++)S.push(a({name:h,win:p,domain:z[I]},d));return{cancel:function(){for(var ce=0;ce<S.length;ce++)S[ce].cancel()}}}var V=ua({name:h,win:p,domain:v});p&&p!=="*"||(p=En());var A=(v=v||"*").toString();if(V)throw p&&v?new Error("Request listener already exists for "+h+" on domain "+v.toString()+" for "+(p===En()?"wildcard":"specified")+" window"):p?new Error("Request listener already exists for "+h+" for "+(p===En()?"wildcard":"specified")+" window"):v?new Error("Request listener already exists for "+h+" on domain "+v.toString()):new Error("Request listener already exists for "+h);var q=y.getOrSet(p,function(){return{}}),L=Lr(q,h,function(){return{}}),X,$;return no(v)?(X=Lr(L,"__domain_regex__",function(){return[]})).push($={regex:v,listener:d}):L[A]=d,{cancel:function(){delete L[A],$&&(X.splice(X.indexOf($,1)),X.length||delete L.__domain_regex__),Object.keys(L).length||delete q[h],p&&!Object.keys(q).length&&y.del(p)}}}({name:e,win:r.window,domain:r.domain||"*"},{handler:n||r.handler,handleError:r.errorHandler||function(a){throw a}});return{cancel:function(){o.cancel()}}}var Pt=function e(r,n,o,a){var u=(a=a||{}).domain||"*",d=a.timeout||-1,h=a.timeout||5e3,l=a.fireAndForget||!1;return lt.toProxyWindow(r,{send:e}).awaitWindow().then(function(v){return O.try(function(){if(function(y,w,p){if(!y)throw new Error("Expected name");if(p&&typeof p!="string"&&!Array.isArray(p)&&!no(p))throw new TypeError("Can not send "+y+". Expected domain "+JSON.stringify(p)+" to be a string, array, or regex");if(xe(w))throw new Error("Can not send "+y+". Target window is closed")}(n,v,u),function(y,w){var p=Xt(w);if(p)return p===y;if(w===y||Ke(w)===w)return!1;for(var g=0,E=et(y);g<E.length;g++)if(E[g]===w)return!0;return!1}(window,v))return Hi(v,h)}).then(function(y){return function(w,p,g,E){var R=E.send;return O.try(function(){return typeof p=="string"?p:O.try(function(){return g||co(w,{send:R}).then(function(S){return S.domain})}).then(function(S){if(!ct(p,p))throw new Error("Domain "+hn(p)+" does not match "+hn(p));return S})})}(v,u,(y===void 0?{}:y).domain,{send:e})}).then(function(y){var w=y,p=n==="postrobot_method"&&o&&typeof o.name=="string"?o.name+"()":n,g=new O,E=n+"_"+Xe();if(!l){var R={name:n,win:v,domain:w,promise:g};(function(L,X){he("responseListeners").set(L,X)})(E,R);var S=Ye("requestPromises").getOrSet(v,function(){return[]});S.push(g),g.catch(function(){(function(L){he("erroredResponseListeners").set(L,!0)})(E),aa(E)});var I=function(L){return Ye("knownWindows").get(L,!1)}(v)?1e4:2e3,z=d,V=I,A=z,q=zr(function(){return xe(v)?g.reject(new Error("Window closed for "+n+" before "+(R.ack?"response":"ack"))):R.cancelled?g.reject(new Error("Response listener was cancelled for "+n)):(V=Math.max(V-500,0),A!==-1&&(A=Math.max(A-500,0)),R.ack||V!==0?A===0?g.reject(new Error("No response for postMessage "+p+" in "+D()+" in "+z+"ms")):void 0:g.reject(new Error("No ack for postMessage "+p+" in "+D()+" in "+I+"ms")))},500);g.finally(function(){q.cancel(),S.splice(S.indexOf(g,1))}).catch(ye)}return go(v,w,{id:Xe(),origin:D(window),type:"postrobot_message_request",hash:E,name:n,data:o,fireAndForget:l},{on:At,send:e}).then(function(){return l?g.resolve():g},function(L){throw new Error("Send request message failed for "+p+" in "+D()+`

`+Pr(L))})})})};function Br(e){return lt.toProxyWindow(e,{send:Pt})}function ca(e){for(var r=0,n=Ye("requestPromises").get(e,[]);r<n.length;r++)n[r].reject(new Error("Window "+(xe(e)?"closed":"cleaned up")+" before response")).catch(ye)}var qt;qt={setupBridge:ki,openBridge:function(e,r){var n=he("bridges"),o=he("bridgeFrames");return r=r||It(e),n.getOrSet(r,function(){return O.try(function(){if(D()===r)throw new Error("Can not open bridge on the same domain as current domain: "+r);var a=ho(r);if(Er(window,a))throw new Error("Frame with name "+a+" already exists on page");var u=function(d,h){var l=document.createElement("iframe");return l.setAttribute("name",d),l.setAttribute("id",d),l.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),l.setAttribute("frameborder","0"),l.setAttribute("border","0"),l.setAttribute("scrolling","no"),l.setAttribute("allowTransparency","true"),l.setAttribute("tabindex","-1"),l.setAttribute("hidden","true"),l.setAttribute("title",""),l.setAttribute("role","presentation"),l.src=h,l}(a,e);return o.set(r,u),Au.then(function(d){d.appendChild(u);var h=u.contentWindow;return new O(function(l,v){u.addEventListener("load",l),u.addEventListener("error",v)}).then(function(){return Hi(h,5e3,"Bridge "+e)}).then(function(){return h})})})})},linkWindow:bn,linkUrl:function(e,r){bn({win:e,domain:It(r)})},isBridge:Zi,needsBridge:Yi,needsBridgeForBrowser:lo,hasBridge:function(e,r){return he("bridges").has(r||It(e))},needsBridgeForWin:Ji,needsBridgeForDomain:Ki,destroyBridges:function(){for(var e=he("bridges"),r=he("bridgeFrames"),n=0,o=r.keys();n<o.length;n++){var a=r.get(o[n]);a&&a.parentNode&&a.parentNode.removeChild(a)}r.reset(),e.reset()}};function $r(e){if(!j(e))throw new Error("Can not get global for window on different domain");return e.__zoid_10_3_3__||(e.__zoid_10_3_3__={}),e.__zoid_10_3_3__}function da(e,r){try{return r($r(e))}catch{}}function Pn(e){return{get:function(){var r=this;return O.try(function(){if(r.source&&r.source!==window)throw new Error("Can not call get on proxy object from a remote window");return e})}}}function Wu(e){return Xn(JSON.stringify(e))}function Eo(e){var r=$r(e);return r.references=r.references||{},r.references}function fa(e){var r=e.data,n=e.metaData,o=e.sender,a=e.receiver,u=e.passByReference,d=u!==void 0&&u,h=e.basic,l=h!==void 0&&h,v=Br(a.win),y=l?JSON.stringify(r):na(v,a.domain,r,{on:At,send:Pt}),w=d?function(p){var g=Xe();return Eo(window)[g]=p,{type:"uid",uid:g}}(y):{type:"raw",val:y};return{serializedData:Wu({sender:{domain:o.domain},metaData:n,reference:w}),cleanReference:function(){p=window,(g=w).type==="uid"&&delete Eo(p)[g.uid];var p,g}}}function la(e){var r=e.sender,n=e.basic,o=n!==void 0&&n,a=function(y){return JSON.parse(function(w){if(typeof atob=="function")return decodeURIComponent([].map.call(atob(w),function(p){return"%"+("00"+p.charCodeAt(0).toString(16)).slice(-2)}).join(""));if(typeof Buffer<"u")return Buffer.from(w,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(y))}(e.data),u=a.reference,d=a.metaData,h;h=typeof r.win=="function"?r.win({metaData:d}):r.win;var l;l=typeof r.domain=="function"?r.domain({metaData:d}):typeof r.domain=="string"?r.domain:a.sender.domain;var v=function(y,w){if(w.type==="raw")return w.val;if(w.type==="uid")return Eo(y)[w.uid];throw new Error("Unsupported ref type: "+w.type)}(h,u);return{data:o?JSON.parse(v):function(y,w,p){return oa(y,w,p,{on:At,send:Pt})}(h,l,v),metaData:d,sender:{win:h,domain:l},reference:u}}var ve={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},Tn={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},Oe=Ze,Ee={RENDER:"zoid-render",RENDERED:"zoid-rendered",PRERENDER:"zoid-prerender",PRERENDERED:"zoid-prerendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function ha(e){return"__zoid__"+e.name+"__"+e.serializedPayload+"__"}function bo(e){if(!e)throw new Error("No window name");var r=e.split("__"),n=r[1],o=r[2],a=r[3];if(n!=="zoid")throw new Error("Window not rendered by zoid - got "+n);if(!o)throw new Error("Expected component name");if(!a)throw new Error("Expected serialized payload ref");return{name:o,serializedInitialPayload:a}}var _u=Bt(function(e){var r=la({data:bo(e).serializedInitialPayload,sender:{win:function(n){return function(o){if(o.type==="opener")return wn("opener",We(window));if(o.type==="parent"&&typeof o.distance=="number")return wn("parent",function(w,p){return p===void 0&&(p=1),function(g,E){E===void 0&&(E=1);for(var R=g,S=0;S<E;S++){if(!R)return;R=ie(R)}return R}(w,br(w)-p)}(window,o.distance));if(o.type==="global"&&o.uid&&typeof o.uid=="string"){var a=o.uid,u=Xt(window);if(!u)throw new Error("Can not find ancestor window");for(var d=0,h=Re(u);d<h.length;d++){var l=h[d];if(j(l)){var v=da(l,function(w){return w.windows&&w.windows[a]});if(v)return v}}}else if(o.type==="name"){var y=o.name;return wn("namedWindow",function(w,p){return Er(w,p)||function g(E,R){var S=Er(E,R);if(S)return S;for(var I=0,z=et(E);I<z.length;I++){var V=g(z[I],R);if(V)return V}}(Ke(w)||w,p)}(wn("ancestor",Xt(window)),y))}throw new Error("Unable to find "+o.type+" parent component window")}(n.metaData.windowRef)}}});return{parent:r.sender,payload:r.data,reference:r.reference}});function pa(){return _u(window.name)}function Mu(e,r){if(r===void 0&&(r=window),e===ie(r))return{type:"parent",distance:br(e)};if(e===We(r))return{type:"opener"};if(j(e)&&(o=e,o!==Ke(o))){var n=J(e).name;if(n)return{type:"name",name:n}}var o}function va(e,r,n,o,a){if(!e.hasOwnProperty(n))return o;var u=e[n];return typeof u.childDecorate=="function"?u.childDecorate({value:o,uid:a.uid,tag:a.tag,close:a.close,focus:a.focus,onError:a.onError,onProps:a.onProps,resize:a.resize,getParent:a.getParent,getParentDomain:a.getParentDomain,show:a.show,hide:a.hide,export:a.export,getSiblings:a.getSiblings}):o}function Fu(){return O.try(function(){window.focus()})}function wa(){return O.try(function(){window.close()})}var Wt=function(){return ye},tr=function(e){return ln(e.value)};function Po(e,r,n){for(var o=0,a=Object.keys(P({},e,r));o<a.length;o++){var u=a[o];n(u,r[u],e[u])}}function ma(e,r,n){var o={};return O.all(function(a,u,d){var h=[];return Po(a,u,function(l,v,y){var w=function(p,g,E){return O.resolve().then(function(){var R,S;if(E!=null&&g){var I=(R={},R.get=g.queryParam,R.post=g.bodyParam,R)[n],z=(S={},S.get=g.queryValue,S.post=g.bodyValue,S)[n];if(I)return O.hash({finalParam:O.try(function(){return typeof I=="function"?I({value:E}):typeof I=="string"?I:p}),finalValue:O.try(function(){return typeof z=="function"&&$t(E)?z({value:E}):E})}).then(function(V){var A=V.finalParam,q=V.finalValue,L;if(typeof q=="boolean")L=q.toString();else if(typeof q=="string")L=q.toString();else if(typeof q=="object"&&q!==null){if(g.serialization===Tn.JSON)L=JSON.stringify(q);else if(g.serialization===Tn.BASE64)L=Xn(JSON.stringify(q));else if(g.serialization===Tn.DOTIFY||!g.serialization){L=function ne(K,H,ue){H===void 0&&(H=""),ue===void 0&&(ue={}),H=H&&H+".";for(var k in K)K.hasOwnProperty(k)&&K[k]!=null&&typeof K[k]!="function"&&(K[k]&&Array.isArray(K[k])&&K[k].length&&K[k].every(function(Se){return typeof Se!="object"})?ue[""+H+k+"[]"]=K[k].join(","):K[k]&&typeof K[k]=="object"?ue=ne(K[k],""+H+k,ue):ue[""+H+k]=K[k].toString());return ue}(q,p);for(var X=0,$=Object.keys(L);X<$.length;X++){var ce=$[X];o[ce]=L[ce]}return}}else typeof q=="number"&&(L=q.toString());o[A]=L})}})}(l,v,y);h.push(w)}),h}(r,e)).then(function(){return o})}function ga(e){var r=e.uid,n=e.options,o=e.overrides,a=o===void 0?{}:o,u=e.parentWin,d=u===void 0?window:u,h=n.propsDef,l=n.containerTemplate,v=n.prerenderTemplate,y=n.tag,w=n.name,p=n.attributes,g=n.dimensions,E=n.autoResize,R=n.url,S=n.domain,I=n.exports,z=new O,V=[],A=vn(),q={},L={},X={visible:!0},$=a.event?a.event:(ce={},ne={},K={on:function(x,N){var B=ne[x]=ne[x]||[];B.push(N);var U=!1;return{cancel:function(){U||(U=!0,B.splice(B.indexOf(N),1))}}},once:function(x,N){var B=K.on(x,function(){B.cancel(),N()});return B},trigger:function(x){for(var N=arguments.length,B=new Array(N>1?N-1:0),U=1;U<N;U++)B[U-1]=arguments[U];var te=ne[x],Y=[];if(te)for(var me=function(){var Ue=te[ge];Y.push(O.try(function(){return Ue.apply(void 0,B)}))},ge=0;ge<te.length;ge++)me();return O.all(Y).then(ye)},triggerOnce:function(x){if(ce[x])return O.resolve();ce[x]=!0;for(var N=arguments.length,B=new Array(N>1?N-1:0),U=1;U<N;U++)B[U-1]=arguments[U];return K.trigger.apply(K,[x].concat(B))},reset:function(){ne={}}}),ce,ne,K,H=a.props?a.props:{},ue,k,Se,xt,ht,Ht=!1,Vt=a.onError,_t=a.getProxyContainer,Gt=a.show,Jt=a.hide,rr=a.close,Kt=a.renderContainer,Tt=a.getProxyWindow,nr=a.setProxyWin,Yt=a.openFrame,Zt=a.openPrerenderFrame,or=a.prerender,ir=a.open,oe=a.openPrerender,pt=a.watchForUnload,se=a.getInternalState,Le=a.setInternalState,De=function(){return typeof g=="function"?g({props:H}):g},je=function(){return O.try(function(){return a.resolveInitPromise?a.resolveInitPromise():z.resolve()})},Te=function(x){return O.try(function(){return a.rejectInitPromise?a.rejectInitPromise(x):z.reject(x)})},ke=function(x){for(var N={},B=0,U=Object.keys(H);B<U.length;B++){var te=U[B],Y=h[te];if(!Y||Y.sendToChild!==!1){var me=Y&&Y.trustedDomains&&Y.trustedDomains.length>0?Y.trustedDomains.reduce(function(ge,Ue){return ge||ct(Ue,x)},!1):ct(x,D(window));Y&&Y.sameDomain&&!me||Y&&Y.trustedDomains&&!me||(N[te]=H[te])}}return O.hash(N)},_e=function(){return O.try(function(){return se?se():X})},Me=function(x){return O.try(function(){return Le?Le(x):X=P({},X,x)})},vt=function(){return Tt?Tt():O.try(function(){var x=H.window;if(x){var N=Br(x);return A.register(function(){return x.close()}),N}return new lt({send:Pt})})},nt=function(x){return nr?nr(x):O.try(function(){ue=x})},Rt=function(){return Gt?Gt():O.hash({setState:Me({visible:!0}),showElement:k?k.get().then(Ru):null}).then(ye)},Mt=function(){return Jt?Jt():O.hash({setState:Me({visible:!1}),showElement:k?k.get().then(_i):null}).then(ye)},Or=function(){return typeof R=="function"?R({props:H}):R},Sr=function(){return typeof p=="function"?p({props:H}):p},ar=function(){return It(Or())},ot=function(x,N){var B=N.windowName;return Yt?Yt(x,{windowName:B}):O.try(function(){if(x===Oe.IFRAME)return Pn(Ai({attributes:P({name:B,title:w},Sr().iframe)}))})},qr=function(x){return Zt?Zt(x):O.try(function(){if(x===Oe.IFRAME)return Pn(Ai({attributes:P({name:"__zoid_prerender_frame__"+w+"_"+Xe()+"__",title:"prerender__"+w},Sr().iframe)}))})},Hr=function(x,N,B){return oe?oe(x,N,B):O.try(function(){if(x===Oe.IFRAME){if(!B)throw new Error("Expected proxy frame to be passed");return B.get().then(function(U){return A.register(function(){return jr(U)}),ao(U).then(function(te){return J(te)}).then(function(te){return Br(te)})})}if(x===Oe.POPUP)return N;throw new Error("No render context available for "+x)})},xr=function(){return O.try(function(){if(ue)return O.all([$.trigger(Ee.FOCUS),ue.focus()]).then(ye)})},Rn=function(){var x=$r(window);return x.windows=x.windows||{},x.windows[r]=window,A.register(function(){delete x.windows[r]}),r},Vr=function(x,N,B,U){if(N===D(window))return{type:"global",uid:Rn()};if(x!==window)throw new Error("Can not construct cross-domain window reference for different target window");if(H.window){var te=U.getWindow();if(!te)throw new Error("Can not construct cross-domain window reference for lazy window prop");if(Xt(te)!==window)throw new Error("Can not construct cross-domain window reference for window prop with different ancestor")}if(B===Oe.POPUP)return{type:"opener"};if(B===Oe.IFRAME)return{type:"parent",distance:br(window)};throw new Error("Can not construct window reference for child")},On=function(x,N){return O.try(function(){var B;xt=x,Se=N,(B=ue)==null||B.isPopup().then(function(U){if((N==null?void 0:N.name)!==""&&U){var te;(te=ue)==null||te.setName(N==null?void 0:N.name)}}).finally(function(){je(),A.register(function(){return N.close.fireAndForget().catch(ye)})})})},Gr=function(x){var N=x.width,B=x.height;return O.try(function(){$.trigger(Ee.RESIZE,{width:N,height:B})})},Jr=function(x){return O.try(function(){return $.trigger(Ee.DESTROY)}).catch(ye).then(function(){return A.all(x)}).then(function(){var N=x||new Error("Component destroyed");ht&&Rr(ht)||N.message==="Window navigated away"?z.resolve():z.asyncReject(N)})},Ft=Bt(function(x){return O.try(function(){return rr?xe(rr.__source__)?void 0:rr():O.try(function(){return $.trigger(Ee.CLOSE)}).then(function(){return Jr(x||new Error("Component closed"))})})}),ba=function(x,N){var B=N.proxyWin,U=N.proxyFrame,te=N.windowName;return ir?ir(x,{proxyWin:B,proxyFrame:U,windowName:te}):O.try(function(){if(x===Oe.IFRAME){if(!U)throw new Error("Expected proxy frame to be passed");return U.get().then(function(Ne){return ao(Ne).then(function(pe){return A.register(function(){return jr(Ne)}),A.register(function(){return ca(pe)}),pe})})}if(x===Oe.POPUP){var Y=De(),me=Y.width,ge=me===void 0?"300px":me,Ue=Y.height,be=Ue===void 0?"150px":Ue;ge=ji(ge,window.outerWidth),be=ji(be,window.outerWidth);var Fe=function(Ne,pe){var Ce=(pe=pe||{}).closeOnUnload,Pe=Ce===void 0?1:Ce,it=pe.name,Be=it===void 0?"":it,de=pe.width,$e=pe.height,tt=0,Ve=0;de&&(window.outerWidth?Ve=Math.round((window.outerWidth-de)/2)+window.screenX:window.screen.width&&(Ve=Math.round((window.screen.width-de)/2))),$e&&(window.outerHeight?tt=Math.round((window.outerHeight-$e)/2)+window.screenY:window.screen.height&&(tt=Math.round((window.screen.height-$e)/2))),delete pe.closeOnUnload,delete pe.name,de&&$e&&(pe=P({top:tt,left:Ve,width:de,height:$e,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},pe));var sr=Object.keys(pe).map(function(Dt){if(pe[Dt]!=null)return Dt+"="+hn(pe[Dt])}).filter(Boolean).join(","),wt;try{wt=window.open("",Be,sr)}catch(Dt){throw new io("Can not open popup window - "+(Dt.stack||Dt.message))}if(xe(wt))throw new io("Can not open popup window - blocked");return Pe&&window.addEventListener("unload",function(){return wt.close()}),wt}(0,P({name:te,width:ge,height:be},Sr().popup));return A.register(function(){return gi(Fe)}),A.register(function(){return ca(Fe)}),Fe}throw new Error("No render context available for "+x)}).then(function(Y){return B.setWindow(Y,{send:Pt}),B.setName(te).then(function(){return B})})},Pa=function(){return O.try(function(){var x=Wi(window,"unload",ln(function(){Jr(new Error("Window navigated away"))})),N=wi(d,Jr,3e3);if(A.register(N.cancel),A.register(x.cancel),pt)return pt()})},Ta=function(x){var N=!1;return x.isClosed().then(function(B){return B?(N=!0,Ft(new Error("Detected component window close"))):O.delay(200).then(function(){return x.isClosed()}).then(function(U){if(U)return N=!0,Ft(new Error("Detected component window close"))})}).then(function(){return N})},Kr=function(x){return Vt?Vt(x):O.try(function(){if(V.indexOf(x)===-1)return V.push(x),z.asyncReject(x),$.trigger(Ee.ERROR,x)})},Ra=new O,Oa=function(x){return O.try(function(){Ra.resolve(x)})};On.onError=Kr;var Sa=function(x,N){return x({uid:r,container:N.container,context:N.context,doc:N.doc,frame:N.frame,prerenderFrame:N.prerenderFrame,focus:xr,close:Ft,state:q,props:H,tag:y,dimensions:De(),event:$})},xa=function(x,N){var B=N.context;return or?or(x,{context:B}):O.try(function(){if(v){$.trigger(Ee.PRERENDER);var U=x.getWindow();if(U&&j(U)&&function(Ce){try{if(!Ce.location.href||Ce.location.href==="about:blank")return!0}catch{}return!1}(U)){var te=(U=J(U)).document,Y=Sa(v,{context:B,doc:te});if(Y){if(Y.ownerDocument!==te)throw new Error("Expected prerender template to have been created with document from child window");(function(Ce,Pe){var it=Pe.tagName.toLowerCase();if(it!=="html")throw new Error("Expected element to be html, got "+it);for(var Be=Ce.document.documentElement,de=0,$e=to(Be.children);de<$e.length;de++)Be.removeChild($e[de]);for(var tt=0,Ve=to(Pe.children);tt<Ve.length;tt++)Be.appendChild(Ve[tt])})(U,Y);var me=E.width,ge=me!==void 0&&me,Ue=E.height,be=Ue!==void 0&&Ue,Fe=E.element,Ne=Fe===void 0?"body":Fe;if((Ne=oo(Ne,te))&&(ge||be)){var pe=Mi(Ne,function(Ce){Gr({width:ge?Ce.width:void 0,height:be?Ce.height:void 0})},{width:ge,height:be,win:U});$.on(Ee.RENDERED,pe.cancel)}$.trigger(Ee.PRERENDERED)}}}})},Da=function(x,N){var B=N.proxyFrame,U=N.proxyPrerenderFrame,te=N.context,Y=N.rerender;return Kt?Kt(x,{proxyFrame:B,proxyPrerenderFrame:U,context:te,rerender:Y}):O.hash({container:x.get(),frame:B?B.get():null,prerenderFrame:U?U.get():null,internalState:_e()}).then(function(me){var ge=me.container,Ue=me.internalState.visible,be=Sa(l,{context:te,container:ge,frame:me.frame,prerenderFrame:me.prerenderFrame,doc:document});if(be){Ue||_i(be),Tu(ge,be);var Fe=function(Ne,pe){pe=ln(pe);var Ce=!1,Pe=[],it,Be,de,$e=function(){Ce=!0;for(var wt=0;wt<Pe.length;wt++)Pe[wt].disconnect();it&&it.cancel(),de&&de.removeEventListener("unload",tt),Be&&jr(Be)},tt=function(){Ce||(pe(),$e())};if(Rr(Ne))return tt(),{cancel:$e};if(window.MutationObserver)for(var Ve=Ne.parentElement;Ve;){var sr=new window.MutationObserver(function(){Rr(Ne)&&tt()});sr.observe(Ve,{childList:!0}),Pe.push(sr),Ve=Ve.parentElement}return(Be=document.createElement("iframe")).setAttribute("name","__detect_close_"+Xe()+"__"),Be.style.display="none",ao(Be).then(function(wt){(de=J(wt)).addEventListener("unload",tt)}),Ne.appendChild(Be),it=zr(function(){Rr(Ne)&&tt()},1e3),{cancel:$e}}(be,function(){var Ne=new Error("Detected container element removed from DOM");return O.delay(1).then(function(){if(!Rr(be))return A.all(Ne),Y().then(je,Te);Ft(Ne)})});return A.register(function(){return Fe.cancel()}),A.register(function(){return jr(be)}),k=Pn(be)}})},Na=function(){return{state:q,event:$,close:Ft,focus:xr,resize:Gr,onError:Kr,updateProps:Ju,show:Rt,hide:Mt}},Oo=function(x){x===void 0&&(x={});var N=ht,B=Na();Tr(L,x),function(U,te,Y,me,ge){var Ue=me.state,be=me.close,Fe=me.focus,Ne=me.event,pe=me.onError;Po(Y,U,function(Ce,Pe,it){var Be=!1,de=it;Object.defineProperty(te,Ce,{configurable:!0,enumerable:!0,get:function(){return Be?de:(Be=!0,function(){if(!Pe)return de;var $e=Pe.alias;if($e&&!$t(it)&&$t(Y[$e])&&(de=Y[$e]),Pe.value&&(de=Pe.value({props:te,state:Ue,close:be,focus:Fe,event:Ne,onError:pe,container:ge})),!Pe.default||$t(de)||$t(Y[Ce])||(de=Pe.default({props:te,state:Ue,close:be,focus:Fe,event:Ne,onError:pe,container:ge})),$t(de)){if(Pe.type===ve.ARRAY?!Array.isArray(de):typeof de!==Pe.type)throw new TypeError("Prop is not of type "+Pe.type+": "+Ce)}else if(Pe.required!==!1&&!$t(Y[Ce]))throw new Error('Expected prop "'+Ce+'" to be defined');return $t(de)&&Pe.decorate&&(de=Pe.decorate({value:de,props:te,state:Ue,close:be,focus:Fe,event:Ne,onError:pe,container:ge})),de}())}})}),Po(te,U,ye)}(h,H,L,B,N)},Ju=function(x){return Oo(x),z.then(function(){var N=Se,B=ue;if(N&&B&&xt)return ke(xt).then(function(U){return N.updateProps(U).catch(function(te){return Ta(B).then(function(Y){if(!Y)throw te})})})})},Ca=function(x){return _t?_t(x):O.try(function(){return Ci(x)}).then(function(N){return so(N)&&(N=function B(U){var te=function(Ue){var be=function(Fe){for(;Fe.parentNode;)Fe=Fe.parentNode;if(so(Fe))return Fe}(Ue);if(be&&be.host)return be.host}(U);if(!te)throw new Error("Element is not in shadow dom");var Y="shadow-slot-"+Xe(),me=document.createElement("slot");me.setAttribute("name",Y),U.appendChild(me);var ge=document.createElement("div");return ge.setAttribute("slot",Y),te.appendChild(ge),so(te)?B(ge):ge}(N)),ht=N,Pn(N)})};return{init:function(){(function(){$.on(Ee.RENDER,function(){return H.onRender()}),$.on(Ee.PRERENDER,function(){return H.onPrerender()}),$.on(Ee.DISPLAY,function(){return H.onDisplay()}),$.on(Ee.RENDERED,function(){return H.onRendered()}),$.on(Ee.PRERENDERED,function(){return H.onPrerendered()}),$.on(Ee.CLOSE,function(){return H.onClose()}),$.on(Ee.DESTROY,function(){return H.onDestroy()}),$.on(Ee.RESIZE,function(){return H.onResize()}),$.on(Ee.FOCUS,function(){return H.onFocus()}),$.on(Ee.PROPS,function(x){return H.onProps(x)}),$.on(Ee.ERROR,function(x){return H&&H.onError?H.onError(x):Te(x).then(function(){setTimeout(function(){throw x},1)})}),A.register($.reset)})()},render:function(x){var N=x.target,B=x.container,U=x.context,te=x.rerender;return O.try(function(){var Y=ar(),me=S||ar();(function(G,qe,Ie){if(G!==window){if(!un(window,G))throw new Error("Can only renderTo an adjacent frame");var He=D();if(!ct(qe,He)&&!j(G))throw new Error("Can not render remotely to "+qe.toString()+" - can only render to "+He);if(Ie&&typeof Ie!="string")throw new Error("Container passed to renderTo must be a string selector, got "+typeof Ie+" }")}})(N,me,B);var ge=O.try(function(){if(N!==window)return function(G,qe){for(var Ie={},He=0,st=Object.keys(H);He<st.length;He++){var Ae=st[He],gt=h[Ae];gt&&gt.allowDelegate&&(Ie[Ae]=H[Ae])}var Ge=Pt(qe,"zoid_delegate_"+w,{uid:r,overrides:{props:Ie,event:$,close:Ft,onError:Kr,getInternalState:_e,setInternalState:Me,resolveInitPromise:je,rejectInitPromise:Te}}).then(function(Z){var Q=Z.data.parent;return A.register(function(W){if(!xe(qe))return Q.destroy(W)}),Q.getDelegateOverrides()}).catch(function(Z){throw new Error(`Unable to delegate rendering. Possibly the component is not loaded in the target window.

`+Pr(Z))});return _t=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.getProxyContainer.apply(ee,Q)})},Kt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.renderContainer.apply(ee,Q)})},Gt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.show.apply(ee,Q)})},Jt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.hide.apply(ee,Q)})},pt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.watchForUnload.apply(ee,Q)})},G===Oe.IFRAME?(Tt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.getProxyWindow.apply(ee,Q)})},Yt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.openFrame.apply(ee,Q)})},Zt=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.openPrerenderFrame.apply(ee,Q)})},or=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.prerender.apply(ee,Q)})},ir=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.open.apply(ee,Q)})},oe=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.openPrerender.apply(ee,Q)})}):G===Oe.POPUP&&(nr=function(){for(var Z=arguments.length,Q=new Array(Z),W=0;W<Z;W++)Q[W]=arguments[W];return Ge.then(function(ee){return ee.setProxyWin.apply(ee,Q)})}),Ge}(U,N)}),Ue=H.window,be=Pa(),Fe=ma(h,H,"post"),Ne=$.trigger(Ee.RENDER),pe=Ca(B),Ce=vt(),Pe=pe.then(function(){return Oo()}),it=Pe.then(function(){return ma(h,H,"get").then(function(G){return function(qe,Ie){var He=Ie.query||{},st=Ie.hash||{},Ae,gt,Ge=qe.split("#");gt=Ge[1];var Z=(Ae=Ge[0]).split("?");Ae=Z[0];var Q=Ni(Z[1],He),W=Ni(gt,st);return Q&&(Ae=Ae+"?"+Q),W&&(Ae=Ae+"#"+W),Ae}(Kn(Or()),{query:G})})}),Be=Ce.then(function(G){return function(Ie){var He=Ie===void 0?{}:Ie,st=He.proxyWin,Ae=He.initialChildDomain,gt=He.childDomainMatch,Ge=He.target,Z=Ge===void 0?window:Ge,Q=He.context;return function(W){var ee=W===void 0?{}:W,So=ee.proxyWin,ec=ee.childDomainMatch,tc=ee.context;return ke(ee.initialChildDomain).then(function(rc){return{uid:r,context:tc,tag:y,childDomainMatch:ec,version:"10_3_3",props:rc,exports:(Wa=So,{init:function(nc){return On(this.origin,nc)},close:Ft,checkClose:function(){return Ta(Wa)},resize:Gr,onError:Kr,show:Rt,hide:Mt,export:Oa})};var Wa})}({proxyWin:st,initialChildDomain:Ae,childDomainMatch:gt,context:Q}).then(function(W){var ee=fa({data:W,metaData:{windowRef:Vr(Z,Ae,Q,st)},sender:{domain:D(window)},receiver:{win:st,domain:gt},passByReference:Ae===D()}),So=ee.serializedData;return A.register(ee.cleanReference),So})}({proxyWin:(qe={proxyWin:G,initialChildDomain:Y,childDomainMatch:me,target:N,context:U}).proxyWin,initialChildDomain:qe.initialChildDomain,childDomainMatch:qe.childDomainMatch,target:qe.target,context:qe.context}).then(function(Ie){return ha({name:w,serializedPayload:Ie})});var qe}),de=Be.then(function(G){return ot(U,{windowName:G})}),$e=qr(U),tt=O.hash({proxyContainer:pe,proxyFrame:de,proxyPrerenderFrame:$e}).then(function(G){return Da(G.proxyContainer,{context:U,proxyFrame:G.proxyFrame,proxyPrerenderFrame:G.proxyPrerenderFrame,rerender:te})}).then(function(G){return G}),Ve=O.hash({windowName:Be,proxyFrame:de,proxyWin:Ce}).then(function(G){var qe=G.proxyWin;return Ue?qe:ba(U,{windowName:G.windowName,proxyWin:qe,proxyFrame:G.proxyFrame})}),sr=O.hash({proxyWin:Ve,proxyPrerenderFrame:$e}).then(function(G){return Hr(U,G.proxyWin,G.proxyPrerenderFrame)}),wt=Ve.then(function(G){return ue=G,nt(G)}),Dt=O.hash({proxyPrerenderWin:sr,state:wt}).then(function(G){return xa(G.proxyPrerenderWin,{context:U})}),Ia=O.hash({proxyWin:Ve,windowName:Be}).then(function(G){if(Ue)return G.proxyWin.setName(G.windowName)}),Ku=O.hash({body:Fe}).then(function(G){return n.method?n.method:Object.keys(G.body).length?"post":"get"}),Aa=O.hash({proxyWin:Ve,windowUrl:it,body:Fe,method:Ku,windowName:Ia,prerender:Dt}).then(function(G){return G.proxyWin.setLocation(G.windowUrl,{method:G.method,body:G.body})}),Yu=Ve.then(function(G){(function qe(Ie,He){var st=!1;return A.register(function(){st=!0}),O.delay(2e3).then(function(){return Ie.isClosed()}).then(function(Ae){if(!st){if(He===Oe.POPUP&&Ae)return Ft(new Error("Detected popup close"));var gt=!!(ht&&Rr(ht));return He===Oe.IFRAME&&Ae&&(gt||Ht)?Ft(new Error("Detected iframe close")):qe(Ie,He)}})})(G,U)}),Zu=O.hash({container:tt,prerender:Dt}).then(function(){return $.trigger(Ee.DISPLAY)}),Qu=Ve.then(function(G){return function(qe,Ie,He){return O.try(function(){return qe.awaitWindow()}).then(function(st){if(qt&&qt.needsBridge({win:st,domain:Ie})&&!qt.hasBridge(Ie,Ie)){var Ae=typeof n.bridgeUrl=="function"?n.bridgeUrl({props:H}):n.bridgeUrl;if(!Ae)throw new Error("Bridge needed to render "+He);var gt=It(Ae);return qt.linkUrl(st,Ie),qt.openBridge(Kn(Ae),gt)}})}(G,Y,U)}),Xu=Aa.then(function(){return O.try(function(){var G=H.timeout;if(G)return z.timeout(G,new Error("Loading component timed out after "+G+" milliseconds"))})}),ku=z.then(function(){return Ht=!0,$.trigger(Ee.RENDERED)});return O.hash({initPromise:z,buildUrlPromise:it,onRenderPromise:Ne,getProxyContainerPromise:pe,openFramePromise:de,openPrerenderFramePromise:$e,renderContainerPromise:tt,openPromise:Ve,openPrerenderPromise:sr,setStatePromise:wt,prerenderPromise:Dt,loadUrlPromise:Aa,buildWindowNamePromise:Be,setWindowNamePromise:Ia,watchForClosePromise:Yu,onDisplayPromise:Zu,openBridgePromise:Qu,runTimeoutPromise:Xu,onRenderedPromise:ku,delegatePromise:ge,watchForUnloadPromise:be,finalSetPropsPromise:Pe})}).catch(function(Y){return O.all([Kr(Y),Jr(Y)]).then(function(){throw Y},function(){throw Y})}).then(ye)},destroy:Jr,getProps:function(){return H},setProps:Oo,export:Oa,getHelpers:Na,getDelegateOverrides:function(){return O.try(function(){return{getProxyContainer:Ca,show:Rt,hide:Mt,renderContainer:Da,getProxyWindow:vt,watchForUnload:Pa,openFrame:ot,openPrerenderFrame:qr,prerender:xa,open:ba,openPrerender:Hr,setProxyWin:nt}})},getExports:function(){return I({getExports:function(){return Ra}})}}}var zu={register:function(e,r,n,o){var a=o.React,u=o.ReactDOM;return function(d){T(h,d);function h(){return d.apply(this,arguments)||this}var l=h.prototype;return l.render=function(){return a.createElement("div",null)},l.componentDidMount=function(){var v=u.findDOMNode(this),y=n(Tr({},this.props));y.render(v,Oe.IFRAME),this.setState({parent:y})},l.componentDidUpdate=function(){this.state&&this.state.parent&&this.state.parent.updateProps(Tr({},this.props)).catch(ye)},h}(a.Component)}},Lu={register:function(e,r,n,o){return o.component(e,{render:function(a){return a("div")},inheritAttrs:!1,mounted:function(){var a=this.$el;this.parent=n(P({},(u=this.$attrs,Object.keys(u).reduce(function(d,h){var l=u[h];return h==="style-object"||h==="styleObject"?(d.style=l,d.styleObject=l):h.includes("-")?d[eo(h)]=l:d[h]=l,d},{}))));var u;this.parent.render(a,Oe.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(P({},this.$attrs)).catch(ye)},deep:!0}}})}},ju={register:function(e,r,n){return{template:"<div></div>",inheritAttrs:!1,mounted:function(){var o=this.$el;this.parent=n(P({},(a=this.$attrs,Object.keys(a).reduce(function(u,d){var h=a[d];return d==="style-object"||d==="styleObject"?(u.style=h,u.styleObject=h):d.includes("-")?u[eo(d)]=h:u[d]=h,u},{}))));var a;this.parent.render(o,Oe.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(P({},this.$attrs)).catch(ye)},deep:!0}}}}},Uu={register:function(e,r,n,o){return o.module(e,[]).directive(eo(e),function(){for(var a={},u=0,d=Object.keys(r);u<d.length;u++)a[d[u]]="=";return a.props="=",{scope:a,restrict:"E",controller:["$scope","$element",function(h,l){function v(){if(h.$root.$$phase!=="$apply"&&h.$root.$$phase!=="$digest")try{h.$apply()}catch{}}var y=function(){return pn(h.props,function(p){return typeof p=="function"?function(){var g=p.apply(this,arguments);return v(),g}:p})},w=n(y());w.render(l[0],Oe.IFRAME),h.$watch(function(){w.updateProps(y()).catch(ye)})}]}})}},Bu={register:function(e,r,n,o){var a=o.Component,u=o.NgModule,d=o.ElementRef,h=o.NgZone,l=o.Inject,v=function(){function w(g,E){this.elementRef=void 0,this.internalProps=void 0,this.parent=void 0,this.props=void 0,this.zone=void 0,this._props=void 0,this._props={},this.elementRef=g,this.zone=E}var p=w.prototype;return p.getProps=function(){var g=this;return pn(P({},this.internalProps,this.props),function(E){if(typeof E=="function"){var R=g.zone;return function(){var S=arguments,I=this;return R.run(function(){return E.apply(I,S)})}}return E})},p.ngOnInit=function(){var g=this.elementRef.nativeElement;this.parent=n(this.getProps()),this.parent.render(g,Oe.IFRAME)},p.ngDoCheck=function(){this.parent&&!function(g,E){var R={};for(var S in g)if(g.hasOwnProperty(S)&&(R[S]=!0,g[S]!==E[S]))return!1;for(var I in E)if(!R[I])return!1;return!0}(this._props,this.props)&&(this._props=P({},this.props),this.parent.updateProps(this.getProps()))},w}();v.annotations=void 0,v.parameters=void 0,v.parameters=[[new l(d)],[new l(h)]],v.annotations=[new a({selector:e,template:"<div></div>",inputs:["props"]})];var y=function(){};return y.annotations=void 0,y.annotations=[new u({declarations:[v],exports:[v]})],y}};function $u(e){var r=e.uid,n=e.frame,o=e.prerenderFrame,a=e.doc,u=e.props,d=e.event,h=e.dimensions,l=h.width,v=h.height;if(n&&o){var y=a.createElement("div");y.setAttribute("id",r);var w=a.createElement("style");return u.cspNonce&&w.setAttribute("nonce",u.cspNonce),w.appendChild(a.createTextNode(`
            #`+r+` {
                display: inline-block;
                position: relative;
                width: `+l+`;
                height: `+v+`;
            }

            #`+r+` > iframe {
                display: inline-block;
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                transition: opacity .2s ease-in-out;
            }

            #`+r+` > iframe.zoid-invisible {
                opacity: 0;
            }

            #`+r+` > iframe.zoid-visible {
                opacity: 1;
        }
        `)),y.appendChild(n),y.appendChild(o),y.appendChild(w),o.classList.add("zoid-visible"),n.classList.add("zoid-invisible"),d.on(Ee.RENDERED,function(){o.classList.remove("zoid-visible"),o.classList.add("zoid-invisible"),n.classList.remove("zoid-invisible"),n.classList.add("zoid-visible"),setTimeout(function(){jr(o)},1)}),d.on(Ee.RESIZE,function(p){var g=p.width,E=p.height;typeof g=="number"&&(y.style.width=Li(g)),typeof E=="number"&&(y.style.height=Li(E))}),y}}function qu(e){var r=e.doc,n=e.props,o=r.createElement("html"),a=r.createElement("body"),u=r.createElement("style"),d=r.createElement("div");return d.classList.add("spinner"),n.cspNonce&&u.setAttribute("nonce",n.cspNonce),o.appendChild(a),a.appendChild(d),a.appendChild(u),u.appendChild(r.createTextNode(`
            html, body {
                width: 100%;
                height: 100%;
            }

            .spinner {
                position: fixed;
                max-height: 60vmin;
                max-width: 60vmin;
                height: 40px;
                width: 40px;
                top: 50%;
                left: 50%;
                box-sizing: border-box;
                border: 3px solid rgba(0, 0, 0, .2);
                border-top-color: rgba(33, 128, 192, 0.8);
                border-radius: 100%;
                animation: rotation .7s infinite linear;
            }

            @keyframes rotation {
                from {
                    transform: translateX(-50%) translateY(-50%) rotate(0deg);
                }
                to {
                    transform: translateX(-50%) translateY(-50%) rotate(359deg);
                }
            }
        `)),o}var To=vn(),Ro=vn();function Hu(e){var r=function(E){var R=E.tag,S=E.url,I=E.domain,z=E.bridgeUrl,V=E.props,A=V===void 0?{}:V,q=E.dimensions,L=q===void 0?{}:q,X=E.autoResize,$=X===void 0?{}:X,ce=E.allowedParentDomains,ne=ce===void 0?"*":ce,K=E.attributes,H=K===void 0?{}:K,ue=E.defaultContext,k=ue===void 0?Oe.IFRAME:ue,Se=E.containerTemplate,xt=Se===void 0?$u:Se,ht=E.prerenderTemplate,Ht=ht===void 0?qu:ht,Vt=E.validate,_t=E.eligible,Gt=_t===void 0?function(){return{eligible:!0}}:_t,Jt=E.logger,rr=Jt===void 0?{info:ye}:Jt,Kt=E.exports,Tt=Kt===void 0?ye:Kt,nr=E.method,Yt=E.children,Zt=Yt===void 0?function(){return{}}:Yt,or=R.replace(/-/g,"_"),ir=P({},{window:{type:ve.OBJECT,sendToChild:!1,required:!1,allowDelegate:!0,validate:function(oe){var pt=oe.value;if(!kt(pt)&&!lt.isProxyWindow(pt))throw new Error("Expected Window or ProxyWindow");if(kt(pt)){if(xe(pt))throw new Error("Window is closed");if(!j(pt))throw new Error("Window is not same domain")}},decorate:function(oe){return Br(oe.value)}},timeout:{type:ve.NUMBER,required:!1,sendToChild:!1},cspNonce:{type:ve.STRING,required:!1},onDisplay:{type:ve.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Wt,decorate:tr},onRendered:{type:ve.FUNCTION,required:!1,sendToChild:!1,default:Wt,decorate:tr},onRender:{type:ve.FUNCTION,required:!1,sendToChild:!1,default:Wt,decorate:tr},onPrerendered:{type:ve.FUNCTION,required:!1,sendToChild:!1,default:Wt,decorate:tr},onPrerender:{type:ve.FUNCTION,required:!1,sendToChild:!1,default:Wt,decorate:tr},onClose:{type:ve.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Wt,decorate:tr},onDestroy:{type:ve.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Wt,decorate:tr},onResize:{type:ve.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Wt},onFocus:{type:ve.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Wt},close:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.close}},focus:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.focus}},resize:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.resize}},uid:{type:ve.STRING,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.uid}},tag:{type:ve.STRING,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.tag}},getParent:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.getParent}},getParentDomain:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.getParentDomain}},show:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.show}},hide:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.hide}},export:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.export}},onError:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.onError}},onProps:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.onProps}},getSiblings:{type:ve.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(oe){return oe.getSiblings}}},A);if(!xt)throw new Error("Container template required");return{name:or,tag:R,url:S,domain:I,bridgeUrl:z,method:nr,propsDef:ir,dimensions:L,autoResize:$,allowedParentDomains:ne,attributes:H,defaultContext:k,containerTemplate:xt,prerenderTemplate:Ht,validate:Vt,logger:rr,eligible:Gt,children:Zt,exports:typeof Tt=="function"?Tt:function(oe){for(var pt=oe.getExports,se={},Le=function(){var Te=je[De],ke=Tt[Te].type,_e=pt().then(function(Me){return Me[Te]});se[Te]=ke===ve.FUNCTION?function(){for(var Me=arguments.length,vt=new Array(Me),nt=0;nt<Me;nt++)vt[nt]=arguments[nt];return _e.then(function(Rt){return Rt.apply(void 0,vt)})}:_e},De=0,je=Object.keys(Tt);De<je.length;De++)Le();return se}}}(e),n=r.name,o=r.tag,a=r.defaultContext,u=r.propsDef,d=r.eligible,h=r.children,l=$r(window),v={},y=[],w=function(){if(function(R){try{return bo(window.name).name===R}catch{}return!1}(n)){var E=pa().payload;if(E.tag===o&&ct(E.childDomainMatch,D()))return!0}return!1},p=Bt(function(){if(w()){if(window.xprops)throw delete l.components[o],new Error("Can not register "+n+" as child - child already registered");var E=function(R){var S=R.tag,I=R.propsDef,z=R.autoResize,V=R.allowedParentDomains,A=[],q=pa(),L=q.parent,X=q.payload,$=L.win,ce=L.domain,ne,K=new O,H=X.version,ue=X.uid,k=X.exports,Se=X.context,xt=X.props;if(!function(se,Le){if(!/_/.test(se)||!/_/.test("10_3_3"))throw new Error("Versions are in an invalid format ("+se+", 10_3_3)");return se.split("_")[0]==="10_3_3".split("_")[0]}(H))throw new Error("Parent window has zoid version "+H+", child window has version 10_3_3");var ht=k.show,Ht=k.hide,Vt=k.close,_t=k.onError,Gt=k.checkClose,Jt=k.export,rr=k.resize,Kt=k.init,Tt=function(){return $},nr=function(){return ce},Yt=function(se){return A.push(se),{cancel:function(){A.splice(A.indexOf(se),1)}}},Zt=function(se){return rr.fireAndForget({width:se.width,height:se.height})},or=function(se){return K.resolve(se),Jt(se)},ir=function(se){var Le=(se===void 0?{}:se).anyParent,De=[],je=ne.parent;if(Le===void 0&&(Le=!je),!Le&&!je)throw new Error("No parent found for "+S+" child");for(var Te=0,ke=Re(window);Te<ke.length;Te++){var _e=ke[Te];if(j(_e)){var Me=J(_e).xprops;if(Me&&Tt()===Me.getParent()){var vt=Me.parent;if(Le||!je||vt&&vt.uid===je.uid){var nt=da(_e,function(Rt){return Rt.exports});De.push({props:Me,exports:nt})}}}}return De},oe=function(se,Le,De){De===void 0&&(De=!1);var je=function(ke,_e,Me,vt,nt,Rt){Rt===void 0&&(Rt=!1);for(var Mt={},Or=0,Sr=Object.keys(Me);Or<Sr.length;Or++){var ar=Sr[Or],ot=_e[ar],qr=ot&&ot.trustedDomains&&ot.trustedDomains.length>0?ot.trustedDomains.reduce(function(On,Gr){return On||ct(Gr,D(window))},!1):vt===D(window)||j(ke);if((!ot||!ot.sameDomain||qr)&&(!ot||!ot.trustedDomains||qr)){var Hr=va(_e,0,ar,Me[ar],nt);Mt[ar]=Hr,ot&&ot.alias&&!Mt[ot.alias]&&(Mt[ot.alias]=Hr)}}if(!Rt)for(var xr=0,Rn=Object.keys(_e);xr<Rn.length;xr++){var Vr=Rn[xr];Me.hasOwnProperty(Vr)||(Mt[Vr]=va(_e,0,Vr,void 0,nt))}return Mt}($,I,se,Le,{tag:S,show:ht,hide:Ht,close:Vt,focus:Fu,onError:_t,resize:Zt,getSiblings:ir,onProps:Yt,getParent:Tt,getParentDomain:nr,uid:ue,export:or},De);ne?Tr(ne,je):ne=je;for(var Te=0;Te<A.length;Te++)(0,A[Te])(ne)},pt=function(se){return O.try(function(){return oe(se,ce,!0)})};return{init:function(){return O.try(function(){var se="";return j($)&&(se=function(Le){var De=Le.componentName,je=Le.parentComponentWindow,Te=la({data:bo(window.name).serializedInitialPayload,sender:{win:je},basic:!0}),ke=Te.sender;if(Te.reference.type==="uid"||Te.metaData.windowRef.type==="global"){var _e=ha({name:De,serializedPayload:fa({data:Te.data,metaData:{windowRef:Mu(je)},sender:{domain:ke.domain},receiver:{win:window,domain:D()},basic:!0}).serializedData});return window.name=_e,_e}}({componentName:R.name,parentComponentWindow:$})||""),$r(window).exports=R.exports({getExports:function(){return K}}),function(Le,De){if(!ct(Le,De))throw new Error("Can not be rendered by domain: "+De)}(V,ce),Vi($),function(){window.addEventListener("beforeunload",function(){Gt.fireAndForget()}),window.addEventListener("unload",function(){Gt.fireAndForget()}),wi($,function(){wa()})}(),Kt({name:se,updateProps:pt,close:wa})}).then(function(){return(se=z.width,Le=se!==void 0&&se,De=z.height,je=De!==void 0&&De,Te=z.element,Ci(Te===void 0?"body":Te).catch(ye).then(function(ke){return{width:Le,height:je,element:ke}})).then(function(ke){var _e=ke.width,Me=ke.height,vt=ke.element;vt&&(_e||Me)&&Se!==Oe.POPUP&&Mi(vt,function(nt){Zt({width:_e?nt.width:void 0,height:Me?nt.height:void 0})},{width:_e,height:Me})});var se,Le,De,je,Te}).catch(function(se){_t(se)})},getProps:function(){return ne||(oe(xt,ce),ne)}}}(r);return E.init(),E}}),g=function E(R){var S,I="zoid-"+o+"-"+Xe(),z=R||{},V=d({props:z}),A=V.eligible,q=V.reason,L=z.onDestroy;z.onDestroy=function(){if(S&&A&&y.splice(y.indexOf(S),1),L)return L.apply(void 0,arguments)};var X=ga({uid:I,options:r});X.init(),A?X.setProps(z):z.onDestroy&&z.onDestroy(),To.register(function(ne){return X.destroy(ne||new Error("zoid destroyed all components"))});var $=function(ne){var K=(ne===void 0?{}:ne).decorate;return E((K===void 0?bu:K)(z))},ce=function(ne,K,H){return O.try(function(){if(!A){var ue=new Error(q||n+" component is not eligible");return X.destroy(ue).then(function(){throw ue})}if(!kt(ne))throw new Error("Must pass window to renderTo");return function(k,Se){return O.try(function(){if(k.window)return Br(k.window).getType();if(Se){if(Se!==Oe.IFRAME&&Se!==Oe.POPUP)throw new Error("Unrecognized context: "+Se);return Se}return a})}(z,H)}).then(function(ue){if(K=function(k,Se){if(Se){if(typeof Se!="string"&&!Yn(Se))throw new TypeError("Expected string or element selector to be passed");return Se}if(k===Oe.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(ue,K),ne!==window&&typeof K!="string")throw new Error("Must pass string element when rendering to another window");return X.render({target:ne,container:K,context:ue,rerender:function(){var k=$();return Tr(S,k),k.renderTo(ne,K,H)}})}).catch(function(ue){return X.destroy(ue).then(function(){throw ue})})};return S=P({},X.getExports(),X.getHelpers(),function(){for(var ne=h(),K={},H=function(){var Se=k[ue],xt=ne[Se];K[Se]=function(ht){var Ht=X.getProps(),Vt=P({},ht,{parent:{uid:I,props:Ht,export:X.export}});return xt(Vt)}},ue=0,k=Object.keys(ne);ue<k.length;ue++)H();return K}(),{isEligible:function(){return A},clone:$,render:function(ne,K){return ce(window,ne,K)},renderTo:function(ne,K,H){return ce(ne,K,H)}}),A&&y.push(S),S};if(p(),function(){var E=At("zoid_allow_delegate_"+n,function(){return!0}),R=At("zoid_delegate_"+n,function(S){var I=S.data;return{parent:ga({uid:I.uid,options:r,overrides:I.overrides,parentWin:S.source})}});Ro.register(E.cancel),Ro.register(R.cancel)}(),l.components=l.components||{},l.components[o])throw new Error("Can not register multiple components with the same tag: "+o);return l.components[o]=!0,{init:g,instances:y,driver:function(E,R){var S={react:zu,angular:Uu,vue:Lu,vue3:ju,angular2:Bu};if(!S[E])throw new Error("Could not find driver for framework: "+E);return v[E]||(v[E]=S[E].register(o,u,g,R)),v[E]},isChild:w,canRenderTo:function(E){return Pt(E,"zoid_allow_delegate_"+n).then(function(R){return R.data}).catch(function(){return!1})},registerChild:p}}var Vu=function(e){(function(){St().initialized||(St().initialized=!0,u=(a={on:At,send:Pt}).on,d=a.send,(h=St()).receiveMessage=h.receiveMessage||function(l){return yo(l,{on:u,send:d})},function(l){var v=l.on,y=l.send;he().getOrSet("postMessageListener",function(){return Wi(window,"message",function(w){(function(p,g){var E=g.on,R=g.send;O.try(function(){var S=p.source||p.sourceElement,I=p.origin||p.originalEvent&&p.originalEvent.origin,z=p.data;if(I==="null"&&(I="file://"),S){if(!I)throw new Error("Post message did not have origin domain");yo({source:S,origin:I,data:z},{on:E,send:R})}})})(w,{on:v,send:y})})})}({on:At,send:Pt}),ki({on:At,send:Pt,receiveMessage:yo}),function(l){var v=l.on,y=l.send;he("builtinListeners").getOrSet("helloListener",function(){var w=v("postrobot_hello",{domain:"*"},function(g){return $i(g.source,{domain:g.origin}),{instanceID:Bi()}}),p=Xt();return p&&co(p,{send:y}).catch(function(g){}),w})}({on:At,send:Pt}));var a,u,d,h})();var r=Hu(e),n=function(a){return r.init(a)};n.driver=function(a,u){return r.driver(a,u)},n.isChild=function(){return r.isChild()},n.canRenderTo=function(a){return r.canRenderTo(a)},n.instances=r.instances;var o=r.registerChild();return o&&(window.xprops=n.xprops=o.getProps()),n};function ya(e){qt&&qt.destroyBridges();var r=To.all(e);return To=vn(),r}var Ea=ya;function Gu(e){return Ea(),delete window.__zoid_10_3_3__,function(){(function(){for(var n=he("responseListeners"),o=0,a=n.keys();o<a.length;o++){var u=a[o],d=n.get(u);d&&(d.cancelled=!0),n.del(u)}})(),(r=he().get("postMessageListener"))&&r.cancel();var r;delete window.__post_robot_11_0_0__}(),Ro.all(e)}}])})})(fi);var li=fi.exports;const hi=li.EVENT,pr={VISIBLE:"zoid-visible",INVISIBLE:"zoid-invisible"};function du({uid:t,frame:i,prerenderFrame:s,doc:c,props:f,event:m,dimensions:T}){const{width:P,height:C}=T,{top:_=0,left:b=0}=f;if(!i||!s)return;const M=c.createElement("div");M.setAttribute("id",t);const F=c.createElement("style");return f.cspNonce&&F.setAttribute("nonce",f.cspNonce),F.appendChild(c.createTextNode(`
          #${t} {
              display: inline-block;
              position: absolute;
              width: ${P};
              height: ${C};
              z-index: 1049;
              border: none;
              top: ${_}px;
              left: ${b}px;
              overflow: hidden;
          }

          #${t} > iframe {
              display: inline-block;
              position: absolute;
              width: 100%;
              height: 100%;
              top: 0;
              left: 0;
              transition: opacity .2s ease-in-out;
              border: none;
              background-color: transparent;
              overflow: hidden;
          }

          #${t} > iframe.${pr.INVISIBLE} {
              opacity: 0;
          }

          #${t} > iframe.${pr.VISIBLE} {
              opacity: 1;
        }
      `)),M.appendChild(i),M.appendChild(s),M.appendChild(F),s.classList.add(pr.INVISIBLE),i.classList.add(pr.INVISIBLE),m.on(hi.RENDERED,()=>{setTimeout(()=>{i.classList.remove(pr.INVISIBLE),i.classList.add(pr.VISIBLE)},100),setTimeout(()=>{s.remove()},1)}),m.on(hi.RESIZE,({width:re,height:ae})=>{typeof re=="number"&&(M.style.width=`${re}px`),typeof ae=="number"&&(M.style.height=`${ae}px`)}),M}function fu(t){return li.create({dimensions:{width:"100%",height:"100%"},tag:`wta${t}`,url:({props:i})=>i.appConfig.sdkBaseUrl,props:{appConfig:{type:"object",required:!0},icons:{type:"array",required:!0}},containerTemplate:du})}function lu(t){return fu(t.id)(t)}function hu(t){return new Promise((i,s)=>{const c=document.createElement("script");c.async=!0,c.src=t,c.onload=i,c.onerror=s,document.body.appendChild(c)})}let vr=null;function pi(){vr=null}function pu(t){const i=window;return i.Go?Promise.resolve(i.wasm):vr||(vr=hu(t).then(()=>i.Go),vr.then(pi).catch(pi),vr)}class wr{constructor(){return wr.instance?wr.instance:(this.session=null,this.go=null,this.buffer=null,this.audioMediaSequence={},wr.instance=this,this)}async init(i){if(!this.buffer){const c=await(await fetch(i)).arrayBuffer();this.buffer=c}return wr.instance}async loadSource(i){this.session&&(i.session=this.session);const s=JSON.stringify(i),c=new Go,f=await WebAssembly.instantiate(this.buffer,c.importObject);c.run(f.instance);let m;for(let T=1;T<=3;T++)try{m=await window.loadSource(s);break}catch(P){if(console.log(`Attempt ${T} failed:`,P),T===3)throw console.log("session:",this.session),P}if(m.session!=""&&(this.session=m.session),m.error)throw new Error(m.error);return m.manifest}async getEventTracking(){if(this.session){const i=window.getEventTracking(this.session);if(i.error)throw new Error(i.error);return{avails:JSON.parse(i.avails)}}return null}}function vi({adsUrl:t,sdk:i,loader:s}){return class extends s{constructor(f){super(f)}load(f,m,T){const P=T.onSuccess;T.onSuccess=async(C,_,b)=>{(b.type==="manifest"||b.type==="level"||b.type==="audioTrack")&&(C.data=await this.modifyManifest(C.url,C.data,b.type)),P(C,_,b)},super.load(f,m,T)}async modifyManifest(f,m,T){const P={proxyAds:{uri:t,timeout:2}};try{return await i.loadSource({config:P,manifest:m,masterUri:f})}catch(C){return console.error("[LOG] ~ error:",C),m}}}}function vu({video:t,adContainer:i,startSession:s,sdk:c,domain:f}){const m=su(),T=Ct(!1),P=Ct(),C=Math.random().toString(36).slice(6);function _({icons:D}){const j=Dr(f,"/build/dist/wta/index.html");return{id:C,appConfig:{sdkBaseUrl:Zr(j||"https://localhost:4222/wta/index.html",{id:C})},icons:D}}if(!!i){const D=lu(_({icons:[]}));D.render(i),D.hide(),i.style.display="none",Fs(()=>{var j;if(P.value){const J=((j=P.value)==null?void 0:j.icons)||[];i.style.display="block",D.updateProps(_({icons:J})),D.show()}else i.style.display="none",D.hide()})}const M=Ct([]),F=Ct(),re=Ct([]);async function ae(D){var J;const j=(J=P.value)==null?void 0:J.trackingEvents.find(we=>we.eventType===D);j&&(m.trigger(j),await Promise.all(j.beaconUrls.map(we=>uu(Ts(we,{retry:3,retryDelay:500})))))}const ut=new Map;let O,mt;function Ze(D,j,J){D.addEventListener(j,J),ut.set(j,J)}function Et(D){var Je,Ke;const j=((D==null?void 0:D.time)||0)>0?D.time:0,J=(Je=D==null?void 0:D.value)==null?void 0:Je.event,we=re.value.find(Re=>Re.eventType===J&&!Re.tracked&&!Re.skipped);if(!we)return;const et=we==null?void 0:we.ad;if(et)if(J==="start")P.value&&re.value.filter(Qe=>Qe.key.startsWith(`${P.value.key}_`)).forEach(Qe=>Qe.skipped=!0),P.value=et,s(et.adVerifications,m),O=Wn(()=>{ae("impression"),ae("start");const Re=re.value.find(Qe=>Qe.key===we.key.replace("_start","_impression"));Re&&(Re.tracked=!0),we.tracked=!0,mt=Wn(()=>{P.value=void 0},3e4)},j*1e3);else{if(!P.value)return;if(et.id!==((Ke=P.value)==null?void 0:Ke.id)){re.value.filter(Qe=>Qe.key.startsWith(`${P.value.key}_`)).forEach(Qe=>Qe.skipped=!0);return}O=Wn(()=>{ae(J),J==="complete"&&et.id===P.value.id&&(P.value=void 0,An(mt)),we.tracked=!0},j*1e3)}}function mr(){return T.value=!1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(D=>{Ze(t,D,()=>{const j=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;ae(j?"fullscreen":"exitFullscreen")})}),Ze(t,"pause",()=>ae("pause")),Ze(t,"play",()=>ae("resume")),Ze(t,"rewind",()=>ae("rewind")),Ze(t,"mute",()=>ae("mute")),Ze(t,"unmute",()=>ae("unmute")),async(D,j)=>{if(F.value=j.frag.sn,D!==window.Hls.Events.FRAG_CHANGED)return;const J=M.value.filter(we=>we.sn===j.frag.sn);J.length&&(J.forEach(we=>Et(we)),M.value=M.value.filter(we=>we.sn!==j.frag.sn))}}async function Ut(){return c.getEventTracking().then(D=>{for(const j of(D==null?void 0:D.avails)||[])for(const J of j.ads){const we=`${j.id}_${J.id}_${J.startTimeInSeconds}`;for(const et of J.trackingEvents){const Je=`${we}_${et.eventType}`;re.value.find(Re=>Re.key===Je)||re.value.push({...et,key:Je,ad:{...J,key:we},tracked:!1})}}})}function gr(){return async(D,j)=>{function J(Je){for(let Ke=0;Ke<Je.length;Ke++)if(Je[Ke]===0)return Ke;return Je.length}const{start:we,sn:et}=j.frag;for(let Je=0;Je<j.samples.length;Je++){const Ke=j.samples[Je],Re=Ke.data,Qe=Ke.pts;if(String.fromCharCode.apply(null,Re.slice(0,3))!=="ID3"||String.fromCharCode.apply(null,Re.slice(10,14))!=="TXXX")continue;const yr=Re.slice(21,Re.length),Er=J(yr),_r=yr.slice(Er+1,yr.length),Xt=J(_r),Mr=new TextDecoder("utf-8").decode(_r.slice(0,Xt)),br={sn:et,time:Qe-we,value:Cn(Mr)};if(F.value&&et<F.value)return;M.value.push(br),br.value.event==="start"&&Ut()}}}function ie(){return D=>{const j=D.track;j.kind==="metadata"&&(j.oncuechange=async()=>{const J=j.activeCues[0];if(J&&J.value.data){await Ut();const we=Cn(J.value.data);Et({value:we})}})}}function We(D,j){m.on(J=>{(D==="*"||J.eventType===D)&&j(J)})}function bt(){P.value=void 0,M.value=[],re.value=[],An(O),An(mt),ut.forEach((D,j)=>{t.removeEventListener(j,D)}),ut.clear()}function Ot(){return{eventTracking:M,trackingDataEvent:re}}return{destroy:bt,onEventTracking:We,hlsHelper:{createHlsFragChanged:mr,createHlsFragParsingMetadata:gr},videojsHelper:{createVideojsAddTrack:ie},getLog:Ot}}async function wu({video:t,adContainer:i,adsUrl:s,baseURL:c}){const f=c||"https://cdn.jsdelivr.net/gh/sigmaott/sigma-ssai-web-sdk@v1.0.9",m=Dr(f,"/build/dist/wasm_exec.js")||"https://localhost:4222/wasm_exec.js";await pu(m);const T=new wr;await T.init(Dr(f,"/build/dist/sigma-cspm.wasm")||"https://localhost:4222/sigma-cspm.wasm");function P(){}const{onEventTracking:C,destroy:_,videojsHelper:b,hlsHelper:M,getLog:F}=vu({video:t,adContainer:i,trackingUrl:"",startSession:P,sdk:T,domain:f}),re=Ct(),ae=Ct();function ut(ie){ie.config.loader=vi({adsUrl:s,sdk:T,loader:Hls.DefaultConfig.loader}),re.value=ie;const We=M.createHlsFragChanged(),bt=M.createHlsFragParsingMetadata();ie.on("hlsFragChanged",We),ie.on("hlsFragParsingMetadata",bt),ie.on(Hls.Events.ERROR,(Ot,D)=>{console.error("HLS Error:",Ot,D),D.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",D.details):D.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",D.details):console.error("Other Error:",D.details)}),ae.value=()=>{ie.off("hlsFragChanged",We),ie.off("hlsFragParsingMetadata",bt)}}function O(ie){ie.hls.config.loader=vi({adsUrl:s,sdk:T,loader:SigmaManager.DefaultConfig.loader}),re.value=ie.hls;const We=M.createHlsFragChanged(),bt=M.createHlsFragParsingMetadata();ie.hls.on("hlsFragChanged",We),ie.hls.on("hlsFragParsingMetadata",bt),ie.on(SigmaManager.Events.ERROR,(Ot,D)=>{console.error("HLS Error:",Ot,D),D.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",D.details):D.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",D.details):console.error("Other Error:",D.details)}),ae.value=()=>{ie.hls.destroy()}}const mt=Ct(),Ze=Ct(),mr={instance:T,config:{proxyAds:{uri:s,timeout:2}}};function Ut(ie){mt.value=ie;const We=b.createVideojsAddTrack();ie.textTracks().on("addtrack",We),Ze.value=()=>{ie.textTracks().off("addtrack",We)}}function gr(){var ie,We;_(),(ie=ae.value)==null||ie.call(ae),(We=Ze.value)==null||We.call(Ze),re.value=null,mt.value=null,ae.value=null,Ze.value=null}return{onEventTracking:C,destroy:gr,sigmaPlayer:{attachVideojs:Ut,attachHls:ut,attachSigmaDrm:O,attachVideojs2:Ut,getLog:F},sdk:T,cspm:mr}}window.videojs&&(function(t){const i=t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist;t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist=async function(s){if(s.manifestString&&this.vhs_.options_.cspm)try{await this.vhs_.options_.cspm.instance.loadSource({config:this.vhs_.options_.cspm.config,manifest:s.manifestString,masterUri:this.src})}catch(c){console.error("Error loading source:",c)}i.apply(this,[s])}}(videojs),function(t){const i=t.Vhs.PlaylistLoader.prototype.parseManifest_;t.Vhs.PlaylistLoader.prototype.parseManifest_=function({url:s,manifestString:c}){const f=i.apply(this,[{url:s,manifestString:c}]);return f.playlists&&f.playlists.length&&(f.manifestString=c),f}}(videojs),function(t){const i=t.Vhs.PlaylistLoader.prototype.haveMetadata;t.Vhs.PlaylistLoader.prototype.haveMetadata=async function({playlistString:s,playlistObject:c,url:f,id:m}){try{if(s&&this.vhs_.options_.cspm){const T=this.vhs_.options_.cspm.config;s=await this.vhs_.options_.cspm.instance.loadSource({config:T,manifest:s,masterUri:this.main.playlists[m].resolvedUri})}i.apply(this,[{playlistString:s,playlistObject:c,url:f,id:m}])}catch(T){console.error("Error loading source:",T)}}}(videojs),function(t){const i=(c,f)=>{const m=c.segments||[],T=m[m.length-1],P=T&&T.parts&&T.parts[T.parts.length-1],C=P&&P.duration||T&&T.duration;return C?C*1e3:(c.partTargetDuration||c.targetDuration||10)*500},s=(c,f)=>f&&f.responseURL&&c!==f.responseURL?f.responseURL:c;t.Vhs.PlaylistLoader.prototype.media=function(c,f){if(!c)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error(`Cannot switch media playlist from ${this.state}`);if(typeof c=="string"){if(!this.main.playlists[c])throw new Error(`Unknown playlist URI: ${c}`);c=this.main.playlists[c]}if(window.clearTimeout(this.finalRenditionTimeout),f){const _=(c.partTargetDuration||c.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,c,!1),_);return}const m=this.state,T=!this.media_||c.id!==this.media_.id,P=this.main.playlists[c.id];if(P&&P.endList||c.endList&&c.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=c,T&&(this.trigger("mediachanging"),m==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(i(c)),!T)return;if(this.state="SWITCHING_MEDIA",this.request){if(c.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=c;const C={playlistInfo:{type:"media",uri:c.uri}};this.trigger({type:"playlistrequeststart",metadata:C}),this.request=this.vhs_.xhr({uri:c.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(_,b)=>{if(this.request){if(c.lastRequest=Date.now(),c.resolvedUri=s(c.resolvedUri,b),_)return this.playlistRequestError(this.request,c,m);this.haveMetadata({playlistString:b.responseText,url:c.uri,id:c.id}).then(()=>{this.trigger({type:"playlistrequestcomplete",metadata:C}),m==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")})}})}}(videojs));function mu(t){const i="https://dai.sigma.video/api/proxy-ads/ads/",s=Nn(t),c=`${s.protocol}//${s.host}${s.pathname}`;if(!s.search)return{playerUrl:t,adsUrl:null};const f=ts(t),m=f["sigma.dai.adsEndpoint"];if(!m)return{playerUrl:t,adsUrl:null};const T={},P={};for(const[_,b]of Object.entries(f))_.startsWith("sigma.dai")?_!=="sigma.dai.adsEndpoint"&&(T[_.replace("sigma.dai.","")]=b):P[_]=b;return{playerUrl:Zr(c,P),adsUrl:Zr(Dr(i,m),T)}}return Yr.createSigmaDai=wu,Yr.processURL=mu,Object.defineProperty(Yr,Symbol.toStringTag,{value:"Module"}),Yr}({});
