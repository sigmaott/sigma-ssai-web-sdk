var SigmaDaiSdk=function(Vr){"use strict";const _a=/#/g,Ma=/&/g,Fa=/\//g,za=/=/g,On=/\+/g,La=/%5e/gi,ja=/%60/gi,Ua=/%7c/gi,Ba=/%20/gi;function $a(t){return encodeURI(""+t).replace(Ua,"|")}function Rn(t){return $a(typeof t=="string"?t:JSON.stringify(t)).replace(On,"%2B").replace(Ba,"+").replace(_a,"%23").replace(Ma,"%26").replace(ja,"`").replace(La,"^").replace(Fa,"%2F")}function Sn(t){return Rn(t).replace(za,"%3D")}function Ro(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function qa(t){return Ro(t.replace(On," "))}function Ha(t){return Ro(t.replace(On," "))}function So(t=""){const i={};t[0]==="?"&&(t=t.slice(1));for(const s of t.split("&")){const c=s.match(/([^=]+)=?(.*)/)||[];if(c.length<2)continue;const f=qa(c[1]);if(f==="__proto__"||f==="constructor")continue;const m=Ha(c[2]||"");i[f]===void 0?i[f]=m:Array.isArray(i[f])?i[f].push(m):i[f]=[i[f],m]}return i}function Va(t,i){return(typeof i=="number"||typeof i=="boolean")&&(i=String(i)),i?Array.isArray(i)?i.map(s=>`${Sn(t)}=${Rn(s)}`).join("&"):`${Sn(t)}=${Rn(i)}`:Sn(t)}function Ga(t){return Object.keys(t).filter(i=>t[i]!==void 0).map(i=>Va(i,t[i])).filter(Boolean).join("&")}const Ja=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Ka=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Ya=/^([/\\]\s*){2,}[^/\\]/,Za=/^\.?\//;function xo(t,i={}){return typeof i=="boolean"&&(i={acceptRelative:i}),i.strict?Ja.test(t):Ka.test(t)||(i.acceptRelative?Ya.test(t):!1)}function Qa(t="",i){return t.endsWith("/")}function Xa(t="",i){return(Qa(t)?t.slice(0,-1):t)||"/"}function ka(t="",i){return t.endsWith("/")?t:t+"/"}function es(t,i){if(rs(i)||xo(t))return t;const s=Xa(i);return t.startsWith(s)?t:Do(s,t)}function Gr(t,i){const s=xn(t),c={...So(s.search),...i};return s.search=Ga(c),os(s)}function ts(t){return So(xn(t).search)}function rs(t){return!t||t==="/"}function ns(t){return t&&t!=="/"}function Do(t,...i){let s=t||"";for(const c of i.filter(f=>ns(f)))if(s){const f=c.replace(Za,"");s=ka(s)+f}else s=c;return s}const No=Symbol.for("ufo:protocolRelative");function xn(t="",i){const s=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(s){const[,M,_=""]=s;return{protocol:M.toLowerCase(),pathname:_,href:M+_,auth:"",host:"",search:"",hash:""}}if(!xo(t,{acceptRelative:!0}))return Co(t);const[,c="",f,m=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,P="",T=""]=m.match(/([^#/?]*)(.*)?/)||[];c==="file:"&&(T=T.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:D,search:W,hash:g}=Co(T);return{protocol:c.toLowerCase(),auth:f?f.slice(0,Math.max(0,f.length-1)):"",host:P,pathname:D,search:W,hash:g,[No]:!c}}function Co(t=""){const[i="",s="",c=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:i,search:s,hash:c}}function os(t){const i=t.pathname||"",s=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",c=t.hash||"",f=t.auth?t.auth+"@":"",m=t.host||"";return(t.protocol||t[No]?(t.protocol||"")+"//":"")+f+m+i+s+c}const is=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,as=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ss=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function us(t,i){if(t==="__proto__"||t==="constructor"&&i&&typeof i=="object"&&"prototype"in i){cs(t);return}return i}function cs(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Dn(t,i={}){if(typeof t!="string")return t;const s=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return s.slice(1,-1);if(s.length<=9){const c=s.toLowerCase();if(c==="true")return!0;if(c==="false")return!1;if(c==="undefined")return;if(c==="null")return null;if(c==="nan")return Number.NaN;if(c==="infinity")return Number.POSITIVE_INFINITY;if(c==="-infinity")return Number.NEGATIVE_INFINITY}if(!ss.test(t)){if(i.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(is.test(t)||as.test(t)){if(i.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,us)}return JSON.parse(t)}catch(c){if(i.strict)throw c;return t}}class ds extends Error{constructor(i,s){super(i,s),this.name="FetchError",s!=null&&s.cause&&!this.cause&&(this.cause=s.cause)}}function fs(t){var D,W,g,M,_;const i=((D=t.error)==null?void 0:D.message)||((W=t.error)==null?void 0:W.toString())||"",s=((g=t.request)==null?void 0:g.method)||((M=t.options)==null?void 0:M.method)||"GET",c=((_=t.request)==null?void 0:_.url)||String(t.request)||"/",f=`[${s}] ${JSON.stringify(c)}`,m=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",P=`${f}: ${m}${i?` ${i}`:""}`,T=new ds(P,t.error?{cause:t.error}:void 0);for(const re of["request","options","response"])Object.defineProperty(T,re,{get(){return t[re]}});for(const[re,Re]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(T,re,{get(){return t.response&&t.response[Re]}});return T}const ls=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Io(t="GET"){return ls.has(t.toUpperCase())}function hs(t){if(t===void 0)return!1;const i=typeof t;return i==="string"||i==="number"||i==="boolean"||i===null?!0:i!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const ps=new Set(["image/svg","application/xml","application/xhtml","application/html"]),vs=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function ws(t=""){if(!t)return"json";const i=t.split(";").shift()||"";return vs.test(i)?"json":ps.has(i)||i.startsWith("text/")?"text":"blob"}function ms(t,i,s=globalThis.Headers){const c={...i,...t};if(i!=null&&i.params&&(t!=null&&t.params)&&(c.params={...i==null?void 0:i.params,...t==null?void 0:t.params}),i!=null&&i.query&&(t!=null&&t.query)&&(c.query={...i==null?void 0:i.query,...t==null?void 0:t.query}),i!=null&&i.headers&&(t!=null&&t.headers)){c.headers=new s((i==null?void 0:i.headers)||{});for(const[f,m]of new s((t==null?void 0:t.headers)||{}))c.headers.set(f,m)}return c}const gs=new Set([408,409,425,429,500,502,503,504]),ys=new Set([101,204,205,304]);function Ao(t={}){const{fetch:i=globalThis.fetch,Headers:s=globalThis.Headers,AbortController:c=globalThis.AbortController}=t;async function f(T){const D=T.error&&T.error.name==="AbortError"&&!T.options.timeout||!1;if(T.options.retry!==!1&&!D){let g;typeof T.options.retry=="number"?g=T.options.retry:g=Io(T.options.method)?0:1;const M=T.response&&T.response.status||500;if(g>0&&(Array.isArray(T.options.retryStatusCodes)?T.options.retryStatusCodes.includes(M):gs.has(M))){const _=T.options.retryDelay||0;return _>0&&await new Promise(re=>setTimeout(re,_)),m(T.request,{...T.options,retry:g-1})}}const W=fs(T);throw Error.captureStackTrace&&Error.captureStackTrace(W,m),W}const m=async function(D,W={}){var re;const g={request:D,options:ms(W,t.defaults,s),response:void 0,error:void 0};g.options.method=(re=g.options.method)==null?void 0:re.toUpperCase(),g.options.onRequest&&await g.options.onRequest(g),typeof g.request=="string"&&(g.options.baseURL&&(g.request=es(g.request,g.options.baseURL)),(g.options.query||g.options.params)&&(g.request=Gr(g.request,{...g.options.params,...g.options.query}))),g.options.body&&Io(g.options.method)&&(hs(g.options.body)?(g.options.body=typeof g.options.body=="string"?g.options.body:JSON.stringify(g.options.body),g.options.headers=new s(g.options.headers||{}),g.options.headers.has("content-type")||g.options.headers.set("content-type","application/json"),g.options.headers.has("accept")||g.options.headers.set("accept","application/json")):("pipeTo"in g.options.body&&typeof g.options.body.pipeTo=="function"||typeof g.options.body.pipe=="function")&&("duplex"in g.options||(g.options.duplex="half")));let M;if(!g.options.signal&&g.options.timeout){const Re=new c;M=setTimeout(()=>Re.abort(),g.options.timeout),g.options.signal=Re.signal}try{g.response=await i(g.request,g.options)}catch(Re){return g.error=Re,g.options.onRequestError&&await g.options.onRequestError(g),await f(g)}finally{M&&clearTimeout(M)}if(g.response.body&&!ys.has(g.response.status)&&g.options.method!=="HEAD"){const Re=(g.options.parseResponse?"json":g.options.responseType)||ws(g.response.headers.get("content-type")||"");switch(Re){case"json":{const Qe=await g.response.text(),R=g.options.parseResponse||Dn;g.response._data=R(Qe);break}case"stream":{g.response._data=g.response.body;break}default:g.response._data=await g.response[Re]()}}return g.options.onResponse&&await g.options.onResponse(g),!g.options.ignoreResponseError&&g.response.status>=400&&g.response.status<600?(g.options.onResponseError&&await g.options.onResponseError(g),await f(g)):g.response},P=async function(D,W){return(await m(D,W))._data};return P.raw=m,P.native=(...T)=>i(...T),P.create=(T={})=>Ao({...t,defaults:{...t.defaults,...T}}),P}const Nn=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),Es=Nn.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),bs=Nn.Headers,Ps=Nn.AbortController,Ts=Ao({fetch:Es,Headers:bs,AbortController:Ps}).create({credentials:"omit",onResponseError({response:t,error:i}){console.log("[LOG] ~ error:",i)},onRequest:({options:t,request:i})=>{const s=t.token;s&&(t.headers=t.headers||{},t.headers.Authorization=`${s}`)},onResponse({response:t,options:i}){}}),Os=t=>(i,s)=>(t.set(i,s),s),Wo=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,_o=536870912,Mo=_o*2,Rs=(t,i)=>s=>{const c=i.get(s);let f=c===void 0?s.size:c<Mo?c+1:0;if(!s.has(f))return t(s,f);if(s.size<_o){for(;s.has(f);)f=Math.floor(Math.random()*Mo);return t(s,f)}if(s.size>Wo)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;s.has(f);)f=Math.floor(Math.random()*Wo);return t(s,f)},Fo=new WeakMap,Ss=Os(Fo),Jr=Rs(Ss,Fo),xs=t=>t.method!==void 0&&t.method==="call",Ds=t=>typeof t.id=="number"&&typeof t.result=="boolean",zo=((t,i)=>{let s=null;return()=>{if(s!==null)return s;const c=new Blob([i],{type:"application/javascript; charset=utf-8"}),f=URL.createObjectURL(c);return s=t(f),setTimeout(()=>URL.revokeObjectURL(f)),s}})(t=>{const i=new Map([[0,()=>{}]]),s=new Map([[0,()=>{}]]),c=new Map,f=new Worker(t);return f.addEventListener("message",({data:W})=>{if(xs(W)){const{params:{timerId:g,timerType:M}}=W;if(M==="interval"){const _=i.get(g);if(typeof _===void 0)throw new Error("The timer is in an undefined state.");if(typeof _=="number"){const re=c.get(_);if(re===void 0||re.timerId!==g||re.timerType!==M)throw new Error("The timer is in an undefined state.")}else typeof _=="function"&&_()}else if(M==="timeout"){const _=s.get(g);if(typeof _===void 0)throw new Error("The timer is in an undefined state.");if(typeof _=="number"){const re=c.get(_);if(re===void 0||re.timerId!==g||re.timerType!==M)throw new Error("The timer is in an undefined state.")}else typeof _=="function"&&(_(),s.delete(g))}}else if(Ds(W)){const{id:g}=W,M=c.get(g);if(M===void 0)throw new Error("The timer is in an undefined state.");const{timerId:_,timerType:re}=M;c.delete(g),re==="interval"?i.delete(_):s.delete(_)}else{const{error:{message:g}}=W;throw new Error(g)}}),{clearInterval:W=>{if(typeof i.get(W)=="function"){const g=Jr(c);c.set(g,{timerId:W,timerType:"interval"}),i.set(W,g),f.postMessage({id:g,method:"clear",params:{timerId:W,timerType:"interval"}})}},clearTimeout:W=>{if(typeof s.get(W)=="function"){const g=Jr(c);c.set(g,{timerId:W,timerType:"timeout"}),s.set(W,g),f.postMessage({id:g,method:"clear",params:{timerId:W,timerType:"timeout"}})}},setInterval:(W,g=0,...M)=>{const _=Jr(i);return i.set(_,()=>{W(...M),typeof i.get(_)=="function"&&f.postMessage({id:null,method:"set",params:{delay:g,now:performance.timeOrigin+performance.now(),timerId:_,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:g,now:performance.timeOrigin+performance.now(),timerId:_,timerType:"interval"}}),_},setTimeout:(W,g=0,...M)=>{const _=Jr(s);return s.set(_,()=>W(...M)),f.postMessage({id:null,method:"set",params:{delay:g,now:performance.timeOrigin+performance.now(),timerId:_,timerType:"timeout"}}),_}}},`(()=>{"use strict";const e=new Map,t=new Map,r=t=>{const r=e.get(t);return void 0!==r&&(clearTimeout(r),e.delete(t),!0)},s=e=>{const r=t.get(e);return void 0!==r&&(clearTimeout(r),t.delete(e),!0)},o=(e,t)=>{const r=performance.now(),s=e+t-r-performance.timeOrigin;return{expected:r+s,remainingDelay:s}},i=(e,t,r,s)=>{const o=r-performance.now();o>0?e.set(t,setTimeout(i,o,e,t,r,s)):(e.delete(t),postMessage({id:null,method:"call",params:{timerId:t,timerType:s}}))};addEventListener("message",(n=>{let{data:a}=n;try{if("clear"===a.method){const{id:e,params:{timerId:t,timerType:o}}=a;if("interval"===o)postMessage({id:e,result:r(t)});else{if("timeout"!==o)throw new Error('The given type "'.concat(o,'" is not supported'));postMessage({id:e,result:s(t)})}}else{if("set"!==a.method)throw new Error('The given method "'.concat(a.method,'" is not supported'));{const{params:{delay:r,now:s,timerId:n,timerType:m}}=a;if("interval"===m)((t,r,s)=>{const{expected:n,remainingDelay:a}=o(t,s);e.set(r,setTimeout(i,a,e,r,n,"interval"))})(r,n,s);else{if("timeout"!==m)throw new Error('The given type "'.concat(m,'" is not supported'));((e,r,s)=>{const{expected:n,remainingDelay:a}=o(e,s);t.set(r,setTimeout(i,a,t,r,n,"timeout"))})(r,n,s)}}}}catch(e){postMessage({error:{message:e.message},id:a.id,result:null})}}))})();`),Lo=t=>zo().clearTimeout(t),Cn=(...t)=>zo().setTimeout(...t);/**
* @vue/shared v3.5.1
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ns(t,i){const s=new Set(t.split(","));return c=>s.has(c)}const jo=Object.assign,Cs=Object.prototype.hasOwnProperty,In=(t,i)=>Cs.call(t,i),cr=Array.isArray,xr=t=>Uo(t)==="[object Map]",Is=t=>typeof t=="string",Dr=t=>typeof t=="symbol",Kr=t=>t!==null&&typeof t=="object",As=Object.prototype.toString,Uo=t=>As.call(t),Bo=t=>Uo(t).slice(8,-1),An=t=>Is(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ws=(t=>{const i=Object.create(null);return s=>i[s]||(i[s]=t(s))})(t=>t.charAt(0).toUpperCase()+t.slice(1)),dr=(t,i)=>!Object.is(t,i);var ze={};function fr(t,...i){console.warn(`[Vue warn] ${t}`,...i)}let de;const Wn=new WeakSet;class $o{constructor(i){this.fn=i,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Wn.has(this)&&(Wn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=Nr,Nr=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ko(this),Ho(this);const i=de,s=Et;de=this,Et=!0;try{return this.fn()}finally{ze.NODE_ENV!=="production"&&de!==this&&fr("Active effect was not restored correctly - this is likely a Vue internal bug."),Vo(this),de=i,Et=s,this.flags&=-3}}stop(){if(this.flags&1){for(let i=this.deps;i;i=i.nextDep)zn(i);this.deps=this.depsTail=void 0,Ko(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Wn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fn(this)&&this.run()}get dirty(){return Fn(this)}}let qo=0,Nr;function _n(){qo++}function Mn(){if(--qo>0)return;let t;for(;Nr;){let i=Nr;for(Nr=void 0;i;){const s=i.nextEffect;if(i.nextEffect=void 0,i.flags&=-9,i.flags&1)try{i.trigger()}catch(c){t||(t=c)}i=s}}if(t)throw t}function Ho(t){for(let i=t.deps;i;i=i.nextDep)i.version=-1,i.prevActiveLink=i.dep.activeLink,i.dep.activeLink=i}function Vo(t){let i,s=t.depsTail;for(let c=s;c;c=c.prevDep)c.version===-1?(c===s&&(s=c.prevDep),zn(c),Ms(c)):i=c,c.dep.activeLink=c.prevActiveLink,c.prevActiveLink=void 0;t.deps=i,t.depsTail=s}function Fn(t){for(let i=t.deps;i;i=i.nextDep)if(i.dep.version!==i.version||i.dep.computed&&_s(i.dep.computed)===!1||i.dep.version!==i.version)return!0;return!!t._dirty}function _s(t){if(t.flags&2)return!1;if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Yr))return;t.globalVersion=Yr;const i=t.dep;if(t.flags|=2,i.version>0&&!t.isSSR&&!Fn(t)){t.flags&=-3;return}const s=de,c=Et;de=t,Et=!0;try{Ho(t);const f=t.fn();(i.version===0||dr(f,t._value))&&(t._value=f,i.version++)}catch(f){throw i.version++,f}finally{de=s,Et=c,Vo(t),t.flags&=-3}}function zn(t){const{dep:i,prevSub:s,nextSub:c}=t;if(s&&(s.nextSub=c,t.prevSub=void 0),c&&(c.prevSub=s,t.nextSub=void 0),i.subs===t&&(i.subs=s),!i.subs&&i.computed){i.computed.flags&=-5;for(let f=i.computed.deps;f;f=f.nextDep)zn(f)}}function Ms(t){const{prevDep:i,nextDep:s}=t;i&&(i.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=i,t.nextDep=void 0)}function Fs(t,i){t.effect instanceof $o&&(t=t.effect.fn);const s=new $o(t);try{s.run()}catch(f){throw s.stop(),f}const c=s.run.bind(s);return c.effect=s,c}let Et=!0;const Jo=[];function zs(){Jo.push(Et),Et=!1}function Ls(){const t=Jo.pop();Et=t===void 0?!0:t}function Ko(t){const{cleanup:i}=t;if(t.cleanup=void 0,i){const s=de;de=void 0;try{i()}finally{de=s}}}let Yr=0;class Yo{constructor(i){this.computed=i,this.version=0,this.activeLink=void 0,this.subs=void 0,ze.NODE_ENV!=="production"&&(this.subsHead=void 0)}track(i){if(!de||!Et)return;let s=this.activeLink;if(s===void 0||s.sub!==de)s=this.activeLink={dep:this,sub:de,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},de.deps?(s.prevDep=de.depsTail,de.depsTail.nextDep=s,de.depsTail=s):de.deps=de.depsTail=s,de.flags&4&&Zo(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const c=s.nextDep;c.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=c),s.prevDep=de.depsTail,s.nextDep=void 0,de.depsTail.nextDep=s,de.depsTail=s,de.deps===s&&(de.deps=c)}return ze.NODE_ENV!=="production"&&de.onTrack&&de.onTrack(jo({effect:de},i)),s}trigger(i){this.version++,Yr++,this.notify(i)}notify(i){_n();try{if(ze.NODE_ENV!=="production")for(let s=this.subsHead;s;s=s.nextSub)ze.NODE_ENV!=="production"&&s.sub.onTrigger&&!(s.sub.flags&8)&&s.sub.onTrigger(jo({effect:s.sub},i));for(let s=this.subs;s;s=s.prevSub)s.sub.notify()}finally{Mn()}}}function Zo(t){const i=t.dep.computed;if(i&&!t.dep.subs){i.flags|=20;for(let c=i.deps;c;c=c.nextDep)Zo(c)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),ze.NODE_ENV!=="production"&&t.dep.subsHead===void 0&&(t.dep.subsHead=t),t.dep.subs=t}const Ln=new WeakMap,Qt=Symbol(ze.NODE_ENV!=="production"?"Object iterate":""),jn=Symbol(ze.NODE_ENV!=="production"?"Map keys iterate":""),Cr=Symbol(ze.NODE_ENV!=="production"?"Array iterate":"");function ut(t,i,s){if(Et&&de){let c=Ln.get(t);c||Ln.set(t,c=new Map);let f=c.get(s);f||c.set(s,f=new Yo),ze.NODE_ENV!=="production"?f.track({target:t,type:i,key:s}):f.track()}}function Lt(t,i,s,c,f,m){const P=Ln.get(t);if(!P){Yr++;return}let T=[];if(i==="clear")T=[...P.values()];else{const D=cr(t),W=D&&An(s);if(D&&s==="length"){const g=Number(c);P.forEach((M,_)=>{(_==="length"||_===Cr||!Dr(_)&&_>=g)&&T.push(M)})}else{const g=M=>M&&T.push(M);switch(s!==void 0&&g(P.get(s)),W&&g(P.get(Cr)),i){case"add":D?W&&g(P.get("length")):(g(P.get(Qt)),xr(t)&&g(P.get(jn)));break;case"delete":D||(g(P.get(Qt)),xr(t)&&g(P.get(jn)));break;case"set":xr(t)&&g(P.get(Qt));break}}}_n();for(const D of T)ze.NODE_ENV!=="production"?D.trigger({target:t,type:i,key:s,newValue:c,oldValue:f,oldTarget:m}):D.trigger();Mn()}function lr(t){const i=fe(t);return i===t?i:(ut(i,"iterate",Cr),Ut(t)?i:i.map(nt))}function Un(t){return ut(t=fe(t),"iterate",Cr),t}const js={__proto__:null,[Symbol.iterator](){return Bn(this,Symbol.iterator,nt)},concat(...t){return lr(this).concat(...t.map(i=>cr(i)?lr(i):i))},entries(){return Bn(this,"entries",t=>(t[1]=nt(t[1]),t))},every(t,i){return Ct(this,"every",t,i,void 0,arguments)},filter(t,i){return Ct(this,"filter",t,i,s=>s.map(nt),arguments)},find(t,i){return Ct(this,"find",t,i,nt,arguments)},findIndex(t,i){return Ct(this,"findIndex",t,i,void 0,arguments)},findLast(t,i){return Ct(this,"findLast",t,i,nt,arguments)},findLastIndex(t,i){return Ct(this,"findLastIndex",t,i,void 0,arguments)},forEach(t,i){return Ct(this,"forEach",t,i,void 0,arguments)},includes(...t){return $n(this,"includes",t)},indexOf(...t){return $n(this,"indexOf",t)},join(t){return lr(this).join(t)},lastIndexOf(...t){return $n(this,"lastIndexOf",t)},map(t,i){return Ct(this,"map",t,i,void 0,arguments)},pop(){return Ir(this,"pop")},push(...t){return Ir(this,"push",t)},reduce(t,...i){return Qo(this,"reduce",t,i)},reduceRight(t,...i){return Qo(this,"reduceRight",t,i)},shift(){return Ir(this,"shift")},some(t,i){return Ct(this,"some",t,i,void 0,arguments)},splice(...t){return Ir(this,"splice",t)},toReversed(){return lr(this).toReversed()},toSorted(t){return lr(this).toSorted(t)},toSpliced(...t){return lr(this).toSpliced(...t)},unshift(...t){return Ir(this,"unshift",t)},values(){return Bn(this,"values",nt)}};function Bn(t,i,s){const c=Un(t),f=c[i]();return c!==t&&!Ut(t)&&(f._next=f.next,f.next=()=>{const m=f._next();return m.value&&(m.value=s(m.value)),m}),f}const Us=Array.prototype;function Ct(t,i,s,c,f,m){const P=Un(t),T=P!==t&&!Ut(t),D=P[i];if(D!==Us[i]){const M=D.apply(t,m);return T?nt(M):M}let W=s;P!==t&&(T?W=function(M,_){return s.call(this,nt(M),_,t)}:s.length>2&&(W=function(M,_){return s.call(this,M,_,t)}));const g=D.call(P,W,c);return T&&f?f(g):g}function Qo(t,i,s,c){const f=Un(t);let m=s;return f!==t&&(Ut(t)?s.length>3&&(m=function(P,T,D){return s.call(this,P,T,D,t)}):m=function(P,T,D){return s.call(this,P,nt(T),D,t)}),f[i](m,...c)}function $n(t,i,s){const c=fe(t);ut(c,"iterate",Cr);const f=c[i](...s);return(f===-1||f===!1)&&ou(s[0])?(s[0]=fe(s[0]),c[i](...s)):f}function Ir(t,i,s=[]){zs(),_n();const c=fe(t)[i].apply(t,s);return Mn(),Ls(),c}const Bs=Ns("__proto__,__v_isRef,__isVue"),Xo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Dr));function $s(t){Dr(t)||(t=String(t));const i=fe(this);return ut(i,"has",t),i.hasOwnProperty(t)}class ko{constructor(i=!1,s=!1){this._isReadonly=i,this._isShallow=s}get(i,s,c){const f=this._isReadonly,m=this._isShallow;if(s==="__v_isReactive")return!f;if(s==="__v_isReadonly")return f;if(s==="__v_isShallow")return m;if(s==="__v_raw")return c===(f?m?tu:si:m?eu:ai).get(i)||Object.getPrototypeOf(i)===Object.getPrototypeOf(c)?i:void 0;const P=cr(i);if(!f){let D;if(P&&(D=js[s]))return D;if(s==="hasOwnProperty")return $s}const T=Reflect.get(i,s,pr(i)?i:c);return(Dr(s)?Xo.has(s):Bs(s))||(f||ut(i,"get",s),m)?T:pr(T)?P&&An(s)?T:T.value:Kr(T)?f?ci(T):ui(T):T}}class qs extends ko{constructor(i=!1){super(!1,i)}set(i,s,c,f){let m=i[s];if(!this._isShallow){const D=hr(m);if(!Ut(c)&&!hr(c)&&(m=fe(m),c=fe(c)),!cr(i)&&pr(m)&&!pr(c))return D?!1:(m.value=c,!0)}const P=cr(i)&&An(s)?Number(s)<i.length:In(i,s),T=Reflect.set(i,s,c,pr(i)?i:f);return i===fe(f)&&(P?dr(c,m)&&Lt(i,"set",s,c,m):Lt(i,"add",s,c)),T}deleteProperty(i,s){const c=In(i,s),f=i[s],m=Reflect.deleteProperty(i,s);return m&&c&&Lt(i,"delete",s,void 0,f),m}has(i,s){const c=Reflect.has(i,s);return(!Dr(s)||!Xo.has(s))&&ut(i,"has",s),c}ownKeys(i){return ut(i,"iterate",cr(i)?"length":Qt),Reflect.ownKeys(i)}}class Hs extends ko{constructor(i=!1){super(!0,i)}set(i,s){return ze.NODE_ENV!=="production"&&fr(`Set operation on key "${String(s)}" failed: target is readonly.`,i),!0}deleteProperty(i,s){return ze.NODE_ENV!=="production"&&fr(`Delete operation on key "${String(s)}" failed: target is readonly.`,i),!0}}const Vs=new qs,Gs=new Hs,qn=t=>t,Zr=t=>Reflect.getPrototypeOf(t);function Qr(t,i,s=!1,c=!1){t=t.__v_raw;const f=fe(t),m=fe(i);s||(dr(i,m)&&ut(f,"get",i),ut(f,"get",m));const{has:P}=Zr(f),T=c?qn:s?Hn:nt;if(P.call(f,i))return T(t.get(i));if(P.call(f,m))return T(t.get(m));t!==f&&t.get(i)}function Xr(t,i=!1){const s=this.__v_raw,c=fe(s),f=fe(t);return i||(dr(t,f)&&ut(c,"has",t),ut(c,"has",f)),t===f?s.has(t):s.has(t)||s.has(f)}function kr(t,i=!1){return t=t.__v_raw,!i&&ut(fe(t),"iterate",Qt),Reflect.get(t,"size",t)}function ei(t,i=!1){!i&&!Ut(t)&&!hr(t)&&(t=fe(t));const s=fe(this);return Zr(s).has.call(s,t)||(s.add(t),Lt(s,"add",t,t)),this}function ti(t,i,s=!1){!s&&!Ut(i)&&!hr(i)&&(i=fe(i));const c=fe(this),{has:f,get:m}=Zr(c);let P=f.call(c,t);P?ze.NODE_ENV!=="production"&&ii(c,f,t):(t=fe(t),P=f.call(c,t));const T=m.call(c,t);return c.set(t,i),P?dr(i,T)&&Lt(c,"set",t,i,T):Lt(c,"add",t,i),this}function ri(t){const i=fe(this),{has:s,get:c}=Zr(i);let f=s.call(i,t);f?ze.NODE_ENV!=="production"&&ii(i,s,t):(t=fe(t),f=s.call(i,t));const m=c?c.call(i,t):void 0,P=i.delete(t);return f&&Lt(i,"delete",t,void 0,m),P}function ni(){const t=fe(this),i=t.size!==0,s=ze.NODE_ENV!=="production"?xr(t)?new Map(t):new Set(t):void 0,c=t.clear();return i&&Lt(t,"clear",void 0,void 0,s),c}function en(t,i){return function(c,f){const m=this,P=m.__v_raw,T=fe(P),D=i?qn:t?Hn:nt;return!t&&ut(T,"iterate",Qt),P.forEach((W,g)=>c.call(f,D(W),D(g),m))}}function tn(t,i,s){return function(...c){const f=this.__v_raw,m=fe(f),P=xr(m),T=t==="entries"||t===Symbol.iterator&&P,D=t==="keys"&&P,W=f[t](...c),g=s?qn:i?Hn:nt;return!i&&ut(m,"iterate",D?jn:Qt),{next(){const{value:M,done:_}=W.next();return _?{value:M,done:_}:{value:T?[g(M[0]),g(M[1])]:g(M),done:_}},[Symbol.iterator](){return this}}}}function jt(t){return function(...i){if(ze.NODE_ENV!=="production"){const s=i[0]?`on key "${i[0]}" `:"";fr(`${Ws(t)} operation ${s}failed: target is readonly.`,fe(this))}return t==="delete"?!1:t==="clear"?void 0:this}}function Js(){const t={get(m){return Qr(this,m)},get size(){return kr(this)},has:Xr,add:ei,set:ti,delete:ri,clear:ni,forEach:en(!1,!1)},i={get(m){return Qr(this,m,!1,!0)},get size(){return kr(this)},has:Xr,add(m){return ei.call(this,m,!0)},set(m,P){return ti.call(this,m,P,!0)},delete:ri,clear:ni,forEach:en(!1,!0)},s={get(m){return Qr(this,m,!0)},get size(){return kr(this,!0)},has(m){return Xr.call(this,m,!0)},add:jt("add"),set:jt("set"),delete:jt("delete"),clear:jt("clear"),forEach:en(!0,!1)},c={get(m){return Qr(this,m,!0,!0)},get size(){return kr(this,!0)},has(m){return Xr.call(this,m,!0)},add:jt("add"),set:jt("set"),delete:jt("delete"),clear:jt("clear"),forEach:en(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(m=>{t[m]=tn(m,!1,!1),s[m]=tn(m,!0,!1),i[m]=tn(m,!1,!0),c[m]=tn(m,!0,!0)}),[t,s,i,c]}const[Ks,Ys,Zs,Qs]=Js();function oi(t,i){const s=i?t?Qs:Zs:t?Ys:Ks;return(c,f,m)=>f==="__v_isReactive"?!t:f==="__v_isReadonly"?t:f==="__v_raw"?c:Reflect.get(In(s,f)&&f in c?s:c,f,m)}const Xs={get:oi(!1,!1)},ks={get:oi(!0,!1)};function ii(t,i,s){const c=fe(s);if(c!==s&&i.call(t,c)){const f=Bo(t);fr(`Reactive ${f} contains both the raw and reactive versions of the same object${f==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const ai=new WeakMap,eu=new WeakMap,si=new WeakMap,tu=new WeakMap;function ru(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nu(t){return t.__v_skip||!Object.isExtensible(t)?0:ru(Bo(t))}function ui(t){return hr(t)?t:di(t,!1,Vs,Xs,ai)}function ci(t){return di(t,!0,Gs,ks,si)}function di(t,i,s,c,f){if(!Kr(t))return ze.NODE_ENV!=="production"&&fr(`value cannot be made ${i?"readonly":"reactive"}: ${String(t)}`),t;if(t.__v_raw&&!(i&&t.__v_isReactive))return t;const m=f.get(t);if(m)return m;const P=nu(t);if(P===0)return t;const T=new Proxy(t,P===2?c:s);return f.set(t,T),T}function hr(t){return!!(t&&t.__v_isReadonly)}function Ut(t){return!!(t&&t.__v_isShallow)}function ou(t){return t?!!t.__v_raw:!1}function fe(t){const i=t&&t.__v_raw;return i?fe(i):t}const nt=t=>Kr(t)?ui(t):t,Hn=t=>Kr(t)?ci(t):t;function pr(t){return t?t.__v_isRef===!0:!1}function bt(t){return iu(t,!1)}function iu(t,i){return pr(t)?t:new au(t,i)}class au{constructor(i,s){this.dep=new Yo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?i:fe(i),this._value=s?i:nt(i),this.__v_isShallow=s}get value(){return ze.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track(),this._value}set value(i){const s=this._rawValue,c=this.__v_isShallow||Ut(i)||hr(i);i=c?i:fe(i),dr(i,s)&&(this._rawValue=i,this._value=c?i:nt(i),ze.NODE_ENV!=="production"?this.dep.trigger({target:this,type:"set",key:"value",newValue:i,oldValue:s}):this.dep.trigger())}}function su(){const t=new Set,i=f=>{t.delete(f)};return{on:f=>(t.add(f),{off:()=>i(f)}),off:i,trigger:(...f)=>Promise.all(Array.from(t).map(m=>m(...f)))}}async function uu(t){try{return{data:await t,error:null}}catch(i){return{data:null,error:i||{message:"Unknown error"}}}}var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fi={exports:{}};(function(t,i){(function(s,c){t.exports=c()})(typeof self<"u"?self:cu,function(){return function(s){var c={};function f(m){if(c[m])return c[m].exports;var P=c[m]={i:m,l:!1,exports:{}};return s[m].call(P.exports,P,P.exports,f),P.l=!0,P.exports}return f.m=s,f.c=c,f.d=function(m,P,T){f.o(m,P)||Object.defineProperty(m,P,{enumerable:!0,get:T})},f.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},f.t=function(m,P){if(1&P&&(m=f(m)),8&P||4&P&&typeof m=="object"&&m&&m.__esModule)return m;var T=Object.create(null);if(f.r(T),Object.defineProperty(T,"default",{enumerable:!0,value:m}),2&P&&typeof m!="string")for(var D in m)f.d(T,D,(function(W){return m[W]}).bind(null,D));return T},f.n=function(m){var P=m&&m.__esModule?function(){return m.default}:function(){return m};return f.d(P,"a",P),P},f.o=function(m,P){return{}.hasOwnProperty.call(m,P)},f.p="",f(f.s=0)}([function(s,c,f){f.r(c),f.d(c,"PopupOpenError",function(){return no}),f.d(c,"create",function(){return Ku}),f.d(c,"destroy",function(){return Yu}),f.d(c,"destroyComponents",function(){return ya}),f.d(c,"destroyAll",function(){return Ea}),f.d(c,"PROP_TYPE",function(){return pe}),f.d(c,"PROP_SERIALIZATION",function(){return bn}),f.d(c,"CONTEXT",function(){return xe}),f.d(c,"EVENT",function(){return Ee});function m(e,r){return(m=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n})(e,r)}function P(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,m(e,r)}function T(){return(T=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function D(e){try{if(!e)return!1;if(typeof Promise<"u"&&e instanceof Promise)return!0;if(typeof window<"u"&&typeof window.Window=="function"&&e instanceof window.Window||typeof window<"u"&&typeof window.constructor=="function"&&e instanceof window.constructor)return!1;var r={}.toString;if(r){var n=r.call(e);if(n==="[object Window]"||n==="[object global]"||n==="[object DOMWindow]")return!1}if(typeof e.then=="function")return!0}catch{return!1}return!1}var W=[],g=[],M=0,_;function re(){if(!M&&_){var e=_;_=null,e.resolve()}}function Re(){M+=1}function Qe(){M-=1,re()}var R=function(){function e(n){var o=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var a,u,d=!1,h=!1,l=!1;Re();try{n(function(v){l?o.resolve(v):(d=!0,a=v)},function(v){l?o.reject(v):(h=!0,u=v)})}catch(v){Qe(),this.reject(v);return}Qe(),l=!0,d?this.resolve(a):h&&this.reject(u)}}var r=e.prototype;return r.resolve=function(n){if(this.resolved||this.rejected)return this;if(D(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},r.reject=function(n){var o=this;if(this.resolved||this.rejected)return this;if(D(n))throw new Error("Can not reject promise with another promise");if(!n){var a=n&&typeof n.toString=="function"?n.toString():{}.toString.call(n);n=new Error("Expected reject to be called with Error, got "+a)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){o.errorHandled||function(u,d){if(W.indexOf(u)===-1){W.push(u),setTimeout(function(){throw u},1);for(var h=0;h<g.length;h++)g[h](u,d)}}(n,o)},1),this.dispatch(),this},r.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},r.dispatch=function(){var n=this.resolved,o=this.rejected,a=this.handlers;if(!this.dispatching&&(n||o)){this.dispatching=!0,Re();for(var u=function(y,b){return y.then(function(O){b.resolve(O)},function(O){b.reject(O)})},d=0;d<a.length;d++){var h=a[d],l=h.onSuccess,v=h.onError,E=h.promise,w=void 0;if(n)try{w=l?l(this.value):this.value}catch(y){E.reject(y);continue}else if(o){if(!v){E.reject(this.error);continue}try{w=v(this.error)}catch(y){E.reject(y);continue}}if(w instanceof e&&(w.resolved||w.rejected)){var p=w;p.resolved?E.resolve(p.value):E.reject(p.error),p.errorHandled=!0}else D(w)?w instanceof e&&(w.resolved||w.rejected)?w.resolved?E.resolve(w.value):E.reject(w.error):u(w,E):E.resolve(w)}a.length=0,this.dispatching=!1,Qe()}},r.then=function(n,o){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.then expected a function for success handler");if(o&&typeof o!="function"&&!o.call)throw new Error("Promise.then expected a function for error handler");var a=new e;return this.handlers.push({promise:a,onSuccess:n,onError:o}),this.errorHandled=!0,this.dispatch(),a},r.catch=function(n){return this.then(void 0,n)},r.finally=function(n){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(o){return e.try(n).then(function(){return o})},function(o){return e.try(n).then(function(){throw o})})},r.timeout=function(n,o){var a=this;if(this.resolved||this.rejected)return this;var u=setTimeout(function(){a.resolved||a.rejected||a.reject(o||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(d){return clearTimeout(u),d})},r.toPromise=function(){if(typeof Promise>"u")throw new TypeError("Could not find Promise");return Promise.resolve(this)},r.lazy=function(){return this.errorHandled=!0,this},e.resolve=function(n){return n instanceof e?n:D(n)?new e(function(o,a){return n.then(o,a)}):new e().resolve(n)},e.reject=function(n){return new e().reject(n)},e.asyncReject=function(n){return new e().asyncReject(n)},e.all=function(n){var o=new e,a=n.length,u=[].slice();if(!a)return o.resolve(u),o;for(var d=function(v,E,w){return E.then(function(p){u[v]=p,(a-=1)==0&&o.resolve(u)},function(p){w.reject(p)})},h=0;h<n.length;h++){var l=n[h];if(l instanceof e){if(l.resolved){u[h]=l.value,a-=1;continue}}else if(!D(l)){u[h]=l,a-=1;continue}d(h,e.resolve(l),o)}return a===0&&o.resolve(u),o},e.hash=function(n){var o={},a=[],u=function(h){if(n.hasOwnProperty(h)){var l=n[h];D(l)?a.push(l.then(function(v){o[h]=v})):o[h]=l}};for(var d in n)u(d);return e.all(a).then(function(){return o})},e.map=function(n,o){return e.all(n.map(o))},e.onPossiblyUnhandledException=function(n){return function(o){return g.push(o),{cancel:function(){g.splice(g.indexOf(o),1)}}}(n)},e.try=function(n,o,a){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.try expected a function");var u;Re();try{u=n.apply(o,a||[])}catch(d){return Qe(),e.reject(d)}return Qe(),e.resolve(u)},e.delay=function(n){return new e(function(o){setTimeout(o,n)})},e.isPromise=function(n){return!!(n&&n instanceof e)||D(n)},e.flush=function(){return function(n){var o=_=_||new n;return re(),o}(e)},e}();function ct(e){return{}.toString.call(e)==="[object RegExp]"}var St={IFRAME:"iframe",POPUP:"popup"},Pt=`Call was rejected by callee.\r
`;function ve(e){return e===void 0&&(e=window),e.location.protocol}function ot(e){if(e===void 0&&(e=window),e.mockDomain){var r=e.mockDomain.split("//")[0];if(r)return r}return ve(e)}function It(e){return e===void 0&&(e=window),ot(e)==="about:"}function Je(e){if(e===void 0&&(e=window),e)try{if(e.parent&&e.parent!==e)return e.parent}catch{}}function Te(e){if(e===void 0&&(e=window),e&&!Je(e))try{return e.opener}catch{}}function gr(e){try{return!0}catch{}return!1}function ne(e){e===void 0&&(e=window);var r=e.location;if(!r)throw new Error("Can not read window location");var n=ve(e);if(!n)throw new Error("Can not read window protocol");if(n==="file:")return"file://";if(n==="about:"){var o=Je(e);return o&&gr()?ne(o):"about://"}var a=r.host;if(!a)throw new Error("Can not read window host");return n+"//"+a}function F(e){e===void 0&&(e=window);var r=ne(e);return r&&e.mockDomain&&e.mockDomain.indexOf("mock:")===0?e.mockDomain:r}function U(e){if(!function(r){try{if(r===window)return!0}catch{}try{var n=Object.getOwnPropertyDescriptor(r,"location");if(n&&n.enumerable===!1)return!1}catch{}try{if(It(r)&&gr())return!0}catch{}try{if(function(o){return o===void 0&&(o=window),ot(o)==="mock:"}(r)&&gr())return!0}catch{}try{if(ne(r)===ne(window))return!0}catch{}return!1}(e))return!1;try{if(e===window||It(e)&&gr()||F(window)===F(e))return!0}catch{}return!1}function te(e){if(!U(e))throw new Error("Expected window to be same domain");return e}function et(e,r){if(!e||!r)return!1;var n=Je(r);return n?n===e:function(o){var a=[];try{for(;o.parent!==o;)a.push(o.parent),o=o.parent}catch{}return a}(r).indexOf(e)!==-1}function Ke(e){var r=[],n;try{n=e.frames}catch{n=e}var o;try{o=n.length}catch{}if(o===0)return r;if(o){for(var a=0;a<o;a++){var u=void 0;try{u=n[a]}catch{continue}r.push(u)}return r}for(var d=0;d<100;d++){var h=void 0;try{h=n[d]}catch{return r}if(!h)return r;r.push(h)}return r}function tt(e){for(var r=[],n=0,o=Ke(e);n<o.length;n++){var a=o[n];r.push(a);for(var u=0,d=tt(a);u<d.length;u++)r.push(d[u])}return r}function Se(e){e===void 0&&(e=window);try{if(e.top)return e.top}catch{}if(Je(e)===e)return e;try{if(et(window,e)&&window.top)return window.top}catch{}try{if(et(e,window)&&window.top)return window.top}catch{}for(var r=0,n=tt(e);r<n.length;r++){var o=n[r];try{if(o.top)return o.top}catch{}if(Je(o)===o)return o}}function Ye(e){var r=Se(e);if(!r)throw new Error("Can not determine top window");var n=[].concat(tt(r),[r]);return n.indexOf(e)===-1&&(n=[].concat(n,[e],tt(e))),n}var yr=[],rn=[];function ge(e,r){r===void 0&&(r=!0);try{if(e===window)return!1}catch{return!0}try{if(!e)return!0}catch{return!0}try{if(e.closed)return!0}catch(a){return!a||a.message!==Pt}if(r&&U(e))try{if(e.mockclosed)return!0}catch{}try{if(!e.parent||!e.top)return!0}catch{}var n=function(a,u){for(var d=0;d<a.length;d++)try{if(a[d]===u)return d}catch{}return-1}(yr,e);if(n!==-1){var o=rn[n];if(o&&function(a){if(!a.contentWindow||!a.parentNode)return!0;var u=a.ownerDocument;if(u&&u.documentElement&&!u.documentElement.contains(a)){for(var d=a;d.parentNode&&d.parentNode!==d;)d=d.parentNode;if(!d.host||!u.documentElement.contains(d.host))return!0}return!1}(o))return!0}return!1}function nn(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent}function Xt(e,r){for(var n=Ke(e),o=0;o<n.length;o++){var a=n[o];try{if(U(a)&&a.name===r&&n.indexOf(a)!==-1)return a}catch{}}try{if(n.indexOf(e.frames[r])!==-1)return e.frames[r]}catch{}try{if(n.indexOf(e[r])!==-1)return e[r]}catch{}}function on(e,r){return e===Te(r)}function kt(e){return e===void 0&&(e=window),Te(e=e||window)||Je(e)||void 0}function Er(e,r){for(var n=0;n<e.length;n++)for(var o=e[n],a=0;a<r.length;a++)if(o===r[a])return!0;return!1}function Vn(e){e===void 0&&(e=window);for(var r=0,n=e;n;)(n=Je(n))&&(r+=1);return r}function an(e,r){var n=Se(e)||e,o=Se(r)||r;try{if(n&&o)return n===o}catch{}var a=Ye(e),u=Ye(r);if(Er(a,u))return!0;var d=Te(n),h=Te(o);return d&&Er(Ye(d),u)||h&&Er(Ye(h),a),!1}function ft(e,r){if(typeof e=="string"){if(typeof r=="string")return e==="*"||r===e;if(ct(r)||Array.isArray(r))return!1}return ct(e)?ct(r)?e.toString()===r.toString():!Array.isArray(r)&&!!r.match(e):!!Array.isArray(e)&&(Array.isArray(r)?JSON.stringify(e)===JSON.stringify(r):!ct(r)&&e.some(function(n){return ft(n,r)}))}function At(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):F()}function wi(e,r,n,o){n===void 0&&(n=1e3),o===void 0&&(o=1/0);var a;return function u(){if(ge(e))return a&&clearTimeout(a),r();o<=0?clearTimeout(a):(o-=n,a=setTimeout(u,n))}(),{cancel:function(){a&&clearTimeout(a)}}}function er(e){try{if(e===window)return!0}catch(r){if(r&&r.message===Pt)return!0}try{if({}.toString.call(e)==="[object Window]")return!0}catch(r){if(r&&r.message===Pt)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(r){if(r&&r.message===Pt)return!0}try{if(e&&e.self===e)return!0}catch(r){if(r&&r.message===Pt)return!0}try{if(e&&e.parent===e)return!0}catch(r){if(r&&r.message===Pt)return!0}try{if(e&&e.top===e)return!0}catch(r){if(r&&r.message===Pt)return!0}try{if(e&&e.__cross_domain_utils_window_check__==="__unlikely_value__")return!1}catch{return!0}try{if("postMessage"in e&&"self"in e&&"location"in e)return!0}catch{}return!1}function Gn(e){if(r=At(e),r.indexOf("mock:")!==0)return e;var r;throw new Error("Mock urls not supported out of test mode")}function mi(e){if(U(e))return te(e).frameElement;for(var r=0,n=document.querySelectorAll("iframe");r<n.length;r++){var o=n[r];if(o&&o.contentWindow&&o.contentWindow===e)return o}}function gi(e){if(function(n){return n===void 0&&(n=window),!!Je(n)}(e)){var r=mi(e);if(r&&r.parentElement){r.parentElement.removeChild(r);return}}try{e.close()}catch{}}function sn(e,r){for(var n=0;n<e.length;n++)try{if(e[n]===r)return n}catch{}return-1}var un=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if(typeof WeakMap>"u"||Object.freeze===void 0)return!1;try{var n=new WeakMap,o={};return Object.freeze(o),n.set(o,"__testvalue__"),n.get(o)==="__testvalue__"}catch{return!1}}())try{this.weakmap=new WeakMap}catch{}this.keys=[],this.values=[]}var r=e.prototype;return r._cleanupClosedWindows=function(){for(var n=this.weakmap,o=this.keys,a=0;a<o.length;a++){var u=o[a];if(er(u)&&ge(u)){if(n)try{n.delete(u)}catch{}o.splice(a,1),this.values.splice(a,1),a-=1}}},r.isSafeToReadWrite=function(n){return!er(n)},r.set=function(n,o){if(!n)throw new Error("WeakMap expected key");var a=this.weakmap;if(a)try{a.set(n,o)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var u=this.name,d=n[u];d&&d[0]===n?d[1]=o:Object.defineProperty(n,u,{value:[n,o],writable:!0});return}catch{}this._cleanupClosedWindows();var h=this.keys,l=this.values,v=sn(h,n);v===-1?(h.push(n),l.push(o)):l[v]=o},r.get=function(n){if(!n)throw new Error("WeakMap expected key");var o=this.weakmap;if(o)try{if(o.has(n))return o.get(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return a&&a[0]===n?a[1]:void 0}catch{}this._cleanupClosedWindows();var u=sn(this.keys,n);if(u!==-1)return this.values[u]},r.delete=function(n){if(!n)throw new Error("WeakMap expected key");var o=this.weakmap;if(o)try{o.delete(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];a&&a[0]===n&&(a[0]=a[1]=void 0)}catch{}this._cleanupClosedWindows();var u=this.keys,d=sn(u,n);d!==-1&&(u.splice(d,1),this.values.splice(d,1))},r.has=function(n){if(!n)throw new Error("WeakMap expected key");var o=this.weakmap;if(o)try{if(o.has(n))return!0}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var a=n[this.name];return!(!a||a[0]!==n)}catch{}return this._cleanupClosedWindows(),sn(this.keys,n)!==-1},r.getOrSet=function(n,o){if(this.has(n))return this.get(n);var a=o();return this.set(n,a),a},e}();function yi(e){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function bu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ei(e,r,n){return(Ei=bu()?Reflect.construct:function(o,a,u){var d=[null];d.push.apply(d,a);var h=new(Function.bind.apply(o,d));return u&&m(h,u.prototype),h}).apply(null,arguments)}function bi(e){var r=typeof Map=="function"?new Map:void 0;return(bi=function(n){if(n===null||(o=n,Function.toString.call(o).indexOf("[native code]")===-1))return n;var o;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(n))return r.get(n);r.set(n,a)}function a(){return Ei(n,arguments,yi(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),m(a,n)})(e)}function Jn(e){var r=!1;try{(e instanceof window.Element||e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object")&&(r=!0)}catch{}return r}function Kn(e){return e.name||e.__name__||e.displayName||"anonymous"}function Yn(e,r){try{delete e.name,e.name=r}catch{}return e.__name__=e.displayName=r,e}function Zn(e){if(typeof btoa=="function")return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(r,n){return String.fromCharCode(parseInt(n,16))})).replace(/[=]/g,"");if(typeof Buffer<"u")return Buffer.from(e,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}function Xe(){var e="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+Zn(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var cn;function Qn(e){try{return JSON.stringify([].slice.call(e),function(r,n){return typeof n=="function"?"memoize["+function(o){if(cn=cn||new un,o==null||typeof o!="object"&&typeof o!="function")throw new Error("Invalid object");var a=cn.get(o);return a||(a=typeof o+":"+Xe(),cn.set(o,a)),a}(n)+"]":Jn(n)?{}:n})}catch{throw new Error("Arguments not serializable -- can not be used to memoize")}}function Pu(){return{}}var Ar=0,Pi=0;function Bt(e,r){r===void 0&&(r={});var n=r.thisNamespace,o=n!==void 0&&n,a=r.time,u,d,h=Ar;Ar+=1;var l=function(){for(var v=arguments.length,E=new Array(v),w=0;w<v;w++)E[w]=arguments[w];h<Pi&&(u=null,d=null,h=Ar,Ar+=1);var p;p=o?(d=d||new un).getOrSet(this,Pu):u=u||{};var y;try{y=Qn(E)}catch{return e.apply(this,arguments)}var b=p[y];if(b&&a&&Date.now()-b.time<a&&(delete p[y],b=null),b)return b.value;var O=Date.now(),S=e.apply(this,arguments);return p[y]={time:O,value:S},S};return l.reset=function(){u=null,d=null},Yn(l,(r.name||Kn(e))+"::memoized")}Bt.clear=function(){Pi=Ar};function Tu(e){var r={};function n(){for(var o=arguments,a=this,u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];var l=Qn(d);return r.hasOwnProperty(l)||(r[l]=R.try(function(){return e.apply(a,o)}).finally(function(){delete r[l]})),r[l]}return n.reset=function(){r={}},Yn(n,Kn(e)+"::promiseMemoized")}function ye(){}function dn(e){var r=!1;return Yn(function(){if(!r)return r=!0,e.apply(this,arguments)},Kn(e)+"::once")}function br(e,r){if(r===void 0&&(r=1),r>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+{}.toString.call(e)+">";if(typeof e=="string")return e;if(e instanceof Error){var n=e&&e.stack,o=e&&e.message;if(n&&o)return n.indexOf(o)!==-1?n:o+`
`+n;if(n)return n;if(o)return o}return e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}catch(a){return"Error while stringifying error: "+br(a,r+1)}}function fn(e){return typeof e=="string"?e:e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}function Pr(e,r){if(!r)return e;if(Object.assign)return Object.assign(e,r);for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}Bt(function(e){if(Object.values)return Object.values(e);var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(e[n]);return r});function Ou(e){return e}function Wr(e,r){var n;return function o(){n=setTimeout(function(){e(),o()},r)}(),{cancel:function(){clearTimeout(n)}}}function Xn(e){return e.replace(/-([a-z])/g,function(r){return r[1].toUpperCase()})}function Ti(e,r,n){if(Array.isArray(e)){if(typeof r!="number")throw new TypeError("Array key must be number")}else if(typeof e=="object"&&e!==null&&typeof r!="string")throw new TypeError("Object key must be string");Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){delete e[r];var o=n();return e[r]=o,o},set:function(o){delete e[r],e[r]=o}})}function kn(e){return[].slice.call(e)}function Oi(e){return typeof(r=e)=="object"&&r!==null&&{}.toString.call(e)==="[object Object]";var r}function eo(e){if(!Oi(e))return!1;var r=e.constructor;if(typeof r!="function")return!1;var n=r.prototype;return!!Oi(n)&&!!n.hasOwnProperty("isPrototypeOf")}function ln(e,r,n){if(n===void 0&&(n=""),Array.isArray(e)){for(var o=e.length,a=[],u=function(E){Ti(a,E,function(){var w=n?n+"."+E:""+E,p=r(e[E],E,w);return(eo(p)||Array.isArray(p))&&(p=ln(p,r,w)),p})},d=0;d<o;d++)u(d);return a}if(eo(e)){var h={},l=function(E){if(!e.hasOwnProperty(E))return 1;Ti(h,E,function(){var w=n?n+"."+E:""+E,p=r(e[E],E,w);return(eo(p)||Array.isArray(p))&&(p=ln(p,r,w)),p})};for(var v in e)l(v);return h}throw new Error("Pass an object or array")}function $t(e){return e!=null}function to(e){return{}.toString.call(e)==="[object RegExp]"}function _r(e,r,n){if(e.hasOwnProperty(r))return e[r];var o=n();return e[r]=o,o}function hn(e){var r=[],n=!1,o,a={set:function(u,d){return n||(e[u]=d,a.register(function(){delete e[u]})),d},register:function(u){var d=dn(function(){return u(o)});return n?u(o):r.push(d),{cancel:function(){var h=r.indexOf(d);h!==-1&&r.splice(h,1)}}},all:function(u){o=u;var d=[];for(n=!0;r.length;){var h=r.shift();d.push(h())}return R.all(d).then(ye)}};return a}function pn(e,r){if(r==null)throw new Error("Expected "+e+" to be present");return r}var Ru=function(e){P(r,e);function r(n){var o;return(o=e.call(this,n)||this).name=o.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(o),o.constructor):o.stack=new Error(n).stack,o}return r}(bi(Error));function Ri(){var e=document.body;if(!e)throw new Error("Body element not found");return e}function vn(){return!!document.body&&document.readyState==="complete"}function Si(){return!!document.body&&document.readyState==="interactive"}function xi(e){return encodeURIComponent(e)}Bt(function(){return new R(function(e){if(vn()||Si())return e();var r=setInterval(function(){if(vn()||Si())return clearInterval(r),e()},10)})});function Di(e){return function(r,n,o){o===void 0&&(o=[]);var a=r.__inline_memoize_cache__=r.__inline_memoize_cache__||{},u=Qn(o);return a.hasOwnProperty(u)?a[u]:a[u]=(function(){var d={};if(!e||e.indexOf("=")===-1)return d;for(var h=0,l=e.split("&");h<l.length;h++){var v=l[h];(v=v.split("="))[0]&&v[1]&&(d[decodeURIComponent(v[0])]=decodeURIComponent(v[1]))}return d}).apply(void 0,o)}(Di,0,[e])}function Ni(e,r){return r===void 0&&(r={}),r&&Object.keys(r).length?function(n){return n===void 0&&(n={}),Object.keys(n).filter(function(o){return typeof n[o]=="string"||typeof n[o]=="boolean"}).map(function(o){var a=n[o];if(typeof a!="string"&&typeof a!="boolean")throw new TypeError("Invalid type for query");return xi(o)+"="+xi(a.toString())}).join("&")}(T({},Di(e),r)):e}function Su(e,r){e.appendChild(r)}function ro(e,r){return r===void 0&&(r=document),Jn(e)?e:typeof e=="string"?r.querySelector(e):void 0}function Ci(e){return new R(function(r,n){var o=fn(e),a=ro(e);if(a)return r(a);if(vn())return n(new Error("Document is ready and element "+o+" does not exist"));var u=setInterval(function(){if(a=ro(e))r(a),clearInterval(u);else if(vn())return clearInterval(u),n(new Error("Document is ready and element "+o+" does not exist"))},10)})}var no=function(e){P(r,e);function r(){return e.apply(this,arguments)||this}return r}(Ru),wn;function Ii(e){if((wn=wn||new un).has(e)){var r=wn.get(e);if(r)return r}var n=new R(function(o,a){e.addEventListener("load",function(){(function(u){if(function(){for(var d=0;d<yr.length;d++){var h=!1;try{h=yr[d].closed}catch{}h&&(rn.splice(d,1),yr.splice(d,1))}}(),u&&u.contentWindow)try{yr.push(u.contentWindow),rn.push(u)}catch{}})(e),o(e)}),e.addEventListener("error",function(u){e.contentWindow?o(e):a(u)})});return wn.set(e,n),n}function oo(e){return Ii(e).then(function(r){if(!r.contentWindow)throw new Error("Could not find window in iframe");return r.contentWindow})}function Ai(e,r){e===void 0&&(e={});var n=e.style||{},o=function(u,d,h){u===void 0&&(u="div"),d===void 0&&(d={}),u=u.toLowerCase();var l=document.createElement(u);if(d.style&&Pr(l.style,d.style),d.class&&(l.className=d.class.join(" ")),d.id&&l.setAttribute("id",d.id),d.attributes)for(var v=0,E=Object.keys(d.attributes);v<E.length;v++){var w=E[v];l.setAttribute(w,d.attributes[w])}if(d.styleSheet&&function(p,y,b){b===void 0&&(b=window.document),p.styleSheet?p.styleSheet.cssText=y:p.appendChild(b.createTextNode(y))}(l,d.styleSheet),d.html){if(u==="iframe")throw new Error("Iframe html can not be written unless container provided and iframe in DOM");l.innerHTML=d.html}return l}("iframe",{attributes:T({allowTransparency:"true"},e.attributes||{}),style:T({backgroundColor:"transparent",border:"none"},n),html:e.html,class:e.class}),a=window.navigator.userAgent.match(/MSIE|Edge/i);return o.hasAttribute("id")||o.setAttribute("id",Xe()),Ii(o),(e.url||a)&&o.setAttribute("src",e.url||"about:blank"),o}function Wi(e,r,n){return e.addEventListener(r,n),{cancel:function(){e.removeEventListener(r,n)}}}function xu(e){e.style.setProperty("display","")}function _i(e){e.style.setProperty("display","none","important")}function Mr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Tr(e){return!(e&&e.parentNode&&e.ownerDocument&&e.ownerDocument.documentElement&&e.ownerDocument.documentElement.contains(e))}function Mi(e,r,n){var o=n===void 0?{}:n,a=o.width,u=a===void 0||a,d=o.height,h=d===void 0||d,l=o.interval,v=l===void 0?100:l,E=o.win,w=E===void 0?window:E,p=e.offsetWidth,y=e.offsetHeight,b=!1;r({width:p,height:y});var O=function(){if(!b&&function(I){return!!(I.offsetWidth||I.offsetHeight||I.getClientRects().length)}(e)){var z=e.offsetWidth,V=e.offsetHeight;(u&&z!==p||h&&V!==y)&&r({width:z,height:V}),p=z,y=V}},S,C;return w.addEventListener("resize",O),w.ResizeObserver!==void 0?((S=new w.ResizeObserver(O)).observe(e),C=Wr(O,10*v)):w.MutationObserver!==void 0?((S=new w.MutationObserver(O)).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),C=Wr(O,10*v)):C=Wr(O,v),{cancel:function(){b=!0,S.disconnect(),window.removeEventListener("resize",O),C.cancel()}}}function io(e){for(;e.parentNode;)e=e.parentNode;return e.toString()==="[object ShadowRoot]"}var mn=typeof document<"u"?document.currentScript:null,Du=Bt(function(){if(mn||(mn=function(){try{var e=function(){try{throw new Error("_")}catch(d){return d.stack||""}}(),r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(e),n=r&&r[1];if(!n)return;for(var o=0,a=[].slice.call(document.getElementsByTagName("script")).reverse();o<a.length;o++){var u=a[o];if(u.src&&u.src===n)return u}}catch{}}()))return mn;throw new Error("Can not determine current script")}),Nu=Xe();Bt(function(){var e;try{e=Du()}catch{return Nu}var r=e.getAttribute("data-uid");if(r&&typeof r=="string"||(r=e.getAttribute("data-uid-auto"))&&typeof r=="string")return r;if(e.src){var n=function(o){for(var a="",u=0;u<o.length;u++){var d=o[u].charCodeAt(0)*u;o[u+1]&&(d+=o[u+1].charCodeAt(0)*(u-1)),a+=String.fromCharCode(97+Math.abs(d)%26)}return a}(JSON.stringify({src:e.src,dataset:e.dataset}));r="uid_"+n.slice(n.length-30)}else r=Xe();return e.setAttribute("data-uid-auto",r),r});function Fi(e){return typeof e=="string"&&/^[0-9]+%$/.test(e)}function ao(e){if(typeof e=="number")return e;var r=e.match(/^([0-9]+)(px|%)$/);if(!r)throw new Error("Could not match css value from "+e);return parseInt(r[1],10)}function zi(e){return ao(e)+"px"}function Li(e){return typeof e=="number"?zi(e):Fi(e)?e:zi(e)}function ji(e,r){if(typeof e=="number")return e;if(Fi(e))return parseInt(r*ao(e)/100,10);if(typeof(n=e)=="string"&&/^[0-9]+px$/.test(n))return ao(e);var n;throw new Error("Can not normalize dimension: "+e)}function xt(e){e===void 0&&(e=window);var r="__post_robot_11_0_0__";return e!==window?e[r]:e[r]=e[r]||{}}var Ui=function(){return{}};function le(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Ui),_r(xt(),e,function(){var n=r();return{has:function(o){return n.hasOwnProperty(o)},get:function(o,a){return n.hasOwnProperty(o)?n[o]:a},set:function(o,a){return n[o]=a,a},del:function(o){delete n[o]},getOrSet:function(o,a){return _r(n,o,a)},reset:function(){n=r()},keys:function(){return Object.keys(n)}}})}var Cu=function(){};function gn(){var e=xt();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new Cu,e.WINDOW_WILDCARD}function Ze(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Ui),le("windowStore").getOrSet(e,function(){var n=new un,o=function(a){return n.getOrSet(a,r)};return{has:function(a){return o(a).hasOwnProperty(e)},get:function(a,u){var d=o(a);return d.hasOwnProperty(e)?d[e]:u},set:function(a,u){return o(a)[e]=u,u},del:function(a){delete o(a)[e]},getOrSet:function(a,u){return _r(o(a),e,u)}}})}function Bi(){return le("instance").getOrSet("instanceID",Xe)}function $i(e,r){var n=r.domain,o=Ze("helloPromises"),a=o.get(e);a&&a.resolve({domain:n});var u=R.resolve({domain:n});return o.set(e,u),u}function so(e,r){return(0,r.send)(e,"postrobot_hello",{instanceID:Bi()},{domain:"*",timeout:-1}).then(function(n){var o=n.origin,a=n.data.instanceID;return $i(e,{domain:o}),{win:e,domain:o,instanceID:a}})}function qi(e,r){var n=r.send;return Ze("windowInstanceIDPromises").getOrSet(e,function(){return so(e,{send:n}).then(function(o){return o.instanceID})})}function Hi(e,r,n){r===void 0&&(r=5e3),n===void 0&&(n="Window");var o=function(a){return Ze("helloPromises").getOrSet(a,function(){return new R})}(e);return r!==-1&&(o=o.timeout(r,new Error(n+" did not load after "+r+"ms"))),o}function Vi(e){Ze("knownWindows").set(e,!0)}function uo(e){return typeof e=="object"&&e!==null&&typeof e.__type__=="string"}function Gi(e){return e===void 0?"undefined":e===null?"null":Array.isArray(e)?"array":typeof e=="function"?"function":typeof e=="object"?e instanceof Error?"error":typeof e.then=="function"?"promise":{}.toString.call(e)==="[object RegExp]"?"regex":{}.toString.call(e)==="[object Date]"?"date":"object":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":void 0}function tr(e,r){return{__type__:e,__val__:r}}var lt,Iu=((lt={}).function=function(){},lt.error=function(e){return tr("error",{message:e.message,stack:e.stack,code:e.code,data:e.data})},lt.promise=function(){},lt.regex=function(e){return tr("regex",e.source)},lt.date=function(e){return tr("date",e.toJSON())},lt.array=function(e){return e},lt.object=function(e){return e},lt.string=function(e){return e},lt.number=function(e){return e},lt.boolean=function(e){return e},lt.null=function(e){return e},lt[void 0]=function(e){return tr("undefined",e)},lt),Au={},ht,Wu=((ht={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},ht.error=function(e){var r=e.stack,n=e.code,o=e.data,a=new Error(e.message);return a.code=n,o&&(a.data=o),a.stack=r+`

`+a.stack,a},ht.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},ht.regex=function(e){return new RegExp(e)},ht.date=function(e){return new Date(e)},ht.array=function(e){return e},ht.object=function(e){return e},ht.string=function(e){return e},ht.number=function(e){return e},ht.boolean=function(e){return e},ht.null=function(e){return e},ht[void 0]=function(){},ht),_u={};function co(){return!!nn(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function Ji(e){return!an(window,e)}function Ki(e,r){if(e){if(F()!==At(e))return!0}else if(r&&!U(r))return!0;return!1}function Yi(e){var r=e.win,n=e.domain;return!(!co()||n&&!Ki(n,r)||r&&!Ji(r))}function fo(e){return"__postrobot_bridge___"+(e=e||At(e)).replace(/[^a-zA-Z0-9]+/g,"_")}function Zi(){return!!(window.name&&window.name===fo(F()))}var Mu=new R(function(e){if(window.document&&window.document.body)return e(window.document.body);var r=setInterval(function(){if(window.document&&window.document.body)return clearInterval(r),e(window.document.body)},10)});function Qi(e){Ze("remoteWindowPromises").getOrSet(e,function(){return new R})}function lo(e){var r=Ze("remoteWindowPromises").get(e);if(!r)throw new Error("Remote window promise not found");return r}function Xi(e,r,n){lo(e).resolve(function(o,a,u){if(o!==e)throw new Error("Remote window does not match window");if(!ft(a,r))throw new Error("Remote domain "+a+" does not match domain "+r);n.fireAndForget(u)})}function ho(e,r){lo(e).reject(r).catch(ye)}function yn(e){for(var r=e.win,n=e.name,o=e.domain,a=le("popupWindowsByName"),u=Ze("popupWindowsByWin"),d=0,h=a.keys();d<h.length;d++){var l=h[d],v=a.get(l);v&&!ge(v.win)||a.del(l)}if(ge(r))return{win:r,name:n,domain:o};var E=u.getOrSet(r,function(){return n?a.getOrSet(n,function(){return{win:r,name:n}}):{win:r}});if(E.win&&E.win!==r)throw new Error("Different window already linked for window: "+(n||"undefined"));return n&&(E.name=n,a.set(n,E)),o&&(E.domain=o,Qi(r)),u.set(r,E),E}function ki(e){var r=e.on,n=e.send,o=e.receiveMessage;a=window.open,window.open=function(u,d,h,l){var v=a.call(this,Gn(u),d,h,l);return v&&(yn({win:v,name:d,domain:u?At(u):null}),v)};var a;(function(u){var d=u.on,h=u.send,l=u.receiveMessage,v=le("popupWindowsByName");d("postrobot_open_tunnel",function(E){var w=E.source,p=E.origin,y=E.data,b=le("bridges").get(p);if(!b)throw new Error("Can not find bridge promise for domain "+p);return b.then(function(O){if(w!==O)throw new Error("Message source does not matched registered bridge for domain "+p);if(!y.name)throw new Error("Register window expected to be passed window name");if(!y.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!v.has(y.name))throw new Error("Window with name "+y.name+" does not exist, or was not opened by this window");var S=function(){return v.get(y.name)};if(!S().domain)throw new Error("We do not have a registered domain for window "+y.name);if(S().domain!==p)throw new Error("Message origin "+p+" does not matched registered window origin "+(S().domain||"unknown"));return Xi(S().win,p,y.sendMessage),{sendMessage:function(C){if(window&&!window.closed&&S()){var z=S().domain;if(z)try{l({data:C,origin:z,source:S().win},{on:d,send:h})}catch(V){R.reject(V)}}}}})})})({on:r,send:n,receiveMessage:o}),function(u){var d=u.send;xt(window).openTunnelToParent=function(h){var l=h.name,v=h.source,E=h.canary,w=h.sendMessage,p=le("tunnelWindows"),y=Je(window);if(!y)throw new Error("No parent window found to open tunnel to");var b=function(O){var S=O.name,C=O.source,z=O.canary,V=O.sendMessage;(function(){for(var q=le("tunnelWindows"),L=0,Q=q.keys();L<Q.length;L++){var $=Q[L];ge(q[$].source)&&q.del($)}})();var I=Xe();return le("tunnelWindows").set(I,{name:S,source:C,canary:z,sendMessage:V}),I}({name:l,source:v,canary:E,sendMessage:w});return d(y,"postrobot_open_tunnel",{name:l,sendMessage:function(){var O=p.get(b);if(O&&O.source&&!ge(O.source)){try{O.canary()}catch{return}O.sendMessage.apply(this,arguments)}}},{domain:"*"})}}({send:n}),function(u){var d=u.on,h=u.send,l=u.receiveMessage;R.try(function(){var v=Te(window);if(v&&Yi({win:v})){return Qi(v),(E=v,Ze("remoteBridgeAwaiters").getOrSet(E,function(){return R.try(function(){var w=Xt(E,fo(F()));if(w)return U(w)&&xt(te(w))?w:new R(function(p){var y,b;y=setInterval(function(){if(w&&U(w)&&xt(te(w)))return clearInterval(y),clearTimeout(b),p(w)},100),b=setTimeout(function(){return clearInterval(y),p()},2e3)})})})).then(function(w){return w?window.name?xt(te(w)).openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(p){try{}catch{return}if(window&&!window.closed)try{l({data:p,origin:this.origin,source:this.source},{on:d,send:h})}catch(y){R.reject(y)}}}).then(function(p){var y=p.source,b=p.origin,O=p.data;if(y!==v)throw new Error("Source does not match opener");Xi(y,b,O.sendMessage)}).catch(function(p){throw ho(v,p),p}):ho(v,new Error("Can not register with opener: window does not have a name")):ho(v,new Error("Can not register with opener: no bridge found in opener"))});var E}})}({on:r,send:n,receiveMessage:o})}function po(){for(var e=le("idToProxyWindow"),r=0,n=e.keys();r<n.length;r++){var o=n[r];e.get(o).shouldClean()&&e.del(o)}}function ea(e,r){var n=r.send,o=r.id,a=o===void 0?Xe():o,u=e.then(function(l){if(U(l))return te(l).name}),d=e.then(function(l){if(ge(l))throw new Error("Window is closed, can not determine type");return Te(l)?St.POPUP:St.IFRAME});u.catch(ye),d.catch(ye);var h=function(){return e.then(function(l){if(!ge(l))return U(l)?te(l).name:u})};return{id:a,getType:function(){return d},getInstanceID:Tu(function(){return e.then(function(l){return qi(l,{send:n})})}),close:function(){return e.then(gi)},getName:h,focus:function(){return e.then(function(l){l.focus()})},isClosed:function(){return e.then(function(l){return ge(l)})},setLocation:function(l,v){return v===void 0&&(v={}),e.then(function(E){var w=window.location.protocol+"//"+window.location.host,p=v.method,y=p===void 0?"get":p,b=v.body;if(l.indexOf("/")===0)l=""+w+l;else if(!l.match(/^https?:\/\//)&&l.indexOf(w)!==0)throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(l));if(y==="post")return h().then(function(O){if(!O)throw new Error("Can not post to window without target name");(function(S){var C=S.url,z=S.target,V=S.body,I=S.method,q=I===void 0?"post":I,L=document.createElement("form");if(L.setAttribute("target",z),L.setAttribute("method",q),L.setAttribute("action",C),L.style.display="none",V)for(var Q=0,$=Object.keys(V);Q<$.length;Q++){var ue,oe=$[Q],J=document.createElement("input");J.setAttribute("name",oe),J.setAttribute("value",(ue=V[oe])==null?void 0:ue.toString()),L.appendChild(J)}Ri().appendChild(L),L.submit(),Ri().removeChild(L)})({url:l,target:O,method:y,body:b})});if(y!=="get")throw new Error("Unsupported method: "+y);if(U(E))try{if(E.location&&typeof E.location.replace=="function"){E.location.replace(l);return}}catch{}E.location=l})},setName:function(l){return e.then(function(v){yn({win:v,name:l});var E=U(v),w=mi(v);if(!E)throw new Error("Can not set name for cross-domain window: "+l);te(v).name=l,w&&w.setAttribute("name",l),u=R.resolve(l)})}}}var pt=function(){function e(n){var o=n.send,a=n.win,u=n.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new R,this.serializedWindow=u||ea(this.actualWindowPromise,{send:o}),le("idToProxyWindow").set(this.getID(),this),a&&this.setWindow(a,{send:o})}var r=e.prototype;return r.getID=function(){return this.serializedWindow.id},r.getType=function(){return this.serializedWindow.getType()},r.isPopup=function(){return this.getType().then(function(n){return n===St.POPUP})},r.setLocation=function(n,o){var a=this;return this.serializedWindow.setLocation(n,o).then(function(){return a})},r.getName=function(){return this.serializedWindow.getName()},r.setName=function(n){var o=this;return this.serializedWindow.setName(n).then(function(){return o})},r.close=function(){var n=this;return this.serializedWindow.close().then(function(){return n})},r.focus=function(){var n=this,o=this.isPopup(),a=this.getName(),u=R.hash({isPopup:o,name:a}).then(function(h){var l=h.name;h.isPopup&&l&&window.open("",l,"noopener")}),d=this.serializedWindow.focus();return R.all([u,d]).then(function(){return n})},r.isClosed=function(){return this.serializedWindow.isClosed()},r.getWindow=function(){return this.actualWindow},r.setWindow=function(n,o){var a=o.send;this.actualWindow=n,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=ea(this.actualWindowPromise,{send:a,id:this.getID()}),Ze("winToProxyWindow").set(n,this)},r.awaitWindow=function(){return this.actualWindowPromise},r.matchWindow=function(n,o){var a=this,u=o.send;return R.try(function(){return a.actualWindow?n===a.actualWindow:R.hash({proxyInstanceID:a.getInstanceID(),knownWindowInstanceID:qi(n,{send:u})}).then(function(d){var h=d.proxyInstanceID===d.knownWindowInstanceID;return h&&a.setWindow(n,{send:u}),h})})},r.unwrap=function(){return this.actualWindow||this},r.getInstanceID=function(){return this.serializedWindow.getInstanceID()},r.shouldClean=function(){return!!(this.actualWindow&&ge(this.actualWindow))},r.serialize=function(){return this.serializedWindow},e.unwrap=function(n){return e.isProxyWindow(n)?n.unwrap():n},e.serialize=function(n,o){var a=o.send;return po(),e.toProxyWindow(n,{send:a}).serialize()},e.deserialize=function(n,o){var a=o.send;return po(),le("idToProxyWindow").get(n.id)||new e({serializedWindow:n,send:a})},e.isProxyWindow=function(n){return!!(n&&!er(n)&&n.isProxyWindow)},e.toProxyWindow=function(n,o){var a=o.send;if(po(),e.isProxyWindow(n))return n;var u=n;return Ze("winToProxyWindow").get(u)||new e({win:u,send:a})},e}();function vo(e,r,n,o,a){var u=Ze("methodStore"),d=le("proxyWindowMethods");pt.isProxyWindow(o)?d.set(e,{val:r,name:n,domain:a,source:o}):(d.del(e),u.getOrSet(o,function(){return{}})[e]={domain:a,name:n,val:r,source:o})}function ta(e,r){var n=Ze("methodStore"),o=le("proxyWindowMethods");return n.getOrSet(e,function(){return{}})[r]||o.get(r)}function ra(e,r,n,o,a){d=(u={on:a.on,send:a.send}).on,h=u.send,le("builtinListeners").getOrSet("functionCalls",function(){return d("postrobot_method",{domain:"*"},function(E){var w=E.source,p=E.origin,y=E.data,b=y.id,O=y.name,S=ta(w,b);if(!S)throw new Error("Could not find method '"+O+"' with id: "+y.id+" in "+F(window));var C=S.source,z=S.domain,V=S.val;return R.try(function(){if(!ft(z,p))throw new Error("Method '"+y.name+"' domain "+JSON.stringify(to(S.domain)?S.domain.source:S.domain)+" does not match origin "+p+" in "+F(window));if(pt.isProxyWindow(C))return C.matchWindow(w,{send:h}).then(function(I){if(!I)throw new Error("Method call '"+y.name+"' failed - proxy window does not match source in "+F(window))})}).then(function(){return V.apply({source:w,origin:p},y.args)},function(I){return R.try(function(){if(V.onError)return V.onError(I)}).then(function(){throw I.stack&&(I.stack="Remote call to "+O+"("+function(q){return q===void 0&&(q=[]),kn(q).map(function(L){return typeof L=="string"?"'"+L+"'":L===void 0?"undefined":L===null?"null":typeof L=="boolean"?L.toString():Array.isArray(L)?"[ ... ]":typeof L=="object"?"{ ... }":typeof L=="function"?"() => { ... }":"<"+typeof L+">"}).join(", ")}(y.args)+`) failed

`+I.stack),I})}).then(function(I){return{result:I,id:b,name:O}})})});var u,d,h,l=n.__id__||Xe();e=pt.unwrap(e);var v=n.__name__||n.name||o;return typeof v=="string"&&typeof v.indexOf=="function"&&v.indexOf("anonymous::")===0&&(v=v.replace("anonymous::",o+"::")),pt.isProxyWindow(e)?(vo(l,n,v,e,r),e.awaitWindow().then(function(E){vo(l,n,v,E,r)})):vo(l,n,v,e,r),tr("cross_domain_function",{id:l,name:v})}function na(e,r,n,o){var a,u=o.on,d=o.send;return function(h,l){l===void 0&&(l=Au);var v=JSON.stringify(h,function(E){var w=this[E];if(uo(this))return w;var p=Gi(w);if(!p)return w;var y=l[p]||Iu[p];return y?y(w,E):w});return v===void 0?"undefined":v}(n,((a={}).promise=function(h,l){return function(v,E,w,p,y){return tr("cross_domain_zalgo_promise",{then:ra(v,E,function(b,O){return w.then(b,O)},p,{on:y.on,send:y.send})})}(e,r,h,l,{on:u,send:d})},a.function=function(h,l){return ra(e,r,h,l,{on:u,send:d})},a.object=function(h){return er(h)||pt.isProxyWindow(h)?tr("cross_domain_window",pt.serialize(h,{send:d})):h},a))}function oa(e,r,n,o){var a,u=o.send;return function(d,h){if(h===void 0&&(h=_u),d!=="undefined")return JSON.parse(d,function(l,v){if(uo(this))return v;var E,w;if(uo(v)?(E=v.__type__,w=v.__val__):(E=Gi(v),w=v),!E)return w;var p=h[E]||Wu[E];return p?p(w,l):w})}(n,((a={}).cross_domain_zalgo_promise=function(d){return function(h,l,v){return new R(v.then)}(0,0,d)},a.cross_domain_function=function(d){return function(h,l,v,E){var w=v.id,p=v.name,y=E.send,b=function(S){S===void 0&&(S={});function C(){var z=arguments;return pt.toProxyWindow(h,{send:y}).awaitWindow().then(function(V){var I=ta(V,w);if(I&&I.val!==C)return I.val.apply({source:window,origin:F()},z);var q=[].slice.call(z);return S.fireAndForget?y(V,"postrobot_method",{id:w,name:p,args:q},{domain:l,fireAndForget:!0}):y(V,"postrobot_method",{id:w,name:p,args:q},{domain:l,fireAndForget:!1}).then(function(L){return L.data.result})}).catch(function(V){throw V})}return C.__name__=p,C.__origin__=l,C.__source__=h,C.__id__=w,C.origin=l,C},O=b();return O.fireAndForget=b({fireAndForget:!0}),O}(e,r,d,{send:u})},a.cross_domain_window=function(d){return pt.deserialize(d,{send:u})},a))}var Fr={};Fr.postrobot_post_message=function(e,r,n){n.indexOf("file:")===0&&(n="*"),e.postMessage(r,n)},Fr.postrobot_bridge=function(e,r,n){if(!co()&&!Zi())throw new Error("Bridge not needed for browser");if(U(e))throw new Error("Post message through bridge disabled between same domain windows");if(an(window,e)!==!1)throw new Error("Can only use bridge to communicate between two different windows, not between frames");(function(o,a,u){var d=on(window,o),h=on(o,window);if(!d&&!h)throw new Error("Can only send messages to and from parent and popup windows");lo(o).then(function(l){return l(o,a,u)})})(e,n,r)},Fr.postrobot_global=function(e,r){if(!nn(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!U(e))throw new Error("Post message through global disabled between different domain windows");if(an(window,e)!==!1)throw new Error("Can only use global to communicate between two different windows, not between frames");var n=xt(e);if(!n)throw new Error("Can not find postRobot global on foreign window");n.receiveMessage({source:window,origin:F(),data:r})};function wo(e,r,n,o){var a=o.on,u=o.send;return R.try(function(){var d=Ze().getOrSet(e,function(){return{}});return d.buffer=d.buffer||[],d.buffer.push(n),d.flush=d.flush||R.flush().then(function(){if(ge(e))throw new Error("Window is closed");var h=na(e,r,((l={}).__post_robot_11_0_0__=d.buffer||[],l),{on:a,send:u}),l;delete d.buffer;for(var v=Object.keys(Fr),E=[],w=0;w<v.length;w++){var p=v[w];try{Fr[p](e,h,r)}catch(y){E.push(y)}}if(E.length===v.length)throw new Error(`All post-robot messaging strategies failed:

`+E.map(function(y,b){return b+". "+br(y)}).join(`

`))}),d.flush.then(function(){delete d.flush})}).then(ye)}function ia(e){return le("responseListeners").get(e)}function aa(e){le("responseListeners").del(e)}function sa(e){return le("erroredResponseListeners").has(e)}function ua(e){var r=e.name,n=e.win,o=e.domain,a=Ze("requestListeners");if(n==="*"&&(n=null),o==="*"&&(o=null),!r)throw new Error("Name required to get request listener");for(var u=0,d=[n,gn()];u<d.length;u++){var h=d[u];if(h){var l=a.get(h);if(l){var v=l[r];if(v){if(o&&typeof o=="string"){if(v[o])return v[o];if(v.__domain_regex__)for(var E=0,w=v.__domain_regex__;E<w.length;E++){var p=w[E],y=p.listener;if(ft(p.regex,o))return y}}if(v["*"])return v["*"]}}}}}function mo(e,r){var n=r.on,o=r.send,a=le("receivedMessages");try{if(!window||window.closed||!e.source)return}catch{return}var u=e.source,d=e.origin,h=function(w,p,y,b){var O=b.on,S=b.send,C;try{C=oa(p,y,w,{on:O,send:S})}catch{return}if(C&&typeof C=="object"&&C!==null){var z=C.__post_robot_11_0_0__;if(Array.isArray(z))return z}}(e.data,u,d,{on:n,send:o});if(h){Vi(u);for(var l,v=function(){var w=h[E];if(a.has(w.id))return{v:void 0};if(a.set(w.id,!0),ge(u)&&!w.fireAndForget)return{v:void 0};w.origin.indexOf("file:")===0&&(d="file://");try{w.type==="postrobot_message_request"?function(p,y,b,O){var S=O.on,C=O.send,z=ua({name:b.name,win:p,domain:y}),V=b.name==="postrobot_method"&&b.data&&typeof b.data.name=="string"?b.data.name+"()":b.name;function I(q,L,Q){return R.flush().then(function(){if(!b.fireAndForget&&!ge(p))try{return wo(p,y,{id:Xe(),origin:F(window),type:"postrobot_message_response",hash:b.hash,name:b.name,ack:q,data:L,error:Q},{on:S,send:C})}catch($){throw new Error("Send response message failed for "+V+" in "+F()+`

`+br($))}})}R.all([R.flush().then(function(){if(!b.fireAndForget&&!ge(p))try{return wo(p,y,{id:Xe(),origin:F(window),type:"postrobot_message_ack",hash:b.hash,name:b.name},{on:S,send:C})}catch(q){throw new Error("Send ack message failed for "+V+" in "+F()+`

`+br(q))}}),R.try(function(){if(!z)throw new Error("No handler found for post message: "+b.name+" from "+y+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);return z.handler({source:p,origin:y,data:b.data})}).then(function(q){return I("success",q)},function(q){return I("error",null,q)})]).then(ye).catch(function(q){if(z&&z.handleError)return z.handleError(q);throw q})}(u,d,w,{on:n,send:o}):w.type==="postrobot_message_response"?function(p,y,b){if(!sa(b.hash)){var O=ia(b.hash);if(!O)throw new Error("No handler found for post message response for message: "+b.name+" from "+y+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!ft(O.domain,y))throw new Error("Response origin "+y+" does not match domain "+(S=O.domain,Array.isArray(S)?"("+S.join(" | ")+")":ct(S)?"RegExp("+S.toString()+")":S.toString()));var S;if(p!==O.win)throw new Error("Response source does not match registered window");aa(b.hash),b.ack==="error"?O.promise.reject(b.error):b.ack==="success"&&O.promise.resolve({source:p,origin:y,data:b.data})}}(u,d,w):w.type==="postrobot_message_ack"&&function(p,y,b){if(!sa(b.hash)){var O=ia(b.hash);if(!O)throw new Error("No handler found for post message ack for message: "+b.name+" from "+y+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!ft(O.domain,y))throw new Error("Ack origin "+y+" does not match domain "+O.domain.toString());if(p!==O.win)throw new Error("Ack source does not match registered window")}catch(S){O.promise.reject(S)}O.ack=!0}}(u,d,w)}catch(p){setTimeout(function(){throw p},0)}},E=0;E<h.length;E++)if(l=v())return l.v}}function Wt(e,r,n){if(!e)throw new Error("Expected name");if(typeof(r=r||{})=="function"&&(n=r,r={}),!n)throw new Error("Expected handler");var o=function a(u,d){var h=u.name,l=u.win,v=u.domain,E=Ze("requestListeners");if(!h||typeof h!="string")throw new Error("Name required to add request listener");if(l&&l!=="*"&&pt.isProxyWindow(l)){var w=l.awaitWindow().then(function(ue){return a({name:h,win:ue,domain:v},d)});return{cancel:function(){w.then(function(ue){return ue.cancel()},ye)}}}var p=l;if(Array.isArray(p)){for(var y=[],b=0,O=p;b<O.length;b++)y.push(a({name:h,domain:v,win:O[b]},d));return{cancel:function(){for(var ue=0;ue<y.length;ue++)y[ue].cancel()}}}if(Array.isArray(v)){for(var S=[],C=0,z=v;C<z.length;C++)S.push(a({name:h,win:p,domain:z[C]},d));return{cancel:function(){for(var ue=0;ue<S.length;ue++)S[ue].cancel()}}}var V=ua({name:h,win:p,domain:v});p&&p!=="*"||(p=gn());var I=(v=v||"*").toString();if(V)throw p&&v?new Error("Request listener already exists for "+h+" on domain "+v.toString()+" for "+(p===gn()?"wildcard":"specified")+" window"):p?new Error("Request listener already exists for "+h+" for "+(p===gn()?"wildcard":"specified")+" window"):v?new Error("Request listener already exists for "+h+" on domain "+v.toString()):new Error("Request listener already exists for "+h);var q=E.getOrSet(p,function(){return{}}),L=_r(q,h,function(){return{}}),Q,$;return to(v)?(Q=_r(L,"__domain_regex__",function(){return[]})).push($={regex:v,listener:d}):L[I]=d,{cancel:function(){delete L[I],$&&(Q.splice(Q.indexOf($,1)),Q.length||delete L.__domain_regex__),Object.keys(L).length||delete q[h],p&&!Object.keys(q).length&&E.del(p)}}}({name:e,win:r.window,domain:r.domain||"*"},{handler:n||r.handler,handleError:r.errorHandler||function(a){throw a}});return{cancel:function(){o.cancel()}}}var Tt=function e(r,n,o,a){var u=(a=a||{}).domain||"*",d=a.timeout||-1,h=a.timeout||5e3,l=a.fireAndForget||!1;return pt.toProxyWindow(r,{send:e}).awaitWindow().then(function(v){return R.try(function(){if(function(E,w,p){if(!E)throw new Error("Expected name");if(p&&typeof p!="string"&&!Array.isArray(p)&&!to(p))throw new TypeError("Can not send "+E+". Expected domain "+JSON.stringify(p)+" to be a string, array, or regex");if(ge(w))throw new Error("Can not send "+E+". Target window is closed")}(n,v,u),function(E,w){var p=kt(w);if(p)return p===E;if(w===E||Se(w)===w)return!1;for(var y=0,b=Ke(E);y<b.length;y++)if(b[y]===w)return!0;return!1}(window,v))return Hi(v,h)}).then(function(E){return function(w,p,y,b){var O=b.send;return R.try(function(){return typeof p=="string"?p:R.try(function(){return y||so(w,{send:O}).then(function(S){return S.domain})}).then(function(S){if(!ft(p,p))throw new Error("Domain "+fn(p)+" does not match "+fn(p));return S})})}(v,u,(E===void 0?{}:E).domain,{send:e})}).then(function(E){var w=E,p=n==="postrobot_method"&&o&&typeof o.name=="string"?o.name+"()":n,y=new R,b=n+"_"+Xe();if(!l){var O={name:n,win:v,domain:w,promise:y};(function(L,Q){le("responseListeners").set(L,Q)})(b,O);var S=Ze("requestPromises").getOrSet(v,function(){return[]});S.push(y),y.catch(function(){(function(L){le("erroredResponseListeners").set(L,!0)})(b),aa(b)});var C=function(L){return Ze("knownWindows").get(L,!1)}(v)?1e4:2e3,z=d,V=C,I=z,q=Wr(function(){return ge(v)?y.reject(new Error("Window closed for "+n+" before "+(O.ack?"response":"ack"))):O.cancelled?y.reject(new Error("Response listener was cancelled for "+n)):(V=Math.max(V-500,0),I!==-1&&(I=Math.max(I-500,0)),O.ack||V!==0?I===0?y.reject(new Error("No response for postMessage "+p+" in "+F()+" in "+z+"ms")):void 0:y.reject(new Error("No ack for postMessage "+p+" in "+F()+" in "+C+"ms")))},500);y.finally(function(){q.cancel(),S.splice(S.indexOf(y,1))}).catch(ye)}return wo(v,w,{id:Xe(),origin:F(window),type:"postrobot_message_request",hash:b,name:n,data:o,fireAndForget:l},{on:Wt,send:e}).then(function(){return l?y.resolve():y},function(L){throw new Error("Send request message failed for "+p+" in "+F()+`

`+br(L))})})})};function zr(e){return pt.toProxyWindow(e,{send:Tt})}function ca(e){for(var r=0,n=Ze("requestPromises").get(e,[]);r<n.length;r++)n[r].reject(new Error("Window "+(ge(e)?"closed":"cleaned up")+" before response")).catch(ye)}var qt;qt={setupBridge:ki,openBridge:function(e,r){var n=le("bridges"),o=le("bridgeFrames");return r=r||At(e),n.getOrSet(r,function(){return R.try(function(){if(F()===r)throw new Error("Can not open bridge on the same domain as current domain: "+r);var a=fo(r);if(Xt(window,a))throw new Error("Frame with name "+a+" already exists on page");var u=function(d,h){var l=document.createElement("iframe");return l.setAttribute("name",d),l.setAttribute("id",d),l.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),l.setAttribute("frameborder","0"),l.setAttribute("border","0"),l.setAttribute("scrolling","no"),l.setAttribute("allowTransparency","true"),l.setAttribute("tabindex","-1"),l.setAttribute("hidden","true"),l.setAttribute("title",""),l.setAttribute("role","presentation"),l.src=h,l}(a,e);return o.set(r,u),Mu.then(function(d){d.appendChild(u);var h=u.contentWindow;return new R(function(l,v){u.addEventListener("load",l),u.addEventListener("error",v)}).then(function(){return Hi(h,5e3,"Bridge "+e)}).then(function(){return h})})})})},linkWindow:yn,linkUrl:function(e,r){yn({win:e,domain:At(r)})},isBridge:Zi,needsBridge:Yi,needsBridgeForBrowser:co,hasBridge:function(e,r){return le("bridges").has(r||At(e))},needsBridgeForWin:Ji,needsBridgeForDomain:Ki,destroyBridges:function(){for(var e=le("bridges"),r=le("bridgeFrames"),n=0,o=r.keys();n<o.length;n++){var a=r.get(o[n]);a&&a.parentNode&&a.parentNode.removeChild(a)}r.reset(),e.reset()}};function Lr(e){if(!U(e))throw new Error("Can not get global for window on different domain");return e.__zoid_10_3_3__||(e.__zoid_10_3_3__={}),e.__zoid_10_3_3__}function da(e,r){try{return r(Lr(e))}catch{}}function En(e){return{get:function(){var r=this;return R.try(function(){if(r.source&&r.source!==window)throw new Error("Can not call get on proxy object from a remote window");return e})}}}function Fu(e){return Zn(JSON.stringify(e))}function go(e){var r=Lr(e);return r.references=r.references||{},r.references}function fa(e){var r=e.data,n=e.metaData,o=e.sender,a=e.receiver,u=e.passByReference,d=u!==void 0&&u,h=e.basic,l=h!==void 0&&h,v=zr(a.win),E=l?JSON.stringify(r):na(v,a.domain,r,{on:Wt,send:Tt}),w=d?function(p){var y=Xe();return go(window)[y]=p,{type:"uid",uid:y}}(E):{type:"raw",val:E};return{serializedData:Fu({sender:{domain:o.domain},metaData:n,reference:w}),cleanReference:function(){p=window,(y=w).type==="uid"&&delete go(p)[y.uid];var p,y}}}function la(e){var r=e.sender,n=e.basic,o=n!==void 0&&n,a=function(E){return JSON.parse(function(w){if(typeof atob=="function")return decodeURIComponent([].map.call(atob(w),function(p){return"%"+("00"+p.charCodeAt(0).toString(16)).slice(-2)}).join(""));if(typeof Buffer<"u")return Buffer.from(w,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(E))}(e.data),u=a.reference,d=a.metaData,h;h=typeof r.win=="function"?r.win({metaData:d}):r.win;var l;l=typeof r.domain=="function"?r.domain({metaData:d}):typeof r.domain=="string"?r.domain:a.sender.domain;var v=function(E,w){if(w.type==="raw")return w.val;if(w.type==="uid")return go(E)[w.uid];throw new Error("Unsupported ref type: "+w.type)}(h,u);return{data:o?JSON.parse(v):function(E,w,p){return oa(E,w,p,{on:Wt,send:Tt})}(h,l,v),metaData:d,sender:{win:h,domain:l},reference:u}}var pe={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},bn={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},xe=St,Ee={RENDER:"zoid-render",RENDERED:"zoid-rendered",PRERENDER:"zoid-prerender",PRERENDERED:"zoid-prerendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function ha(e){return"__zoid__"+e.name+"__"+e.serializedPayload+"__"}function yo(e){if(!e)throw new Error("No window name");var r=e.split("__"),n=r[1],o=r[2],a=r[3];if(n!=="zoid")throw new Error("Window not rendered by zoid - got "+n);if(!o)throw new Error("Expected component name");if(!a)throw new Error("Expected serialized payload ref");return{name:o,serializedInitialPayload:a}}var zu=Bt(function(e){var r=la({data:yo(e).serializedInitialPayload,sender:{win:function(n){return function(o){if(o.type==="opener")return pn("opener",Te(window));if(o.type==="parent"&&typeof o.distance=="number")return pn("parent",function(w,p){return p===void 0&&(p=1),function(y,b){b===void 0&&(b=1);for(var O=y,S=0;S<b;S++){if(!O)return;O=Je(O)}return O}(w,Vn(w)-p)}(window,o.distance));if(o.type==="global"&&o.uid&&typeof o.uid=="string"){var a=o.uid,u=kt(window);if(!u)throw new Error("Can not find ancestor window");for(var d=0,h=Ye(u);d<h.length;d++){var l=h[d];if(U(l)){var v=da(l,function(w){return w.windows&&w.windows[a]});if(v)return v}}}else if(o.type==="name"){var E=o.name;return pn("namedWindow",function(w,p){return Xt(w,p)||function y(b,O){var S=Xt(b,O);if(S)return S;for(var C=0,z=Ke(b);C<z.length;C++){var V=y(z[C],O);if(V)return V}}(Se(w)||w,p)}(pn("ancestor",kt(window)),E))}throw new Error("Unable to find "+o.type+" parent component window")}(n.metaData.windowRef)}}});return{parent:r.sender,payload:r.data,reference:r.reference}});function pa(){return zu(window.name)}function Lu(e,r){if(r===void 0&&(r=window),e===Je(r))return{type:"parent",distance:Vn(e)};if(e===Te(r))return{type:"opener"};if(U(e)&&(o=e,o!==Se(o))){var n=te(e).name;if(n)return{type:"name",name:n}}var o}function va(e,r,n,o,a){if(!e.hasOwnProperty(n))return o;var u=e[n];return typeof u.childDecorate=="function"?u.childDecorate({value:o,uid:a.uid,tag:a.tag,close:a.close,focus:a.focus,onError:a.onError,onProps:a.onProps,resize:a.resize,getParent:a.getParent,getParentDomain:a.getParentDomain,show:a.show,hide:a.hide,export:a.export,getSiblings:a.getSiblings}):o}function ju(){return R.try(function(){window.focus()})}function wa(){return R.try(function(){window.close()})}var _t=function(){return ye},rr=function(e){return dn(e.value)};function Eo(e,r,n){for(var o=0,a=Object.keys(T({},e,r));o<a.length;o++){var u=a[o];n(u,r[u],e[u])}}function ma(e,r,n){var o={};return R.all(function(a,u,d){var h=[];return Eo(a,u,function(l,v,E){var w=function(p,y,b){return R.resolve().then(function(){var O,S;if(b!=null&&y){var C=(O={},O.get=y.queryParam,O.post=y.bodyParam,O)[n],z=(S={},S.get=y.queryValue,S.post=y.bodyValue,S)[n];if(C)return R.hash({finalParam:R.try(function(){return typeof C=="function"?C({value:b}):typeof C=="string"?C:p}),finalValue:R.try(function(){return typeof z=="function"&&$t(b)?z({value:b}):b})}).then(function(V){var I=V.finalParam,q=V.finalValue,L;if(typeof q=="boolean")L=q.toString();else if(typeof q=="string")L=q.toString();else if(typeof q=="object"&&q!==null){if(y.serialization===bn.JSON)L=JSON.stringify(q);else if(y.serialization===bn.BASE64)L=Zn(JSON.stringify(q));else if(y.serialization===bn.DOTIFY||!y.serialization){L=function oe(J,H,se){H===void 0&&(H=""),se===void 0&&(se={}),H=H&&H+".";for(var X in J)J.hasOwnProperty(X)&&J[X]!=null&&typeof J[X]!="function"&&(J[X]&&Array.isArray(J[X])&&J[X].length&&J[X].every(function(De){return typeof De!="object"})?se[""+H+X+"[]"]=J[X].join(","):J[X]&&typeof J[X]=="object"?se=oe(J[X],""+H+X,se):se[""+H+X]=J[X].toString());return se}(q,p);for(var Q=0,$=Object.keys(L);Q<$.length;Q++){var ue=$[Q];o[ue]=L[ue]}return}}else typeof q=="number"&&(L=q.toString());o[I]=L})}})}(l,v,E);h.push(w)}),h}(r,e)).then(function(){return o})}function ga(e){var r=e.uid,n=e.options,o=e.overrides,a=o===void 0?{}:o,u=e.parentWin,d=u===void 0?window:u,h=n.propsDef,l=n.containerTemplate,v=n.prerenderTemplate,E=n.tag,w=n.name,p=n.attributes,y=n.dimensions,b=n.autoResize,O=n.url,S=n.domain,C=n.exports,z=new R,V=[],I=hn(),q={},L={},Q={visible:!0},$=a.event?a.event:(ue={},oe={},J={on:function(x,N){var B=oe[x]=oe[x]||[];B.push(N);var j=!1;return{cancel:function(){j||(j=!0,B.splice(B.indexOf(N),1))}}},once:function(x,N){var B=J.on(x,function(){B.cancel(),N()});return B},trigger:function(x){for(var N=arguments.length,B=new Array(N>1?N-1:0),j=1;j<N;j++)B[j-1]=arguments[j];var ee=oe[x],K=[];if(ee)for(var we=function(){var Ue=ee[me];K.push(R.try(function(){return Ue.apply(void 0,B)}))},me=0;me<ee.length;me++)we();return R.all(K).then(ye)},triggerOnce:function(x){if(ue[x])return R.resolve();ue[x]=!0;for(var N=arguments.length,B=new Array(N>1?N-1:0),j=1;j<N;j++)B[j-1]=arguments[j];return J.trigger.apply(J,[x].concat(B))},reset:function(){oe={}}}),ue,oe,J,H=a.props?a.props:{},se,X,De,Dt,vt,Ht=!1,Vt=a.onError,Mt=a.getProxyContainer,Gt=a.show,Jt=a.hide,nr=a.close,Kt=a.renderContainer,Ot=a.getProxyWindow,or=a.setProxyWin,Yt=a.openFrame,Zt=a.openPrerenderFrame,ir=a.prerender,ar=a.open,ie=a.openPrerender,wt=a.watchForUnload,ae=a.getInternalState,Le=a.setInternalState,Ne=function(){return typeof y=="function"?y({props:H}):y},je=function(){return R.try(function(){return a.resolveInitPromise?a.resolveInitPromise():z.resolve()})},Oe=function(x){return R.try(function(){return a.rejectInitPromise?a.rejectInitPromise(x):z.reject(x)})},ke=function(x){for(var N={},B=0,j=Object.keys(H);B<j.length;B++){var ee=j[B],K=h[ee];if(!K||K.sendToChild!==!1){var we=K&&K.trustedDomains&&K.trustedDomains.length>0?K.trustedDomains.reduce(function(me,Ue){return me||ft(Ue,x)},!1):ft(x,F(window));K&&K.sameDomain&&!we||K&&K.trustedDomains&&!we||(N[ee]=H[ee])}}return R.hash(N)},_e=function(){return R.try(function(){return ae?ae():Q})},Me=function(x){return R.try(function(){return Le?Le(x):Q=T({},Q,x)})},mt=function(){return Ot?Ot():R.try(function(){var x=H.window;if(x){var N=zr(x);return I.register(function(){return x.close()}),N}return new pt({send:Tt})})},it=function(x){return or?or(x):R.try(function(){se=x})},Rt=function(){return Gt?Gt():R.hash({setState:Me({visible:!0}),showElement:X?X.get().then(xu):null}).then(ye)},Ft=function(){return Jt?Jt():R.hash({setState:Me({visible:!1}),showElement:X?X.get().then(_i):null}).then(ye)},Or=function(){return typeof O=="function"?O({props:H}):O},Rr=function(){return typeof p=="function"?p({props:H}):p},sr=function(){return At(Or())},at=function(x,N){var B=N.windowName;return Yt?Yt(x,{windowName:B}):R.try(function(){if(x===xe.IFRAME)return En(Ai({attributes:T({name:B,title:w},Rr().iframe)}))})},jr=function(x){return Zt?Zt(x):R.try(function(){if(x===xe.IFRAME)return En(Ai({attributes:T({name:"__zoid_prerender_frame__"+w+"_"+Xe()+"__",title:"prerender__"+w},Rr().iframe)}))})},Ur=function(x,N,B){return ie?ie(x,N,B):R.try(function(){if(x===xe.IFRAME){if(!B)throw new Error("Expected proxy frame to be passed");return B.get().then(function(j){return I.register(function(){return Mr(j)}),oo(j).then(function(ee){return te(ee)}).then(function(ee){return zr(ee)})})}if(x===xe.POPUP)return N;throw new Error("No render context available for "+x)})},Sr=function(){return R.try(function(){if(se)return R.all([$.trigger(Ee.FOCUS),se.focus()]).then(ye)})},Pn=function(){var x=Lr(window);return x.windows=x.windows||{},x.windows[r]=window,I.register(function(){delete x.windows[r]}),r},Br=function(x,N,B,j){if(N===F(window))return{type:"global",uid:Pn()};if(x!==window)throw new Error("Can not construct cross-domain window reference for different target window");if(H.window){var ee=j.getWindow();if(!ee)throw new Error("Can not construct cross-domain window reference for lazy window prop");if(kt(ee)!==window)throw new Error("Can not construct cross-domain window reference for window prop with different ancestor")}if(B===xe.POPUP)return{type:"opener"};if(B===xe.IFRAME)return{type:"parent",distance:Vn(window)};throw new Error("Can not construct window reference for child")},Tn=function(x,N){return R.try(function(){var B;Dt=x,De=N,(B=se)==null||B.isPopup().then(function(j){if((N==null?void 0:N.name)!==""&&j){var ee;(ee=se)==null||ee.setName(N==null?void 0:N.name)}}).finally(function(){je(),I.register(function(){return N.close.fireAndForget().catch(ye)})})})},$r=function(x){var N=x.width,B=x.height;return R.try(function(){$.trigger(Ee.RESIZE,{width:N,height:B})})},qr=function(x){return R.try(function(){return $.trigger(Ee.DESTROY)}).catch(ye).then(function(){return I.all(x)}).then(function(){var N=x||new Error("Component destroyed");vt&&Tr(vt)||N.message==="Window navigated away"?z.resolve():z.asyncReject(N)})},zt=Bt(function(x){return R.try(function(){return nr?ge(nr.__source__)?void 0:nr():R.try(function(){return $.trigger(Ee.CLOSE)}).then(function(){return qr(x||new Error("Component closed"))})})}),ba=function(x,N){var B=N.proxyWin,j=N.proxyFrame,ee=N.windowName;return ar?ar(x,{proxyWin:B,proxyFrame:j,windowName:ee}):R.try(function(){if(x===xe.IFRAME){if(!j)throw new Error("Expected proxy frame to be passed");return j.get().then(function(Ce){return oo(Ce).then(function(he){return I.register(function(){return Mr(Ce)}),I.register(function(){return ca(he)}),he})})}if(x===xe.POPUP){var K=Ne(),we=K.width,me=we===void 0?"300px":we,Ue=K.height,be=Ue===void 0?"150px":Ue;me=ji(me,window.outerWidth),be=ji(be,window.outerWidth);var Fe=function(Ce,he){var Ie=(he=he||{}).closeOnUnload,Pe=Ie===void 0?1:Ie,st=he.name,Be=st===void 0?"":st,ce=he.width,$e=he.height,rt=0,Ve=0;ce&&(window.outerWidth?Ve=Math.round((window.outerWidth-ce)/2)+window.screenX:window.screen.width&&(Ve=Math.round((window.screen.width-ce)/2))),$e&&(window.outerHeight?rt=Math.round((window.outerHeight-$e)/2)+window.screenY:window.screen.height&&(rt=Math.round((window.screen.height-$e)/2))),delete he.closeOnUnload,delete he.name,ce&&$e&&(he=T({top:rt,left:Ve,width:ce,height:$e,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},he));var ur=Object.keys(he).map(function(Nt){if(he[Nt]!=null)return Nt+"="+fn(he[Nt])}).filter(Boolean).join(","),gt;try{gt=window.open("",Be,ur)}catch(Nt){throw new no("Can not open popup window - "+(Nt.stack||Nt.message))}if(ge(gt))throw new no("Can not open popup window - blocked");return Pe&&window.addEventListener("unload",function(){return gt.close()}),gt}(0,T({name:ee,width:me,height:be},Rr().popup));return I.register(function(){return gi(Fe)}),I.register(function(){return ca(Fe)}),Fe}throw new Error("No render context available for "+x)}).then(function(K){return B.setWindow(K,{send:Tt}),B.setName(ee).then(function(){return B})})},Pa=function(){return R.try(function(){var x=Wi(window,"unload",dn(function(){qr(new Error("Window navigated away"))})),N=wi(d,qr,3e3);if(I.register(N.cancel),I.register(x.cancel),wt)return wt()})},Ta=function(x){var N=!1;return x.isClosed().then(function(B){return B?(N=!0,zt(new Error("Detected component window close"))):R.delay(200).then(function(){return x.isClosed()}).then(function(j){if(j)return N=!0,zt(new Error("Detected component window close"))})}).then(function(){return N})},Hr=function(x){return Vt?Vt(x):R.try(function(){if(V.indexOf(x)===-1)return V.push(x),z.asyncReject(x),$.trigger(Ee.ERROR,x)})},Oa=new R,Ra=function(x){return R.try(function(){Oa.resolve(x)})};Tn.onError=Hr;var Sa=function(x,N){return x({uid:r,container:N.container,context:N.context,doc:N.doc,frame:N.frame,prerenderFrame:N.prerenderFrame,focus:Sr,close:zt,state:q,props:H,tag:E,dimensions:Ne(),event:$})},xa=function(x,N){var B=N.context;return ir?ir(x,{context:B}):R.try(function(){if(v){$.trigger(Ee.PRERENDER);var j=x.getWindow();if(j&&U(j)&&function(Ie){try{if(!Ie.location.href||Ie.location.href==="about:blank")return!0}catch{}return!1}(j)){var ee=(j=te(j)).document,K=Sa(v,{context:B,doc:ee});if(K){if(K.ownerDocument!==ee)throw new Error("Expected prerender template to have been created with document from child window");(function(Ie,Pe){var st=Pe.tagName.toLowerCase();if(st!=="html")throw new Error("Expected element to be html, got "+st);for(var Be=Ie.document.documentElement,ce=0,$e=kn(Be.children);ce<$e.length;ce++)Be.removeChild($e[ce]);for(var rt=0,Ve=kn(Pe.children);rt<Ve.length;rt++)Be.appendChild(Ve[rt])})(j,K);var we=b.width,me=we!==void 0&&we,Ue=b.height,be=Ue!==void 0&&Ue,Fe=b.element,Ce=Fe===void 0?"body":Fe;if((Ce=ro(Ce,ee))&&(me||be)){var he=Mi(Ce,function(Ie){$r({width:me?Ie.width:void 0,height:be?Ie.height:void 0})},{width:me,height:be,win:j});$.on(Ee.RENDERED,he.cancel)}$.trigger(Ee.PRERENDERED)}}}})},Da=function(x,N){var B=N.proxyFrame,j=N.proxyPrerenderFrame,ee=N.context,K=N.rerender;return Kt?Kt(x,{proxyFrame:B,proxyPrerenderFrame:j,context:ee,rerender:K}):R.hash({container:x.get(),frame:B?B.get():null,prerenderFrame:j?j.get():null,internalState:_e()}).then(function(we){var me=we.container,Ue=we.internalState.visible,be=Sa(l,{context:ee,container:me,frame:we.frame,prerenderFrame:we.prerenderFrame,doc:document});if(be){Ue||_i(be),Su(me,be);var Fe=function(Ce,he){he=dn(he);var Ie=!1,Pe=[],st,Be,ce,$e=function(){Ie=!0;for(var gt=0;gt<Pe.length;gt++)Pe[gt].disconnect();st&&st.cancel(),ce&&ce.removeEventListener("unload",rt),Be&&Mr(Be)},rt=function(){Ie||(he(),$e())};if(Tr(Ce))return rt(),{cancel:$e};if(window.MutationObserver)for(var Ve=Ce.parentElement;Ve;){var ur=new window.MutationObserver(function(){Tr(Ce)&&rt()});ur.observe(Ve,{childList:!0}),Pe.push(ur),Ve=Ve.parentElement}return(Be=document.createElement("iframe")).setAttribute("name","__detect_close_"+Xe()+"__"),Be.style.display="none",oo(Be).then(function(gt){(ce=te(gt)).addEventListener("unload",rt)}),Ce.appendChild(Be),st=Wr(function(){Tr(Ce)&&rt()},1e3),{cancel:$e}}(be,function(){var Ce=new Error("Detected container element removed from DOM");return R.delay(1).then(function(){if(!Tr(be))return I.all(Ce),K().then(je,Oe);zt(Ce)})});return I.register(function(){return Fe.cancel()}),I.register(function(){return Mr(be)}),X=En(be)}})},Na=function(){return{state:q,event:$,close:zt,focus:Sr,resize:$r,onError:Hr,updateProps:Zu,show:Rt,hide:Ft}},To=function(x){x===void 0&&(x={});var N=vt,B=Na();Pr(L,x),function(j,ee,K,we,me){var Ue=we.state,be=we.close,Fe=we.focus,Ce=we.event,he=we.onError;Eo(K,j,function(Ie,Pe,st){var Be=!1,ce=st;Object.defineProperty(ee,Ie,{configurable:!0,enumerable:!0,get:function(){return Be?ce:(Be=!0,function(){if(!Pe)return ce;var $e=Pe.alias;if($e&&!$t(st)&&$t(K[$e])&&(ce=K[$e]),Pe.value&&(ce=Pe.value({props:ee,state:Ue,close:be,focus:Fe,event:Ce,onError:he,container:me})),!Pe.default||$t(ce)||$t(K[Ie])||(ce=Pe.default({props:ee,state:Ue,close:be,focus:Fe,event:Ce,onError:he,container:me})),$t(ce)){if(Pe.type===pe.ARRAY?!Array.isArray(ce):typeof ce!==Pe.type)throw new TypeError("Prop is not of type "+Pe.type+": "+Ie)}else if(Pe.required!==!1&&!$t(K[Ie]))throw new Error('Expected prop "'+Ie+'" to be defined');return $t(ce)&&Pe.decorate&&(ce=Pe.decorate({value:ce,props:ee,state:Ue,close:be,focus:Fe,event:Ce,onError:he,container:me})),ce}())}})}),Eo(ee,j,ye)}(h,H,L,B,N)},Zu=function(x){return To(x),z.then(function(){var N=De,B=se;if(N&&B&&Dt)return ke(Dt).then(function(j){return N.updateProps(j).catch(function(ee){return Ta(B).then(function(K){if(!K)throw ee})})})})},Ca=function(x){return Mt?Mt(x):R.try(function(){return Ci(x)}).then(function(N){return io(N)&&(N=function B(j){var ee=function(Ue){var be=function(Fe){for(;Fe.parentNode;)Fe=Fe.parentNode;if(io(Fe))return Fe}(Ue);if(be&&be.host)return be.host}(j);if(!ee)throw new Error("Element is not in shadow dom");var K="shadow-slot-"+Xe(),we=document.createElement("slot");we.setAttribute("name",K),j.appendChild(we);var me=document.createElement("div");return me.setAttribute("slot",K),ee.appendChild(me),io(ee)?B(me):me}(N)),vt=N,En(N)})};return{init:function(){(function(){$.on(Ee.RENDER,function(){return H.onRender()}),$.on(Ee.PRERENDER,function(){return H.onPrerender()}),$.on(Ee.DISPLAY,function(){return H.onDisplay()}),$.on(Ee.RENDERED,function(){return H.onRendered()}),$.on(Ee.PRERENDERED,function(){return H.onPrerendered()}),$.on(Ee.CLOSE,function(){return H.onClose()}),$.on(Ee.DESTROY,function(){return H.onDestroy()}),$.on(Ee.RESIZE,function(){return H.onResize()}),$.on(Ee.FOCUS,function(){return H.onFocus()}),$.on(Ee.PROPS,function(x){return H.onProps(x)}),$.on(Ee.ERROR,function(x){return H&&H.onError?H.onError(x):Oe(x).then(function(){setTimeout(function(){throw x},1)})}),I.register($.reset)})()},render:function(x){var N=x.target,B=x.container,j=x.context,ee=x.rerender;return R.try(function(){var K=sr(),we=S||sr();(function(G,qe,Ae){if(G!==window){if(!an(window,G))throw new Error("Can only renderTo an adjacent frame");var He=F();if(!ft(qe,He)&&!U(G))throw new Error("Can not render remotely to "+qe.toString()+" - can only render to "+He);if(Ae&&typeof Ae!="string")throw new Error("Container passed to renderTo must be a string selector, got "+typeof Ae+" }")}})(N,we,B);var me=R.try(function(){if(N!==window)return function(G,qe){for(var Ae={},He=0,dt=Object.keys(H);He<dt.length;He++){var We=dt[He],yt=h[We];yt&&yt.allowDelegate&&(Ae[We]=H[We])}var Ge=Tt(qe,"zoid_delegate_"+w,{uid:r,overrides:{props:Ae,event:$,close:zt,onError:Hr,getInternalState:_e,setInternalState:Me,resolveInitPromise:je,rejectInitPromise:Oe}}).then(function(Y){var Z=Y.data.parent;return I.register(function(A){if(!ge(qe))return Z.destroy(A)}),Z.getDelegateOverrides()}).catch(function(Y){throw new Error(`Unable to delegate rendering. Possibly the component is not loaded in the target window.

`+br(Y))});return Mt=function(){for(var Y=arguments.length,Z=new Array(Y),A=0;A<Y;A++)Z[A]=arguments[A];return Ge.then(function(k){return k.getProxyContainer.apply(k,Z)})},Kt=function(){for(var Y=arguments.length,Z=new Array(Y),A=0;A<Y;A++)Z[A]=arguments[A];return Ge.then(function(k){return k.renderContainer.apply(k,Z)})},Gt=function(){for(var Y=arguments.length,Z=new Array(Y),A=0;A<Y;A++)Z[A]=arguments[A];return Ge.then(function(k){return k.show.apply(k,Z)})},Jt=function(){for(var Y=arguments.length,Z=new Array(Y),A=0;A<Y;A++)Z[A]=arguments[A];return Ge.then(function(k){return k.hide.apply(k,Z)})},wt=function(){for(var Y=arguments.length,Z=new Array(Y),A=0;A<Y;A++)Z[A]=arguments[A];return Ge.then(function(k){return k.watchForUnload.apply(k,Z)})},G===xe.IFRAME?(Ot=function(){for(var Y=arguments.length,Z=new Array(Y),A=0;A<Y;A++)Z[A]=arguments[A];return Ge.then(function(k){return k.getProxyWindow.apply(k,Z)})},Yt=function(){for(var Y=arguments.length,Z=new Array(Y),A=0;A<Y;A++)Z[A]=arguments[A];return Ge.then(function(k){return k.openFrame.apply(k,Z)})},Zt=function(){for(var Y=arguments.length,Z=new Array(Y),A=0;A<Y;A++)Z[A]=arguments[A];return Ge.then(function(k){return k.openPrerenderFrame.apply(k,Z)})},ir=function(){for(var Y=arguments.length,Z=new Array(Y),A=0;A<Y;A++)Z[A]=arguments[A];return Ge.then(function(k){return k.prerender.apply(k,Z)})},ar=function(){for(var Y=arguments.length,Z=new Array(Y),A=0;A<Y;A++)Z[A]=arguments[A];return Ge.then(function(k){return k.open.apply(k,Z)})},ie=function(){for(var Y=arguments.length,Z=new Array(Y),A=0;A<Y;A++)Z[A]=arguments[A];return Ge.then(function(k){return k.openPrerender.apply(k,Z)})}):G===xe.POPUP&&(or=function(){for(var Y=arguments.length,Z=new Array(Y),A=0;A<Y;A++)Z[A]=arguments[A];return Ge.then(function(k){return k.setProxyWin.apply(k,Z)})}),Ge}(j,N)}),Ue=H.window,be=Pa(),Fe=ma(h,H,"post"),Ce=$.trigger(Ee.RENDER),he=Ca(B),Ie=mt(),Pe=he.then(function(){return To()}),st=Pe.then(function(){return ma(h,H,"get").then(function(G){return function(qe,Ae){var He=Ae.query||{},dt=Ae.hash||{},We,yt,Ge=qe.split("#");yt=Ge[1];var Y=(We=Ge[0]).split("?");We=Y[0];var Z=Ni(Y[1],He),A=Ni(yt,dt);return Z&&(We=We+"?"+Z),A&&(We=We+"#"+A),We}(Gn(Or()),{query:G})})}),Be=Ie.then(function(G){return function(Ae){var He=Ae===void 0?{}:Ae,dt=He.proxyWin,We=He.initialChildDomain,yt=He.childDomainMatch,Ge=He.target,Y=Ge===void 0?window:Ge,Z=He.context;return function(A){var k=A===void 0?{}:A,Oo=k.proxyWin,nc=k.childDomainMatch,oc=k.context;return ke(k.initialChildDomain).then(function(ic){return{uid:r,context:oc,tag:E,childDomainMatch:nc,version:"10_3_3",props:ic,exports:(Wa=Oo,{init:function(ac){return Tn(this.origin,ac)},close:zt,checkClose:function(){return Ta(Wa)},resize:$r,onError:Hr,show:Rt,hide:Ft,export:Ra})};var Wa})}({proxyWin:dt,initialChildDomain:We,childDomainMatch:yt,context:Z}).then(function(A){var k=fa({data:A,metaData:{windowRef:Br(Y,We,Z,dt)},sender:{domain:F(window)},receiver:{win:dt,domain:yt},passByReference:We===F()}),Oo=k.serializedData;return I.register(k.cleanReference),Oo})}({proxyWin:(qe={proxyWin:G,initialChildDomain:K,childDomainMatch:we,target:N,context:j}).proxyWin,initialChildDomain:qe.initialChildDomain,childDomainMatch:qe.childDomainMatch,target:qe.target,context:qe.context}).then(function(Ae){return ha({name:w,serializedPayload:Ae})});var qe}),ce=Be.then(function(G){return at(j,{windowName:G})}),$e=jr(j),rt=R.hash({proxyContainer:he,proxyFrame:ce,proxyPrerenderFrame:$e}).then(function(G){return Da(G.proxyContainer,{context:j,proxyFrame:G.proxyFrame,proxyPrerenderFrame:G.proxyPrerenderFrame,rerender:ee})}).then(function(G){return G}),Ve=R.hash({windowName:Be,proxyFrame:ce,proxyWin:Ie}).then(function(G){var qe=G.proxyWin;return Ue?qe:ba(j,{windowName:G.windowName,proxyWin:qe,proxyFrame:G.proxyFrame})}),ur=R.hash({proxyWin:Ve,proxyPrerenderFrame:$e}).then(function(G){return Ur(j,G.proxyWin,G.proxyPrerenderFrame)}),gt=Ve.then(function(G){return se=G,it(G)}),Nt=R.hash({proxyPrerenderWin:ur,state:gt}).then(function(G){return xa(G.proxyPrerenderWin,{context:j})}),Ia=R.hash({proxyWin:Ve,windowName:Be}).then(function(G){if(Ue)return G.proxyWin.setName(G.windowName)}),Qu=R.hash({body:Fe}).then(function(G){return n.method?n.method:Object.keys(G.body).length?"post":"get"}),Aa=R.hash({proxyWin:Ve,windowUrl:st,body:Fe,method:Qu,windowName:Ia,prerender:Nt}).then(function(G){return G.proxyWin.setLocation(G.windowUrl,{method:G.method,body:G.body})}),Xu=Ve.then(function(G){(function qe(Ae,He){var dt=!1;return I.register(function(){dt=!0}),R.delay(2e3).then(function(){return Ae.isClosed()}).then(function(We){if(!dt){if(He===xe.POPUP&&We)return zt(new Error("Detected popup close"));var yt=!!(vt&&Tr(vt));return He===xe.IFRAME&&We&&(yt||Ht)?zt(new Error("Detected iframe close")):qe(Ae,He)}})})(G,j)}),ku=R.hash({container:rt,prerender:Nt}).then(function(){return $.trigger(Ee.DISPLAY)}),ec=Ve.then(function(G){return function(qe,Ae,He){return R.try(function(){return qe.awaitWindow()}).then(function(dt){if(qt&&qt.needsBridge({win:dt,domain:Ae})&&!qt.hasBridge(Ae,Ae)){var We=typeof n.bridgeUrl=="function"?n.bridgeUrl({props:H}):n.bridgeUrl;if(!We)throw new Error("Bridge needed to render "+He);var yt=At(We);return qt.linkUrl(dt,Ae),qt.openBridge(Gn(We),yt)}})}(G,K,j)}),tc=Aa.then(function(){return R.try(function(){var G=H.timeout;if(G)return z.timeout(G,new Error("Loading component timed out after "+G+" milliseconds"))})}),rc=z.then(function(){return Ht=!0,$.trigger(Ee.RENDERED)});return R.hash({initPromise:z,buildUrlPromise:st,onRenderPromise:Ce,getProxyContainerPromise:he,openFramePromise:ce,openPrerenderFramePromise:$e,renderContainerPromise:rt,openPromise:Ve,openPrerenderPromise:ur,setStatePromise:gt,prerenderPromise:Nt,loadUrlPromise:Aa,buildWindowNamePromise:Be,setWindowNamePromise:Ia,watchForClosePromise:Xu,onDisplayPromise:ku,openBridgePromise:ec,runTimeoutPromise:tc,onRenderedPromise:rc,delegatePromise:me,watchForUnloadPromise:be,finalSetPropsPromise:Pe})}).catch(function(K){return R.all([Hr(K),qr(K)]).then(function(){throw K},function(){throw K})}).then(ye)},destroy:qr,getProps:function(){return H},setProps:To,export:Ra,getHelpers:Na,getDelegateOverrides:function(){return R.try(function(){return{getProxyContainer:Ca,show:Rt,hide:Ft,renderContainer:Da,getProxyWindow:mt,watchForUnload:Pa,openFrame:at,openPrerenderFrame:jr,prerender:xa,open:ba,openPrerender:Ur,setProxyWin:it}})},getExports:function(){return C({getExports:function(){return Oa}})}}}var Uu={register:function(e,r,n,o){var a=o.React,u=o.ReactDOM;return function(d){P(h,d);function h(){return d.apply(this,arguments)||this}var l=h.prototype;return l.render=function(){return a.createElement("div",null)},l.componentDidMount=function(){var v=u.findDOMNode(this),E=n(Pr({},this.props));E.render(v,xe.IFRAME),this.setState({parent:E})},l.componentDidUpdate=function(){this.state&&this.state.parent&&this.state.parent.updateProps(Pr({},this.props)).catch(ye)},h}(a.Component)}},Bu={register:function(e,r,n,o){return o.component(e,{render:function(a){return a("div")},inheritAttrs:!1,mounted:function(){var a=this.$el;this.parent=n(T({},(u=this.$attrs,Object.keys(u).reduce(function(d,h){var l=u[h];return h==="style-object"||h==="styleObject"?(d.style=l,d.styleObject=l):h.includes("-")?d[Xn(h)]=l:d[h]=l,d},{}))));var u;this.parent.render(a,xe.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(T({},this.$attrs)).catch(ye)},deep:!0}}})}},$u={register:function(e,r,n){return{template:"<div></div>",inheritAttrs:!1,mounted:function(){var o=this.$el;this.parent=n(T({},(a=this.$attrs,Object.keys(a).reduce(function(u,d){var h=a[d];return d==="style-object"||d==="styleObject"?(u.style=h,u.styleObject=h):d.includes("-")?u[Xn(d)]=h:u[d]=h,u},{}))));var a;this.parent.render(o,xe.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(T({},this.$attrs)).catch(ye)},deep:!0}}}}},qu={register:function(e,r,n,o){return o.module(e,[]).directive(Xn(e),function(){for(var a={},u=0,d=Object.keys(r);u<d.length;u++)a[d[u]]="=";return a.props="=",{scope:a,restrict:"E",controller:["$scope","$element",function(h,l){function v(){if(h.$root.$$phase!=="$apply"&&h.$root.$$phase!=="$digest")try{h.$apply()}catch{}}var E=function(){return ln(h.props,function(p){return typeof p=="function"?function(){var y=p.apply(this,arguments);return v(),y}:p})},w=n(E());w.render(l[0],xe.IFRAME),h.$watch(function(){w.updateProps(E()).catch(ye)})}]}})}},Hu={register:function(e,r,n,o){var a=o.Component,u=o.NgModule,d=o.ElementRef,h=o.NgZone,l=o.Inject,v=function(){function w(y,b){this.elementRef=void 0,this.internalProps=void 0,this.parent=void 0,this.props=void 0,this.zone=void 0,this._props=void 0,this._props={},this.elementRef=y,this.zone=b}var p=w.prototype;return p.getProps=function(){var y=this;return ln(T({},this.internalProps,this.props),function(b){if(typeof b=="function"){var O=y.zone;return function(){var S=arguments,C=this;return O.run(function(){return b.apply(C,S)})}}return b})},p.ngOnInit=function(){var y=this.elementRef.nativeElement;this.parent=n(this.getProps()),this.parent.render(y,xe.IFRAME)},p.ngDoCheck=function(){this.parent&&!function(y,b){var O={};for(var S in y)if(y.hasOwnProperty(S)&&(O[S]=!0,y[S]!==b[S]))return!1;for(var C in b)if(!O[C])return!1;return!0}(this._props,this.props)&&(this._props=T({},this.props),this.parent.updateProps(this.getProps()))},w}();v.annotations=void 0,v.parameters=void 0,v.parameters=[[new l(d)],[new l(h)]],v.annotations=[new a({selector:e,template:"<div></div>",inputs:["props"]})];var E=function(){};return E.annotations=void 0,E.annotations=[new u({declarations:[v],exports:[v]})],E}};function Vu(e){var r=e.uid,n=e.frame,o=e.prerenderFrame,a=e.doc,u=e.props,d=e.event,h=e.dimensions,l=h.width,v=h.height;if(n&&o){var E=a.createElement("div");E.setAttribute("id",r);var w=a.createElement("style");return u.cspNonce&&w.setAttribute("nonce",u.cspNonce),w.appendChild(a.createTextNode(`
            #`+r+` {
                display: inline-block;
                position: relative;
                width: `+l+`;
                height: `+v+`;
            }

            #`+r+` > iframe {
                display: inline-block;
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                transition: opacity .2s ease-in-out;
            }

            #`+r+` > iframe.zoid-invisible {
                opacity: 0;
            }

            #`+r+` > iframe.zoid-visible {
                opacity: 1;
        }
        `)),E.appendChild(n),E.appendChild(o),E.appendChild(w),o.classList.add("zoid-visible"),n.classList.add("zoid-invisible"),d.on(Ee.RENDERED,function(){o.classList.remove("zoid-visible"),o.classList.add("zoid-invisible"),n.classList.remove("zoid-invisible"),n.classList.add("zoid-visible"),setTimeout(function(){Mr(o)},1)}),d.on(Ee.RESIZE,function(p){var y=p.width,b=p.height;typeof y=="number"&&(E.style.width=Li(y)),typeof b=="number"&&(E.style.height=Li(b))}),E}}function Gu(e){var r=e.doc,n=e.props,o=r.createElement("html"),a=r.createElement("body"),u=r.createElement("style"),d=r.createElement("div");return d.classList.add("spinner"),n.cspNonce&&u.setAttribute("nonce",n.cspNonce),o.appendChild(a),a.appendChild(d),a.appendChild(u),u.appendChild(r.createTextNode(`
            html, body {
                width: 100%;
                height: 100%;
            }

            .spinner {
                position: fixed;
                max-height: 60vmin;
                max-width: 60vmin;
                height: 40px;
                width: 40px;
                top: 50%;
                left: 50%;
                box-sizing: border-box;
                border: 3px solid rgba(0, 0, 0, .2);
                border-top-color: rgba(33, 128, 192, 0.8);
                border-radius: 100%;
                animation: rotation .7s infinite linear;
            }

            @keyframes rotation {
                from {
                    transform: translateX(-50%) translateY(-50%) rotate(0deg);
                }
                to {
                    transform: translateX(-50%) translateY(-50%) rotate(359deg);
                }
            }
        `)),o}var bo=hn(),Po=hn();function Ju(e){var r=function(b){var O=b.tag,S=b.url,C=b.domain,z=b.bridgeUrl,V=b.props,I=V===void 0?{}:V,q=b.dimensions,L=q===void 0?{}:q,Q=b.autoResize,$=Q===void 0?{}:Q,ue=b.allowedParentDomains,oe=ue===void 0?"*":ue,J=b.attributes,H=J===void 0?{}:J,se=b.defaultContext,X=se===void 0?xe.IFRAME:se,De=b.containerTemplate,Dt=De===void 0?Vu:De,vt=b.prerenderTemplate,Ht=vt===void 0?Gu:vt,Vt=b.validate,Mt=b.eligible,Gt=Mt===void 0?function(){return{eligible:!0}}:Mt,Jt=b.logger,nr=Jt===void 0?{info:ye}:Jt,Kt=b.exports,Ot=Kt===void 0?ye:Kt,or=b.method,Yt=b.children,Zt=Yt===void 0?function(){return{}}:Yt,ir=O.replace(/-/g,"_"),ar=T({},{window:{type:pe.OBJECT,sendToChild:!1,required:!1,allowDelegate:!0,validate:function(ie){var wt=ie.value;if(!er(wt)&&!pt.isProxyWindow(wt))throw new Error("Expected Window or ProxyWindow");if(er(wt)){if(ge(wt))throw new Error("Window is closed");if(!U(wt))throw new Error("Window is not same domain")}},decorate:function(ie){return zr(ie.value)}},timeout:{type:pe.NUMBER,required:!1,sendToChild:!1},cspNonce:{type:pe.STRING,required:!1},onDisplay:{type:pe.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:_t,decorate:rr},onRendered:{type:pe.FUNCTION,required:!1,sendToChild:!1,default:_t,decorate:rr},onRender:{type:pe.FUNCTION,required:!1,sendToChild:!1,default:_t,decorate:rr},onPrerendered:{type:pe.FUNCTION,required:!1,sendToChild:!1,default:_t,decorate:rr},onPrerender:{type:pe.FUNCTION,required:!1,sendToChild:!1,default:_t,decorate:rr},onClose:{type:pe.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:_t,decorate:rr},onDestroy:{type:pe.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:_t,decorate:rr},onResize:{type:pe.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:_t},onFocus:{type:pe.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:_t},close:{type:pe.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.close}},focus:{type:pe.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.focus}},resize:{type:pe.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.resize}},uid:{type:pe.STRING,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.uid}},tag:{type:pe.STRING,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.tag}},getParent:{type:pe.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.getParent}},getParentDomain:{type:pe.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.getParentDomain}},show:{type:pe.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.show}},hide:{type:pe.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.hide}},export:{type:pe.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.export}},onError:{type:pe.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.onError}},onProps:{type:pe.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.onProps}},getSiblings:{type:pe.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(ie){return ie.getSiblings}}},I);if(!Dt)throw new Error("Container template required");return{name:ir,tag:O,url:S,domain:C,bridgeUrl:z,method:or,propsDef:ar,dimensions:L,autoResize:$,allowedParentDomains:oe,attributes:H,defaultContext:X,containerTemplate:Dt,prerenderTemplate:Ht,validate:Vt,logger:nr,eligible:Gt,children:Zt,exports:typeof Ot=="function"?Ot:function(ie){for(var wt=ie.getExports,ae={},Le=function(){var Oe=je[Ne],ke=Ot[Oe].type,_e=wt().then(function(Me){return Me[Oe]});ae[Oe]=ke===pe.FUNCTION?function(){for(var Me=arguments.length,mt=new Array(Me),it=0;it<Me;it++)mt[it]=arguments[it];return _e.then(function(Rt){return Rt.apply(void 0,mt)})}:_e},Ne=0,je=Object.keys(Ot);Ne<je.length;Ne++)Le();return ae}}}(e),n=r.name,o=r.tag,a=r.defaultContext,u=r.propsDef,d=r.eligible,h=r.children,l=Lr(window),v={},E=[],w=function(){if(function(O){try{return yo(window.name).name===O}catch{}return!1}(n)){var b=pa().payload;if(b.tag===o&&ft(b.childDomainMatch,F()))return!0}return!1},p=Bt(function(){if(w()){if(window.xprops)throw delete l.components[o],new Error("Can not register "+n+" as child - child already registered");var b=function(O){var S=O.tag,C=O.propsDef,z=O.autoResize,V=O.allowedParentDomains,I=[],q=pa(),L=q.parent,Q=q.payload,$=L.win,ue=L.domain,oe,J=new R,H=Q.version,se=Q.uid,X=Q.exports,De=Q.context,Dt=Q.props;if(!function(ae,Le){if(!/_/.test(ae)||!/_/.test("10_3_3"))throw new Error("Versions are in an invalid format ("+ae+", 10_3_3)");return ae.split("_")[0]==="10_3_3".split("_")[0]}(H))throw new Error("Parent window has zoid version "+H+", child window has version 10_3_3");var vt=X.show,Ht=X.hide,Vt=X.close,Mt=X.onError,Gt=X.checkClose,Jt=X.export,nr=X.resize,Kt=X.init,Ot=function(){return $},or=function(){return ue},Yt=function(ae){return I.push(ae),{cancel:function(){I.splice(I.indexOf(ae),1)}}},Zt=function(ae){return nr.fireAndForget({width:ae.width,height:ae.height})},ir=function(ae){return J.resolve(ae),Jt(ae)},ar=function(ae){var Le=(ae===void 0?{}:ae).anyParent,Ne=[],je=oe.parent;if(Le===void 0&&(Le=!je),!Le&&!je)throw new Error("No parent found for "+S+" child");for(var Oe=0,ke=Ye(window);Oe<ke.length;Oe++){var _e=ke[Oe];if(U(_e)){var Me=te(_e).xprops;if(Me&&Ot()===Me.getParent()){var mt=Me.parent;if(Le||!je||mt&&mt.uid===je.uid){var it=da(_e,function(Rt){return Rt.exports});Ne.push({props:Me,exports:it})}}}}return Ne},ie=function(ae,Le,Ne){Ne===void 0&&(Ne=!1);var je=function(ke,_e,Me,mt,it,Rt){Rt===void 0&&(Rt=!1);for(var Ft={},Or=0,Rr=Object.keys(Me);Or<Rr.length;Or++){var sr=Rr[Or],at=_e[sr],jr=at&&at.trustedDomains&&at.trustedDomains.length>0?at.trustedDomains.reduce(function(Tn,$r){return Tn||ft($r,F(window))},!1):mt===F(window)||U(ke);if((!at||!at.sameDomain||jr)&&(!at||!at.trustedDomains||jr)){var Ur=va(_e,0,sr,Me[sr],it);Ft[sr]=Ur,at&&at.alias&&!Ft[at.alias]&&(Ft[at.alias]=Ur)}}if(!Rt)for(var Sr=0,Pn=Object.keys(_e);Sr<Pn.length;Sr++){var Br=Pn[Sr];Me.hasOwnProperty(Br)||(Ft[Br]=va(_e,0,Br,void 0,it))}return Ft}($,C,ae,Le,{tag:S,show:vt,hide:Ht,close:Vt,focus:ju,onError:Mt,resize:Zt,getSiblings:ar,onProps:Yt,getParent:Ot,getParentDomain:or,uid:se,export:ir},Ne);oe?Pr(oe,je):oe=je;for(var Oe=0;Oe<I.length;Oe++)(0,I[Oe])(oe)},wt=function(ae){return R.try(function(){return ie(ae,ue,!0)})};return{init:function(){return R.try(function(){var ae="";return U($)&&(ae=function(Le){var Ne=Le.componentName,je=Le.parentComponentWindow,Oe=la({data:yo(window.name).serializedInitialPayload,sender:{win:je},basic:!0}),ke=Oe.sender;if(Oe.reference.type==="uid"||Oe.metaData.windowRef.type==="global"){var _e=ha({name:Ne,serializedPayload:fa({data:Oe.data,metaData:{windowRef:Lu(je)},sender:{domain:ke.domain},receiver:{win:window,domain:F()},basic:!0}).serializedData});return window.name=_e,_e}}({componentName:O.name,parentComponentWindow:$})||""),Lr(window).exports=O.exports({getExports:function(){return J}}),function(Le,Ne){if(!ft(Le,Ne))throw new Error("Can not be rendered by domain: "+Ne)}(V,ue),Vi($),function(){window.addEventListener("beforeunload",function(){Gt.fireAndForget()}),window.addEventListener("unload",function(){Gt.fireAndForget()}),wi($,function(){wa()})}(),Kt({name:ae,updateProps:wt,close:wa})}).then(function(){return(ae=z.width,Le=ae!==void 0&&ae,Ne=z.height,je=Ne!==void 0&&Ne,Oe=z.element,Ci(Oe===void 0?"body":Oe).catch(ye).then(function(ke){return{width:Le,height:je,element:ke}})).then(function(ke){var _e=ke.width,Me=ke.height,mt=ke.element;mt&&(_e||Me)&&De!==xe.POPUP&&Mi(mt,function(it){Zt({width:_e?it.width:void 0,height:Me?it.height:void 0})},{width:_e,height:Me})});var ae,Le,Ne,je,Oe}).catch(function(ae){Mt(ae)})},getProps:function(){return oe||(ie(Dt,ue),oe)}}}(r);return b.init(),b}}),y=function b(O){var S,C="zoid-"+o+"-"+Xe(),z=O||{},V=d({props:z}),I=V.eligible,q=V.reason,L=z.onDestroy;z.onDestroy=function(){if(S&&I&&E.splice(E.indexOf(S),1),L)return L.apply(void 0,arguments)};var Q=ga({uid:C,options:r});Q.init(),I?Q.setProps(z):z.onDestroy&&z.onDestroy(),bo.register(function(oe){return Q.destroy(oe||new Error("zoid destroyed all components"))});var $=function(oe){var J=(oe===void 0?{}:oe).decorate;return b((J===void 0?Ou:J)(z))},ue=function(oe,J,H){return R.try(function(){if(!I){var se=new Error(q||n+" component is not eligible");return Q.destroy(se).then(function(){throw se})}if(!er(oe))throw new Error("Must pass window to renderTo");return function(X,De){return R.try(function(){if(X.window)return zr(X.window).getType();if(De){if(De!==xe.IFRAME&&De!==xe.POPUP)throw new Error("Unrecognized context: "+De);return De}return a})}(z,H)}).then(function(se){if(J=function(X,De){if(De){if(typeof De!="string"&&!Jn(De))throw new TypeError("Expected string or element selector to be passed");return De}if(X===xe.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(se,J),oe!==window&&typeof J!="string")throw new Error("Must pass string element when rendering to another window");return Q.render({target:oe,container:J,context:se,rerender:function(){var X=$();return Pr(S,X),X.renderTo(oe,J,H)}})}).catch(function(se){return Q.destroy(se).then(function(){throw se})})};return S=T({},Q.getExports(),Q.getHelpers(),function(){for(var oe=h(),J={},H=function(){var De=X[se],Dt=oe[De];J[De]=function(vt){var Ht=Q.getProps(),Vt=T({},vt,{parent:{uid:C,props:Ht,export:Q.export}});return Dt(Vt)}},se=0,X=Object.keys(oe);se<X.length;se++)H();return J}(),{isEligible:function(){return I},clone:$,render:function(oe,J){return ue(window,oe,J)},renderTo:function(oe,J,H){return ue(oe,J,H)}}),I&&E.push(S),S};if(p(),function(){var b=Wt("zoid_allow_delegate_"+n,function(){return!0}),O=Wt("zoid_delegate_"+n,function(S){var C=S.data;return{parent:ga({uid:C.uid,options:r,overrides:C.overrides,parentWin:S.source})}});Po.register(b.cancel),Po.register(O.cancel)}(),l.components=l.components||{},l.components[o])throw new Error("Can not register multiple components with the same tag: "+o);return l.components[o]=!0,{init:y,instances:E,driver:function(b,O){var S={react:Uu,angular:qu,vue:Bu,vue3:$u,angular2:Hu};if(!S[b])throw new Error("Could not find driver for framework: "+b);return v[b]||(v[b]=S[b].register(o,u,y,O)),v[b]},isChild:w,canRenderTo:function(b){return Tt(b,"zoid_allow_delegate_"+n).then(function(O){return O.data}).catch(function(){return!1})},registerChild:p}}var Ku=function(e){(function(){xt().initialized||(xt().initialized=!0,u=(a={on:Wt,send:Tt}).on,d=a.send,(h=xt()).receiveMessage=h.receiveMessage||function(l){return mo(l,{on:u,send:d})},function(l){var v=l.on,E=l.send;le().getOrSet("postMessageListener",function(){return Wi(window,"message",function(w){(function(p,y){var b=y.on,O=y.send;R.try(function(){var S=p.source||p.sourceElement,C=p.origin||p.originalEvent&&p.originalEvent.origin,z=p.data;if(C==="null"&&(C="file://"),S){if(!C)throw new Error("Post message did not have origin domain");mo({source:S,origin:C,data:z},{on:b,send:O})}})})(w,{on:v,send:E})})})}({on:Wt,send:Tt}),ki({on:Wt,send:Tt,receiveMessage:mo}),function(l){var v=l.on,E=l.send;le("builtinListeners").getOrSet("helloListener",function(){var w=v("postrobot_hello",{domain:"*"},function(y){return $i(y.source,{domain:y.origin}),{instanceID:Bi()}}),p=kt();return p&&so(p,{send:E}).catch(function(y){}),w})}({on:Wt,send:Tt}));var a,u,d,h})();var r=Ju(e),n=function(a){return r.init(a)};n.driver=function(a,u){return r.driver(a,u)},n.isChild=function(){return r.isChild()},n.canRenderTo=function(a){return r.canRenderTo(a)},n.instances=r.instances;var o=r.registerChild();return o&&(window.xprops=n.xprops=o.getProps()),n};function ya(e){qt&&qt.destroyBridges();var r=bo.all(e);return bo=hn(),r}var Ea=ya;function Yu(e){return Ea(),delete window.__zoid_10_3_3__,function(){(function(){for(var n=le("responseListeners"),o=0,a=n.keys();o<a.length;o++){var u=a[o],d=n.get(u);d&&(d.cancelled=!0),n.del(u)}})(),(r=le().get("postMessageListener"))&&r.cancel();var r;delete window.__post_robot_11_0_0__}(),Po.all(e)}}])})})(fi);var li=fi.exports;const hi=li.EVENT,vr={VISIBLE:"zoid-visible",INVISIBLE:"zoid-invisible"};function du({uid:t,frame:i,prerenderFrame:s,doc:c,props:f,event:m,dimensions:P}){const{width:T,height:D}=P,{top:W=0,left:g=0}=f;if(!i||!s)return;const M=c.createElement("div");M.setAttribute("id",t);const _=c.createElement("style");return f.cspNonce&&_.setAttribute("nonce",f.cspNonce),_.appendChild(c.createTextNode(`
          #${t} {
              display: inline-block;
              position: absolute;
              width: ${T};
              height: ${D};
              z-index: 1049;
              border: none;
              top: ${W}px;
              left: ${g}px;
              overflow: hidden;
          }

          #${t} > iframe {
              display: inline-block;
              position: absolute;
              width: 100%;
              height: 100%;
              top: 0;
              left: 0;
              transition: opacity .2s ease-in-out;
              border: none;
              background-color: transparent;
              overflow: hidden;
          }

          #${t} > iframe.${vr.INVISIBLE} {
              opacity: 0;
          }

          #${t} > iframe.${vr.VISIBLE} {
              opacity: 1;
        }
      `)),M.appendChild(i),M.appendChild(s),M.appendChild(_),s.classList.add(vr.INVISIBLE),i.classList.add(vr.INVISIBLE),m.on(hi.RENDERED,()=>{setTimeout(()=>{i.classList.remove(vr.INVISIBLE),i.classList.add(vr.VISIBLE)},100),setTimeout(()=>{s.remove()},1)}),m.on(hi.RESIZE,({width:re,height:Re})=>{typeof re=="number"&&(M.style.width=`${re}px`),typeof Re=="number"&&(M.style.height=`${Re}px`)}),M}function fu(t){return li.create({dimensions:{width:"100%",height:"100%"},tag:`wta${t}`,url:({props:i})=>i.appConfig.sdkBaseUrl,props:{appConfig:{type:"object",required:!0},icons:{type:"array",required:!0}},containerTemplate:du})}function lu(t){return fu(t.id)(t)}function hu(t){return new Promise((i,s)=>{const c=document.createElement("script");c.async=!0,c.src=t,c.onload=i,c.onerror=s,document.body.appendChild(c)})}const pu="https://cdn.jsdelivr.net/gh/sigmaott/sigma-ssai-web-sdk/build/dist/wasm_exec.js";let wr=null;function pi(){wr=null}function vu(){const t=window;return t.Go?Promise.resolve(t.wasm):wr||(wr=hu(pu).then(()=>t.Go),wr.then(pi).catch(pi),wr)}class mr{constructor(){return mr.instance?mr.instance:(this.session=null,this.go=null,this.buffer=null,this.audioMediaSequence={},mr.instance=this,this)}async init(i){if(!this.buffer){const c=await(await fetch(i)).arrayBuffer();this.buffer=c}return mr.instance}async loadSource(i){this.session&&(i.session=this.session);const s=JSON.stringify(i),c=new Go,f=await WebAssembly.instantiate(this.buffer,c.importObject);c.run(f.instance);let m;for(let P=1;P<=3;P++)try{m=await window.loadSource(s);break}catch(T){if(console.log(`Attempt ${P} failed:`,T),P===3)throw console.log("session:",this.session),console.log(s),T}if(m.session!=""&&(this.session=m.session),m.error)throw new Error(m.error);return m.manifest}async getEventTracking(){if(this.session){const i=window.getEventTracking(this.session);if(i.error)throw new Error(i.error);return{avails:JSON.parse(i.avails)}}return null}}const wu=bt(),mu=bt();function vi({adsUrl:t,sdk:i,loader:s}){return class extends s{constructor(f){super(f)}load(f,m,P){const T=P.onSuccess;P.onSuccess=async(D,W,g)=>{(g.type==="manifest"||g.type==="level"||g.type==="audioTrack")&&(D.data=await this.modifyManifest(D.url,D.data,g.type)),T(D,W,g)},super.load(f,m,P)}async modifyManifest(f,m,P){wu.value=m;const T={proxyAds:{uri:t,timeout:2}};try{const D=await i.loadSource({config:T,manifest:m,masterUri:f});return console.log("[LOG] ~ newManifest:",D),mu.value=D,D}catch(D){return console.error("[LOG] ~ error:",D),m}}}}function gu({video:t,adContainer:i,startSession:s,sdk:c}){const f=su(),m=bt(!1),P=bt(),T=Math.random().toString(36).slice(6);function D({icons:ne}){return{id:T,appConfig:{sdkBaseUrl:Gr("https://cdn.jsdelivr.net/gh/sigmaott/sigma-ssai-web-sdk/build/dist/wta/index.html",{id:T})},icons:ne}}const W=lu(D({icons:[]}));W.render(i),W.hide(),i.style.display="none",Fs(()=>{var ne;if(P.value){const F=((ne=P.value)==null?void 0:ne.icons)||[];i.style.display="block",W.updateProps(D({icons:F})),W.show()}else i.style.display="none",W.hide()});const g=bt([]),M=bt(),_=bt([]);async function re(ne){var U;console.log("[LOG] ~ currentAd:",P);const F=(U=P.value)==null?void 0:U.trackingEvents.find(te=>te.eventType===ne);if(!F){console.debug("[LOG] ~ event:",ne);return}f.trigger(F),await Promise.all(F.beaconUrls.map(te=>uu(Ts(te,{retry:3,retryDelay:500}))))}const Re=new Map;let Qe,R;function ct(ne,F,U){ne.addEventListener(F,U),Re.set(F,U)}function St(ne){var Ke,tt;const F=((ne==null?void 0:ne.time)||0)>0?ne.time:0,U=(Ke=ne==null?void 0:ne.value)==null?void 0:Ke.event;console.debug("[LOG] ~ eventType:",U);const te=_.value.find(Se=>Se.eventType===U&&!Se.tracked&&!Se.skipped);if(console.debug("[LOG] ~ eventAd:",te),!te)return;const et=te==null?void 0:te.ad;if(console.debug("[LOG] ~ ad:",et),!!et){if(U==="start")P.value&&_.value.filter(Ye=>Ye.key.startsWith(`${P.value.key}_`)).forEach(Ye=>Ye.skipped=!0),P.value=et,s(et.adVerifications,f),Qe=Cn(()=>{re("impression"),re("start");const Se=_.value.find(Ye=>Ye.key===te.key.replace("_start","_impression"));Se&&(Se.tracked=!0),te.tracked=!0,R=Cn(()=>{P.value=void 0},3e4)},F*1e3);else{if(!P.value){console.debug("[LOG] ~ eventType:",U);return}if(et.id!==((tt=P.value)==null?void 0:tt.id)){console.debug("[ERROR] ~ ad:",et),console.debug("[ERROR] ~ currentAd:",P.value),_.value.filter(Ye=>Ye.key.startsWith(`${P.value.key}_`)).forEach(Ye=>Ye.skipped=!0);return}Qe=Cn(()=>{re(U),U==="complete"&&et.id===P.value.id&&(P.value=void 0,Lo(R)),te.tracked=!0},F*1e3)}console.debug("========================================")}}function Pt(){return m.value=!1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(ne=>{ct(t,ne,()=>{const F=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;re(F?"fullscreen":"exitFullscreen")})}),ct(t,"pause",()=>re("pause")),ct(t,"play",()=>re("resume")),ct(t,"rewind",()=>re("rewind")),ct(t,"mute",()=>re("mute")),ct(t,"unmute",()=>re("unmute")),async(ne,F)=>{if(M.value=F.frag.sn,ne!==window.Hls.Events.FRAG_CHANGED)return;const U=g.value.filter(te=>te.sn===F.frag.sn);if(!U.length){console.debug("[LOG] ~ trackingEvent:",U);return}U.forEach(te=>St(te)),g.value=g.value.filter(te=>te.sn!==F.frag.sn)}}async function ve(){return c.getEventTracking().then(ne=>{for(const F of(ne==null?void 0:ne.avails)||[])for(const U of F.ads){const te=`${F.id}_${U.id}_${U.startTimeInSeconds}`;for(const et of U.trackingEvents){const Ke=`${te}_${et.eventType}`;_.value.find(Se=>Se.key===Ke)||_.value.push({...et,key:Ke,ad:{...U,key:te},tracked:!1})}}})}function ot(){return async(ne,F)=>{function U(Ke){for(let tt=0;tt<Ke.length;tt++)if(Ke[tt]===0)return tt;return Ke.length}const{start:te,sn:et}=F.frag;for(let Ke=0;Ke<F.samples.length;Ke++){const tt=F.samples[Ke],Se=tt.data,Ye=tt.pts;if(String.fromCharCode.apply(null,Se.slice(0,3))!=="ID3"||String.fromCharCode.apply(null,Se.slice(10,14))!=="TXXX")continue;const ge=Se.slice(21,Se.length),nn=U(ge),Xt=ge.slice(nn+1,ge.length),on=U(Xt),kt=new TextDecoder("utf-8").decode(Xt.slice(0,on)),Er={sn:et,time:Ye-te,value:Dn(kt)};if(M.value&&et<M.value)return;g.value.push(Er),Er.value.event==="start"&&ve()}}}function It(){return ne=>{const F=ne.track;F.kind==="metadata"&&(F.oncuechange=async()=>{const U=F.activeCues[0];if(U&&U.value.data){console.debug("[LOG] ~ elemTrack:",U),await ve();const te=Dn(U.value.data);console.debug("[LOG] ~ trackingEvent:",te),St({value:te})}})}}function Je(ne,F){f.on(U=>{(ne==="*"||U.eventType===ne)&&F(U)})}function Te(){P.value=void 0,g.value=[],Re.forEach((ne,F)=>{t.removeEventListener(F,ne)}),Re.clear(),Lo(Qe)}function gr(){return{eventTracking:g,trackingDataEvent:_}}return{destroy:Te,onEventTracking:Je,hlsHelper:{createHlsFragChanged:Pt,createHlsFragParsingMetadata:ot},videojsHelper:{createVideojsAddTrack:It},getLog:gr}}async function yu({video:t,adContainer:i,adsUrl:s}){await vu();const c=new mr;await c.init("https://cdn.jsdelivr.net/gh/sigmaott/sigma-ssai-web-sdk/build/dist/sigma-cspm.wasm");function f(){}const{onEventTracking:m,destroy:P,videojsHelper:T,hlsHelper:D,getLog:W}=gu({video:t,adContainer:i,trackingUrl:"",startSession:f,sdk:c}),g=bt(),M=bt();function _(ve){ve.config.loader=vi({adsUrl:s,sdk:c,loader:Hls.DefaultConfig.loader}),g.value=ve;const ot=D.createHlsFragChanged(),It=D.createHlsFragParsingMetadata();ve.on("hlsFragChanged",ot),ve.on("hlsFragParsingMetadata",It),ve.on(Hls.Events.ERROR,(Je,Te)=>{console.error("HLS Error:",Je,Te),Te.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",Te.details):Te.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",Te.details):console.error("Other Error:",Te.details)}),M.value=()=>{ve.off("hlsFragChanged",ot),ve.off("hlsFragParsingMetadata",It)}}function re(ve){ve.hls.config.loader=vi({adsUrl:s,sdk:c,loader:SigmaManager.DefaultConfig.loader}),g.value=ve.hls;const ot=D.createHlsFragChanged(),It=D.createHlsFragParsingMetadata();ve.hls.on("hlsFragChanged",ot),ve.hls.on("hlsFragParsingMetadata",It),ve.on(SigmaManager.Events.ERROR,(Je,Te)=>{console.log("[LOG] ~ event:",Je),console.error("HLS Error:",Je,Te),Te.type===window.Hls.ErrorTypes.NETWORK_ERROR?console.error("Network Error:",Te.details):Te.type===window.Hls.ErrorTypes.MEDIA_ERROR?console.error("Media Error:",Te.details):console.error("Other Error:",Te.details)}),M.value=()=>{ve.hls.destroy()}}const Re=bt(),Qe=bt(),ct={instance:c,config:{proxyAds:{uri:s,timeout:2}}};function St(ve){Re.value=ve;const ot=T.createVideojsAddTrack();ve.textTracks().on("addtrack",ot),Qe.value=()=>{ve.textTracks().off("addtrack",ot)}}function Pt(){var ve,ot;P(),(ve=M.value)==null||ve.call(M),(ot=Qe.value)==null||ot.call(Qe),g.value=null,Re.value=null,M.value=null,Qe.value=null}return{onEventTracking:m,destroy:Pt,sigmaPlayer:{attachVideojs:St,attachHls:_,attachSigmaDrm:re,attachVideojs2:St,getLog:W},sdk:c,cspm:ct}}(function(t){const i=t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist;t.Vhs.PlaylistLoader.prototype.setupInitialPlaylist=async function(s){if(s.manifestString&&this.vhs_.options_.cspm)try{await this.vhs_.options_.cspm.instance.loadSource({config:this.vhs_.options_.cspm.config,manifest:s.manifestString,masterUri:this.src})}catch(c){console.error("Error loading source:",c)}i.apply(this,[s])}})(videojs),function(t){const i=t.Vhs.PlaylistLoader.prototype.parseManifest_;t.Vhs.PlaylistLoader.prototype.parseManifest_=function({url:s,manifestString:c}){const f=i.apply(this,[{url:s,manifestString:c}]);return f.playlists&&f.playlists.length&&(f.manifestString=c),f}}(videojs),function(t){const i=t.Vhs.PlaylistLoader.prototype.haveMetadata;t.Vhs.PlaylistLoader.prototype.haveMetadata=async function({playlistString:s,playlistObject:c,url:f,id:m}){try{if(s&&this.vhs_.options_.cspm){const P=this.vhs_.options_.cspm.config;s=await this.vhs_.options_.cspm.instance.loadSource({config:P,manifest:s,masterUri:this.main.playlists[m].resolvedUri})}i.apply(this,[{playlistString:s,playlistObject:c,url:f,id:m}])}catch(P){console.error("Error loading source:",P)}}}(videojs),function(t){const i=(c,f)=>{const m=c.segments||[],P=m[m.length-1],T=P&&P.parts&&P.parts[P.parts.length-1],D=T&&T.duration||P&&P.duration;return D?D*1e3:(c.partTargetDuration||c.targetDuration||10)*500},s=(c,f)=>f&&f.responseURL&&c!==f.responseURL?f.responseURL:c;t.Vhs.PlaylistLoader.prototype.media=function(c,f){if(!c)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error(`Cannot switch media playlist from ${this.state}`);if(typeof c=="string"){if(!this.main.playlists[c])throw new Error(`Unknown playlist URI: ${c}`);c=this.main.playlists[c]}if(window.clearTimeout(this.finalRenditionTimeout),f){const W=(c.partTargetDuration||c.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,c,!1),W);return}const m=this.state,P=!this.media_||c.id!==this.media_.id,T=this.main.playlists[c.id];if(T&&T.endList||c.endList&&c.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=c,P&&(this.trigger("mediachanging"),m==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(i(c)),!P)return;if(this.state="SWITCHING_MEDIA",this.request){if(c.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=c;const D={playlistInfo:{type:"media",uri:c.uri}};this.trigger({type:"playlistrequeststart",metadata:D}),this.request=this.vhs_.xhr({uri:c.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(W,g)=>{if(this.request){if(c.lastRequest=Date.now(),c.resolvedUri=s(c.resolvedUri,g),W)return this.playlistRequestError(this.request,c,m);this.haveMetadata({playlistString:g.responseText,url:c.uri,id:c.id}).then(()=>{this.trigger({type:"playlistrequestcomplete",metadata:D}),m==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")})}})}}(videojs);function Eu(t){console.log("🚀 ~ file: sdk.ts:250 ~ url:",t);const i="https://dai.sigma.video/api/proxy-ads/ads/",s=xn(t),c=`${s.protocol}//${s.host}${s.pathname}`;if(!s.search)return{playerUrl:t,adsUrl:null};const f=ts(t),m=f["sigma.dai.adsEndpoint"];if(!m)return{playerUrl:t,adsUrl:null};const P={},T={};for(const[W,g]of Object.entries(f))W.startsWith("sigma.dai")?W!=="sigma.dai.adsEndpoint"&&(P[W.replace("sigma.dai.","")]=g):T[W]=g;return{playerUrl:Gr(c,T),adsUrl:Gr(Do(i,m),P)}}return Vr.createSigmaDai=yu,Vr.processURL=Eu,Object.defineProperty(Vr,Symbol.toStringTag,{value:"Module"}),Vr}({});
