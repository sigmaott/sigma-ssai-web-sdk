import{d as P,r as i,g as y,o as q,j as E,c as p,a as t,t as w,w as x,v as I,b as F,F as N,e as O,f,h as _}from"./zoid-GiZW97aZ.js";import{c as $,_ as J}from"./export-helper-CtOpnFE7.js";const Q={class:"container"},z={class:"text-2xl font-bold mb-4"},G={class:"flex flex-col space-y-2"},H={class:""},K={class:"w-30%"},W={open:""},X=P({__name:"App",setup(Z){const g=i([]),n=i(y(window.location.href).url),r=i(y(window.location.href).adsUrl),S=i();function k(){return new Promise((o,e)=>{const s=indexedDB.open("TrackingLogDB",1);s.onerror=a=>e(`IndexedDB error: ${a.target.error}`),s.onsuccess=a=>o(a.target.result),s.onupgradeneeded=a=>{a.target.result.createObjectStore("trackingLog",{keyPath:"id",autoIncrement:!0})}})}i();const v=i(n),c=i(r),U=i({merchantId:"",appId:"",sessionId:"",userId:""});function j(){const o=new URL(window.location.href);o.searchParams.set("url",v.value),o.searchParams.set("adsUrl",c.value),Object.entries(U.value).forEach(([e,s])=>{o.searchParams.set(`drm_${e}`,s)}),window.location.href=o.toString()}const l=i();async function d(o,e){const s=document.querySelector("#video2"),a=document.querySelector("#adContainer1");$({video:s,adContainer:a,adsUrl:e}).then(({onEventTracking:u,sigmaPlayer:T,destroy:A,sdk:ee})=>{const h=videojs(s,{controls:!0,muted:!0,autoplay:!0,preload:"metadata",html5:{vhs:{overrideNative:!0},nativeAudioTracks:!1,nativeVideoTracks:!1}});h.src({src:o,type:"application/x-mpegURL"}),T.attachVideojs2(h),u("*",M=>{g.value.push(M)}),l.value=A})}const b=i("00:00:00"),m=i();function V(o){const e=Math.floor(o/3600),s=Math.floor(o%3600/60),a=o%60;return[e,s,a].map(u=>u.toString().padStart(2,"0")).join(":")}q(async()=>{S.value=await k(),d(n.value,r.value);let o=0;m.value=setInterval(()=>{o++,b.value=V(o)},1e3)}),E(()=>{m.value&&clearInterval(m.value)});function C(){l.value(),n.value="https://cdn-lrm-test.sigma.video/manifest/origin04/scte35-video-audio-clear/master.m3u8",d(n.value,r.value)}function R(){l.value(),n.value="https://cdn-lrm-test.sigma.video/manifest/origin04/scte35-av2s-clear/master.m3u8",d(n.value,r.value)}function L(){l.value(),n.value="https://cdn-lrm-test.sigma.video/manifest/origin04/scte35-av4s-clear/master.m3u8",d(n.value,r.value)}function B(){l.value(),n.value="https://cdn-lrm-test.sigma.video/manifest/origin04/scte35-av6s-clear/master.m3u8",d(n.value,r.value)}function D(){l.value(),n.value="https://cdn-lrm-test.sigma.video/manifest/origin04/av4s-clear/master.m3u8",d(n.value,r.value)}return(o,e)=>(f(),p("div",Q,[t("div",z," Time Elapsed: "+w(b.value),1),t("form",{class:"mb-4",onSubmit:F(j,["prevent"])},[t("div",G,[e[7]||(e[7]=t("label",{for:"urlInput",class:"font-medium"},"URL:",-1)),x(t("input",{id:"urlInput","onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),type:"text",class:"border rounded px-2 py-1"},null,512),[[I,v.value]]),e[8]||(e[8]=t("label",{for:"adsUrlInput",class:"font-medium"},"Ads URL:",-1)),x(t("input",{id:"adsUrlInput","onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),type:"text",class:"border rounded px-2 py-1"},null,512),[[I,c.value]]),e[9]||(e[9]=t("button",{type:"submit",class:"mt-4 rounded bg-blue-500 px-4 py-2 text-white transition-colors hover:bg-blue-600"}," Update and Reload ",-1))])],32),t("button",{onClick:e[2]||(e[2]=()=>C())}," Videojs tách rời video và âm thanh "),t("button",{onClick:e[3]||(e[3]=()=>R())}," Videojs ts 2s "),t("button",{onClick:e[4]||(e[4]=()=>L())}," Videojs ts 4s "),t("button",{onClick:e[5]||(e[5]=()=>B())}," Videojs ts 6s "),t("button",{onClick:e[6]||(e[6]=()=>D())}," Videojs không quảng cáo "),t("div",H,[e[11]||(e[11]=t("div",{class:"w-70%"},[t("div",{class:"aspect-ratio-video",style:{position:"relative",width:"1080px",overflow:"hidden"}},[t("video",{id:"video2",class:"video-js vjs-default-skin vjs-big-play-button vjs-fluid",controls:"",preload:"auto",width:"640",height:"360",crossorigin:"anonymous",style:{position:"absolute",inset:"0",width:"100%",height:"100%"}}),t("div",{id:"adContainer1",style:{position:"absolute",top:"0",left:"0",bottom:"0",right:"0",overflow:"hidden",width:"100%"}})])],-1)),t("div",K,[(f(!0),p(N,null,O(g.value,(s,a)=>(f(),p("div",{key:a,class:"event-log-item"},[t("details",W,[e[10]||(e[10]=t("summary",null,"item",-1)),t("pre",null,w(JSON.stringify(s,null,2)),1)])]))),128))])])]))}}),Y=J(X,[["__scopeId","data-v-8526bccc"]]);_(Y).mount("#app");
